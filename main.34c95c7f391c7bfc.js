"use strict";(self.webpackChunkangular_webxr_gallery=self.webpackChunkangular_webxr_gallery||[]).push([[179],{399:()=>{function Vt(n){return"function"==typeof n}function Qc(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const K0=Qc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function e3(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Wi{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Vt(i))try{i()}catch(s){e=s instanceof K0?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{iM(s)}catch(a){e=e??[],a instanceof K0?e=[...e,...a.errors]:e.push(a)}}if(e)throw new K0(e)}}add(e){var t;if(e&&e!==this)if(this.closed)iM(e);else{if(e instanceof Wi){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&e3(t,e)}remove(e){const{_finalizers:t}=this;t&&e3(t,e),e instanceof Wi&&e._removeParent(this)}}Wi.EMPTY=(()=>{const n=new Wi;return n.closed=!0,n})();const tM=Wi.EMPTY;function nM(n){return n instanceof Wi||n&&"closed"in n&&Vt(n.remove)&&Vt(n.add)&&Vt(n.unsubscribe)}function iM(n){Vt(n)?n():n.unsubscribe()}const hs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},J0={setTimeout(n,e,...t){const{delegate:i}=J0;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=J0;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function rM(n){J0.setTimeout(()=>{const{onUnhandledError:e}=hs;if(!e)throw n;e(n)})}function n5(){}const VU=i5("C",void 0,void 0);function i5(n,e,t){return{kind:n,value:e,error:t}}let ds=null;function Q0(n){if(hs.useDeprecatedSynchronousErrorHandling){const e=!ds;if(e&&(ds={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=ds;if(ds=null,t)throw i}}else n()}class r5 extends Wi{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nM(e)&&e.add(this)):this.destination=OU}static create(e,t,i){return new t3(e,t,i)}next(e){this.isStopped?a5(function NU(n){return i5("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?a5(function DU(n){return i5("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?a5(VU,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const RU=Function.prototype.bind;function s5(n,e){return RU.call(n,e)}class PU{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){el(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){el(i)}else el(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){el(t)}}}class t3 extends r5{constructor(e,t,i){let r;if(super(),Vt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&hs.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&s5(e.next,s),error:e.error&&s5(e.error,s),complete:e.complete&&s5(e.complete,s)}):r=e}this.destination=new PU(r)}}function el(n){hs.useDeprecatedSynchronousErrorHandling?function IU(n){hs.useDeprecatedSynchronousErrorHandling&&ds&&(ds.errorThrown=!0,ds.error=n)}(n):rM(n)}function a5(n,e){const{onStoppedNotification:t}=hs;t&&J0.setTimeout(()=>t(n,e))}const OU={closed:!0,next:n5,error:function kU(n){throw n},complete:n5},o5="function"==typeof Symbol&&Symbol.observable||"@@observable";function y2(n){return n}function sM(n){return 0===n.length?y2:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let zn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function BU(n){return n&&n instanceof r5||function UU(n){return n&&Vt(n.next)&&Vt(n.error)&&Vt(n.complete)}(n)&&nM(n)}(t)?t:new t3(t,i,r);return Q0(()=>{const{operator:a,source:o}=this;s.add(a?a.call(s,o):o?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=aM(i))((r,s)=>{const a=new t3({next:o=>{try{t(o)}catch(c){s(c),a.unsubscribe()}},error:s,complete:r});this.subscribe(a)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[o5](){return this}pipe(...t){return sM(t)(this)}toPromise(t){return new(t=aM(t))((i,r)=>{let s;this.subscribe(a=>s=a,a=>r(a),()=>i(s))})}}return n.create=e=>new n(e),n})();function aM(n){var e;return null!==(e=n??hs.Promise)&&void 0!==e?e:Promise}const GU=Qc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let V1=(()=>{class n extends zn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new oM(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new GU}next(t){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Q0(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?tM:(this.currentObservers=null,s.push(t),new Wi(()=>{this.currentObservers=null,e3(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new zn;return t.source=this,t}}return n.create=(e,t)=>new oM(e,t),n})();class oM extends V1{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:tM}}function cM(n){return Vt(n?.lift)}function Vn(n){return e=>{if(cM(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Dn(n,e,t,i,r){return new WU(n,e,t,i,r)}class WU extends r5{constructor(e,t,i,r,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(o){try{t(o)}catch(c){e.error(c)}}:super._next,this._error=r?function(o){try{r(o)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(o){e.error(o)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Rt(n,e){return Vn((t,i)=>{let r=0;t.subscribe(Dn(i,s=>{i.next(n.call(e,s,r++))}))})}function _2(n){return this instanceof _2?(this.v=n,this):new _2(n)}function hM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function f5(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(a){return new Promise(function(o,c){!function r(s,a,o,c){Promise.resolve(c).then(function(l){s({value:l,done:o})},a)}(o,c,(a=n[s](a)).done,a.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const dM=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function pM(n){return Vt(n?.then)}function mM(n){return Vt(n[o5])}function gM(n){return Symbol.asyncIterator&&Vt(n?.[Symbol.asyncIterator])}function vM(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const MM=function hB(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function yM(n){return Vt(n?.[MM])}function _M(n){return function fM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(h){i[h]&&(r[h]=function(d){return new Promise(function(p,m){s.push([h,d,p,m])>1||o(h,d)})})}function o(h,d){try{!function c(h){h.value instanceof _2?Promise.resolve(h.value.v).then(l,u):f(s[0][2],h)}(i[h](d))}catch(p){f(s[0][3],p)}}function l(h){o("next",h)}function u(h){o("throw",h)}function f(h,d){h(d),s.shift(),s.length&&o(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield _2(t.read());if(r)return yield _2(void 0);yield yield _2(i)}}finally{t.releaseLock()}})}function CM(n){return Vt(n?.getReader)}function f1(n){if(n instanceof zn)return n;if(null!=n){if(mM(n))return function dB(n){return new zn(e=>{const t=n[o5]();if(Vt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(dM(n))return function pB(n){return new zn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(pM(n))return function mB(n){return new zn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,rM)})}(n);if(gM(n))return wM(n);if(yM(n))return function gB(n){return new zn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(CM(n))return function vB(n){return wM(_M(n))}(n)}throw vM(n)}function wM(n){return new zn(e=>{(function MB(n,e){var t,i,r,s;return function lM(n,e,t,i){return new(t||(t=Promise))(function(s,a){function o(u){try{l(i.next(u))}catch(f){a(f)}}function c(u){try{l(i.throw(u))}catch(f){a(f)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(a){a(s)})}(u.value).then(o,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=hM(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(a){r={error:a}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Nr(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Kn(n,e,t=1/0){return Vt(e)?Kn((i,r)=>Rt((s,a)=>e(i,s,r,a))(f1(n(i,r))),t):("number"==typeof e&&(t=e),Vn((i,r)=>function yB(n,e,t,i,r,s,a,o){const c=[];let l=0,u=0,f=!1;const h=()=>{f&&!c.length&&!l&&e.complete()},d=m=>l<i?p(m):c.push(m),p=m=>{s&&e.next(m),l++;let v=!1;f1(t(m,u++)).subscribe(Dn(e,g=>{r?.(g),s?d(g):e.next(g)},()=>{v=!0},void 0,()=>{if(v)try{for(l--;c.length&&l<i;){const g=c.shift();a?Nr(e,a,()=>p(g)):p(g)}h()}catch(g){e.error(g)}}))};return n.subscribe(Dn(e,d,()=>{f=!0,h()})),()=>{o?.()}}(i,r,n,t)))}function ba(n=1/0){return Kn(y2,n)}const Q1=new zn(n=>n.complete());function h5(n){return n[n.length-1]}function n3(n){return function CB(n){return n&&Vt(n.schedule)}(h5(n))?n.pop():void 0}function xM(n,e=0){return Vn((t,i)=>{t.subscribe(Dn(i,r=>Nr(i,n,()=>i.next(r),e),()=>Nr(i,n,()=>i.complete(),e),r=>Nr(i,n,()=>i.error(r),e)))})}function bM(n,e=0){return Vn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function SM(n,e){if(!n)throw new Error("Iterable cannot be null");return new zn(t=>{Nr(t,e,()=>{const i=n[Symbol.asyncIterator]();Nr(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Fn(n,e){return e?function LB(n,e){if(null!=n){if(mM(n))return function bB(n,e){return f1(n).pipe(bM(e),xM(e))}(n,e);if(dM(n))return function AB(n,e){return new zn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(pM(n))return function SB(n,e){return f1(n).pipe(bM(e),xM(e))}(n,e);if(gM(n))return SM(n,e);if(yM(n))return function EB(n,e){return new zn(t=>{let i;return Nr(t,e,()=>{i=n[MM](),Nr(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(a){return void t.error(a)}s?t.complete():t.next(r)},0,!0)}),()=>Vt(i?.return)&&i.return()})}(n,e);if(CM(n))return function TB(n,e){return SM(_M(n),e)}(n,e)}throw vM(n)}(n,e):f1(n)}class h1 extends V1{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Ke(...n){return Fn(n,n3(n))}function AM(n={}){const{connector:e=(()=>new V1),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let a,o,c,l=0,u=!1,f=!1;const h=()=>{o?.unsubscribe(),o=void 0},d=()=>{h(),a=c=void 0,u=f=!1},p=()=>{const m=a;d(),m?.unsubscribe()};return Vn((m,v)=>{l++,!f&&!u&&h();const g=c=c??e();v.add(()=>{l--,0===l&&!f&&!u&&(o=d5(p,r))}),g.subscribe(v),!a&&l>0&&(a=new t3({next:M=>g.next(M),error:M=>{f=!0,h(),o=d5(d,t,M),g.error(M)},complete:()=>{u=!0,h(),o=d5(d,i),g.complete()}}),f1(m).subscribe(a))})(s)}}function d5(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new t3({next:()=>{i.unsubscribe(),n()}});return f1(e(...t)).subscribe(i)}function D1(n,e){return Vn((t,i)=>{let r=null,s=0,a=!1;const o=()=>a&&!r&&i.complete();t.subscribe(Dn(i,c=>{r?.unsubscribe();let l=0;const u=s++;f1(n(c,u)).subscribe(r=Dn(i,f=>i.next(e?e(c,f,u,l++):f),()=>{r=null,o()}))},()=>{a=!0,o()}))})}function VB(n,e){return n===e}function Lt(n){for(let e in n)if(n[e]===Lt)return e;throw Error("Could not find renamed property on target object.")}function xn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(xn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function p5(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const DB=Lt({__forward_ref__:Lt});function m5(n){return n.__forward_ref__=m5,n.toString=function(){return xn(this())},n}function We(n){return nl(n)?n():n}function nl(n){return"function"==typeof n&&n.hasOwnProperty(DB)&&n.__forward_ref__===m5}function g5(n){return n&&!!n.\u0275providers}const EM="https://g.co/ng/security#xss";class ue extends Error{constructor(e,t){super(function il(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function et(n){return"string"==typeof n?n:null==n?"":String(n)}function v5(n,e){throw new ue(-201,!1)}function d1(n,e){null==n&&function je(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function Ae(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function N1(n){return{providers:n.providers||[],imports:n.imports||[]}}function rl(n){return TM(n,al)||TM(n,LM)}function TM(n,e){return n.hasOwnProperty(e)?n[e]:null}function sl(n){return n&&(n.hasOwnProperty(M5)||n.hasOwnProperty(UB))?n[M5]:null}const al=Lt({\u0275prov:Lt}),M5=Lt({\u0275inj:Lt}),LM=Lt({ngInjectableDef:Lt}),UB=Lt({ngInjectorDef:Lt});var mt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(mt||{});let y5;function HM(){return y5}function Ei(n){const e=y5;return y5=n,e}function zM(n,e,t){const i=rl(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&mt.Optional?null:void 0!==e?e:void v5(xn(n))}const Ft=globalThis,i3={},b5="__NG_DI_FLAG__",ol="ngTempTokenPath",WB=/\n/gm,DM="__source";let Sa;function w2(n){const e=Sa;return Sa=n,e}function qB(n,e=mt.Default){if(void 0===Sa)throw new ue(-203,!1);return null===Sa?zM(n,void 0,e):Sa.get(n,e&mt.Optional?null:void 0,e)}function be(n,e=mt.Default){return(HM()||qB)(We(n),e)}function _e(n,e=mt.Default){return be(n,cl(e))}function cl(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function S5(n){const e=[];for(let t=0;t<n.length;t++){const i=We(n[t]);if(Array.isArray(i)){if(0===i.length)throw new ue(900,!1);let r,s=mt.Default;for(let a=0;a<i.length;a++){const o=i[a],c=XB(o);"number"==typeof c?-1===c?r=o.token:s|=c:r=o}e.push(be(r,s))}else e.push(be(i))}return e}function r3(n,e){return n[b5]=e,n.prototype[b5]=e,n}function XB(n){return n[b5]}function Ir(n){return{toString:n}.toString()}var ll=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ll||{}),I1=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(I1||{});const er={},bt=[],ul=Lt({\u0275cmp:Lt}),A5=Lt({\u0275dir:Lt}),E5=Lt({\u0275pipe:Lt}),IM=Lt({\u0275mod:Lt}),Rr=Lt({\u0275fac:Lt}),s3=Lt({__NG_ELEMENT_ID__:Lt}),RM=Lt({__NG_ENV_ID__:Lt});function PM(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function T5(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],a=t[i++],o=t[i++];n.setAttribute(e,a,o,s)}else{const s=r,a=t[++i];OM(s)?n.setProperty(e,s,a):n.setAttribute(e,s,a),i++}}return i}function kM(n){return 3===n||4===n||6===n}function OM(n){return 64===n.charCodeAt(0)}function a3(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||FM(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function FM(n,e,t,i,r){let s=0,a=n.length;if(-1===e)a=-1;else for(;s<n.length;){const o=n[s++];if("number"==typeof o){if(o===e){a=-1;break}if(o>e){a=s-1;break}}}for(;s<n.length;){const o=n[s];if("number"==typeof o)break;if(o===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==a&&(n.splice(a,0,e),s=a+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const UM="ng-template";function KB(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const a=n[i++];if(t&&"class"===s&&-1!==PM(a.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function BM(n){return 4===n.type&&n.value!==UM}function JB(n,e,t){return e===(4!==n.type||t?n.value:UM)}function QB(n,e,t){let i=4;const r=n.attrs||[],s=function nG(n){for(let e=0;e<n.length;e++)if(kM(n[e]))return e;return n.length}(r);let a=!1;for(let o=0;o<e.length;o++){const c=e[o];if("number"!=typeof c){if(!a)if(4&i){if(i=2|1&i,""!==c&&!JB(n,c,t)||""===c&&1===e.length){if(R1(i))return!1;a=!0}}else{const l=8&i?c:e[++o];if(8&i&&null!==n.attrs){if(!KB(n.attrs,l,t)){if(R1(i))return!1;a=!0}continue}const f=eG(8&i?"class":c,r,BM(n),t);if(-1===f){if(R1(i))return!1;a=!0;continue}if(""!==l){let h;h=f>s?"":r[f+1].toLowerCase();const d=8&i?h:null;if(d&&-1!==PM(d,l,0)||2&i&&l!==h){if(R1(i))return!1;a=!0}}}}else{if(!a&&!R1(i)&&!R1(c))return!1;if(a&&R1(c))continue;a=!1,i=c|1&i}}return R1(i)||a}function R1(n){return 0==(1&n)}function eG(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const a=e[r];if(a===n)return r;if(3===a||6===a)s=!0;else{if(1===a||2===a){let o=e[++r];for(;"string"==typeof o;)o=e[++r];continue}if(4===a)break;if(0===a){r+=4;continue}}r+=s?1:2}return-1}return function iG(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function GM(n,e,t=!1){for(let i=0;i<e.length;i++)if(QB(n,e[i],t))return!0;return!1}function WM(n,e){return n?":not("+e.trim()+")":e}function sG(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let a=n[t];if("string"==typeof a)if(2&i){const o=n[++t];r+="["+a+(o.length>0?'="'+o+'"':"")+"]"}else 8&i?r+="."+a:4&i&&(r+=" "+a);else""!==r&&!R1(a)&&(e+=WM(s,r),r=""),i=a,s=s||!R1(i);t++}return""!==r&&(e+=WM(s,r)),e}function Aa(n){return Ir(()=>{const e=$M(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ll.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||I1.Emulated,styles:n.styles||bt,_:null,schemas:n.schemas||null,tView:null,id:""};qM(t);const i=n.dependencies;return t.directiveDefs=fl(i,!1),t.pipeDefs=fl(i,!0),t.id=function fG(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function cG(n){return gt(n)||Nn(n)}function lG(n){return null!==n}function tr(n){return Ir(()=>({type:n.type,bootstrap:n.bootstrap||bt,declarations:n.declarations||bt,imports:n.imports||bt,exports:n.exports||bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function jM(n,e){if(null==n)return er;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function hi(n){return Ir(()=>{const e=$M(n);return qM(e),e})}function gt(n){return n[ul]||null}function Nn(n){return n[A5]||null}function jn(n){return n[E5]||null}function Jn(n,e){const t=n[IM]||null;if(!t&&!0===e)throw new Error(`Type ${xn(n)} does not have '\u0275mod' property.`);return t}function $M(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||er,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||bt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jM(n.inputs,e),outputs:jM(n.outputs)}}function qM(n){n.features?.forEach(e=>e(n))}function fl(n,e){if(!n)return null;const t=e?jn:cG;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(lG)}const on=0,oe=1,tt=2,qt=3,P1=4,o3=5,Qn=6,Ea=7,Ut=8,di=9,Ta=10,nt=11,c3=12,XM=13,La=14,nn=15,l3=16,Ha=17,nr=18,u3=19,YM=20,b2=21,Pr=22,f3=23,h3=24,Xe=25,L5=1,ZM=2,ir=7,za=9,cn=11;function ei(n){return Array.isArray(n)&&"object"==typeof n[L5]}function ti(n){return Array.isArray(n)&&!0===n[L5]}function H5(n){return 0!=(4&n.flags)}function ps(n){return n.componentOffset>-1}function dl(n){return 1==(1&n.flags)}function k1(n){return!!n.template}function z5(n){return 0!=(512&n[tt])}function ms(n,e){return n.hasOwnProperty(Rr)?n[Rr]:null}const S2=Symbol("SIGNAL");function QM(n,e){return(null===n||"object"!=typeof n)&&Object.is(n,e)}let $n=null,p3=!1;function p1(n){const e=$n;return $n=n,e}const V5={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ey(n){if(p3)throw new Error("");if(null===$n)return;const e=$n.nextProducerIndex++;Va($n),e<$n.producerNode.length&&$n.producerNode[e]!==n&&m3($n)&&gl($n.producerNode[e],$n.producerIndexOfThis[e]),$n.producerNode[e]!==n&&($n.producerNode[e]=n,$n.producerIndexOfThis[e]=m3($n)?sy(n,$n,e):0),$n.producerLastReadVersion[e]=n.version}function ty(n){if(!m3(n)||n.dirty){if(!n.producerMustRecompute(n)&&!function ry(n){Va(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(ty(t),i!==t.version))return!0}return!1}(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function ny(n){if(void 0===n.liveConsumerNode)return;const e=p3;p3=!0;try{for(const t of n.liveConsumerNode)t.dirty||iy(t)}finally{p3=e}}function D5(){return!1!==$n?.consumerAllowSignalWrites}function iy(n){n.dirty=!0,ny(n),n.consumerMarkedDirty?.(n)}function pl(n){return n&&(n.nextProducerIndex=0),p1(n)}function ml(n,e){if(p1(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(m3(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)gl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function N5(n){if(Va(n),m3(n))for(let e=0;e<n.producerNode.length;e++)gl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function sy(n,e,t){if(ay(n),Va(n),0===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=sy(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function gl(n,e){if(ay(n),Va(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)gl(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Va(r),r.producerIndexOfThis[i]=e}}function m3(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Va(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ay(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}const I5=Symbol("UNSET"),R5=Symbol("COMPUTING"),vl=Symbol("ERRORED"),yG=(()=>({...V5,value:I5,dirty:!0,error:null,equal:QM,producerMustRecompute:n=>n.value===I5||n.value===R5,producerRecomputeValue(n){if(n.value===R5)throw new Error("Detected cycle in computations.");const e=n.value;n.value=R5;const t=pl(n);let i;try{i=n.computation()}catch(r){i=vl,n.error=r}finally{ml(n,t)}e!==I5&&e!==vl&&i!==vl&&n.equal(e,i)?n.value=e:(n.value=i,n.version++)}}))();let oy=function _G(){throw new Error};function P5(){oy()}let k5=null;function Ml(n,e){const t=Object.create(wG);function i(){return ey(t),t.value}return t.value=n,e?.equal&&(t.equal=e.equal),i.set=ly,i.update=xG,i.mutate=bG,i.asReadonly=SG,i[S2]=t,i}const wG=(()=>({...V5,equal:QM,readonlyFn:void 0}))();function cy(n){n.version++,ny(n),k5?.()}function ly(n){const e=this[S2];D5()||P5(),e.equal(e.value,n)||(e.value=n,cy(e))}function xG(n){D5()||P5(),ly.call(this,n(this[S2].value))}function bG(n){const e=this[S2];D5()||P5(),n(e.value),cy(e)}function SG(){const n=this[S2];if(void 0===n.readonlyFn){const e=()=>this();e[S2]=n,n.readonlyFn=e}return n.readonlyFn}class TG{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function gs(){return hy}function hy(n){return n.type.prototype.ngOnChanges&&(n.setInput=HG),LG}function LG(){const n=py(this),e=n?.current;if(e){const t=n.previous;if(t===er)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function HG(n,e,t,i){const r=this.declaredInputs[t],s=py(n)||function zG(n,e){return n[dy]=e}(n,{previous:er,current:null}),a=s.current||(s.current={}),o=s.previous,c=o[r];a[r]=new TG(c&&c.currentValue,e,o===er),n[i]=e}gs.ngInherit=!0;const dy="__ngSimpleChanges__";function py(n){return n[dy]||null}const rr=function(n,e,t){};function Bt(n){for(;Array.isArray(n);)n=n[on];return n}function Li(n,e){return Bt(e[n.index])}function v3(n,e){return n.data[e]}function $i(n,e){const t=e[n];return ei(t)?t:t[on]}function sr(n,e){return null==e?null:n[e]}function vy(n){n[Ha]=0}function PG(n){1024&n[tt]||(n[tt]|=1024,_y(n,1))}function My(n){1024&n[tt]&&(n[tt]&=-1025,_y(n,-1))}function _y(n,e){let t=n[qt];if(null===t)return;t[o3]+=e;let i=t;for(t=t[qt];null!==t&&(1===e&&1===i[o3]||-1===e&&0===i[o3]);)t[o3]+=e,i=t,t=t[qt]}function M3(n,e){if(256==(256&n[tt]))throw new ue(911,!1);null===n[b2]&&(n[b2]=[]),n[b2].push(e)}const Ye={lFrame:Hy(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wy(){return Ye.bindingsEnabled}function q(){return Ye.lFrame.lView}function Ct(){return Ye.lFrame.tView}function Dt(){let n=xy();for(;null!==n&&64===n.type;)n=n.parent;return n}function xy(){return Ye.lFrame.currentTNode}function ar(n,e){const t=Ye.lFrame;t.currentTNode=n,t.isParent=e}function U5(){return Ye.lFrame.isParent}function or(){return Ye.lFrame.bindingIndex++}function ZG(n,e){const t=Ye.lFrame;t.bindingIndex=t.bindingRootIndex=n,G5(e)}function G5(n){Ye.lFrame.currentDirectiveIndex=n}function Ey(){return Ye.lFrame.currentQueryIndex}function j5(n){Ye.lFrame.currentQueryIndex=n}function JG(n){const e=n[oe];return 2===e.type?e.declTNode:1===e.type?n[Qn]:null}function Ty(n,e,t){if(t&mt.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&mt.Host||(r=JG(s),null===r||(s=s[La],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Ye.lFrame=Ly();return i.currentTNode=e,i.lView=n,!0}function $5(n){const e=Ly(),t=n[oe];Ye.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Ly(){const n=Ye.lFrame,e=null===n?null:n.child;return null===e?Hy(n):e}function Hy(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function zy(){const n=Ye.lFrame;return Ye.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Vy=zy;function q5(){const n=zy();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mi(){return Ye.lFrame.selectedIndex}function vs(n){Ye.lFrame.selectedIndex=n}function Xt(){const n=Ye.lFrame;return v3(n.tView,n.selectedIndex)}let Iy=!0;function _l(){return Iy}function A2(n){Iy=n}function Cl(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:o,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;a&&(n.contentHooks??=[]).push(-t,a),o&&((n.contentHooks??=[]).push(t,o),(n.contentCheckHooks??=[]).push(t,o)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function wl(n,e,t){Ry(n,e,3,t)}function xl(n,e,t,i){(3&n[tt])===t&&Ry(n,e,t,i)}function X5(n,e){let t=n[tt];(3&t)===e&&(t&=8191,t+=1,n[tt]=t)}function Ry(n,e,t,i){const s=i??-1,a=e.length-1;let o=0;for(let c=void 0!==i?65535&n[Ha]:0;c<a;c++)if("number"==typeof e[c+1]){if(o=e[c],null!=i&&o>=i)break}else e[c]<0&&(n[Ha]+=65536),(o<s||-1==s)&&(rW(n,t,e,c),n[Ha]=(4294901760&n[Ha])+c+2),c++}function Py(n,e){rr(4,n,e);const t=p1(null);try{e.call(n)}finally{p1(t),rr(5,n,e)}}function rW(n,e,t,i){const r=t[i]<0,s=t[i+1],o=n[r?-t[i]:t[i]];r?n[tt]>>13<n[Ha]>>16&&(3&n[tt])===e&&(n[tt]+=8192,Py(o,s)):Py(o,s)}const Ia=-1;class _3{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Z5(n){return n!==Ia}function C3(n){return 32767&n}function w3(n,e){let t=function lW(n){return n>>16}(n),i=e;for(;t>0;)i=i[La],t--;return i}let K5=!0;function bl(n){const e=K5;return K5=n,e}const ky=255,Oy=5;let uW=0;const cr={};function Sl(n,e){const t=Fy(n,e);if(-1!==t)return t;const i=e[oe];i.firstCreatePass&&(n.injectorIndex=e.length,J5(i.data,n),J5(e,null),J5(i.blueprint,null));const r=Al(n,e),s=n.injectorIndex;if(Z5(r)){const a=C3(r),o=w3(r,e),c=o[oe].data;for(let l=0;l<8;l++)e[s+l]=o[a+l]|c[a+l]}return e[s+8]=r,s}function J5(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Fy(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Al(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=Xy(r),null===i)return Ia;if(t++,r=r[La],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Ia}function Q5(n,e,t){!function fW(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(s3)&&(i=t[s3]),null==i&&(i=t[s3]=uW++);const r=i&ky;e.data[n+(r>>Oy)]|=1<<r}(n,e,t)}function Uy(n,e,t){if(t&mt.Optional||void 0!==n)return n;v5()}function By(n,e,t,i){if(t&mt.Optional&&void 0===i&&(i=null),!(t&(mt.Self|mt.Host))){const r=n[di],s=Ei(void 0);try{return r?r.get(e,i,t&mt.Optional):zM(e,i,t&mt.Optional)}finally{Ei(s)}}return Uy(i,0,t)}function Gy(n,e,t,i=mt.Default,r){if(null!==n){if(2048&e[tt]&&!(i&mt.Self)){const a=function vW(n,e,t,i,r){let s=n,a=e;for(;null!==s&&null!==a&&2048&a[tt]&&!(512&a[tt]);){const o=Wy(s,a,t,i|mt.Self,cr);if(o!==cr)return o;let c=s.parent;if(!c){const l=a[YM];if(l){const u=l.get(t,cr,i);if(u!==cr)return u}c=Xy(a),a=a[La]}s=c}return r}(n,e,t,i,cr);if(a!==cr)return a}const s=Wy(n,e,t,i,cr);if(s!==cr)return s}return By(e,t,i,r)}function Wy(n,e,t,i,r){const s=function pW(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(s3)?n[s3]:void 0;return"number"==typeof e?e>=0?e&ky:gW:e}(t);if("function"==typeof s){if(!Ty(e,n,i))return i&mt.Host?Uy(r,0,i):By(e,t,i,r);try{let a;if(a=s(i),null!=a||i&mt.Optional)return a;v5()}finally{Vy()}}else if("number"==typeof s){let a=null,o=Fy(n,e),c=Ia,l=i&mt.Host?e[nn][Qn]:null;for((-1===o||i&mt.SkipSelf)&&(c=-1===o?Al(n,e):e[o+8],c!==Ia&&$y(i,!1)?(a=e[oe],o=C3(c),e=w3(c,e)):o=-1);-1!==o;){const u=e[oe];if(jy(s,o,u.data)){const f=dW(o,e,t,a,i,l);if(f!==cr)return f}c=e[o+8],c!==Ia&&$y(i,e[oe].data[o+8]===l)&&jy(s,o,e)?(a=u,o=C3(c),e=w3(c,e)):o=-1}}return r}function dW(n,e,t,i,r,s){const a=e[oe],o=a.data[n+8],u=El(o,a,t,null==i?ps(o)&&K5:i!=a&&0!=(3&o.type),r&mt.Host&&s===o);return null!==u?Ms(e,a,u,o):cr}function El(n,e,t,i,r){const s=n.providerIndexes,a=e.data,o=1048575&s,c=n.directiveStart,u=s>>20,h=r?o+u:n.directiveEnd;for(let d=i?o:o+u;d<h;d++){const p=a[d];if(d<c&&t===p||d>=c&&p.type===t)return d}if(r){const d=a[c];if(d&&k1(d)&&d.type===t)return c}return null}function Ms(n,e,t,i){let r=n[t];const s=e.data;if(function sW(n){return n instanceof _3}(r)){const a=r;a.resolving&&function NB(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ue(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Et(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():et(n)}(s[t]));const o=bl(a.canSeeViewProviders);a.resolving=!0;const l=a.injectImpl?Ei(a.injectImpl):null;Ty(n,i,mt.Default);try{r=n[t]=a.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function iW(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const a=hy(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Ei(l),bl(o),a.resolving=!1,Vy()}}return r}function jy(n,e,t){return!!(t[e+(n>>Oy)]&1<<n)}function $y(n,e){return!(n&mt.Self||n&mt.Host&&e)}class gi{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return Gy(this._tNode,this._lView,e,cl(i),t)}}function gW(){return new gi(Dt(),q())}function eh(n){return nl(n)?()=>{const e=eh(We(n));return e&&e()}:ms(n)}function Xy(n){const e=n[oe],t=e.type;return 2===t?e.declTNode:1===t?n[Qn]:null}const Pa="__parameters__";function Oa(n,e,t){return Ir(()=>{const i=function th(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const a=new r(...s);return o.annotation=a,o;function o(c,l,u){const f=c.hasOwnProperty(Pa)?c[Pa]:Object.defineProperty(c,Pa,{value:[]})[Pa];for(;f.length<=u;)f.push(null);return(f[u]=f[u]||[]).push(a),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Ua(n,e){n.forEach(t=>Array.isArray(t)?Ua(t,e):e(t))}function Zy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ll(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}const zl=r3(Oa("Optional"),8),Vl=r3(Oa("SkipSelf"),4);class Ie{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ae({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const E3=new Ie("ENVIRONMENT_INITIALIZER"),t_=new Ie("INJECTOR",-1),n_=new Ie("INJECTOR_DEF_TYPES");class sh{get(e,t=i3){if(t===i3){const i=new Error(`NullInjectorError: No provider for ${xn(e)}!`);throw i.name="NullInjectorError",i}return t}}function UW(...n){return{\u0275providers:r_(0,n),\u0275fromNgModule:!0}}function r_(n,...e){const t=[],i=new Set;let r;const s=a=>{t.push(a)};return Ua(e,a=>{const o=a;Nl(o,s,[],i)&&(r||=[],r.push(o))}),void 0!==r&&s_(r,s),t}function s_(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];ah(r,s=>{e(s,i)})}}function Nl(n,e,t,i){if(!(n=We(n)))return!1;let r=null,s=sl(n);const a=!s&&gt(n);if(s||a){if(a&&!a.standalone)return!1;r=n}else{const c=n.ngModule;if(s=sl(c),!s)return!1;r=c}const o=i.has(r);if(a){if(o)return!1;if(i.add(r),a.dependencies){const c="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const l of c)Nl(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!o){let l;i.add(r);try{Ua(s.imports,u=>{Nl(u,e,t,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&s_(l,e)}if(!o){const l=ms(r)||(()=>new r);e({provide:r,useFactory:l,deps:bt},r),e({provide:n_,useValue:r,multi:!0},r),e({provide:E3,useValue:()=>be(r),multi:!0},r)}const c=s.providers;if(null!=c&&!o){const l=n;ah(c,u=>{e(u,l)})}}}return r!==n&&void 0!==n.providers}function ah(n,e){for(let t of n)g5(t)&&(t=t.\u0275providers),Array.isArray(t)?ah(t,e):e(t)}const BW=Lt({provide:String,useValue:Lt});function oh(n){return null!==n&&"object"==typeof n&&BW in n}function ys(n){return"function"==typeof n}const ch=new Ie("Set Injector scope."),Il={},WW={};let lh;function Rl(){return void 0===lh&&(lh=new sh),lh}class m1{}class Pl extends m1{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fh(e,a=>this.processProvider(a)),this.records.set(t_,Wa(void 0,this)),r.has("environment")&&this.records.set(m1,Wa(void 0,this));const s=this.records.get(ch);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(n_,bt,mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=w2(this),i=Ei(void 0);try{return e()}finally{w2(t),Ei(i)}}get(e,t=i3,i=mt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(RM))return e[RM](this);i=cl(i);const s=w2(this),a=Ei(void 0);try{if(!(i&mt.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function YW(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ie}(e)&&rl(e);c=l&&this.injectableDefInScope(l)?Wa(uh(e),Il):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&mt.Self?Rl():this.parent).get(e,t=i&mt.Optional&&t===i3?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[ol]=o[ol]||[]).unshift(xn(e)),s)throw o;return function YB(n,e,t,i){const r=n[ol];throw e[DM]&&r.unshift(e[DM]),n.message=function ZB(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=xn(e);if(Array.isArray(e))r=e.map(xn).join(" -> ");else if("object"==typeof e){let s=[];for(let a in e)if(e.hasOwnProperty(a)){let o=e[a];s.push(a+":"+("string"==typeof o?JSON.stringify(o):xn(o)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(WB,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[ol]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Ei(a),w2(s)}}resolveInjectorInitializers(){const e=w2(this),t=Ei(void 0);try{const r=this.get(E3,bt,mt.Self);for(const s of r)s()}finally{w2(e),Ei(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(xn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(e){let t=ys(e=We(e))?e:We(e&&e.provide);const i=function $W(n){return oh(n)?Wa(void 0,n.useValue):Wa(function c_(n,e,t){let i;if(ys(n)){const r=We(n);return ms(r)||uh(r)}if(oh(n))i=()=>We(n.useValue);else if(function o_(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...S5(n.deps||[]));else if(function a_(n){return!(!n||!n.useExisting)}(n))i=()=>be(We(n.useExisting));else{const r=We(n&&(n.useClass||n.provide));if(!function qW(n){return!!n.deps}(n))return ms(r)||uh(r);i=()=>new r(...S5(n.deps))}return i}(n),Il)}(e);if(ys(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Wa(void 0,Il,!0),r.factory=()=>S5(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Il&&(t.value=WW,t.value=t.factory()),"object"==typeof t.value&&t.value&&function XW(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=We(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function uh(n){const e=rl(n),t=null!==e?e.factory:ms(n);if(null!==t)return t;if(n instanceof Ie)throw new ue(204,!1);if(n instanceof Function)return function jW(n){const e=n.length;if(e>0)throw function S3(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?"),new ue(204,!1);const t=function FB(n){return n&&(n[al]||n[LM])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new ue(204,!1)}function Wa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function fh(n,e){for(const t of n)Array.isArray(t)?fh(t,e):t&&g5(t)?fh(t.\u0275providers,e):e(t)}function h_(n,e=null,t=null,i){const r=d_(n,e,t,i);return r.resolveInjectorInitializers(),r}function d_(n,e=null,t=null,i,r=new Set){const s=[t||bt,UW(n)];return i=i||("object"==typeof n?void 0:xn(n)),new Pl(s,e||Rl(),i||null,r)}let ph,g1=(()=>{var n;class e{static create(i,r){if(Array.isArray(i))return h_({name:""},r,i,"");{const s=i.name??"";return h_({name:s},i.parent,i.providers,s)}}}return(n=e).THROW_IF_NOT_FOUND=i3,n.NULL=new sh,n.\u0275prov=Ae({token:n,providedIn:"any",factory:()=>be(t_)}),n.__NG_ELEMENT_ID__=-1,e})();const Ol=new Ie("AppId",{providedIn:"root",factory:()=>rj}),rj="ng",m_=new Ie("Platform Initializer"),$a=new Ie("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),g_=new Ie("CSP nonce",{providedIn:"root",factory:()=>function ja(){if(void 0!==ph)return ph;if(typeof document<"u")return document;throw new ue(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function mh(n){return n.ownerDocument.defaultView}function Xi(n){return n instanceof Function?n():n}function yh(n){return 128==(128&n.flags)}var L2=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(L2||{});const _h=new Map;let pj=0;const wh="__ngContext__";function ni(n,e){ei(e)?(n[wh]=e[u3],function gj(n){_h.set(n[u3],n)}(e)):n[wh]=e}let xh;function bh(n,e){return xh(n,e)}function z3(n){const e=n[qt];return ti(e)?e[qt]:e}function I_(n){return P_(n[c3])}function R_(n){return P_(n[P1])}function P_(n){for(;null!==n&&!ti(n);)n=n[P1];return n}function Ya(n,e,t,i,r){if(null!=i){let s,a=!1;ti(i)?s=i:ei(i)&&(a=!0,i=i[on]);const o=Bt(i);0===n&&null!==t?null==r?U_(e,t,o):Cs(e,t,o,r||null,!0):1===n&&null!==t?Cs(e,t,o,r||null,!0):2===n?function Xl(n,e,t){const i=$l(n,e);i&&function Ij(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,o,a):3===n&&e.destroyNode(o),null!=s&&function kj(n,e,t,i,r){const s=t[ir];s!==Bt(t)&&Ya(e,n,i,s,r);for(let o=cn;o<t.length;o++){const c=t[o];N3(c[oe],c,n,e,i,s)}}(e,n,s,t,r)}}function jl(n,e,t){return n.createElement(e,t)}function O_(n,e){const t=n[za],i=t.indexOf(e);My(e),t.splice(i,1)}function V3(n,e){if(n.length<=cn)return;const t=cn+e,i=n[t];if(i){const r=i[l3];null!==r&&r!==n&&O_(r,i),e>0&&(n[t-1][P1]=i[P1]);const s=Ll(n,cn+e);!function Ej(n,e){N3(n,e,e[nt],2,null,null),e[on]=null,e[Qn]=null}(i[oe],i);const a=s[nr];null!==a&&a.detachView(s[oe]),i[qt]=null,i[P1]=null,i[tt]&=-129}return i}function Ah(n,e){if(!(256&e[tt])){const t=e[nt];e[f3]&&N5(e[f3]),e[h3]&&N5(e[h3]),t.destroyNode&&N3(n,e,t,3,null,null),function Hj(n){let e=n[c3];if(!e)return Eh(n[oe],n);for(;e;){let t=null;if(ei(e))t=e[c3];else{const i=e[cn];i&&(t=i)}if(!t){for(;e&&!e[P1]&&e!==n;)ei(e)&&Eh(e[oe],e),e=e[qt];null===e&&(e=n),ei(e)&&Eh(e[oe],e),t=e&&e[P1]}e=t}}(e)}}function Eh(n,e){if(!(256&e[tt])){e[tt]&=-129,e[tt]|=256,function Nj(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof _3)){const s=t[i+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const o=r[s[a]],c=s[a+1];rr(4,o,c);try{c.call(o)}finally{rr(5,o,c)}}else{rr(4,r,s);try{s.call(r)}finally{rr(5,r,s)}}}}}(n,e),function Dj(n,e){const t=n.cleanup,i=e[Ea];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[Ea]=null);const r=e[b2];if(null!==r){e[b2]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[oe].type&&e[nt].destroy();const t=e[l3];if(null!==t&&ti(e[qt])){t!==e[qt]&&O_(t,e);const i=e[nr];null!==i&&i.detachView(n)}!function vj(n){_h.delete(n[u3])}(e)}}function Th(n,e,t){return function F_(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[on];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===I1.None||s===I1.Emulated)return null}return Li(i,t)}}(n,e.parent,t)}function Cs(n,e,t,i,r){n.insertBefore(e,t,i,r)}function U_(n,e,t){n.appendChild(e,t)}function B_(n,e,t,i,r){null!==i?Cs(n,e,t,i,r):U_(n,e,t)}function $l(n,e){return n.parentNode(e)}let Lh,j_=function W_(n,e,t){return 40&n.type?Li(n,t):null};function ql(n,e,t,i){const r=Th(n,i,e),s=e[nt],o=function G_(n,e,t){return j_(n,e,t)}(i.parent||e[Qn],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)B_(s,r,t[c],o,!1);else B_(s,r,t,o,!1);void 0!==Lh&&Lh(s,i,e,t,r)}function D3(n,e){if(null!==e){const t=e.type;if(3&t)return Li(e,n);if(4&t)return Hh(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return D3(n,i);{const r=n[e.index];return ti(r)?Hh(-1,r):Bt(r)}}if(32&t)return bh(e,n)()||Bt(n[e.index]);{const i=q_(n,e);return null!==i?Array.isArray(i)?i[0]:D3(z3(n[nn]),i):D3(n,e.next)}}return null}function q_(n,e){return null!==e?n[nn][Qn].projection[e.projection]:null}function Hh(n,e){const t=cn+n+1;if(t<e.length){const i=e[t],r=i[oe].firstChild;if(null!==r)return D3(i,r)}return e[ir]}function zh(n,e,t,i,r,s,a){for(;null!=t;){const o=i[t.index],c=t.type;if(a&&0===e&&(o&&ni(Bt(o),i),t.flags|=2),32!=(32&t.flags))if(8&c)zh(n,e,t.child,i,r,s,!1),Ya(e,n,r,o,s);else if(32&c){const l=bh(t,i);let u;for(;u=l();)Ya(e,n,r,u,s);Ya(e,n,r,o,s)}else 16&c?Y_(n,e,i,t,r,s):Ya(e,n,r,o,s);t=a?t.projectionNext:t.next}}function N3(n,e,t,i,r,s){zh(t,i,n.firstChild,e,r,s,!1)}function Y_(n,e,t,i,r,s){const a=t[nn],c=a[Qn].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Ya(e,n,r,c[l],s);else{let l=c;const u=a[qt];yh(i)&&(l.flags|=128),zh(n,e,l,u,r,s,!0)}}function Z_(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function K_(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&T5(n,e,i),null!==r&&Z_(n,e,r),null!==s&&function Fj(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}class tC{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${EM})`}}const Qj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ka=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ka||{});function kh(n){const e=function P3(){const n=q();return n&&n[Ta].sanitizer}();return e?e.sanitize(Ka.URL,n)||"":function I3(n,e){const t=function Yj(n){return n instanceof tC&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${EM})`)}return t===e}(n,"URL")?function H2(n){return n instanceof tC?n.changingThisBreaksApplicationSecurity:n}(n):function Nh(n){return(n=String(n)).match(Qj)?n:"unsafe:"+n}(et(n))}let uC=(n,e,t)=>null;function $h(n,e,t=!1){return uC(n,e,t)}class _${}class dC{}class w${resolveComponentFactory(e){throw function C$(n){const e=Error(`No component factory found for ${xn(n)}.`);return e.ngComponent=n,e}(e)}}let i6=(()=>{class e{}return e.NULL=new w$,e})();function x$(){return eo(Dt(),q())}function eo(n,e){return new z2(Li(n,e))}let z2=(()=>{class e{constructor(i){this.nativeElement=i}}return e.__NG_ELEMENT_ID__=x$,e})();function b$(n){return n instanceof z2?n.nativeElement:n}class mC{}let A$=(()=>{var n;class e{}return(n=e).\u0275prov=Ae({token:n,providedIn:"root",factory:()=>null}),e})();class s6{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const E$=new s6("17.0.0-next.6"),Yh={};function Zh(n){return n.ngOriginalError}class lr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Zh(e);for(;t&&Zh(t);)t=Zh(t);return t||null}}let a6=(()=>{var n;class e{}return(n=e).__NG_ELEMENT_ID__=L$,n.__NG_ENV_ID__=t=>t,e})();class T$ extends a6{constructor(e){super(),this._lView=e}onDestroy(e){return M3(this._lView,e),()=>function yl(n,e){if(null===n[b2])return;const t=n[b2].indexOf(e);-1!==t&&n[b2].splice(t,1)}(this._lView,e)}}function L$(){return new T$(q())}function Kh(n){return e=>{setTimeout(n,void 0,e)}}const vi=class H$ extends V1{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),a=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),a=c.complete?.bind(c)}this.__isAsync&&(s=Kh(s),r&&(r=Kh(r)),a&&(a=Kh(a)));const o=super.subscribe({next:r,error:s,complete:a});return e instanceof Wi&&e.add(o),o}};function vC(...n){}class Ht{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vi(!1),this.onMicrotaskEmpty=new vi(!1),this.onStable=new vi(!1),this.onError=new vi(!1),typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function z$(){const n="function"==typeof Ft.requestAnimationFrame;let e=Ft[n?"requestAnimationFrame":"setTimeout"],t=Ft[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function N$(n){const e=()=>{!function D$(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ft,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Qh(n),n.isCheckStableRunning=!0,Jh(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Qh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,a,o)=>{if(function R$(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(o))return t.invokeTask(r,s,a,o);try{return MC(n),t.invokeTask(r,s,a,o)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),yC(n)}},onInvoke:(t,i,r,s,a,o,c)=>{try{return MC(n),t.invoke(r,s,a,o,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),yC(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Qh(n),Jh(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ht.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(Ht.isInAngularZone())throw new ue(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+r,e,V$,vC,vC);try{return s.runTask(a,t,i)}finally{s.cancelTask(a)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const V$={};function Jh(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Qh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function MC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function yC(n){n._nesting--,Jh(n)}class I${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vi,this.onMicrotaskEmpty=new vi,this.onStable=new vi,this.onError=new vi}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const _C=new Ie("",{providedIn:"root",factory:CC});function CC(){const n=_e(Ht);let e=!0;return function HB(...n){const e=n3(n),t=function xB(n,e){return"number"==typeof h5(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?f1(i[0]):ba(t)(Fn(i,e)):Q1}(new zn(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new zn(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Ht.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const a=n.onUnstable.subscribe(()=>{Ht.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),a.unsubscribe()}}).pipe(AM()))}var ws=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ws||{});function xC(n,e){!e&&function hh(n){if(!HM()&&!function $B(){return Sa}())throw new ue(-203,!1)}();const t=e?.injector??_e(g1);if(!function _s(n){return"browser"===(n??_e(g1)).get($a)}(t))return{destroy(){}};let i;const r=t.get(a6).onDestroy(()=>i?.()),s=t.get(ed),a=s.handler??=new SC,o=t.get(Ht),c=t.get(lr,null,{optional:!0}),u=new bC(o,c,e?.phase??ws.MixedReadWrite,()=>{i?.(),n()});return i=()=>{a.unregister(u),r()},a.register(u),{destroy:i}}class bC{constructor(e,t,i,r){this.zone=e,this.errorHandler=t,this.phase=i,this.callbackFn=r}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}}class SC{constructor(){this.executingCallbacks=!1,this.buckets={[ws.EarlyRead]:new Set,[ws.Write]:new Set,[ws.MixedReadWrite]:new Set,[ws.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new ue(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let ed=(()=>{var n;class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}}return(n=e).\u0275prov=Ae({token:n,providedIn:"root",factory:()=>new n}),e})();function F3(n){for(;n;){n[tt]|=64;const e=z3(n);if(z5(n)&&!e)return n;n=e}return null}const EC=new Ie("",{providedIn:"root",factory:()=>!1});let c6=null;function zC(n,e){return n[e]??NC()}function VC(n,e){const t=NC();t.producerNode?.length&&(n[e]=c6,t.lView=n,c6=DC())}const B$={...V5,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{F3(n.lView)},lView:null};function DC(){return Object.create(B$)}function NC(){return c6??=DC(),c6}const st={};function RC(n,e,t,i){if(!i)if(3==(3&e[tt])){const s=n.preOrderCheckHooks;null!==s&&wl(e,s,t)}else{const s=n.preOrderHooks;null!==s&&xl(e,s,0,t)}vs(t)}function Oe(n,e=mt.Default){const t=q();return null===t?be(n,e):Gy(Dt(),t,We(n),e)}function l6(n,e,t,i,r,s,a,o,c,l,u){const f=e.blueprint.slice();return f[on]=r,f[tt]=140|i,(null!==l||n&&2048&n[tt])&&(f[tt]|=2048),vy(f),f[qt]=f[La]=n,f[Ut]=t,f[Ta]=a||n&&n[Ta],f[nt]=o||n&&n[nt],f[di]=c||n&&n[di]||null,f[Qn]=s,f[u3]=function mj(){return pj++}(),f[Pr]=u,f[YM]=l,f[nn]=2==e.type?n[nn]:f,f}function to(n,e,t,i,r){let s=n.data[e];if(null===s)s=function td(n,e,t,i,r){const s=xy(),a=U5(),c=n.data[e]=function Z$(n,e,t,i,r,s){let a=e?e.injectorIndex:-1,o=0;return function Na(){return null!==Ye.skipHydrationRootTNode}()&&(o|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:o,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(a?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,i,r),function YG(){return Ye.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const a=function y3(){const n=Ye.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return ar(s,!0),s}function U3(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function kC(n,e,t,i,r){const s=zC(e,f3),a=mi(),o=2&i;try{vs(-1),o&&e.length>Xe&&RC(n,e,Xe,!1),rr(o?2:0,r);const l=o?s:null,u=pl(l);try{null!==l&&(l.dirty=!1),t(i,r)}finally{ml(l,u)}}finally{o&&null===e[f3]&&VC(e,f3),vs(a),rr(o?3:1,r)}}function nd(n,e,t){if(H5(e)){const i=p1(null);try{const s=e.directiveEnd;for(let a=e.directiveStart;a<s;a++){const o=n.data[a];o.contentQueries&&o.contentQueries(1,t[a],a)}}finally{p1(i)}}}function OC(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=sd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sd(n,e,t,i,r,s,a,o,c,l,u){const f=Xe+i,h=f+r,d=function W$(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:st);return t}(f,h),p="function"==typeof l?l():l;return d[oe]={type:n,blueprint:d,template:t,queries:null,viewQuery:o,declTNode:e,data:d.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let FC=n=>null;function UC(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?BC(t,e,r,s):i.hasOwnProperty(r)&&BC(t,e,i[r],s)}return t}function BC(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function GC(n,e,t,i,r,s){for(let l=0;l<i.length;l++)Q5(Sl(t,e),n,i[l].type);!function cq(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let a=!1,o=!1,c=U3(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=a3(t.mergedAttrs,u.hostAttrs),lq(n,t,e,c,u),oq(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const f=u.type.prototype;!a&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),a=!0),!o&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),o=!0),c++}!function K$(n,e,t){const r=e.directiveEnd,s=n.data,a=e.attrs,o=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const f=s[u],h=t?t.get(f):null,p=h?h.outputs:null;c=UC(f.inputs,u,c,h?h.inputs:null),l=UC(f.outputs,u,l,p);const m=null===c||null===a||BM(e)?null:hq(c,u,a);o.push(m)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=o,e.inputs=c,e.outputs=l}(n,t,s)}function WC(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,a=function KG(){return Ye.lFrame.currentDirectiveIndex}();try{vs(s);for(let o=i;o<r;o++){const c=n.data[o],l=e[o];G5(o),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&rq(c,l)}}finally{vs(-1),G5(a)}}function rq(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function od(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function oq(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;k1(e)&&(t[""]=n)}}function lq(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=ms(r.type)),a=new _3(s,k1(r),Oe);n.blueprint[i]=a,t[i]=a,function tq(n,e,t,i,r){const s=r.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const o=~e.index;(function nq(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=o&&a.push(o),a.push(t,i,s)}}(n,e,i,U3(n,t,r.hostVars,st),r)}function ur(n,e,t,i,r,s){const a=Li(n,e);!function cd(n,e,t,i,r,s,a){if(null==s)n.removeAttribute(e,r,t);else{const o=null==a?et(s):a(s,i||"",r);n.setAttribute(e,r,o,t)}}(e[nt],a,s,n.value,t,i,r)}function fq(n,e,t,i,r,s){const a=s[e];if(null!==a)for(let o=0;o<a.length;)jC(i,t,a[o++],a[o++],a[o++])}function jC(n,e,t,i,r){const s=p1(null);try{const a=n.inputTransforms;null!==a&&a.hasOwnProperty(i)&&(r=a[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{p1(s)}}function hq(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const a=n[s];for(let o=0;o<a.length;o+=2)if(a[o]===e){i.push(s,a[o+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function qC(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const a=n.data[s];j5(t[i]),a.contentQueries(2,e[s],s)}}}function u6(n,e){return n[c3]?n[XM][P1]=e:n[c3]=e,n[XM]=e,e}function ld(n,e,t){j5(0);const i=p1(null);try{e(n,t)}finally{p1(i)}}function XC(n){return n[Ea]||(n[Ea]=[])}function YC(n){return n.cleanup||(n.cleanup=[])}function KC(n,e){const t=n[di],i=t?t.get(lr,null):null;i&&i.handleError(e)}function ud(n,e,t,i,r){for(let s=0;s<t.length;){const a=t[s++],o=t[s++];jC(n.data[a],e[a],i,o,r)}}function dq(n,e){const t=$i(e,n),i=t[oe];!function pq(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[on];null!==r&&null===t[Pr]&&(t[Pr]=$h(r,t[di])),fd(i,t,t[Ut])}function fd(n,e,t){$5(e);try{const i=n.viewQuery;null!==i&&ld(1,i,t);const r=n.template;null!==r&&kC(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&qC(n,e),n.staticViewQueries&&ld(2,n.viewQuery,t);const s=n.components;null!==s&&function mq(n,e){for(let t=0;t<e.length;t++)dq(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[tt]&=-5,q5()}}function f6(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let a=0;a<e.length;a++){const o=e[a];"number"==typeof o?s=o:1==s?r=p5(r,o):2==s&&(i=p5(i,o+": "+e[++a]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function B3(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(Bt(s)),ti(s)&&JC(s,i);const a=t.type;if(8&a)B3(n,e,t.child,i);else if(32&a){const o=bh(t,e);let c;for(;c=o();)i.push(c)}else if(16&a){const o=q_(e,t);if(Array.isArray(o))i.push(...o);else{const c=z3(e[nn]);B3(c[oe],c,o,i,!0)}}t=r?t.projectionNext:t.next}return i}function JC(n,e){for(let t=cn;t<n.length;t++){const i=n[t],r=i[oe].firstChild;null!==r&&B3(i[oe],i,r,e)}n[ir]!==n[on]&&e.push(n[ir])}function h6(n,e,t,i=!0){const r=e[Ta],s=r.rendererFactory,a=r.afterRenderEventManager;s.begin?.(),a?.begin();try{QC(n,e,n.template,t)}catch(c){throw i&&KC(e,c),c}finally{s.end?.(),r.inlineEffectRunner?.flush(),a?.end()}}function QC(n,e,t,i){const r=e[tt];if(256!=(256&r)){e[Ta].inlineEffectRunner?.flush(),$5(e);try{vy(e),function Sy(n){return Ye.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&kC(n,e,t,2,i);const a=3==(3&r);if(a){const l=n.preOrderCheckHooks;null!==l&&wl(e,l,null)}else{const l=n.preOrderHooks;null!==l&&xl(e,l,0,null),X5(e,0)}if(function vq(n){for(let e=I_(n);null!==e;e=R_(e)){if(!e[ZM])continue;const t=e[za];for(let i=0;i<t.length;i++){PG(t[i])}}}(e),ew(e,0),null!==n.contentQueries&&qC(n,e),a){const l=n.contentCheckHooks;null!==l&&wl(e,l)}else{const l=n.contentHooks;null!==l&&xl(e,l,1),X5(e,1)}!function G$(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=zC(e,h3);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)vs(~s);else{const a=s,o=t[++r],c=t[++r];ZG(o,a),i.dirty=!1;const l=pl(i);try{c(2,e[a])}finally{ml(i,l)}}}}finally{null===e[h3]&&VC(e,h3),vs(-1)}}(n,e);const o=n.components;null!==o&&nw(e,o,0);const c=n.viewQuery;if(null!==c&&ld(2,c,i),a){const l=n.viewCheckHooks;null!==l&&wl(e,l)}else{const l=n.viewHooks;null!==l&&xl(e,l,2),X5(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[tt]&=-73,My(e)}finally{q5()}}}function ew(n,e){for(let t=I_(n);null!==t;t=R_(t))for(let i=cn;i<t.length;i++)tw(t[i],e)}function Mq(n,e,t){tw($i(e,n),t)}function tw(n,e){if(!function IG(n){return 128==(128&n[tt])}(n))return;const t=n[oe],i=n[tt];if(80&i&&0===e||1024&i)QC(t,n,t.template,n[Ut]);else if(n[o3]>0){ew(n,1);const r=t.components;null!==r&&nw(n,r,1)}}function nw(n,e,t){for(let i=0;i<e.length;i++)Mq(n,e[i],t)}class G3{get rootNodes(){const e=this._lView,t=e[oe];return B3(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ut]}set context(e){this._lView[Ut]=e}get destroyed(){return 256==(256&this._lView[tt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[qt];if(ti(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(V3(e,i),Ll(t,i))}this._attachedToViewContainer=!1}Ah(this._lView[oe],this._lView)}onDestroy(e){M3(this._lView,e)}markForCheck(){F3(this._cdRefInjectingView||this._lView)}detach(){this._lView[tt]&=-129}reattach(){this._lView[tt]|=128}detectChanges(){h6(this._lView[oe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lj(n,e){N3(n,e,e[nt],2,null,null)}(this._lView[oe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=e}}class yq extends G3{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;h6(e[oe],e,e[Ut],!1)}checkNoChanges(){}get context(){return null}}class iw extends i6{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=gt(e);return new W3(t,this.ngModule)}}function rw(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class Cq{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=cl(i);const r=this.injector.get(e,Yh,i);return r!==Yh||t===Yh?r:this.parentInjector.get(e,t,i)}}class W3 extends dC{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=rw(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return rw(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function aG(n){return n.map(sG).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof m1?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new Cq(e,s):e,o=a.get(mC,null);if(null===o)throw new ue(407,!1);const u={rendererFactory:o,sanitizer:a.get(A$,null),inlineEffectRunner:null,afterRenderEventManager:a.get(ed,null)},f=o.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",d=i?function j$(n,e,t,i){const s=i.get(EC,!1)||t===I1.ShadowDom,a=n.selectRootElement(e,s);return function $$(n){FC(n)}(a),a}(f,i,this.componentDef.encapsulation,a):jl(f,h,function _q(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(h)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let g=null;null!==d&&(g=$h(d,a,!0));const M=sd(0,null,null,1,0,null,null,null,null,null,null),y=l6(null,M,null,v,null,null,u,f,a,null,g);let _,C;$5(y);try{const b=this.componentDef;let x,S=null;b.findHostDirectiveDefs?(x=[],S=new Map,b.findHostDirectiveDefs(b,x,S),x.push(b)):x=[b];const w=function xq(n,e){const t=n[oe],i=Xe;return n[i]=e,to(t,i,2,"#host",null)}(y,d),A=function bq(n,e,t,i,r,s,a){const o=r[oe];!function Sq(n,e,t,i){for(const r of n)e.mergedAttrs=a3(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(f6(e,e.mergedAttrs,!0),null!==t&&K_(i,t,e))}(i,n,e,a);let c=null;null!==e&&(c=$h(e,r[di]));const l=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const f=l6(r,OC(t),null,u,r[n.index],n,s,l,null,null,c);return o.firstCreatePass&&od(o,n,i.length-1),u6(r,f),r[n.index]=f}(w,d,b,x,y,u,f);C=v3(M,Xe),d&&function Eq(n,e,t,i){if(i)T5(n,t,["ng-version",E$.full]);else{const{attrs:r,classes:s}=function oG(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!R1(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&T5(n,t,r),s&&s.length>0&&Z_(n,t,s.join(" "))}}(f,b,d,i),void 0!==t&&function Tq(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(C,this.ngContentSelectors,t),_=function Aq(n,e,t,i,r,s){const a=Dt(),o=r[oe],c=Li(a,r);GC(o,r,a,t,null,i);for(let u=0;u<t.length;u++)ni(Ms(r,o,a.directiveStart+u,a),r);WC(o,r,a),c&&ni(c,r);const l=Ms(r,o,a.directiveStart+a.componentOffset,a);if(n[Ut]=r[Ut]=l,null!==s)for(const u of s)u(l,e);return nd(o,a,n),l}(A,b,x,S,y,[Lq]),fd(M,y,null)}finally{q5()}return new wq(this.componentType,_,eo(C,y),y,C)}}class wq extends _${constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new yq(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;ud(s[oe],s,r,e,t),this.previousInputValues.set(e,t),F3($i(this._tNode.index,s))}}get injector(){return new gi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function Lq(){const n=Dt();Cl(q()[oe],n)}function bn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function g6(n,e,t,i){const r=q();return bn(r,or(),e)&&(Ct(),ur(Xt(),r,n,e,t,i)),g6}function gd(n,e,t,i,r){const a=r?"class":"style";ud(n,t,e.inputs[a],a,i)}let Md=(()=>{class e{}return e.__NG_ELEMENT_ID__=SX,e})();function SX(n){return function AX(n,e,t){if(ps(n)&&!t){const i=$i(n.index,e);return new G3(i,i)}return 47&n.type?new G3(e[nn],e):null}(Dt(),q(),16==(16&n))}function S6(n,e){return!e||yh(n)}function ho(n,e,t,i=!0){const r=e[oe];if(function zj(n,e,t,i){const r=cn+i,s=t.length;i>0&&(t[r-1][P1]=e),i<s-cn?(e[P1]=t[r],Zy(t,cn+i,e)):(t.push(e),e[P1]=null),e[qt]=t;const a=e[l3];null!==a&&t!==a&&function Vj(n,e){const t=n[za];e[nn]!==e[qt][qt][nn]&&(n[ZM]=!0),null===t?n[za]=[e]:t.push(e)}(a,e);const o=e[nr];null!==o&&o.insertView(n),e[tt]|=128}(r,e,n,t),i){const s=Hh(t,n),a=e[nt],o=$l(a,n[ir]);null!==o&&function Tj(n,e,t,i,r,s){i[on]=r,i[Qn]=e,N3(n,i,t,1,r,s)}(r,n[Qn],a,e,o,s)}}let U1=(()=>{class e{}return e.__NG_ELEMENT_ID__=ZX,e})();function ZX(){return Jw(Dt(),q())}const KX=U1,Zw=class extends KX{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return eo(this._hostTNode,this._hostLView)}get injector(){return new gi(this._hostTNode,this._hostLView)}get parentInjector(){const e=Al(this._hostTNode,this._hostLView);if(Z5(e)){const t=w3(e,this._hostLView),i=C3(e);return new gi(t[oe].data[i+8],t)}return new gi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Kw(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-cn}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(o,r,S6(this._hostTNode,null)),o}createComponent(e,t,i,r,s){const a=e&&!function b3(n){return"function"==typeof n}(e);let o;if(a)o=t;else{const p=t||{};o=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const c=a?e:new W3(gt(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const m=(a?l:this.parentInjector).get(m1,null);m&&(s=m)}gt(c.componentType??{});const d=c.create(l,r,null,s);return this.insertImpl(d.hostView,o,S6(this._hostTNode,null)),d}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function RG(n){return ti(n[qt])}(r)){const o=this.indexOf(e);if(-1!==o)this.detach(o);else{const c=r[qt],l=new Zw(c,c[Qn],c[qt]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;return ho(a,r,s,i),e.attachToViewContainerRef(),Zy(bd(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Kw(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=V3(this._lContainer,t);i&&(Ll(bd(this._lContainer),t),Ah(i[oe],i))}detach(e){const t=this._adjustIndex(e,-1),i=V3(this._lContainer,t);return i&&null!=Ll(bd(this._lContainer),t)?new G3(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function Kw(n){return n[8]}function bd(n){return n[8]||(n[8]=[])}function Jw(n,e){let t;const i=e[n.index];return ti(i)?t=i:(t=function $C(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}(i,e,null,n),e[n.index]=t,u6(e,t)),Qw(t,e,n,i),new Zw(t,n,e)}let Qw=function tx(n,e,t,i){if(n[ir])return;let r;r=8&t.type?Bt(i):function JX(n,e){const t=n[nt],i=t.createComment(""),r=Li(e,n);return Cs(t,$l(t,r),i,function Rj(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[ir]=r};function D2(n,e,t,i){const r=q(),s=Ct(),a=Xe+n,o=r[nt],c=s.firstCreatePass?function WY(n,e,t,i,r,s){const a=e.consts,c=to(e,n,2,i,sr(a,r));return function ad(n,e,t,i){if(wy()){const r=null===i?null:{"":-1},s=function sq(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const a=t[s];if(GM(e,a.selectors,!1))if(i||(i=[]),k1(a))if(null!==a.findHostDirectiveDefs){const o=[];r=r||new Map,a.findHostDirectiveDefs(a,o,r),i.unshift(...o,a),od(n,e,o.length)}else i.unshift(a),od(n,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return null===i?null:[i,r]}(n,t);let a,o;null===s?a=o=null:[a,o]=s,null!==a&&GC(n,e,t,a,r,o),r&&function aq(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ue(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=a3(t.mergedAttrs,t.attrs)}(e,t,c,sr(a,s)),null!==c.attrs&&f6(c,c.attrs,!1),null!==c.mergedAttrs&&f6(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(a,s,r,e,t,i):s.data[a],l=px(s,r,c,o,e,n);r[a]=l;const u=dl(c);return ar(c,!0),K_(o,l,c),32!=(32&c.flags)&&_l()&&ql(s,r,l,c),0===function kG(){return Ye.lFrame.elementDepthCount}()&&ni(l,r),function OG(){Ye.lFrame.elementDepthCount++}(),u&&(function id(n,e,t){wy()&&(function iq(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;ps(t)&&function uq(n,e,t){const i=Li(e,n),r=OC(t);let a=16;t.signals?a=4096:t.onPush&&(a=64);const o=u6(n,l6(n,r,null,a,i,e,null,n[Ta].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Sl(t,e),ni(i,e);const a=t.initialInputs;for(let o=r;o<s;o++){const c=n.data[o],l=Ms(e,n,o,t);ni(l,e),null!==a&&fq(0,o-r,l,c,0,a),k1(c)&&($i(t.index,e)[Ut]=Ms(e,n,o,t))}}(n,e,t,Li(t,e)),64==(64&t.flags)&&WC(n,e,t))}(s,r,c),nd(s,c,r)),null!==i&&function rd(n,e,t=Li){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const a=i[s+1],o=-1===a?t(e,n):n[a];n[r++]=o}}}(r,c),D2}function Ss(){let n=Dt();U5()?function B5(){Ye.lFrame.isParent=!1}():(n=n.parent,ar(n,!1));const e=n;(function UG(n){return Ye.skipHydrationRootTNode===n})(e)&&function jG(){Ye.skipHydrationRootTNode=null}(),function FG(){Ye.lFrame.elementDepthCount--}();const t=Ct();return t.firstCreatePass&&(Cl(t,n),H5(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function oW(n){return 0!=(8&n.flags)}(e)&&gd(t,e,q(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function cW(n){return 0!=(16&n.flags)}(e)&&gd(t,e,q(),e.stylesWithoutHost,!1),Ss}function Mo(n,e,t,i){return D2(n,e,t,i),Ss(),Mo}let px=(n,e,t,i,r,s)=>(A2(!0),jl(i,r,function Ny(){return Ye.lFrame.currentNamespace}()));const _o="en-US";let Cx=_o;function D6(n){return!!n&&"function"==typeof n.then}function $x(n){return!!n&&"function"==typeof n.subscribe}function o4(n,e,t,i){const r=q(),s=Ct(),a=Dt();return function Xx(n,e,t,i,r,s,a){const o=dl(i),l=n.firstCreatePass&&YC(n),u=e[Ut],f=XC(e);let h=!0;if(3&i.type||a){const m=Li(i,e),v=a?a(m):m,g=f.length,M=a?_=>a(Bt(_[i.index])):i.index;let y=null;if(!a&&o&&(y=function qZ(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const a=r[s];if(a===t&&r[s+1]===i){const o=e[Ea],c=r[s+2];return o.length>c?o[c]:null}"string"==typeof a&&(s+=2)}return null}(n,e,r,i.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,h=!1;else{s=Zx(i,e,u,s,!1);const _=t.listen(v,r,s);f.push(s,_),l&&l.push(r,M,g,g+1)}}else s=Zx(i,e,u,s,!1);const d=i.outputs;let p;if(h&&null!==d&&(p=d[r])){const m=p.length;if(m)for(let v=0;v<m;v+=2){const C=e[p[v]][p[v+1]].subscribe(s),b=f.length;f.push(s,C),l&&l.push(r,i.index,b,-(b+1))}}}(s,r,r[nt],a,n,e,i),o4}function Yx(n,e,t,i){try{return rr(6,e,t),!1!==t(i)}catch(r){return KC(n,r),!1}finally{rr(7,e,t)}}function Zx(n,e,t,i,r){return function s(a){if(a===Function)return i;F3(n.componentOffset>-1?$i(n.index,e):e);let c=Yx(e,t,i,a),l=s.__ngNextListenerFn__;for(;l;)c=Yx(e,t,l,a)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&a.preventDefault(),c}}function Od(n,e,t){return Fd(n,"",e,"",t),Od}function Fd(n,e,t,i,r){const s=q(),a=function io(n,e,t,i){return bn(n,or(),t)?e+et(t)+i:st}(s,e,t,i);return a!==st&&function Yi(n,e,t,i,r,s,a,o){const c=Li(e,t);let u,l=e.inputs;!o&&null!=l&&(u=l[i])?(ud(n,t,u,i,r),ps(e)&&function Q$(n,e){const t=$i(e,n);16&t[tt]||(t[tt]|=64)}(t,e.index)):3&e.type&&(i=function J$(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=a?a(r,e.value||"",i):r,s.setProperty(c,i,r))}(Ct(),Xt(),s,n,a,s[nt],r,!1),Fd}let gb=(n,e,t,i,r)=>(A2(!0),function Wl(n,e){return n.createText(e)}(e[nt],i));class Es{}class Eb{}class $d extends Es{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new iw(this);const r=Jn(e);this._bootstrapComponents=Xi(r.bootstrap),this._r3Injector=d_(e,t,[{provide:Es,useValue:this},{provide:i6,useValue:this.componentFactoryResolver},...i],xn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class qd extends Eb{constructor(e){super(),this.moduleType=e}create(e){return new $d(this.moduleType,e,[])}}class Tb extends Es{constructor(e){super(),this.componentFactoryResolver=new iw(this),this.instance=null;const t=new Pl([...e.providers,{provide:Es,useValue:this},{provide:i6,useValue:this.componentFactoryResolver}],e.parent||Rl(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Xd(n,e,t=null){return new Tb({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let vK=(()=>{var n;class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const r=r_(0,i.type),s=r.length>0?Xd([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}}return(n=e).\u0275prov=Ae({token:n,providedIn:"environment",factory:()=>new n(be(m1))}),e})();function Lb(n){n.getStandaloneInjector=e=>e.get(vK).getOrCreateStandaloneInjector(n)}function jK(){return this._results[Symbol.iterator]()}class Zd{get changes(){return this._changes||(this._changes=new vi)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Zd.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=jK)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function Hi(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function wW(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Br=(()=>{class e{}return e.__NG_ELEMENT_ID__=XK,e})();const $K=Br,qK=class extends $K{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function K3(n,e,t,i){const r=e.tView,o=l6(n,r,t,4096&n[tt]?4096:16,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null);o[l3]=n[e.index];const l=n[nr];return null!==l&&(o[nr]=l.createEmbeddedView(r)),fd(r,o,t),o}(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:i});return new G3(r)}};function XK(){return R6(Dt(),q())}function R6(n,e){return 4&n.type?new qK(e,n,eo(n,e)):null}class Kd{constructor(e){this.queryList=e,this.matches=null}clone(){return new Kd(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jd{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const a=t.getByIndex(s);r.push(this.queries[a.indexInDeclarationView].clone())}return new Jd(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Xb(e,t).matches&&this.queries[t].setDirty()}}class Bb{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class Qd{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Qd(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class e7{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new e7(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,YK(t,s)),this.matchTNodeWithReadOption(e,t,El(t,e,s,!1,!1))}else i===Br?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,El(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===z2||r===U1||r===Br&&4&t.type)this.addMatch(t.index,-2);else{const s=El(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function YK(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function KK(n,e,t,i){return-1===t?function ZK(n,e){return 11&n.type?eo(n,e):4&n.type?R6(n,e):null}(e,n):-2===t?function JK(n,e,t){return t===z2?eo(e,n):t===Br?R6(e,n):t===U1?Jw(e,n):void 0}(n,e,i):Ms(n,n[oe],t,e)}function Gb(n,e,t,i){const r=e[nr].queries[i];if(null===r.matches){const s=n.data,a=t.matches,o=[];for(let c=0;c<a.length;c+=2){const l=a[c];o.push(l<0?null:KK(e,s[l],a[c+1],t.metadata.read))}r.matches=o}return r.matches}function t7(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const a=Gb(n,e,r,t);for(let o=0;o<s.length;o+=2){const c=s[o];if(c>0)i.push(a[o/2]);else{const l=s[o+1],u=e[-c];for(let f=cn;f<u.length;f++){const h=u[f];h[l3]===h[qt]&&t7(h[oe],h,l,i)}if(null!==u[za]){const f=u[za];for(let h=0;h<f.length;h++){const d=f[h];t7(d[oe],d,l,i)}}}}}return i}function n7(n){const e=q(),t=Ct(),i=Ey();j5(i+1);const r=Xb(t,i);if(n.dirty&&function NG(n){return 4==(4&n[tt])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?t7(t,e,i,[]):Gb(t,e,r,i);n.reset(s,b$),n.notifyOnChanges()}return!0}return!1}function Wb(n,e,t){const i=Ct();i.firstCreatePass&&(function qb(n,e,t){null===n.queries&&(n.queries=new Qd),n.queries.track(new e7(e,t))}(i,new Bb(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),function $b(n,e,t){const i=new Zd(4==(4&t));(function Y$(n,e,t,i){const r=XC(e);r.push(t),n.firstCreatePass&&YC(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[nr]&&(e[nr]=new Jd),e[nr].queries.push(new Kd(i))}(i,q(),e)}function Xb(n,e){return n.queries.getByIndex(e)}const c7=new Ie("Application Initializer");let l7=(()=>{var n;class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=_e(c7,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const s of this.appInits){const a=s();if(D6(a))i.push(a);else if($x(a)){const o=new Promise((c,l)=>{a.subscribe({complete:c,error:l})});i.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),0===i.length&&r(),this.initialized=!0}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),uS=(()=>{var n;class e{log(i){console.log(i)}warn(i){console.warn(i)}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})();const Gr=new Ie("LocaleId",{providedIn:"root",factory:()=>_e(Gr,mt.Optional|mt.SkipSelf)||function wJ(){return typeof $localize<"u"&&$localize.locale||_o}()});let fS=(()=>{var n;class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new h1(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class SJ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let hS=(()=>{var n;class e{compileModuleSync(i){return new qd(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const r=this.compileModuleSync(i),a=Xi(Jn(i).declarations).reduce((o,c)=>{const l=gt(c);return l&&o.push(new W3(l)),o},[]);return new SJ(r,a)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const gS=new Ie(""),O6=new Ie("");let p7,h7=(()=>{var n;class e{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,p7||(function jJ(n){p7=n}(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ht.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(i)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let a=-1;r&&r>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:a,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}}return(n=e).\u0275fac=function(i){return new(i||n)(be(Ht),be(d7),be(O6))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})(),d7=(()=>{var n;class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return p7?.findTestabilityInTree(this,i,r)??null}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})(),N2=null;const vS=new Ie("AllowMultipleToken"),m7=new Ie("PlatformDestroyListeners"),g7=new Ie("appBootstrapListener");class yS{constructor(e,t){this.name=e,this.token=t}}function CS(n,e,t=[]){const i=`Platform: ${e}`,r=new Ie(i);return(s=[])=>{let a=v7();if(!a||a.injector.get(vS,!1)){const o=[...t,...s,{provide:r,useValue:!0}];n?n(o):function XJ(n){if(N2&&!N2.get(vS,!1))throw new ue(400,!1);(function MS(){!function CG(n){oy=n}(()=>{throw new ue(600,!1)})})(),N2=n;const e=n.get(xS);(function _S(n){n.get(m_,null)?.forEach(t=>t())})(n)}(function wS(n=[],e){return g1.create({name:e,providers:[{provide:ch,useValue:"platform"},{provide:m7,useValue:new Set([()=>N2=null])},...n]})}(o,i))}return function ZJ(n){const e=v7();if(!e)throw new ue(401,!1);return e}()}}function v7(){return N2?.get(xS)??null}let xS=(()=>{var n;class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,r){const s=function KJ(n="zone.js",e){return"noop"===n?new I$:"zone.js"===n?new Ht(e):n}(r?.ngZone,function bS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return s.run(()=>{const a=function gK(n,e,t){return new $d(n,e,t)}(i.moduleType,this.injector,function LS(n){return[{provide:Ht,useFactory:n},{provide:E3,multi:!0,useFactory:()=>{const e=_e(QJ,{optional:!0});return()=>e.initialize()}},{provide:TS,useFactory:JJ},{provide:_C,useFactory:CC}]}(()=>s)),o=a.injector.get(lr,null);return s.runOutsideAngular(()=>{const c=s.onError.subscribe({next:l=>{o.handleError(l)}});a.onDestroy(()=>{F6(this._modules,a),c.unsubscribe()})}),function SS(n,e,t){try{const i=t();return D6(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,s,()=>{const c=a.injector.get(l7);return c.runInitializers(),c.donePromise.then(()=>(function wx(n){d1(n,"Expected localeId to be defined"),"string"==typeof n&&(Cx=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Gr,_o)||_o),this._moduleDoBootstrap(a),a))})})}bootstrapModule(i,r=[]){const s=AS({},r);return function $J(n,e,t){const i=new qd(t);return Promise.resolve(i)}(0,0,i).then(a=>this.bootstrapModuleFactory(a,s))}_moduleDoBootstrap(i){const r=i.injector.get(xo);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(s=>r.bootstrap(s));else{if(!i.instance.ngDoBootstrap)throw new ue(-403,!1);i.instance.ngDoBootstrap(r)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ue(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const i=this._injector.get(m7,null);i&&(i.forEach(r=>r()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(n=e).\u0275fac=function(i){return new(i||n)(be(g1))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})();function AS(n,e){return Array.isArray(e)?e.reduce(AS,n):{...n,...e}}let xo=(()=>{var n;class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=_e(TS),this.zoneIsStable=_e(_C),this.componentTypes=[],this.components=[],this.isStable=_e(fS).hasPendingTasks.pipe(D1(i=>i?Ke(!1):this.zoneIsStable),function zB(n,e=y2){return n=n??VB,Vn((t,i)=>{let r,s=!0;t.subscribe(Dn(i,a=>{const o=e(a);(s||!n(r,o))&&(s=!1,r=o,i.next(a))}))})}(),AM()),this._injector=_e(m1)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){const s=i instanceof dC;if(!this._injector.get(l7).done)throw!s&&function x2(n){const e=gt(n)||Nn(n)||jn(n);return null!==e&&e.standalone}(i),new ue(405,!1);let o;o=s?i:this._injector.get(i6).resolveComponentFactory(i),this.componentTypes.push(o.componentType);const c=function qJ(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Es),u=o.create(g1.NULL,[],r||o.selector,c),f=u.location.nativeElement,h=u.injector.get(gS,null);return h?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),F6(this.components,u),h?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ue(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){const r=i;F6(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const r=this._injector.get(g7,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>F6(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ue(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function F6(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const TS=new Ie("",{providedIn:"root",factory:()=>_e(lr).handleError.bind(void 0)});function JJ(){const n=_e(Ht),e=_e(lr);return t=>n.runOutsideAngular(()=>e.handleError(t))}let QJ=(()=>{var n;class e{constructor(){this.zone=_e(Ht),this.applicationRef=_e(xo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const aQ=CS(null,"core",[]);let oQ=(()=>{var n;class e{constructor(i){}}return(n=e).\u0275fac=function(i){return new(i||n)(be(xo))},n.\u0275mod=tr({type:n}),n.\u0275inj=N1({}),e})(),b7=null;function bo(){return b7}class EQ{}const Ni=new Ie("DocumentToken");let S7=(()=>{var n;class e{historyGo(i){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:function(){return _e(LQ)},providedIn:"platform"}),e})();const TQ=new Ie("Location Initialized");let LQ=(()=>{var n;class e extends S7{constructor(){super(),this._doc=_e(Ni),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bo().getBaseHref(this._doc)}onPopState(i){const r=bo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){const r=bo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:function(){return new n},providedIn:"platform"}),e})();function A7(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function US(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Wr(n){return n&&"?"!==n[0]?"?"+n:n}let Ls=(()=>{var n;class e{historyGo(i){throw new Error("Not implemented")}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:function(){return _e(GS)},providedIn:"root"}),e})();const BS=new Ie("appBaseHref");let GS=(()=>{var n;class e extends Ls{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??_e(Ni).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return A7(this._baseHref,i)}path(i=!1){const r=this._platformLocation.pathname+Wr(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,a){const o=this.prepareExternalUrl(s+Wr(a));this._platformLocation.pushState(i,r,o)}replaceState(i,r,s,a){const o=this.prepareExternalUrl(s+Wr(a));this._platformLocation.replaceState(i,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(n=e).\u0275fac=function(i){return new(i||n)(be(S7),be(BS,8))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),HQ=(()=>{var n;class e extends Ls{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){const r=A7(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,s,a){let o=this.prepareExternalUrl(s+Wr(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(i,r,o)}replaceState(i,r,s,a){let o=this.prepareExternalUrl(s+Wr(a));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}}return(n=e).\u0275fac=function(i){return new(i||n)(be(S7),be(BS,8))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})(),h4=(()=>{var n;class e{constructor(i){this._subject=new vi,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;const r=this._locationStrategy.getBaseHref();this._basePath=function DQ(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(US(WS(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Wr(r))}normalize(i){return e.stripTrailingSlash(function VQ(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,WS(i)))}prepareExternalUrl(i){return i&&"/"!==i[0]&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Wr(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Wr(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}}return(n=e).normalizeQueryParams=Wr,n.joinWithSlash=A7,n.stripTrailingSlash=US,n.\u0275fac=function(i){return new(i||n)(be(Ls))},n.\u0275prov=Ae({token:n,factory:function(){return function zQ(){return new h4(be(Ls))}()},providedIn:"root"}),e})();function WS(n){return n.replace(/\/index.html$/,"")}let sA=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275mod=tr({type:n}),n.\u0275inj=N1({}),e})();function oA(n){return"server"===n}let Kee=(()=>{var n;class e{}return(n=e).\u0275prov=Ae({token:n,providedIn:"root",factory:()=>new Jee(be(Ni),window)}),e})();class Jee{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Qee(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const a=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(a)return a}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class xte extends EQ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class G7 extends xte{static makeCurrent(){!function AQ(n){b7||(b7=n)}(new G7)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function bte(){return g4=g4||document.querySelector("base"),g4?g4.getAttribute("href"):null}();return null==t?null:function Ste(n){iu=iu||document.createElement("a"),iu.setAttribute("href",n);const e=iu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){g4=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function vee(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let iu,g4=null,Ete=(()=>{var n;class e{build(){return new XMLHttpRequest}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})();const W7=new Ie("EventManagerPlugins");let hA=(()=>{var n;class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(a=>a.supports(i)),!r)throw new ue(5101,!1);return this._eventNameToPlugin.set(i,r),r}}return(n=e).\u0275fac=function(i){return new(i||n)(be(W7),be(Ht))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})();class dA{constructor(e){this._doc=e}}const j7="ng-app-id";let pA=(()=>{var n;class e{constructor(i,r,s,a={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=oA(a),this.resetHostNodes()}addStyles(i){for(const r of i)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}disableStyles(i){for(const r of i)0===this.changeUsageCount(r,-1)&&this.visitStyleElement(r,mA)}visitStyleElement(i,r){this.styleRef.get(i)?.elements?.forEach(r)}ngOnDestroy(){const i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(const r of this.getAllStyles())this.visitStyleElement(r,s=>s.remove()),this.styleRef.delete(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(const r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(const r of this.hostNodes)this.addStyleToHost(r,i)}collectServerRenderedStyles(){const i=this.doc.head?.querySelectorAll(`style[${j7}="${this.appId}"]`);if(i?.length){const r=new Map;return i.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){const s=this.styleRef;if(s.has(i)){const o=s.get(i);return o.usage=gA(o.usage+r),o.usage}const a=gA(r);return s.set(i,{usage:a,elements:[]}),a}getStyleElement(i,r){const s=this.styleNodesInDOM,a=s?.get(r);if(a?.parentNode===i)return s.delete(r),a.removeAttribute(j7),a;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(j7,this.appId),o}}addStyleToHost(i,r){const s=this.getStyleElement(i,r);i.appendChild(s);const a=this.styleRef,o=a.get(r);o?(0===o.usage?mA(s):function Tte(n){n.disabled=!1}(s),o.elements.push(s)):a.set(r,{elements:[s],usage:1})}resetHostNodes(){const i=this.hostNodes;i.clear(),i.add(this.doc.head)}}return(n=e).\u0275fac=function(i){return new(i||n)(be(Ni),be(Ol),be(g_,8),be($a))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})();function mA(n){n.disabled=!0}function gA(n){return n<0?0:n}const $7={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},q7=/%COMP%/g,Vte=new Ie("",{providedIn:"root",factory:()=>!0});function MA(n,e){return e.map(t=>t.replace(q7,n))}let yA=(()=>{var n;class e{constructor(i,r,s,a,o,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.disableStylesOnCompDestroy=a,this.doc=o,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=oA(c),this.defaultRenderer=new X7(i,o,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===I1.ShadowDom&&(r={...r,encapsulation:I1.Emulated});const s=this.getOrCreateRenderer(i,r);return s instanceof CA?s.applyToHost(i):s instanceof Y7&&s.applyStyles(),s}getOrCreateRenderer(i,r){const s=this.rendererByCompId;let a=s.get(r.id);if(!a){const o=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.disableStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case I1.Emulated:a=new CA(l,u,r,this.appId,f,o,c,h);break;case I1.ShadowDom:return new Rte(l,u,i,r,o,c,this.nonce,h);default:a=new Y7(l,u,r,f,o,c,h)}s.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}}return(n=e).\u0275fac=function(i){return new(i||n)(be(hA),be(pA),be(Ol),be(Vte),be(Ni),be($a),be(Ht),be(g_))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})();class X7{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS($7[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(_A(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(_A(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new ue(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=$7[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=$7[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(L2.DashCase|L2.Important)?e.style.setProperty(t,i,r&L2.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&L2.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=bo().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function _A(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Rte extends X7{constructor(e,t,i,r,s,a,o,c){super(e,s,a,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=MA(r.id,r.styles);for(const u of l){const f=document.createElement("style");o&&f.setAttribute("nonce",o),f.textContent=u,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Y7 extends X7{constructor(e,t,i,r,s,a,o){super(e,s,a,o),this.sharedStylesHost=t,this.disableStylesOnCompDestroy=r,this.styles=i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.disableStylesOnCompDestroy&&this.sharedStylesHost.disableStyles(this.styles)}}class CA extends Y7{constructor(e,t,i,r,s,a,o,c){super(e,t,i,s,a,o,c);const l=r+"-"+i.id;this.styles=MA(l,i.styles),this.contentAttr=function Dte(n){return"_ngcontent-%COMP%".replace(q7,n)}(l),this.hostAttr=function Nte(n){return"_nghost-%COMP%".replace(q7,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Pte=(()=>{var n;class e extends dA{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}}return(n=e).\u0275fac=function(i){return new(i||n)(be(Ni))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})();const wA=["alt","control","meta","shift"],kte={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ote={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Fte=(()=>{var n;class e extends dA{constructor(i){super(i)}supports(i){return null!=e.parseEventName(i)}addEventListener(i,r,s){const a=e.parseEventName(r),o=e.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bo().onAndCancel(i,a.domEventName,o))}static parseEventName(i){const r=i.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const a=e._normalizeKey(r.pop());let o="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),o="code."),wA.forEach(u=>{const f=r.indexOf(u);f>-1&&(r.splice(f,1),o+=u+".")}),o+=a,0!=r.length||0===a.length)return null;const l={};return l.domEventName=s,l.fullKey=o,l}static matchEventFullKeyCode(i,r){let s=kte[i.key]||i.key,a="";return r.indexOf("code.")>-1&&(s=i.code,a="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),wA.forEach(o=>{o!==s&&(0,Ote[o])(i)&&(a+=o+".")}),a+=s,a===r)}static eventCallback(i,r,s){return a=>{e.matchEventFullKeyCode(a,i)&&s.runGuarded(()=>r(a))}}static _normalizeKey(i){return"esc"===i?"escape":i}}return(n=e).\u0275fac=function(i){return new(i||n)(be(Ni))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})();const bA=[{provide:$a,useValue:"browser"},{provide:m_,useValue:function Ute(){G7.makeCurrent()},multi:!0},{provide:Ni,useFactory:function Gte(){return function ij(n){ph=n}(document),document},deps:[]}],Wte=CS(aQ,"browser",bA),jte=new Ie(""),SA=[{provide:O6,useClass:class Ate{addToWindow(e){Ft.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new ue(5103,!1);return s},Ft.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ft.getAllAngularRootElements=()=>e.getAllRootElements(),Ft.frameworkStabilizers||(Ft.frameworkStabilizers=[]),Ft.frameworkStabilizers.push(i=>{const r=Ft.getAllAngularTestabilities();let s=r.length,a=!1;const o=function(c){a=a||c,s--,0==s&&i(a)};r.forEach(c=>{c.whenStable(o)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?bo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:gS,useClass:h7,deps:[Ht,d7,O6]},{provide:h7,useClass:h7,deps:[Ht,d7,O6]}],AA=[{provide:ch,useValue:"root"},{provide:lr,useFactory:function Bte(){return new lr},deps:[]},{provide:W7,useClass:Pte,multi:!0,deps:[Ni,Ht,$a]},{provide:W7,useClass:Fte,multi:!0,deps:[Ni]},yA,pA,hA,{provide:mC,useExisting:yA},{provide:class ete{},useClass:Ete,deps:[]},[]];let $te=(()=>{var n;class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:Ol,useValue:i.appId}]}}}return(n=e).\u0275fac=function(i){return new(i||n)(be(jte,12))},n.\u0275mod=tr({type:n}),n.\u0275inj=N1({providers:[...AA,...SA],imports:[sA,oQ]}),e})(),Z7=(()=>{var n;class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}}return(n=e).\u0275fac=function(i){return new(i||n)(be(Ni))},n.\u0275prov=Ae({token:n,factory:function(i){let r=null;return r=i?new i:function Xte(){return new Z7(be(Ni))}(),r},providedIn:"root"}),e})();function HA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ee(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?HA(Object(t),!0).forEach(function(i){Pn(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):HA(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ru(n){return(ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function zA(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Pn(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function J7(n,e){return function ine(n){if(Array.isArray(n))return n}(n)||function sne(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var a,o,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(c){s=!0,o=c}finally{try{!r&&null!=t.return&&t.return()}finally{if(s)throw o}}return i}}(n,e)||VA(n,e)||function one(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M4(n){return function nne(n){if(Array.isArray(n))return Q7(n)}(n)||function rne(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||VA(n)||function ane(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VA(n,e){if(n){if("string"==typeof n)return Q7(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q7(n,e)}}function Q7(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}typeof window<"u"&&window;var DA=function(){},ep={},NA={},IA=null,RA={mark:DA,measure:DA};try{typeof window<"u"&&(ep=window),typeof document<"u"&&(NA=document),typeof MutationObserver<"u"&&(IA=MutationObserver),typeof performance<"u"&&(RA=performance)}catch{}var ou,cu,lu,uu,fu,PA=(ep.navigator||{}).userAgent,kA=void 0===PA?"":PA,R2=ep,Yt=NA,OA=IA,au=RA,qr=!!Yt.documentElement&&!!Yt.head&&"function"==typeof Yt.addEventListener&&"function"==typeof Yt.createElement,FA=~kA.indexOf("MSIE")||~kA.indexOf("Trident/"),Xr="___FONT_AWESOME___",UA="fa",BA="svg-inline--fa",Hs="data-fa-i2svg",np="data-fa-pseudo-element",lne="data-fa-pseudo-element-pending",ip="data-prefix",rp="data-icon",GA="fontawesome-i2svg",une="async",fne=["HTML","HEAD","STYLE","SCRIPT"],WA=function(){try{return!0}catch{return!1}}(),Zt="classic",un="sharp",sp=[Zt,un];function y4(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[Zt]}})}var _4=y4((Pn(ou={},Zt,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),Pn(ou,un,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),ou)),C4=y4((Pn(cu={},Zt,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Pn(cu,un,{solid:"fass",regular:"fasr",light:"fasl"}),cu)),w4=y4((Pn(lu={},Zt,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Pn(lu,un,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),lu)),hne=y4((Pn(uu={},Zt,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Pn(uu,un,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),uu)),dne=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,jA="fa-layers-text",pne=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,mne=y4((Pn(fu={},Zt,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Pn(fu,un,{900:"fass",400:"fasr",300:"fasl"}),fu)),$A=[1,2,3,4,5,6,7,8,9,10],gne=$A.concat([11,12,13,14,15,16,17,18,19,20]),vne=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],zs={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},x4=new Set;Object.keys(C4[Zt]).map(x4.add.bind(x4)),Object.keys(C4[un]).map(x4.add.bind(x4));var Mne=[].concat(sp,M4(x4),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",zs.GROUP,zs.SWAP_OPACITY,zs.PRIMARY,zs.SECONDARY]).concat($A.map(function(n){return"".concat(n,"x")})).concat(gne.map(function(n){return"w-".concat(n)})),b4=R2.FontAwesomeConfig||{};Yt&&"function"==typeof Yt.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=J7(n,2),i=e[1],r=function _ne(n){return""===n||"false"!==n&&("true"===n||n)}(function yne(n){var e=Yt.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(b4[i]=r)});var qA={styleDefault:"solid",familyDefault:"classic",cssPrefix:UA,replacementClass:BA,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};b4.familyPrefix&&(b4.cssPrefix=b4.familyPrefix);var Ao=Ee(Ee({},qA),b4);Ao.autoReplaceSvg||(Ao.observeMutations=!1);var Ve={};Object.keys(qA).forEach(function(n){Object.defineProperty(Ve,n,{enumerable:!0,set:function(t){Ao[n]=t,S4.forEach(function(i){return i(Ve)})},get:function(){return Ao[n]}})}),Object.defineProperty(Ve,"familyPrefix",{enumerable:!0,set:function(e){Ao.cssPrefix=e,S4.forEach(function(t){return t(Ve)})},get:function(){return Ao.cssPrefix}}),R2.FontAwesomeConfig=Ve;var S4=[],pr={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},bne="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function A4(){for(var n=12,e="";n-- >0;)e+=bne[62*Math.random()|0];return e}function Eo(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function ap(n){return n.classList?Eo(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function XA(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function hu(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function op(n){return n.size!==pr.size||n.x!==pr.x||n.y!==pr.y||n.rotate!==pr.rotate||n.flipX||n.flipY}var Tne=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function YA(){var n=UA,e=BA,t=Ve.cssPrefix,i=Ve.replacementClass,r=Tne;if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),a=new RegExp("\\--".concat(n,"\\-"),"g"),o=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(a,"--".concat(t,"-")).replace(o,".".concat(i))}return r}var ZA=!1;function cp(){Ve.autoAddCss&&!ZA&&(function xne(n){if(n&&qr){var e=Yt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=Yt.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],a=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(i=s)}Yt.head.insertBefore(e,i)}}(YA()),ZA=!0)}var Lne={mixout:function(){return{dom:{css:YA,insertCss:cp}}},hooks:function(){return{beforeDOMElementCreation:function(){cp()},beforeI2svg:function(){cp()}}}},Yr=R2||{};Yr[Xr]||(Yr[Xr]={}),Yr[Xr].styles||(Yr[Xr].styles={}),Yr[Xr].hooks||(Yr[Xr].hooks={}),Yr[Xr].shims||(Yr[Xr].shims=[]);var j1=Yr[Xr],KA=[],du=!1;function E4(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,s=void 0===r?[]:r;return"string"==typeof n?XA(n):"<".concat(e," ").concat(function Sne(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(XA(n[t]),'" ')},"").trim()}(i),">").concat(s.map(E4).join(""),"</").concat(e,">")}function JA(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}qr&&((du=(Yt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Yt.readyState))||Yt.addEventListener("DOMContentLoaded",function n(){Yt.removeEventListener("DOMContentLoaded",n),du=1,KA.map(function(e){return e()})}));var lp=function(e,t,i,r){var c,l,u,s=Object.keys(e),a=s.length,o=void 0!==r?function(e,t){return function(i,r,s,a){return e.call(t,i,r,s,a)}}(t,r):t;for(void 0===i?(c=1,u=e[s[0]]):(c=0,u=i);c<a;c++)u=o(u,e[l=s[c]],l,e);return u};function up(n){var e=function Dne(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function QA(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function fp(n,e){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==i&&i,s=QA(e);"function"!=typeof j1.hooks.addPack||r?j1.styles[n]=Ee(Ee({},j1.styles[n]||{}),s):j1.hooks.addPack(n,QA(e)),"fas"===n&&fp("fa",e)}var pu,mu,gu,To=j1.styles,Ine=j1.shims,Rne=(Pn(pu={},Zt,Object.values(w4[Zt])),Pn(pu,un,Object.values(w4[un])),pu),hp=null,eE={},tE={},nE={},iE={},rE={},Pne=(Pn(mu={},Zt,Object.keys(_4[Zt])),Pn(mu,un,Object.keys(_4[un])),mu);var sE=function(){var e=function(s){return lp(To,function(a,o,c){return a[c]=lp(o,s,{}),a},{})};eE=e(function(r,s,a){return s[3]&&(r[s[3]]=a),s[2]&&s[2].filter(function(c){return"number"==typeof c}).forEach(function(c){r[c.toString(16)]=a}),r}),tE=e(function(r,s,a){return r[a]=a,s[2]&&s[2].filter(function(c){return"string"==typeof c}).forEach(function(c){r[c]=a}),r}),rE=e(function(r,s,a){var o=s[2];return r[a]=a,o.forEach(function(c){r[c]=a}),r});var t="far"in To||Ve.autoFetchSvg,i=lp(Ine,function(r,s){var a=s[0],o=s[1],c=s[2];return"far"===o&&!t&&(o="fas"),"string"==typeof a&&(r.names[a]={prefix:o,iconName:c}),"number"==typeof a&&(r.unicodes[a.toString(16)]={prefix:o,iconName:c}),r},{names:{},unicodes:{}});nE=i.names,iE=i.unicodes,hp=vu(Ve.styleDefault,{family:Ve.familyDefault})};function dp(n,e){return(eE[n]||{})[e]}function Vs(n,e){return(rE[n]||{})[e]}function aE(n){return nE[n]||{prefix:null,iconName:null}}function k2(){return hp}(function wne(n){S4.push(n)})(function(n){hp=vu(n.styleDefault,{family:Ve.familyDefault})}),sE();var pp=function(){return{prefix:null,iconName:null,rest:[]}};function vu(n){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,i=void 0===t?Zt:t;return C4[i][n]||C4[i][_4[i][n]]||(n in j1.styles?n:null)||null}var oE=(Pn(gu={},Zt,Object.keys(w4[Zt])),Pn(gu,un,Object.keys(w4[un])),gu);function Mu(n){var e,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==i&&i,s=(Pn(e={},Zt,"".concat(Ve.cssPrefix,"-").concat(Zt)),Pn(e,un,"".concat(Ve.cssPrefix,"-").concat(un)),e),a=null,o=Zt;(n.includes(s[Zt])||n.some(function(l){return oE[Zt].includes(l)}))&&(o=Zt),(n.includes(s[un])||n.some(function(l){return oE[un].includes(l)}))&&(o=un);var c=n.reduce(function(l,u){var f=function One(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function kne(n){return~Mne.indexOf(n)}(r)?null:r}(Ve.cssPrefix,u);if(To[u]?(u=Rne[o].includes(u)?hne[o][u]:u,a=u,l.prefix=u):Pne[o].indexOf(u)>-1?(a=u,l.prefix=vu(u,{family:o})):f?l.iconName=f:u!==Ve.replacementClass&&u!==s[Zt]&&u!==s[un]&&l.rest.push(u),!r&&l.prefix&&l.iconName){var h="fa"===a?aE(l.iconName):{},d=Vs(l.prefix,l.iconName);h.prefix&&(a=null),l.iconName=h.iconName||d||l.iconName,l.prefix=h.prefix||l.prefix,"far"===l.prefix&&!To.far&&To.fas&&!Ve.autoFetchSvg&&(l.prefix="fas")}return l},pp());return(n.includes("fa-brands")||n.includes("fab"))&&(c.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(c.prefix="fad"),!c.prefix&&o===un&&(To.fass||Ve.autoFetchSvg)&&(c.prefix="fass",c.iconName=Vs(c.prefix,c.iconName)||c.iconName),("fa"===c.prefix||"fa"===a)&&(c.prefix=k2()||"fas"),c}var Bne=function(){function n(){(function Qte(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function ene(n,e,t){e&&zA(n.prototype,e),t&&zA(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var a=r.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(o){t.definitions[o]=Ee(Ee({},t.definitions[o]||{}),a[o]),fp(o,a[o]);var c=w4[Zt][o];c&&fp(c,a[o]),sE()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var a=r[s],o=a.prefix,c=a.iconName,l=a.icon,u=l[2];t[o]||(t[o]={}),u.length>0&&u.forEach(function(f){"string"==typeof f&&(t[o][f]=l)}),t[o][c]=l}),t}}]),n}(),cE=[],Lo={},Ho={},Gne=Object.keys(Ho);function mp(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];return(Lo[n]||[]).forEach(function(a){e=a.apply(null,[e].concat(i))}),e}function Ds(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];(Lo[n]||[]).forEach(function(s){s.apply(null,t)})}function Zr(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Ho[n]?Ho[n].apply(null,e):void 0}function gp(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||k2();if(e)return e=Vs(t,e)||e,JA(lE.definitions,t,e)||JA(j1.styles,t,e)}var lE=new Bne,$ne={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return qr?(Ds("beforeI2svg",e),Zr("pseudoElements2svg",e),Zr("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===Ve.autoReplaceSvg&&(Ve.autoReplaceSvg=!0),Ve.observeMutations=!0,function zne(n){qr&&(du?setTimeout(n,0):KA.push(n))}(function(){Xne({autoReplaceSvgRoot:t}),Ds("watch",e)})}},qne={icon:function(e){if(null===e)return null;if("object"===ru(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Vs(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=vu(e[0]);return{prefix:i,iconName:Vs(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(Ve.cssPrefix,"-"))>-1||e.match(dne))){var r=Mu(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||k2(),iconName:Vs(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var s=k2();return{prefix:s,iconName:Vs(s,e)||e}}}},Ji={noAuto:function(){Ve.autoReplaceSvg=!1,Ve.observeMutations=!1,Ds("noAuto")},config:Ve,dom:$ne,parse:qne,library:lE,findIconDefinition:gp,toHtml:E4},Xne=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,i=void 0===t?Yt:t;(Object.keys(j1.styles).length>0||Ve.autoFetchSvg)&&qr&&Ve.autoReplaceSvg&&Ji.dom.i2svg({node:i})};function yu(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return E4(i)})}}),Object.defineProperty(n,"node",{get:function(){if(qr){var i=Yt.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function vp(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,a=n.transform,o=n.symbol,c=n.title,l=n.maskId,u=n.titleId,f=n.extra,h=n.watchable,d=void 0!==h&&h,p=i.found?i:t,m=p.width,v=p.height,g="fak"===r,M=[Ve.replacementClass,s?"".concat(Ve.cssPrefix,"-").concat(s):""].filter(function(w){return-1===f.classes.indexOf(w)}).filter(function(w){return""!==w||!!w}).concat(f.classes).join(" "),y={children:[],attributes:Ee(Ee({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:M,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(v)})},_=g&&!~f.classes.indexOf("fa-fw")?{width:"".concat(m/v*16*.0625,"em")}:{};d&&(y.attributes[Hs]=""),c&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(u||A4())},children:[c]}),delete y.attributes.title);var C=Ee(Ee({},y),{},{prefix:r,iconName:s,main:t,mask:i,maskId:l,transform:a,symbol:o,styles:Ee(Ee({},_),f.styles)}),b=i.found&&t.found?Zr("generateAbstractMask",C)||{children:[],attributes:{}}:Zr("generateAbstractIcon",C)||{children:[],attributes:{}},S=b.attributes;return C.children=b.children,C.attributes=S,o?function Zne(n){var t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,a=!0===s?"".concat(n.prefix,"-").concat(Ve.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Ee(Ee({},r),{},{id:a}),children:i}]}]}(C):function Yne(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,a=n.transform;if(op(a)&&t.found&&!i.found){var l={x:t.width/t.height/2,y:.5};r.style=hu(Ee(Ee({},s),{},{"transform-origin":"".concat(l.x+a.x/16,"em ").concat(l.y+a.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(C)}function uE(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,a=n.extra,o=n.watchable,c=void 0!==o&&o,l=Ee(Ee(Ee({},a.attributes),s?{title:s}:{}),{},{class:a.classes.join(" ")});c&&(l[Hs]="");var u=Ee({},a.styles);op(r)&&(u.transform=function Ene(n){var e=n.transform,t=n.width,r=n.height,s=void 0===r?16:r,a=n.startCentered,o=void 0!==a&&a,c="";return c+=o&&FA?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-s/2,"em) "):o?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(c+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var f=hu(u);f.length>0&&(l.style=f);var h=[];return h.push({tag:"span",attributes:l,children:[e]}),s&&h.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),h}var Mp=j1.styles;function yp(n){var e=n[0],t=n[1],s=J7(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(Ve.cssPrefix,"-").concat(zs.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ve.cssPrefix,"-").concat(zs.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Ve.cssPrefix,"-").concat(zs.PRIMARY),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var Jne={found:!1,width:512,height:512};function _p(n,e){var t=e;return"fa"===e&&null!==Ve.styleDefault&&(e=k2()),new Promise(function(i,r){if(Zr("missingIconAbstract"),"fa"===t){var a=aE(n)||{};n=a.iconName||n,e=a.prefix||e}if(n&&e&&Mp[e]&&Mp[e][n])return i(yp(Mp[e][n]));(function Qne(n,e){!WA&&!Ve.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(Ee(Ee({},Jne),{},{icon:Ve.showMissingIcons&&n&&Zr("missingIconAbstract")||{}}))})}var fE=function(){},Cp=Ve.measurePerformance&&au&&au.mark&&au.measure?au:{mark:fE,measure:fE},T4='FA "6.4.2"',hE=function(e){Cp.mark("".concat(T4," ").concat(e," ends")),Cp.measure("".concat(T4," ").concat(e),"".concat(T4," ").concat(e," begins"),"".concat(T4," ").concat(e," ends"))},wp={begin:function(e){return Cp.mark("".concat(T4," ").concat(e," begins")),function(){return hE(e)}},end:hE},_u=function(){};function dE(n){return"string"==typeof(n.getAttribute?n.getAttribute(Hs):null)}function rie(n){return Yt.createElementNS("http://www.w3.org/2000/svg",n)}function sie(n){return Yt.createElement(n)}function pE(n){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,i=void 0===t?"svg"===n.tag?rie:sie:t;if("string"==typeof n)return Yt.createTextNode(n);var r=i(n.tag);return Object.keys(n.attributes||[]).forEach(function(a){r.setAttribute(a,n.attributes[a])}),(n.children||[]).forEach(function(a){r.appendChild(pE(a,{ceFn:i}))}),r}var Cu={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(pE(r),t)}),null===t.getAttribute(Hs)&&Ve.keepOriginalSource){var i=Yt.createComment(function aie(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~ap(t).indexOf(Ve.replacementClass))return Cu.replace(e);var r=new RegExp("".concat(Ve.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(o,c){return c===Ve.replacementClass||c.match(r)?o.toSvg.push(c):o.toNode.push(c),o},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var a=i.map(function(o){return E4(o)}).join("\n");t.setAttribute(Hs,""),t.innerHTML=a}};function mE(n){n()}function gE(n,e){var t="function"==typeof e?e:_u;if(0===n.length)t();else{var i=mE;Ve.mutateApproach===une&&(i=R2.requestAnimationFrame||mE),i(function(){var r=function iie(){return!0===Ve.autoReplaceSvg?Cu.replace:Cu[Ve.autoReplaceSvg]||Cu.replace}(),s=wp.begin("mutate");n.map(r),s(),t()})}}var xp=!1;function vE(){xp=!0}function bp(){xp=!1}var wu=null;function ME(n){if(OA&&Ve.observeMutations){var e=n.treeCallback,t=void 0===e?_u:e,i=n.nodeCallback,r=void 0===i?_u:i,s=n.pseudoElementsCallback,a=void 0===s?_u:s,o=n.observeMutationsRoot,c=void 0===o?Yt:o;wu=new OA(function(l){if(!xp){var u=k2();Eo(l).forEach(function(f){if("childList"===f.type&&f.addedNodes.length>0&&!dE(f.addedNodes[0])&&(Ve.searchPseudoElements&&a(f.target),t(f.target)),"attributes"===f.type&&f.target.parentNode&&Ve.searchPseudoElements&&a(f.target.parentNode),"attributes"===f.type&&dE(f.target)&&~vne.indexOf(f.attributeName))if("class"===f.attributeName&&function tie(n){var e=n.getAttribute?n.getAttribute(ip):null,t=n.getAttribute?n.getAttribute(rp):null;return e&&t}(f.target)){var h=Mu(ap(f.target)),p=h.iconName;f.target.setAttribute(ip,h.prefix||u),p&&f.target.setAttribute(rp,p)}else(function nie(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(Ve.replacementClass)})(f.target)&&r(f.target)})}}),qr&&wu.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function yE(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=function lie(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=Mu(ap(n));return r.prefix||(r.prefix=k2()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function Fne(n,e){return(tE[n]||{})[e]}(r.prefix,n.innerText)||dp(r.prefix,up(n.innerText))),!r.iconName&&Ve.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}(n),i=t.iconName,r=t.prefix,s=t.rest,a=function uie(n){var e=Eo(n.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return Ve.autoA11y&&(t?e["aria-labelledby"]="".concat(Ve.replacementClass,"-title-").concat(i||A4()):(e["aria-hidden"]="true",e.focusable="false")),e}(n),o=mp("parseNodeAttributes",{},n),c=e.styleParser?function cie(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),a=s[0],o=s.slice(1);return a&&o.length>0&&(i[a]=o.join(":").trim()),i},{})),t}(n):[];return Ee({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:pr,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:c,attributes:a}},o)}var hie=j1.styles;function _E(n){var e="nest"===Ve.autoReplaceSvg?yE(n,{styleParser:!1}):yE(n);return~e.extra.classes.indexOf(jA)?Zr("generateLayersText",n,e):Zr("generateSvgReplacementMutation",n,e)}var O2=new Set;function CE(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!qr)return Promise.resolve();var t=Yt.documentElement.classList,i=function(f){return t.add("".concat(GA,"-").concat(f))},r=function(f){return t.remove("".concat(GA,"-").concat(f))},s=Ve.autoFetchSvg?O2:sp.map(function(u){return"fa-".concat(u)}).concat(Object.keys(hie));s.includes("fa")||s.push("fa");var a=[".".concat(jA,":not([").concat(Hs,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(Hs,"])")})).join(", ");if(0===a.length)return Promise.resolve();var o=[];try{o=Eo(n.querySelectorAll(a))}catch{}if(!(o.length>0))return Promise.resolve();i("pending"),r("complete");var c=wp.begin("onTree"),l=o.reduce(function(u,f){try{var h=_E(f);h&&u.push(h)}catch(d){WA||"MissingIcon"===d.name&&console.error(d)}return u},[]);return new Promise(function(u,f){Promise.all(l).then(function(h){gE(h,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),c(),u()})}).catch(function(h){c(),f(h)})})}function die(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_E(n).then(function(t){t&&gE([t],e)})}sp.map(function(n){O2.add("fa-".concat(n))}),Object.keys(_4[Zt]).map(O2.add.bind(O2)),Object.keys(_4[un]).map(O2.add.bind(O2)),O2=M4(O2);var mie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?pr:i,s=t.symbol,a=void 0!==s&&s,o=t.mask,c=void 0===o?null:o,l=t.maskId,u=void 0===l?null:l,f=t.title,h=void 0===f?null:f,d=t.titleId,p=void 0===d?null:d,m=t.classes,v=void 0===m?[]:m,g=t.attributes,M=void 0===g?{}:g,y=t.styles,_=void 0===y?{}:y;if(e){var C=e.prefix,b=e.iconName,x=e.icon;return yu(Ee({type:"icon"},e),function(){return Ds("beforeDOMElementCreation",{iconDefinition:e,params:t}),Ve.autoA11y&&(h?M["aria-labelledby"]="".concat(Ve.replacementClass,"-title-").concat(p||A4()):(M["aria-hidden"]="true",M.focusable="false")),vp({icons:{main:yp(x),mask:c?yp(c.icon):{found:!1,width:null,height:null,icon:{}}},prefix:C,iconName:b,transform:Ee(Ee({},pr),r),symbol:a,title:h,maskId:u,titleId:p,extra:{attributes:M,styles:_,classes:v}})})}},gie={mixout:function(){return{icon:(n=mie,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:gp(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:gp(r||{})),n(i,Ee(Ee({},t),{},{mask:r}))})};var n},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=CE,t.nodeCallback=die,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=t.callback;return CE(void 0===i?Yt:i,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,a=i.titleId,o=i.prefix,c=i.transform,l=i.symbol,u=i.mask,f=i.maskId,h=i.extra;return new Promise(function(d,p){Promise.all([_p(r,o),u.iconName?_p(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(m){var v=J7(m,2);d([t,vp({icons:{main:v[0],mask:v[1]},prefix:o,iconName:r,transform:c,symbol:l,maskId:f,title:s,titleId:a,extra:h,watchable:!0})])}).catch(p)})},e.generateAbstractIcon=function(t){var l,i=t.children,r=t.attributes,s=t.main,a=t.transform,c=hu(t.styles);return c.length>0&&(r.style=c),op(a)&&(l=Zr("generateAbstractTransformGrouping",{main:s,transform:a,containerWidth:s.width,iconWidth:s.width})),i.push(l||s.icon),{children:i,attributes:r}}}},vie={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return yu({type:"layer"},function(){Ds("beforeDOMElementCreation",{assembler:t,params:i});var a=[];return t(function(o){Array.isArray(o)?o.map(function(c){a=a.concat(c.abstract)}):a=a.concat(o.abstract)}),[{tag:"span",attributes:{class:["".concat(Ve.cssPrefix,"-layers")].concat(M4(s)).join(" ")},children:a}]})}}}},Mie={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,a=i.classes,o=void 0===a?[]:a,c=i.attributes,l=void 0===c?{}:c,u=i.styles,f=void 0===u?{}:u;return yu({type:"counter",content:t},function(){return Ds("beforeDOMElementCreation",{content:t,params:i}),function Kne(n){var e=n.content,t=n.title,i=n.extra,r=Ee(Ee(Ee({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=hu(i.styles);s.length>0&&(r.style=s);var a=[];return a.push({tag:"span",attributes:r,children:[e]}),t&&a.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),a}({content:t.toString(),title:s,extra:{attributes:l,styles:f,classes:["".concat(Ve.cssPrefix,"-layers-counter")].concat(M4(o))}})})}}}},yie={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?pr:r,a=i.title,o=void 0===a?null:a,c=i.classes,l=void 0===c?[]:c,u=i.attributes,f=void 0===u?{}:u,h=i.styles,d=void 0===h?{}:h;return yu({type:"text",content:t},function(){return Ds("beforeDOMElementCreation",{content:t,params:i}),uE({content:t,transform:Ee(Ee({},pr),s),title:o,extra:{attributes:f,styles:d,classes:["".concat(Ve.cssPrefix,"-layers-text")].concat(M4(l))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,a=i.extra,o=null,c=null;if(FA){var l=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();o=u.width/l,c=u.height/l}return Ve.autoA11y&&!r&&(a.attributes["aria-hidden"]="true"),Promise.resolve([t,uE({content:t.innerHTML,width:o,height:c,transform:s,title:r,extra:a,watchable:!0})])}}},_ie=new RegExp('"',"ug"),wE=[1105920,1112319];function xE(n,e){var t="".concat(lne).concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var a=Eo(n.children).filter(function(x){return x.getAttribute(np)===e})[0],o=R2.getComputedStyle(n,e),c=o.getPropertyValue("font-family").match(pne),l=o.getPropertyValue("font-weight"),u=o.getPropertyValue("content");if(a&&!c)return n.removeChild(a),i();if(c&&"none"!==u&&""!==u){var f=o.getPropertyValue("content"),h=~["Sharp"].indexOf(c[2])?un:Zt,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(c[2])?C4[h][c[2].toLowerCase()]:mne[h][l],p=function Cie(n){var e=n.replace(_ie,""),t=function Nne(n,e){var r,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e,0),i=t>=wE[0]&&t<=wE[1],r=2===e.length&&e[0]===e[1];return{value:up(r?e[0]:e),isSecondary:i||r}}(f),m=p.value,v=p.isSecondary,g=c[0].startsWith("FontAwesome"),M=dp(d,m),y=M;if(g){var _=function Une(n){var e=iE[n],t=dp("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(m);_.iconName&&_.prefix&&(M=_.iconName,d=_.prefix)}if(!M||v||a&&a.getAttribute(ip)===d&&a.getAttribute(rp)===y)i();else{n.setAttribute(t,y),a&&n.removeChild(a);var C=function fie(){return{iconName:null,title:null,titleId:null,prefix:null,transform:pr,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),b=C.extra;b.attributes[np]=e,_p(M,d).then(function(x){var S=vp(Ee(Ee({},C),{},{icons:{main:x,mask:pp()},prefix:d,iconName:y,extra:b,watchable:!0})),w=Yt.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===e?n.insertBefore(w,n.firstChild):n.appendChild(w),w.outerHTML=S.map(function(A){return E4(A)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function wie(n){return Promise.all([xE(n,"::before"),xE(n,"::after")])}function xie(n){return!(n.parentNode===document.head||~fne.indexOf(n.tagName.toUpperCase())||n.getAttribute(np)||n.parentNode&&"svg"===n.parentNode.tagName)}function bE(n){if(qr)return new Promise(function(e,t){var i=Eo(n.querySelectorAll("*")).filter(xie).map(wie),r=wp.begin("searchPseudoElements");vE(),Promise.all(i).then(function(){r(),bp(),e()}).catch(function(){r(),bp(),t()})})}var bie={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=bE,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;Ve.searchPseudoElements&&bE(void 0===i?Yt:i)}}},SE=!1,Sie={mixout:function(){return{dom:{unwatch:function(){vE(),SE=!0}}}},hooks:function(){return{bootstrap:function(){ME(mp("mutationObserverCallbacks",{}))},noAuto:function(){!function oie(){wu&&wu.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;SE?bp():ME(mp("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},AE=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),a=s[0],o=s.slice(1).join("-");if(a&&"h"===o)return i.flipX=!0,i;if(a&&"v"===o)return i.flipY=!0,i;if(o=parseFloat(o),isNaN(o))return i;switch(a){case"grow":i.size=i.size+o;break;case"shrink":i.size=i.size-o;break;case"left":i.x=i.x-o;break;case"right":i.x=i.x+o;break;case"up":i.y=i.y-o;break;case"down":i.y=i.y+o;break;case"rotate":i.rotate=i.rotate+o}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Aie={mixout:function(){return{parse:{transform:function(t){return AE(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=AE(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,a=t.iconWidth,o={transform:"translate(".concat(t.containerWidth/2," 256)")},c="translate(".concat(32*r.x,", ").concat(32*r.y,") "),l="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),d={outer:o,inner:{transform:"".concat(c," ").concat(l," ").concat(u)},path:{transform:"translate(".concat(a/2*-1," -256)")}};return{tag:"g",attributes:Ee({},d.outer),children:[{tag:"g",attributes:Ee({},d.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:Ee(Ee({},i.icon.attributes),d.path)}]}]}}}},Sp={x:0,y:0,width:"100%",height:"100%"};function EE(n){return n.attributes&&(n.attributes.fill||!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(n.attributes.fill="black"),n}var Tie={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?Mu(r.split(" ").map(function(a){return a.trim()})):pp();return s.prefix||(s.prefix=k2()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var n,i=t.children,r=t.attributes,s=t.main,a=t.mask,o=t.maskId,u=s.icon,h=a.icon,d=function Ane(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),o="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(a," ").concat(o)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:a.width,iconWidth:s.width}),p={tag:"rect",attributes:Ee(Ee({},Sp),{},{fill:"white"})},m=u.children?{children:u.children.map(EE)}:{},v={tag:"g",attributes:Ee({},d.inner),children:[EE(Ee({tag:u.tag,attributes:Ee(Ee({},u.attributes),d.path)},m))]},g={tag:"g",attributes:Ee({},d.outer),children:[v]},M="mask-".concat(o||A4()),y="clip-".concat(o||A4()),_={tag:"mask",attributes:Ee(Ee({},Sp),{},{id:M,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,g]},C={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(n=h,"g"===n.tag?n.children:[n])},_]};return i.push(C,{tag:"rect",attributes:Ee({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(M,")")},Sp)}),{children:i,attributes:r}}}},Lie={provides:function(e){var t=!1;R2.matchMedia&&(t=R2.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:Ee(Ee({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=Ee(Ee({},s),{},{attributeName:"opacity"}),o={tag:"circle",attributes:Ee(Ee({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||o.children.push({tag:"animate",attributes:Ee(Ee({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Ee(Ee({},a),{},{values:"1;0;1;1;0;1;"})}),i.push(o),i.push({tag:"path",attributes:Ee(Ee({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Ee(Ee({},a),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:Ee(Ee({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Ee(Ee({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},zie=[Lne,gie,vie,Mie,yie,bie,Sie,Aie,Tie,Lie,{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}];!function Wne(n,e){var t=e.mixoutsTo;cE=n,Lo={},Object.keys(Ho).forEach(function(i){-1===Gne.indexOf(i)&&delete Ho[i]}),cE.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(a){"function"==typeof r[a]&&(t[a]=r[a]),"object"===ru(r[a])&&Object.keys(r[a]).forEach(function(o){t[a]||(t[a]={}),t[a][o]=r[a][o]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(a){Lo[a]||(Lo[a]=[]),Lo[a].push(s[a])})}i.provides&&i.provides(Ho)})}(zie,{mixoutsTo:Ji});let Die=(()=>{var n;class e{constructor(){this.definitions={}}addIcons(...i){for(const r of i){r.prefix in this.definitions||(this.definitions[r.prefix]={}),this.definitions[r.prefix][r.iconName]=r;for(const s of r.icon[2])"string"==typeof s&&(this.definitions[r.prefix][s]=r)}}addIconPacks(...i){for(const r of i){const s=Object.keys(r).map(a=>r[a]);this.addIcons(...s)}}getIconDefinition(i,r){return i in this.definitions&&r in this.definitions[i]?this.definitions[i][r]:null}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),Nie=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275mod=tr({type:n}),n.\u0275inj=N1({}),e})();var ON={prefix:"fas",iconName:"thumbs-up",icon:[512,512,[128077,61575],"f164","M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2H464c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48H294.5c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3V320 272 247.1c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192H96c17.7 0 32 14.3 32 32V448c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32V224c0-17.7 14.3-32 32-32z"]};const{isArray:aCe}=Array,{getPrototypeOf:oCe,prototype:cCe,keys:lCe}=Object;const{isArray:hCe}=Array;function M9(...n){const e=n3(n),t=function wB(n){return Vt(h5(n))?n.pop():void 0}(n),{args:i,keys:r}=function uCe(n){if(1===n.length){const e=n[0];if(aCe(e))return{args:e,keys:null};if(function fCe(n){return n&&"object"==typeof n&&oCe(n)===cCe}(e)){const t=lCe(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}(n);if(0===i.length)return Fn([],e);const s=new zn(function gCe(n,e,t=y2){return i=>{tI(e,()=>{const{length:r}=n,s=new Array(r);let a=r,o=r;for(let c=0;c<r;c++)tI(e,()=>{const l=Fn(n[c],e);let u=!1;l.subscribe(Dn(i,f=>{s[c]=f,u||(u=!0,o--),o||i.next(t(s.slice()))},()=>{--a||i.complete()}))},i)},i)}}(i,e,r?a=>function mCe(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}(r,a):y2));return t?s.pipe(function pCe(n){return Rt(e=>function dCe(n,e){return hCe(e)?n(...e):n(e)}(n,e))}(t)):s}function tI(n,e,t){n?Nr(t,n,e):e()}const Ou=Qc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function y9(...n){return function vCe(){return ba(1)}()(Fn(n,n3(n)))}function nI(n){return new zn(e=>{f1(n()).subscribe(e)})}function Fu(n,e){const t=Vt(n)?n:()=>n,i=r=>r.error(t());return new zn(e?r=>e.schedule(i,0,r):i)}function _9(){return Vn((n,e)=>{let t=null;n._refCount++;const i=Dn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class iI extends zn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,cM(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Wi;const t=this.getSubject();e.add(this.source.subscribe(Dn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Wi.EMPTY)}return e}refCount(){return _9()(this)}}function zo(n){return n<=0?()=>Q1:Vn((e,t)=>{let i=0;e.subscribe(Dn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function F2(n,e){return Vn((t,i)=>{let r=0;t.subscribe(Dn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Uu(n){return Vn((e,t)=>{let i=!1;e.subscribe(Dn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function rI(n=yCe){return Vn((e,t)=>{let i=!1;e.subscribe(Dn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function yCe(){return new Ou}function Ns(n,e){const t=arguments.length>=2;return i=>i.pipe(n?F2((r,s)=>n(r,s,i)):y2,zo(1),t?Uu(e):rI(()=>new Ou))}function N4(n,e){return Vt(e)?Kn(n,e,1):Kn(n,1)}function ii(n,e,t){const i=Vt(n)||e||t?{next:n,error:e,complete:t}:n;return i?Vn((r,s)=>{var a;null===(a=i.subscribe)||void 0===a||a.call(i);let o=!0;r.subscribe(Dn(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;o=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;o=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;o&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):y2}function Vo(n){return Vn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(Dn(t,void 0,void 0,a=>{s=f1(n(a,Vo(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function C9(n){return n<=0?()=>Q1:Vn((e,t)=>{let i=[];e.subscribe(Dn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function w9(n){return Vn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ot="primary",I4=Symbol("RouteTitle");class SCe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Do(n){return new SCe(n)}function ACe(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const a=i[s],o=n[s];if(a.startsWith(":"))r[a.substring(1)]=o;else if(a!==o.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function mr(n,e){const t=n?x9(n):void 0,i=e?x9(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!sI(n[r],e[r]))return!1;return!0}function x9(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sI(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function aI(n){return n.length>0?n[n.length-1]:null}function U2(n){return function sCe(n){return!!n&&(n instanceof zn||Vt(n.lift)&&Vt(n.subscribe))}(n)?n:D6(n)?Fn(Promise.resolve(n)):Ke(n)}const TCe={exact:function lI(n,e,t){if(!Is(n.segments,e.segments)||!Bu(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!lI(n.children[i],e.children[i],t))return!1;return!0},subset:uI},oI={exact:function LCe(n,e){return mr(n,e)},subset:function HCe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sI(n[t],e[t]))},ignored:()=>!0};function cI(n,e,t){return TCe[t.paths](n.root,e.root,t.matrixParams)&&oI[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function uI(n,e,t){return fI(n,e,e.segments,t)}function fI(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Is(r,t)||e.hasChildren()||!Bu(r,t,i))}if(n.segments.length===t.length){if(!Is(n.segments,t)||!Bu(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!uI(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Is(n.segments,r)&&Bu(n.segments,r,i)&&n.children[ot])&&fI(n.children[ot],e,s,i)}}function Bu(n,e,t){return e.every((i,r)=>oI[t](n[r].parameters,i.parameters))}class No{constructor(e=new Nt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Do(this.queryParams)),this._queryParamMap}toString(){return DCe.serialize(this)}}class Nt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gu(this)}}class R4{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Do(this.parameters)),this._parameterMap}toString(){return pI(this)}}function Is(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Io=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:function(){return new b9},providedIn:"root"}),e})();class b9{parse(e){const t=new WCe(e);return new No(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${P4(e.root,!0)}`,i=function RCe(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Wu(t)}=${Wu(r)}`).join("&"):`${Wu(t)}=${Wu(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function NCe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const DCe=new b9;function Gu(n){return n.segments.map(e=>pI(e)).join("/")}function P4(n,e){if(!n.hasChildren())return Gu(n);if(e){const t=n.children[ot]?P4(n.children[ot],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==ot&&i.push(`${r}:${P4(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function VCe(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ot&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ot&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===ot?[P4(n.children[ot],!1)]:[`${r}:${P4(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ot]?`${Gu(n)}/${t[0]}`:`${Gu(n)}/(${t.join("//")})`}}function hI(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wu(n){return hI(n).replace(/%3B/gi,";")}function S9(n){return hI(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ju(n){return decodeURIComponent(n)}function dI(n){return ju(n.replace(/\+/g,"%20"))}function pI(n){return`${S9(n.path)}${function ICe(n){return Object.keys(n).map(e=>`;${S9(e)}=${S9(n[e])}`).join("")}(n.parameters)}`}const PCe=/^[^\/()?;#]+/;function A9(n){const e=n.match(PCe);return e?e[0]:""}const kCe=/^[^\/()?;=#]+/,FCe=/^[^=?&#]+/,BCe=/^[^&#]+/;class WCe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ot]=new Nt(e,t)),i}parseSegment(){const e=A9(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(e),new R4(ju(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function OCe(n){const e=n.match(kCe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=A9(this.remaining);r&&(i=r,this.capture(i))}e[ju(t)]=ju(i)}parseQueryParam(e){const t=function UCe(n){const e=n.match(FCe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const a=function GCe(n){const e=n.match(BCe);return e?e[0]:""}(this.remaining);a&&(i=a,this.capture(i))}const r=dI(t),s=dI(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=A9(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new ue(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ot);const a=this.parseChildren();t[s]=1===Object.keys(a).length?a[ot]:new Nt([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ue(4011,!1)}}function mI(n){return n.segments.length>0?new Nt([],{[ot]:n}):n}function gI(n){const e={};for(const i of Object.keys(n.children)){const s=gI(n.children[i]);if(i===ot&&0===s.segments.length&&s.hasChildren())for(const[a,o]of Object.entries(s.children))e[a]=o;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function jCe(n){if(1===n.numberOfChildren&&n.children[ot]){const e=n.children[ot];return new Nt(n.segments.concat(e.segments),e.children)}return n}(new Nt(n.segments,e))}function Rs(n){return n instanceof No}function vI(n){let e;const i=function t(s){const a={};for(const c of s.children){const l=t(c);a[c.outlet]=l}const o=new Nt(s.url,a);return s===n&&(e=o),o}(n.root),r=mI(i);return e??r}function MI(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return E9(r,r,r,t,i);const s=function qCe(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new _I(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const o={};return Object.entries(s.outlets).forEach(([c,l])=>{o[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:o}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===a?(s.split("/").forEach((o,c)=>{0==c&&"."===o||(0==c&&""===o?t=!0:".."===o?e++:""!=o&&r.push(o))}),r):[...r,s]},[]);return new _I(t,e,i)}(e);if(s.toRoot())return E9(r,r,new Nt([],{}),t,i);const a=function XCe(n,e,t){if(n.isAbsolute)return new qu(e,!0,0);if(!t)return new qu(e,!1,NaN);if(null===t.parent)return new qu(t,!0,0);const i=$u(n.commands[0])?0:1;return function YCe(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ue(4005,!1);r=i.segments.length}return new qu(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),o=a.processChildren?O4(a.segmentGroup,a.index,s.commands):CI(a.segmentGroup,a.index,s.commands);return E9(r,a.segmentGroup,o,t,i)}function $u(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function k4(n){return"object"==typeof n&&null!=n&&n.outlets}function E9(n,e,t,i,r){let a,s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),a=n===e?t:yI(n,e,t);const o=mI(gI(a));return new No(o,s,r)}function yI(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:yI(s,e,t)}),new Nt(n.segments,i)}class _I{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&$u(i[0]))throw new ue(4003,!1);const r=i.find(k4);if(r&&r!==aI(i))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qu{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function CI(n,e,t){if(n||(n=new Nt([],{})),0===n.segments.length&&n.hasChildren())return O4(n,e,t);const i=function KCe(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const a=n.segments[r],o=t[i];if(k4(o))break;const c=`${o}`,l=i<t.length-1?t[i+1]:null;if(r>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!xI(c,l,a))return s;i+=2}else{if(!xI(c,{},a))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Nt(n.segments.slice(0,i.pathIndex),{});return s.children[ot]=new Nt(n.segments.slice(i.pathIndex),n.children),O4(s,0,r)}return i.match&&0===r.length?new Nt(n.segments,{}):i.match&&!n.hasChildren()?T9(n,e,t):i.match?O4(n,0,r):T9(n,e,t)}function O4(n,e,t){if(0===t.length)return new Nt(n.segments,{});{const i=function ZCe(n){return k4(n[0])?n[0].outlets:{[ot]:n}}(t),r={};if(Object.keys(i).some(s=>s!==ot)&&n.children[ot]&&1===n.numberOfChildren&&0===n.children[ot].segments.length){const s=O4(n.children[ot],e,t);return new Nt(n.segments,s.children)}return Object.entries(i).forEach(([s,a])=>{"string"==typeof a&&(a=[a]),null!==a&&(r[s]=CI(n.children[s],e,a))}),Object.entries(n.children).forEach(([s,a])=>{void 0===i[s]&&(r[s]=a)}),new Nt(n.segments,r)}}function T9(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(k4(s)){const c=JCe(s.outlets);return new Nt(i,c)}if(0===r&&$u(t[0])){i.push(new R4(n.segments[e].path,wI(t[0]))),r++;continue}const a=k4(s)?s.outlets[ot]:`${s}`,o=r<t.length-1?t[r+1]:null;a&&o&&$u(o)?(i.push(new R4(a,wI(o))),r+=2):(i.push(new R4(a,{})),r++)}return new Nt(i,{})}function JCe(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=T9(new Nt([],{}),0,i))}),e}function wI(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function xI(n,e,t){return n==t.path&&mr(e,t.parameters)}const F4="imperative";class gr{constructor(e,t){this.id=e,this.url=t}}class Xu extends gr{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vr extends gr{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ro extends gr{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Po extends gr{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class Yu extends gr{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class bI extends gr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class QCe extends gr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ewe extends gr{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class twe extends gr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nwe extends gr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iwe{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class rwe{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class swe{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class awe{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class owe{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cwe{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SI{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class L9{}class H9{constructor(e){this.url=e}}class lwe{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new U4,this.attachRef=null}}let U4=(()=>{var n;class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){const s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){const r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new lwe,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class AI{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=z9(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=z9(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=V9(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return V9(e,this._root).map(t=>t.value)}}function z9(n,e){if(n===e.value)return e;for(const t of e.children){const i=z9(n,t);if(i)return i}return null}function V9(n,e){if(n===e.value)return[e];for(const t of e.children){const i=V9(n,t);if(i.length)return i.unshift(e),i}return[]}class $1{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ko(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class EI extends AI{constructor(e,t){super(e),this.snapshot=t,N9(this,e)}toString(){return this.snapshot.toString()}}function TI(n,e){const t=function uwe(n,e){const a=new D9([],{},{},"",{},ot,e,null,{});return new HI("",new $1(a,[]))}(0,e),i=new h1([new R4("",{})]),r=new h1({}),s=new h1({}),a=new h1({}),o=new h1(""),c=new Oo(i,r,a,o,s,ot,e,t.root);return c.snapshot=t.root,new EI(new $1(c,[]),t)}class Oo{constructor(e,t,i,r,s,a,o,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=a,this.component=o,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Rt(l=>l[I4]))??Ke(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Rt(e=>Do(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Rt(e=>Do(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function LI(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function fwe(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class D9{get title(){return this.data?.[I4]}constructor(e,t,i,r,s,a,o,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=a,this.component=o,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Do(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Do(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class HI extends AI{constructor(e,t){super(t),this.url=e,N9(this,t)}toString(){return zI(this._root)}}function N9(n,e){e.value._routerState=n,e.children.forEach(t=>N9(n,t))}function zI(n){const e=n.children.length>0?` { ${n.children.map(zI).join(", ")} } `:"";return`${n.value}${e}`}function I9(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),mr(e.params,t.params)||n.paramsSubject.next(t.params),function ECe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),mr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function R9(n,e){const t=mr(n.params,e.params)&&function zCe(n,e){return Is(n,e)&&n.every((t,i)=>mr(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||R9(n.parent,e.parent))}let P9=(()=>{var n;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ot,this.activateEvents=new vi,this.deactivateEvents=new vi,this.attachEvents=new vi,this.detachEvents=new vi,this.parentContexts=_e(U4),this.location=_e(U1),this.changeDetector=_e(Md),this.environmentInjector=_e(m1),this.inputBinder=_e(Zu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){const{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();const i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){const i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=i;const s=this.location,o=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new hwe(i,c,s.injector);this.activated=s.createComponent(o,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275dir=hi({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[gs]}),e})();class hwe{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Oo?this.route:e===U4?this.childContexts:this.parent.get(e,t)}}const Zu=new Ie("");let VI=(()=>{var n;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){const{activatedRoute:r}=i,s=M9([r.queryParams,r.params,r.data]).pipe(D1(([a,o,c],l)=>(c={...a,...o,...c},0===l?Ke(c):Promise.resolve(c)))).subscribe(a=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(i);const o=function SQ(n){const e=gt(n);if(!e)return null;const t=new W3(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:c}of o.inputs)i.activatedComponentRef.setInput(c,a[c]);else this.unsubscribeFromRouteData(i)});this.outletDataSubscriptions.set(i,s)}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})();function B4(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function pwe(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return B4(n,i,r);return B4(n,i)})}(n,e,t);return new $1(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(o=>B4(n,o)),a}}const i=function mwe(n){return new Oo(new h1(n.url),new h1(n.params),new h1(n.queryParams),new h1(n.fragment),new h1(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>B4(n,s));return new $1(i,r)}}const k9="ngNavigationCancelingError";function DI(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Rs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=NI(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function NI(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[k9]=!0,i.cancellationCode=e,t&&(i.url=t),i}function II(n){return n&&n[k9]}let RI=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=Aa({type:n,selectors:[["ng-component"]],standalone:!0,features:[Lb],decls:1,vars:0,template:function(i,r){1&i&&Mo(0,"router-outlet")},dependencies:[P9],encapsulation:2}),e})();function O9(n){const e=n.children&&n.children.map(O9),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ot&&(t.component=RI),t}function Mr(n){return n.outlet||ot}function G4(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class xwe{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),I9(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=ko(t);e.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,r[a],i),delete r[a]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ko(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);if(i&&i.outlet){const a=i.outlet.detach(),o=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:o})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ko(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=ko(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new cwe(s.value.snapshot))}),e.children.length&&this.forwardEvent(new awe(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(I9(r),r===s)if(r.component){const a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const o=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(o.contexts),a.attachRef=o.componentRef,a.route=o.route.value,a.outlet&&a.outlet.attach(o.componentRef,o.route.value),I9(o.route.value),this.activateChildRoutes(e,null,a.children)}else{const o=G4(r.snapshot);a.attachRef=null,a.route=r,a.injector=o,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,i)}}class PI{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ku{constructor(e,t){this.component=e,this.route=t}}function bwe(n,e,t){const i=n._root;return W4(i,e?e._root:null,t,[i.value])}function Fo(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function OB(n){return null!==rl(n)}(n)?e.get(n):n:i}function W4(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=ko(e);return n.children.forEach(a=>{(function Awe(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,a=e?e.value:null,o=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function Ewe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Is(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Is(n.url,e.url)||!mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!R9(n,e)||!mr(n.queryParams,e.queryParams);default:return!R9(n,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new PI(i)):(s.data=a.data,s._resolvedData=a._resolvedData),W4(n,e,s.component?o?o.children:null:t,i,r),c&&o&&o.outlet&&o.outlet.isActivated&&r.canDeactivateChecks.push(new Ku(o.outlet.component,a))}else a&&j4(e,o,r),r.canActivateChecks.push(new PI(i)),W4(n,null,s.component?o?o.children:null:t,i,r)})(a,s[a.value.outlet],t,i.concat([a.value]),r),delete s[a.value.outlet]}),Object.entries(s).forEach(([a,o])=>j4(o,t.getContext(a),r)),r}function j4(n,e,t){const i=ko(n),r=n.value;Object.entries(i).forEach(([s,a])=>{j4(a,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Ku(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function $4(n){return"function"==typeof n}function kI(n){return n instanceof Ou||"EmptyError"===n?.name}const Ju=Symbol("INITIAL_VALUE");function Uo(){return D1(n=>M9(n.map(e=>e.pipe(zo(1),function MCe(...n){const e=n3(n);return Vn((t,i)=>{(e?y9(n,t,e):y9(n,t)).subscribe(i)})}(Ju)))).pipe(Rt(e=>{for(const t of e)if(!0!==t){if(t===Ju)return Ju;if(!1===t||t instanceof No)return t}return!0}),F2(e=>e!==Ju),zo(1)))}function OI(n){return function FU(...n){return sM(n)}(ii(e=>{if(Rs(e))throw DI(0,e)}),Rt(e=>!0===e))}class F9{constructor(e){this.segmentGroup=e||null}}class U9 extends Error{constructor(e){super(),this.urlTree=e}}function Bo(n){return Fu(new F9(n))}class qwe{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new ue(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ke(i);if(r.numberOfChildren>1||!r.children[ot])return Fu(new ue(4e3,!1));r=r.children[ot]}}applyRedirectCommands(e,t,i){const r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new U9(r);return r}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new No(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const o=s.substring(1);i[r]=t[o]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let a={};return Object.entries(t.children).forEach(([o,c])=>{a[o]=this.createSegmentGroup(e,c,i,r)}),new Nt(s,a)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new ue(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const B9={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xwe(n,e,t,i,r){const s=G9(n,e,t);return s.matched?(i=function vwe(n,e){return n.providers&&!n._injector&&(n._injector=Xd(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function Wwe(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Ke(r.map(a=>{const o=Fo(a,n);return U2(function Dwe(n){return n&&$4(n.canMatch)}(o)?o.canMatch(e,t):n.runInContext(()=>o(e,t)))})).pipe(Uo(),OI()):Ke(!0)}(i,e,t).pipe(Rt(a=>!0===a?s:{...B9}))):Ke(s)}function G9(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...B9}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||ACe)(t,n,e);if(!r)return{...B9};const s={};Object.entries(r.posParams??{}).forEach(([o,c])=>{s[o]=c.path});const a=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function FI(n,e,t,i){return t.length>0&&function Kwe(n,e,t){return t.some(i=>Qu(n,e,i)&&Mr(i)!==ot)}(n,t,i)?{segmentGroup:new Nt(e,Zwe(i,new Nt(t,n.children))),slicedSegments:[]}:0===t.length&&function Jwe(n,e,t){return t.some(i=>Qu(n,e,i))}(n,t,i)?{segmentGroup:new Nt(n.segments,Ywe(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Nt(n.segments,n.children),slicedSegments:t}}function Ywe(n,e,t,i,r){const s={};for(const a of i)if(Qu(n,t,a)&&!r[Mr(a)]){const o=new Nt([],{});s[Mr(a)]=o}return{...r,...s}}function Zwe(n,e){const t={};t[ot]=e;for(const i of n)if(""===i.path&&Mr(i)!==ot){const r=new Nt([],{});t[Mr(i)]=r}return t}function Qu(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class txe{}class rxe{constructor(e,t,i,r,s,a,o){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=a,this.urlSerializer=o,this.applyRedirects=new qwe(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ue(4002,!1)}recognize(){const e=FI(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Rt(t=>{const i=new D9([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ot,this.rootComponentType,null,{}),r=new $1(i,t),s=new HI("",r),a=function $Ce(n,e,t=null,i=null){return MI(vI(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(s._root),{state:s,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ot).pipe(Vo(i=>{if(i instanceof U9)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof F9?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=LI(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0).pipe(Rt(s=>s instanceof $1?[s]:[]))}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Fn(r).pipe(N4(s=>{const a=i.children[s],o=function Cwe(n,e){const t=n.filter(i=>Mr(i)===e);return t.push(...n.filter(i=>Mr(i)!==e)),t}(t,s);return this.processSegmentGroup(e,o,a,s)}),function CCe(n,e){return Vn(function _Ce(n,e,t,i,r){return(s,a)=>{let o=t,c=e,l=0;s.subscribe(Dn(a,u=>{const f=l++;c=o?n(c,u,f):(o=!0,u),i&&a.next(c)},r&&(()=>{o&&a.next(c),a.complete()})))}}(n,e,arguments.length>=2,!0))}((s,a)=>(s.push(...a),s)),Uu(null),function wCe(n,e){const t=arguments.length>=2;return i=>i.pipe(n?F2((r,s)=>n(r,s,i)):y2,C9(1),t?Uu(e):rI(()=>new Ou))}(),Kn(s=>{if(null===s)return Bo(i);const a=UI(s);return function sxe(n){n.sort((e,t)=>e.value.outlet===ot?-1:t.value.outlet===ot?1:e.value.outlet.localeCompare(t.value.outlet))}(a),Ke(a)}))}processSegment(e,t,i,r,s,a){return Fn(t).pipe(N4(o=>this.processSegmentAgainstRoute(o._injector??e,t,o,i,r,s,a).pipe(Vo(c=>{if(c instanceof F9)return Ke(null);throw c}))),Ns(o=>!!o),Vo(o=>{if(kI(o))return function exe(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?Ke(new txe):Bo(i);throw o}))}processSegmentAgainstRoute(e,t,i,r,s,a,o){return function Qwe(n,e,t,i){return!!(Mr(n)===i||i!==ot&&Qu(e,t,n))&&("**"===n.path||G9(e,n,t).matched)}(i,r,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,a):this.allowRedirects&&o?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,a):Bo(r):Bo(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,a){const{matched:o,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}="**"===r.path?BI(s):G9(t,r,s);if(!o)return Bo(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const f=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,f).pipe(Kn(h=>this.processSegment(e,i,t,h.concat(u),a,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){let a;return"**"===i.path?(a=Ke(BI(r)),t.children={}):a=Xwe(t,i,r,e),a.pipe(D1(o=>o.matched?this.getChildConfig(e=i._injector??e,i,r).pipe(D1(({routes:c})=>{const l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:f,parameters:h}=o,d=new D9(u,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function oxe(n){return n.data||{}}(i),Mr(i),i.component??i._loadedComponent??null,i,function cxe(n){return n.resolve||{}}(i)),{segmentGroup:p,slicedSegments:m}=FI(t,u,f,c);if(0===m.length&&p.hasChildren())return this.processChildren(l,c,p).pipe(Rt(g=>null===g?null:new $1(d,g)));if(0===c.length&&0===m.length)return Ke(new $1(d,[]));const v=Mr(i)===s;return this.processSegment(l,c,p,m,v?ot:s,!0).pipe(Rt(g=>new $1(d,g instanceof $1?[g]:[])))})):Bo(t)))}getChildConfig(e,t,i){return t.children?Ke({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ke({routes:t._loadedRoutes,injector:t._loadedInjector}):function Gwe(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Ke(!0):Ke(r.map(a=>{const o=Fo(a,n);return U2(function Lwe(n){return n&&$4(n.canLoad)}(o)?o.canLoad(e,t):n.runInContext(()=>o(e,t)))})).pipe(Uo(),OI())}(e,t,i).pipe(Kn(r=>r?this.configLoader.loadChildren(e,t).pipe(ii(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function $we(n){return Fu(NI(!1,3))}())):Ke({routes:[],injector:e})}}function axe(n){const e=n.value.routeConfig;return e&&""===e.path}function UI(n){const e=[],t=new Set;for(const i of n){if(!axe(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=UI(i.children);e.push(new $1(i.value,r))}return e.filter(i=>!t.has(i))}function BI(n){return{matched:!0,parameters:n.length>0?aI(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function GI(n){return"string"==typeof n.title||null===n.title}function W9(n){return D1(e=>{const t=n(e);return t?Fn(t).pipe(Rt(()=>e)):Ke(e)})}let WI=(()=>{var n;class e{buildTitle(i){let r,s=i.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(a=>a.outlet===ot);return r}getResolvedTitleForRoute(i){return i.data[I4]}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:function(){return _e(pxe)},providedIn:"root"}),e})(),pxe=(()=>{var n;class e extends WI{constructor(i){super(),this.title=i}updateTitle(i){const r=this.buildTitle(i);void 0!==r&&this.title.setTitle(r)}}return(n=e).\u0275fac=function(i){return new(i||n)(be(Z7))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const Go=new Ie("",{providedIn:"root",factory:()=>({})}),Wo=new Ie("ROUTES");let j9=(()=>{var n;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_e(hS)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Ke(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);const r=U2(i.loadComponent()).pipe(Rt(jI),ii(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),w9(()=>{this.componentLoaders.delete(i)})),s=new iI(r,()=>new V1).pipe(_9());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ke({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function mxe(n,e,t,i){return U2(n.loadChildren()).pipe(Rt(jI),Kn(r=>r instanceof Eb||Array.isArray(r)?Ke(r):Fn(e.compileModuleAsync(r))),Rt(r=>{i&&i(n);let s,a,o=!1;return Array.isArray(r)?(a=r,!0):(s=r.create(t).injector,a=s.get(Wo,[],{optional:!0,self:!0}).flat()),{routes:a.map(O9),injector:s}}))}(r,this.compiler,i,this.onLoadEndListener).pipe(w9(()=>{this.childrenLoaders.delete(r)})),o=new iI(a,()=>new V1).pipe(_9());return this.childrenLoaders.set(r,o),o}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function jI(n){return function gxe(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let $9=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:function(){return _e(vxe)},providedIn:"root"}),e})(),vxe=(()=>{var n;class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const $I=new Ie(""),qI=new Ie("");function Mxe(n){const e=n.get(qI),t=n.get(Ni);return n.get(Ht).runOutsideAngular(()=>{if(!t.startViewTransition||e.skipNextTransition)return e.skipNextTransition=!1,Promise.resolve();let i;const r=new Promise(s=>{i=s});return t.startViewTransition(()=>(i(),function yxe(n){return new Promise(e=>{xC(e,{injector:n})})}(n))),r})}let e8=(()=>{var n;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new V1,this.transitionAbortSubject=new V1,this.configLoader=_e(j9),this.environmentInjector=_e(m1),this.urlSerializer=_e(Io),this.rootContexts=_e(U4),this.location=_e(h4),this.inputBindingEnabled=null!==_e(Zu,{optional:!0}),this.titleStrategy=_e(WI),this.options=_e(Go,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_e($9),this.createViewTransition=_e($I,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ke(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new rwe(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new iwe(s))}complete(){this.transitions?.complete()}handleNavigationRequest(i){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...i,id:r})}setupNavigations(i,r,s){return this.transitions=new h1({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:F4,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(F2(a=>0!==a.id),Rt(a=>({...a,extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),D1(a=>{this.currentTransition=a;let o=!1,c=!1;return Ke(a).pipe(ii(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),D1(l=>{const u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??i.onSameUrlNavigation)){const h="";return this.events.next(new Po(l.id,this.urlSerializer.serialize(l.rawUrl),h,0)),l.resolve(null),Q1}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Ke(l).pipe(D1(h=>{const d=this.transitions?.getValue();return this.events.next(new Xu(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),d!==this.transitions?.getValue()?Q1:Promise.resolve(h)}),function lxe(n,e,t,i,r,s){return Kn(a=>function nxe(n,e,t,i,r,s,a="emptyOnly"){return new rxe(n,e,t,i,r,a,s).recognize()}(n,e,t,i,a.extractedUrl,r,s).pipe(Rt(({state:o,tree:c})=>({...a,targetSnapshot:o,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),ii(h=>{a.targetSnapshot=h.targetSnapshot,a.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const d=new bI(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(d)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:h,extractedUrl:d,source:p,restoredState:m,extras:v}=l,g=new Xu(h,this.urlSerializer.serialize(d),p,m);this.events.next(g);const M=TI(0,this.rootComponentType).snapshot;return this.currentTransition=a={...l,targetSnapshot:M,urlAfterRedirects:d,extras:{...v,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=d,Ke(a)}{const h="";return this.events.next(new Po(l.id,this.urlSerializer.serialize(l.extractedUrl),h,1)),l.resolve(null),Q1}}),ii(l=>{const u=new QCe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Rt(l=>(this.currentTransition=a={...l,guards:bwe(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},a)),function Iwe(n,e){return Kn(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return 0===a.length&&0===s.length?Ke({...t,guardsResult:!0}):function Rwe(n,e,t,i){return Fn(n).pipe(Kn(r=>function Bwe(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return Ke(!0);const a=s.map(o=>{const c=G4(e)??r,l=Fo(o,c);return U2(function Vwe(n){return n&&$4(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i))).pipe(Ns())});return Ke(a).pipe(Uo())}(r.component,r.route,t,e,i)),Ns(r=>!0!==r,!0))}(a,i,r,n).pipe(Kn(o=>o&&function Twe(n){return"boolean"==typeof n}(o)?function Pwe(n,e,t,i){return Fn(e).pipe(N4(r=>y9(function Owe(n,e){return null!==n&&e&&e(new swe(n)),Ke(!0)}(r.route.parent,i),function kwe(n,e){return null!==n&&e&&e(new owe(n)),Ke(!0)}(r.route,i),function Uwe(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>function Swe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(a)).filter(a=>null!==a).map(a=>nI(()=>Ke(a.guards.map(c=>{const l=G4(a.node)??t,u=Fo(c,l);return U2(function zwe(n){return n&&$4(n.canActivateChild)}(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n))).pipe(Ns())})).pipe(Uo())));return Ke(s).pipe(Uo())}(n,r.path,t),function Fwe(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ke(!0);const r=i.map(s=>nI(()=>{const a=G4(e)??t,o=Fo(s,a);return U2(function Hwe(n){return n&&$4(n.canActivate)}(o)?o.canActivate(e,n):a.runInContext(()=>o(e,n))).pipe(Ns())}));return Ke(r).pipe(Uo())}(n,r.route,t))),Ns(r=>!0!==r,!0))}(i,s,n,e):Ke(o)),Rt(o=>({...t,guardsResult:o})))})}(this.environmentInjector,l=>this.events.next(l)),ii(l=>{if(a.guardsResult=l.guardsResult,Rs(l.guardsResult))throw DI(0,l.guardsResult);const u=new ewe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),F2(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),W9(l=>{if(l.guards.canActivateChecks.length)return Ke(l).pipe(ii(u=>{const f=new twe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),D1(u=>{let f=!1;return Ke(u).pipe(function uxe(n,e){return Kn(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ke(t);let s=0;return Fn(r).pipe(N4(a=>function fxe(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!GI(r)&&(s[I4]=r.title),function hxe(n,e,t,i){const r=x9(n);if(0===r.length)return Ke({});const s={};return Fn(r).pipe(Kn(a=>function dxe(n,e,t,i){const r=G4(e)??i,s=Fo(n,r);return U2(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[a],e,t,i).pipe(Ns(),ii(o=>{s[a]=o}))),C9(1),function xCe(n){return Rt(()=>n)}(s),Vo(a=>kI(a)?Q1:Fu(a)))}(s,n,e,i).pipe(Rt(a=>(n._resolvedData=a,n.data=LI(n,t).resolve,r&&GI(r)&&(n.data[I4]=r.title),null)))}(a.route,i,n,e)),ii(()=>s++),C9(1),Kn(a=>s===r.length?Ke(t):Q1))})}(this.paramsInheritanceStrategy,this.environmentInjector),ii({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",2)}}))}),ii(u=>{const f=new nwe(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),W9(l=>{const u=f=>{const h=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(f.routeConfig).pipe(ii(d=>{f.component=d}),Rt(()=>{})));for(const d of f.children)h.push(...u(d));return h};return M9(u(l.targetSnapshot.root)).pipe(Uu(),zo(1))}),W9(()=>this.afterPreactivation()),D1(()=>{const l=this.createViewTransition?.(this.environmentInjector);return l?Fn(l).pipe(Rt(()=>a)):Ke(a)}),Rt(l=>{const u=function dwe(n,e,t){const i=B4(n,e._root,t?t._root:void 0);return new EI(i,e)}(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=a={...l,targetRouterState:u},this.currentNavigation.targetRouterState=u,a}),ii(()=>{this.events.next(new L9)}),((n,e,t,i)=>Rt(r=>(new xwe(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),zo(1),ii({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new vr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),function bCe(n){return Vn((e,t)=>{f1(n).subscribe(Dn(t,()=>t.complete(),n5)),!t.closed&&e.subscribe(t)})}(this.transitionAbortSubject.pipe(ii(l=>{throw l}))),w9(()=>{o||c||this.cancelNavigationTransition(a,"",1),this.currentNavigation?.id===a.id&&(this.currentNavigation=null)}),Vo(l=>{if(c=!0,II(l))this.events.next(new Ro(a.id,this.urlSerializer.serialize(a.extractedUrl),l.message,l.cancellationCode)),function gwe(n){return II(n)&&Rs(n.url)}(l)?this.events.next(new H9(l.url)):a.resolve(!1);else{this.events.next(new Yu(a.id,this.urlSerializer.serialize(a.extractedUrl),l,a.targetSnapshot??void 0));try{a.resolve(i.errorHandler(l))}catch(u){a.reject(u)}}return Q1}))}))}cancelNavigationTransition(i,r,s){const a=new Ro(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(a),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();function _xe(n){return n!==F4}let Cxe=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:function(){return _e(xxe)},providedIn:"root"}),e})();class wxe{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let xxe=(()=>{var n;class e extends wxe{}return(n=e).\u0275fac=function(){let t;return function(r){return(t||(t=function qy(n){return Ir(()=>{const e=n.prototype.constructor,t=e[Rr]||eh(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Rr]||eh(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}(n)))(r||n)}}(),n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})(),bxe=(()=>{var n;class e{constructor(){this.location=_e(h4),this.urlSerializer=_e(Io),this.options=_e(Go,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_e($9),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new No,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=TI(0,null),this.stateMemento=this.createStateMemento()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}handleNavigationEvent(i,r){if(i instanceof Xu)this.stateMemento=this.createStateMemento();else if(i instanceof Po)this.rawUrlTree=r.initialUrl;else if(i instanceof bI){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof L9?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Ro&&(3===i.code||2===i.code)?this.restoreHistory(r):i instanceof Yu?this.restoreHistory(r,!0):i instanceof vr&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){const s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",o)}else{const a={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",a)}}restoreHistory(i,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.currentUrlTree===i.finalUrl&&0===a&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return"computed"===this.canceledNavigationResolution?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var q4=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(q4||{});function XI(n,e){n.events.pipe(F2(t=>t instanceof vr||t instanceof Ro||t instanceof Yu||t instanceof Po),Rt(t=>t instanceof vr||t instanceof Po?q4.COMPLETE:t instanceof Ro&&(0===t.code||1===t.code)?q4.REDIRECTING:q4.FAILED),F2(t=>t!==q4.REDIRECTING),zo(1)).subscribe(()=>{e()})}function Sxe(n){throw n}const Axe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Exe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Qi=(()=>{var n;class e{get currentUrlTree(){return this.stateManager.currentUrlTree}get rawUrlTree(){return this.stateManager.rawUrlTree}get events(){return this._events}get routerState(){return this.stateManager.routerState}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=_e(uS),this.stateManager=_e(bxe),this.options=_e(Go,{optional:!0})||{},this.pendingTasks=_e(fS),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_e(e8),this.urlSerializer=_e(Io),this.location=_e(h4),this.urlHandlingStrategy=_e($9),this._events=new V1,this.errorHandler=this.options.errorHandler||Sxe,this.navigated=!1,this.routeReuseStrategy=_e(Cxe),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_e(Wo,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_e(Zu,{optional:!0}),this.eventsSubscription=new Wi,this.isNgZoneEnabled=_e(Ht)instanceof Ht&&Ht.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const i=this.navigationTransitions.events.subscribe(r=>{try{const s=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(null!==s&&null!==a)if(this.stateManager.handleNavigationEvent(r,a),r instanceof Ro&&0!==r.code&&1!==r.code)this.navigated=!0;else if(r instanceof vr)this.navigated=!0;else if(r instanceof H9){const o=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_xe(s.source)};this.scheduleNavigation(o,F4,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function Lxe(n){return!(n instanceof L9||n instanceof H9)})(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const i=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),F4,i)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(i=>{const r="popstate"===i.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(i.url,r,i.state)},0)}))}navigateToSyncWithBrowser(i,r,s){const a={replaceUrl:!0},o=s?.navigationId?s:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(a.state=l)}const c=this.parseUrl(i);this.scheduleNavigation(c,r,o,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(O9),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){const{relativeTo:s,queryParams:a,fragment:o,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:o;let h,f=null;switch(c){case"merge":f={...this.currentUrlTree.queryParams,...a};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=a||null}null!==f&&(f=this.removeEmptyProps(f));try{h=vI(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof i[0]||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return MI(h,i,f,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){const s=Rs(i)?i:this.parseUrl(i),a=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(a,F4,null,r)}navigate(i,r={skipLocationChange:!1}){return function Txe(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new ue(4008,!1)}(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(s=!0===r?{...Axe}:!1===r?{...Exe}:r,Rs(i))return cI(this.currentUrlTree,i,s);const a=this.parseUrl(i);return cI(this.currentUrlTree,a,s)}removeEmptyProps(i){return Object.keys(i).reduce((r,s)=>{const a=i[s];return null!=a&&(r[s]=a),r},{})}scheduleNavigation(i,r,s,a,o){if(this.disposed)return Promise.resolve(!1);let c,l,u;o?(c=o.resolve,l=o.reject,u=o.promise):u=new Promise((h,d)=>{c=h,l=d});const f=this.pendingTasks.add();return XI(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:a,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class YI{}let Vxe=(()=>{var n;class e{constructor(i,r,s,a,o){this.router=i,this.injector=s,this.preloadingStrategy=a,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(F2(i=>i instanceof vr),N4(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){const s=[];for(const a of r){a.providers&&!a._injector&&(a._injector=Xd(a.providers,i,`Route: ${a.path}`));const o=a._injector??i,c=a._loadedInjector??o;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&s.push(this.preloadConfig(o,a)),(a.children||a._loadedRoutes)&&s.push(this.processRoutes(c,a.children??a._loadedRoutes))}return Fn(s).pipe(ba())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(i,r):Ke(null);const a=s.pipe(Kn(o=>null===o?Ke(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??i,o.routes))));return r.loadComponent&&!r._loadedComponent?Fn([a,this.loader.loadComponent(r)]).pipe(ba()):a})}}return(n=e).\u0275fac=function(i){return new(i||n)(be(Qi),be(hS),be(m1),be(YI),be(j9))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();const X9=new Ie("");let ZI=(()=>{var n;class e{constructor(i,r,s,a,o={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=a,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Xu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof vr?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Po&&0===i.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof SI&&(i.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(i.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new SI(i,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(n=e).\u0275fac=function(i){!function PC(){throw new Error("invalid")}()},n.\u0275prov=Ae({token:n,factory:n.\u0275fac}),e})();function yr(n,e){return{\u0275kind:n,\u0275providers:e}}function JI(){const n=_e(g1);return e=>{const t=n.get(xo);if(e!==t.components[0])return;const i=n.get(Qi),r=n.get(QI);1===n.get(Y9)&&i.initialNavigation(),n.get(eR,null,mt.Optional)?.setUpPreloading(),n.get(X9,null,mt.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const QI=new Ie("",{factory:()=>new V1}),Y9=new Ie("",{providedIn:"root",factory:()=>1}),eR=new Ie("");function Rxe(n){return yr(0,[{provide:eR,useExisting:Vxe},{provide:YI,useExisting:n}])}function kxe(n){return yr(9,[{provide:$I,useValue:Mxe},{provide:qI,useValue:{skipNextTransition:!!n?.skipInitialTransition}}])}const tR=new Ie("ROUTER_FORROOT_GUARD"),Oxe=[h4,{provide:Io,useClass:b9},Qi,U4,{provide:Oo,useFactory:function KI(n){return n.routerState.root},deps:[Qi]},j9,[]];function Fxe(){return new yS("Router",Qi)}let nR=(()=>{var n;class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[Oxe,[],{provide:Wo,multi:!0,useValue:i},{provide:tR,useFactory:Wxe,deps:[[Qi,new zl,new Vl]]},{provide:Go,useValue:r||{}},r?.useHash?{provide:Ls,useClass:HQ}:{provide:Ls,useClass:GS},{provide:X9,useFactory:()=>{const n=_e(Kee),e=_e(Ht),t=_e(Go),i=_e(e8),r=_e(Io);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ZI(r,i,n,e,t)}},r?.preloadingStrategy?Rxe(r.preloadingStrategy).\u0275providers:[],{provide:yS,multi:!0,useFactory:Fxe},r?.initialNavigation?jxe(r):[],r?.bindToComponentInputs?yr(8,[VI,{provide:Zu,useExisting:VI}]).\u0275providers:[],r?.enableViewTransitions?kxe().\u0275providers:[],[{provide:iR,useFactory:JI},{provide:g7,multi:!0,useExisting:iR}]]}}static forChild(i){return{ngModule:e,providers:[{provide:Wo,multi:!0,useValue:i}]}}}return(n=e).\u0275fac=function(i){return new(i||n)(be(tR,8))},n.\u0275mod=tr({type:n}),n.\u0275inj=N1({}),e})();function Wxe(n){return"guarded"}function jxe(n){return["disabled"===n.initialNavigation?yr(3,[{provide:c7,multi:!0,useFactory:()=>{const e=_e(Qi);return()=>{e.setUpLocationChangeListener()}}},{provide:Y9,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?yr(2,[{provide:Y9,useValue:0},{provide:c7,multi:!0,deps:[g1],useFactory:e=>{const t=e.get(TQ,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Qi),s=e.get(QI);XI(r,()=>{i(!0)}),e.get(e8).afterPreactivation=()=>(i(!0),s.closed?Ke(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const iR=new Ie("");let qxe=(()=>{var n;class e{constructor(){this.artworks=Ml([{id:0,title:"Self Portrait",audio:"assets/audio/1.mp3",date:"1887",description:"This self-portrait was one of about 32 produced over a 10-year period, and these were an important part of his work as a painter; he painted himself because he often lacked the money to pay for models. Art historians are divided as to whether this painting is Van Gogh's final self-portrait or not. It is considered that it was painted in Arles following Van Gogh's admission to hospital after mutilating his ear. Van Gogh sent the picture to his younger brother, the art dealer Theo; an accompanying letter read: 'I hope you will notice that my facial expressions have become much calmer, although my eyes have the same insecure look as before, or so it appears to me.'",height:65,textureUrl:"assets/artworks/selfportrait.webp",votes:0,width:54,wiki:"https://wikipedia.org/wiki/Van_Gogh_self-portrait_(1889)"},{id:1,title:"Almond Blossom",audio:"assets/audio/2.mp3",date:"1890",description:"In mid-March 1888 van Gogh writes that the almond trees are coming into full flower, weather there is changeable, often windy with turbulent skies. Later on Theo wrote to his brother Vincent on January 31, 1890, to announce the birth of his son, Vincent Willem van Gogh. He was very close to his brother and he sought to symbolize new life in the flowers of the almond tree for the birth of baby Vincent.",height:73.5,textureUrl:"assets/artworks/almond_blossom.webp",votes:0,width:92,wiki:"https://en.wikipedia.org/wiki/Almond_Blossoms"},{id:2,title:"The Bedroom",audio:"assets/audio/3.mp3",date:"1887",description:"The painting depicts van Gogh's bedroom at 2, Place Lamartine in Arles, Bouches-du-Rhone, France, known as the Yellow House. The door to the right opened on to the upper floor and the staircase; the door to the left was that of the guest room he held prepared for Gauguin; the window in the front wall looked on to Place Lamartine and its public gardens. This room was not rectangular but trapezoid with an obtuse angle in the left hand corner of the front wall and an acute angle at the right.",height:72.4,textureUrl:"assets/artworks/bedroom.webp",votes:0,width:91.3,wiki:"https://wikipedia.org/wiki/Bedroom_in_Arles"},{id:3,title:"Sunflowers",audio:"assets/audio/1.mp3",date:"1887",description:"This is one of five versions of Sunflowers on display in museums and galleries across the world. Van Gogh made the paintings to decorate his house in Arles in readiness for a visit from his friend and fellow artist, Paul Gauguin.'The sunflower is mine', Van Gogh once declared, and it is clear that the flower had various meanings for him. The different stages in the sunflower's life cycle shown here, from young bud through to maturity and eventual decay, follow in the vanitas tradition of Dutch seventeenth-century flower paintings, which emphasise the transient nature of human actions. The sunflowers were perhaps also intended to be a symbol of friendship and a celebration of the beauty and vitality of nature.",height:95,textureUrl:"assets/artworks/sunflowers.webp",votes:0,width:73,download:"https://en.wikipedia.org/wiki/File:Vincent_van_Gogh_-_Sunflowers_-_VGM_F458.jpg",wiki:"https://wikipedia.org/wiki/Sunflowers_(Van_Gogh_series)"},{id:4,title:"Irises",audio:"assets/audio/1.mp3",date:"1889",description:"Van Gogh painted this still life in the psychiatric hospital in Saint-Remy. For him, the painting was mainly a study in color. He set out to achieve a powerful color contrast. By placing the purple flowers against a yellow background, he made the decorative forms stand out even more strongly. The irises were originally purple. But as the red pigment has faded, they have turned blue. Van Gogh made two paintings of this bouquet. In the other still life, he contrasted purple and pink with green.",height:93,textureUrl:"assets/artworks/irises.webp",votes:0,width:74,wiki:"https://en.wikipedia.org/wiki/Vase_with_Irises_Against_a_Yellow_Background"}]),this.upvoted=[],this.artworksLength=this.artworks.length}getArtworks(){return this.artworks()}upvoteArtwork(i){return-1===this.upvoted.indexOf(i)&&(this.upvoted.push(i),this.artworks.mutate(r=>{r[i].votes+=1}),console.log("Mutated",i,this.artworks()[i].votes)),console.log("Upvoted already!"),this.artworks()[i].votes}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})();function Kr(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function rR(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Z9,ri,fn,rn,C1,nm,im,uR,dR,Zo,t0,c,l,u,f,h,d,n,e,t,i,r,s,a,o,p,e1={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},jo={duration:.5,overwrite:!1,delay:0},_1=1e8,kt=1e-8,K9=2*Math.PI,Xxe=K9/4,Yxe=0,sR=Math.sqrt,Zxe=Math.cos,Kxe=Math.sin,Un=function(e){return"string"==typeof e},hn=function(e){return"function"==typeof e},Jr=function(e){return"number"==typeof e},J9=function(e){return typeof e>"u"},_r=function(e){return"object"==typeof e},Ii=function(e){return!1!==e},Q9=function(){return typeof window<"u"},t8=function(e){return hn(e)||Un(e)},aR="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},si=Array.isArray,em=/(?:-?\.?\d|\.)+/gi,oR=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,$o=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tm=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,cR=/[+-]=-?[.\d]+/,lR=/[^,'"\[\]\s]+/gi,Jxe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,t1={},n8={},fR=function(e){return(n8=ks(e,t1))&&Oi},rm=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},i8=function(e,t){return!t&&console.warn(e)},hR=function(e,t){return e&&(t1[e]=t)&&n8&&(n8[e]=t)||t1},X4=function(){return 0},Qxe={suppressEvents:!0,isStart:!0,kill:!1},r8={suppressEvents:!0,kill:!1},ebe={suppressEvents:!0},sm={},B2=[],am={},n1={},om={},pR=30,s8=[],cm="",lm=function(e){var i,r,t=e[0];if(_r(t)||hn(t)||(e=[e]),!(i=(t._gsap||{}).harness)){for(r=s8.length;r--&&!s8[r].targetTest(t););i=s8[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new GR(e[r],i)))||e.splice(r,1);return e},Ps=function(e){return e._gsap||lm(b1(e))[0]._gsap},mR=function(e,t,i){return(i=e[t])&&hn(i)?e[t]():J9(i)&&e.getAttribute&&e.getAttribute(t)||i},Ri=function(e,t){return(e=e.split(",")).forEach(t)||e},Mn=function(e){return Math.round(1e5*e)/1e5||0},qn=function(e){return Math.round(1e7*e)/1e7||0},qo=function(e,t){var i=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+r:"-"===i?e-r:"*"===i?e*r:e/r},tbe=function(e,t){for(var i=t.length,r=0;e.indexOf(t[r])<0&&++r<i;);return r<i},a8=function(){var i,r,e=B2.length,t=B2.slice(0);for(am={},B2.length=0,i=0;i<e;i++)(r=t[i])&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},gR=function(e,t,i,r){B2.length&&!ri&&a8(),e.render(t,i,r||ri&&t<0&&(e._initted||e._startAt)),B2.length&&!ri&&a8()},vR=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(lR).length<2?t:Un(e)?e.trim():e},MR=function(e){return e},w1=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},ks=function(e,t){for(var i in t)e[i]=t[i];return e},yR=function n(e,t){for(var i in t)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=_r(t[i])?n(e[i]||(e[i]={}),t[i]):t[i]);return e},o8=function(e,t){var r,i={};for(r in e)r in t||(i[r]=e[r]);return i},Y4=function(e){var t=e.parent||rn,i=e.keyframes?function(e){return function(t,i){for(var r in i)r in t||"duration"===r&&e||"ease"===r||(t[r]=i[r])}}(si(e.keyframes)):w1;if(Ii(e.inherit))for(;t;)i(e,t.vars.defaults),t=t.parent||t._dp;return e},_R=function(e,t,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var o,a=e[r];if(s)for(o=t[s];a&&a[s]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},c8=function(e,t,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=t._prev,a=t._next;s?s._next=a:e[i]===t&&(e[i]=a),a?a._prev=s:e[r]===t&&(e[r]=s),t._next=t._prev=t.parent=null},G2=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Os=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},um=function(e,t,i,r){return e._startAt&&(ri?e._startAt.revert(r8):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},sbe=function n(e){return!e||e._ts&&n(e.parent)},CR=function(e){return e._repeat?Xo(e._tTime,e=e.duration()+e._rDelay)*e:0},Xo=function(e,t){var i=Math.floor(e/=t);return e&&i===e?i-1:i},l8=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},u8=function(e){return e._end=qn(e._start+(e._tDur/Math.abs(e._ts||e._rts||kt)||0))},f8=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=qn(i._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),u8(e),i._dirty||Os(i,e)),e},wR=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=l8(e.rawTime(),t),(!t._dur||K4(0,t.totalDuration(),i)-t._tTime>kt)&&t.render(i,!0)),Os(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-kt}},Cr=function(e,t,i,r){return t.parent&&G2(t),t._start=qn((Jr(i)?i:i||e!==rn?x1(e,i,t):e._time)+t._delay),t._end=qn(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),_R(e,t,"_first","_last",e._sort?"_start":0),fm(t)||(e._recent=t),r||wR(e,t),e._ts<0&&f8(e,e._tTime),e},xR=function(e,t){return(t1.ScrollTrigger||rm("scrollTrigger",t))&&t1.ScrollTrigger.create(t,e)},bR=function(e,t,i,r,s){return _m(e,t,s),e._initted?!i&&e._pt&&!ri&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&dR!==i1.frame?(B2.push(e),e._lazy=[s,r],1):void 0:1},abe=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},fm=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Yo=function(e,t,i,r){var s=e._repeat,a=qn(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=a/e._dur),e._dur=a,e._tDur=s?s<0?1e10:qn(a*(s+1)+e._rDelay*s):a,o>0&&!r&&f8(e,e._tTime=e._tDur*o),e.parent&&u8(e),i||Os(e.parent,e),e},SR=function(e){return e instanceof Pi?Os(e):Yo(e,e._dur)},lbe={_start:0,endTime:X4,totalDuration:X4},x1=function n(e,t,i){var o,c,l,r=e.labels,s=e._recent||lbe,a=e.duration()>=_1?s.endTime(!1):e._dur;return Un(t)&&(isNaN(t)||t in r)?(c=t.charAt(0),l="%"===t.substr(-1),o=t.indexOf("="),"<"===c||">"===c?(o>=0&&(t=t.replace(/=/,"")),("<"===c?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(l?(o<0?s:i).totalDuration()/100:1)):o<0?(t in r||(r[t]=a),r[t]):(c=parseFloat(t.charAt(o-1)+t.substr(o+1)),l&&i&&(c=c/100*(si(i)?i[0]:i).totalDuration()),o>1?n(e,t.substr(0,o-1),i)+c:a+c)):null==t?a:+t},Z4=function(e,t,i){var o,c,r=Jr(t[1]),s=(r?2:1)+(e<2?0:1),a=t[s];if(r&&(a.duration=t[1]),a.parent=i,e){for(o=a,c=i;c&&!("immediateRender"in o);)o=c.vars.defaults||{},c=Ii(c.vars.inherit)&&c.parent;a.immediateRender=Ii(o.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return new An(t[0],a,t[s+1])},W2=function(e,t){return e||0===e?t(e):t},K4=function(e,t,i){return i<e?e:i>t?t:i},ai=function(e,t){return Un(e)&&(t=Jxe.exec(e))?t[1]:""},hm=[].slice,AR=function(e,t){return e&&_r(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&_r(e[0]))&&!e.nodeType&&e!==C1},b1=function(e,t,i){return fn&&!t&&fn.selector?fn.selector(e):!Un(e)||i||!nm&&Ko()?si(e)?function(e,t,i){return void 0===i&&(i=[]),e.forEach(function(r){var s;return Un(r)&&!t||AR(r,1)?(s=i).push.apply(s,b1(r)):i.push(r)})||i}(e,i):AR(e)?hm.call(e,0):e?[e]:[]:hm.call((t||im).querySelectorAll(e),0)},dm=function(e){return e=b1(e)[0]||i8("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return b1(t,i.querySelectorAll?i:i===e?i8("Invalid scope")||im.createElement("div"):e)}},ER=function(e){return e.sort(function(){return.5-Math.random()})},TR=function(e){if(hn(e))return e;var t=_r(e)?e:{each:e},i=Fs(t.ease),r=t.from||0,s=parseFloat(t.base)||0,a={},o=r>0&&r<1,c=isNaN(r)||o,l=t.axis,u=r,f=r;return Un(r)?u=f={center:.5,edges:.5,end:1}[r]||0:!o&&c&&(u=r[0],f=r[1]),function(h,d,p){var g,M,y,_,C,b,x,S,w,m=(p||t).length,v=a[m];if(!v){if(!(w="auto"===t.grid?0:(t.grid||[1,_1])[1])){for(x=-_1;x<(x=p[w++].getBoundingClientRect().left)&&w<m;);w--}for(v=a[m]=[],g=c?Math.min(w,m)*u-.5:r%w,M=w===_1?0:c?m*f/w-.5:r/w|0,x=0,S=_1,b=0;b<m;b++)y=b%w-g,_=M-(b/w|0),v[b]=C=l?Math.abs("y"===l?_:y):sR(y*y+_*_),C>x&&(x=C),C<S&&(S=C);"random"===r&&ER(v),v.max=x-S,v.min=S,v.v=m=(parseFloat(t.amount)||parseFloat(t.each)*(w>m?m-1:l?"y"===l?m/w:w:Math.max(w,m/w))||0)*("edges"===r?-1:1),v.b=m<0?s-m:s,v.u=ai(t.amount||t.each)||0,i=i&&m<0?FR(i):i}return m=(v[h]-v.min)/v.max||0,qn(v.b+(i?i(m):m)*v.v)+v.u}},pm=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=qn(Math.round(parseFloat(i)/e)*e*t);return(r-r%1)/t+(Jr(i)?0:ai(i))}},LR=function(e,t){var r,s,i=si(e);return!i&&_r(e)&&(r=i=e.radius||_1,e.values?(e=b1(e.values),(s=!Jr(e[0]))&&(r*=r)):e=pm(e.increment)),W2(t,i?hn(e)?function(a){return s=e(a),Math.abs(s-a)<=r?s:a}:function(a){for(var h,d,o=parseFloat(s?a.x:a),c=parseFloat(s?a.y:0),l=_1,u=0,f=e.length;f--;)(h=s?(h=e[f].x-o)*h+(d=e[f].y-c)*d:Math.abs(e[f]-o))<l&&(l=h,u=f);return u=!r||l<=r?e[u]:a,s||u===a||Jr(a)?u:u+ai(a)}:pm(e))},HR=function(e,t,i,r){return W2(si(e)?!t:!0===i?!!(i=0):!r,function(){return si(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*r)/r})},zR=function(e,t,i){return W2(i,function(r){return e[~~t(r)]})},J4=function(e){for(var r,s,a,o,t=0,i="";~(r=e.indexOf("random(",t));)a=e.indexOf(")",r),o="["===e.charAt(r+7),s=e.substr(r+7,a-r-7).match(o?lR:em),i+=e.substr(t,r-t)+HR(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),t=a+1;return i+e.substr(t,e.length-t)},VR=function(e,t,i,r,s){var a=t-e,o=r-i;return W2(s,function(c){return i+((c-e)/a*o||0)})},DR=function(e,t,i){var a,o,c,r=e.labels,s=_1;for(a in r)(o=r[a]-t)<0==!!i&&o&&s>(o=Math.abs(o))&&(c=a,s=o);return c},S1=function(e,t,i){var c,l,u,r=e.vars,s=r[t],a=fn,o=e._ctx;if(s)return c=r[t+"Params"],l=r.callbackScope||e,i&&B2.length&&a8(),o&&(fn=o),u=c?s.apply(l,c):s.call(l),fn=a,u},Q4=function(e){return G2(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ri),e.progress()<1&&S1(e,"onInterrupt"),e},NR=[],IR=function(e){if(Q9()&&e){var t=(e=!e.name&&e.default||e).name,i=hn(e),r=t&&!i&&e.init?function(){this._props=[]}:e,s={init:X4,render:xm,add:Mm,kill:Dbe,modifier:Vbe,rawVars:0},a={targetTest:0,get:0,getSetter:wm,aliases:{},register:0};if(Ko(),e!==r){if(n1[t])return;w1(r,w1(o8(e,s),a)),ks(r.prototype,ks(s,o8(e,a))),n1[r.prop=t]=r,e.targetTest&&(s8.push(r),sm[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}hR(t,r),e.register&&e.register(Oi,r,ki)}else e&&NR.push(e)},Ot=255,e0={aqua:[0,Ot,Ot],lime:[0,Ot,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ot],navy:[0,0,128],white:[Ot,Ot,Ot],olive:[128,128,0],yellow:[Ot,Ot,0],orange:[Ot,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ot,0,0],pink:[Ot,192,203],cyan:[0,Ot,Ot],transparent:[Ot,Ot,Ot,0]},mm=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*Ot+.5|0},RR=function(e,t,i){var s,a,o,c,l,u,f,h,d,p,r=e?Jr(e)?[e>>16,e>>8&Ot,e&Ot]:0:e0.black;if(!r){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),e0[e])r=e0[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),a=e.charAt(2),o=e.charAt(3),e="#"+s+s+a+a+o+o+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(r=parseInt(e.substr(1,6),16))>>16,r>>8&Ot,r&Ot,parseInt(e.substr(7),16)/255];r=[(e=parseInt(e.substr(1),16))>>16,e>>8&Ot,e&Ot]}else if("hsl"===e.substr(0,3))if(r=p=e.match(em),t){if(~e.indexOf("="))return r=e.match(oR),i&&r.length<4&&(r[3]=1),r}else c=+r[0]%360/360,l=+r[1]/100,s=2*(u=+r[2]/100)-(a=u<=.5?u*(l+1):u+l-u*l),r.length>3&&(r[3]*=1),r[0]=mm(c+1/3,s,a),r[1]=mm(c,s,a),r[2]=mm(c-1/3,s,a);else r=e.match(em)||e0.transparent;r=r.map(Number)}return t&&!p&&(s=r[0]/Ot,a=r[1]/Ot,o=r[2]/Ot,u=((f=Math.max(s,a,o))+(h=Math.min(s,a,o)))/2,f===h?c=l=0:(d=f-h,l=u>.5?d/(2-f-h):d/(f+h),c=f===s?(a-o)/d+(a<o?6:0):f===a?(o-s)/d+2:(s-a)/d+4,c*=60),r[0]=~~(c+.5),r[1]=~~(100*l+.5),r[2]=~~(100*u+.5)),i&&r.length<4&&(r[3]=1),r},PR=function(e){var t=[],i=[],r=-1;return e.split(j2).forEach(function(s){var a=s.match($o)||[];t.push.apply(t,a),i.push(r+=a.length+1)}),t.c=i,t},kR=function(e,t,i){var c,l,u,f,r="",s=(e+r).match(j2),a=t?"hsla(":"rgba(",o=0;if(!s)return e;if(s=s.map(function(h){return(h=RR(h,t,1))&&a+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),i&&(u=PR(e),(c=i.c).join(r)!==u.c.join(r)))for(f=(l=e.replace(j2,"1").split($o)).length-1;o<f;o++)r+=l[o]+(~c.indexOf(o)?s.shift()||a+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!l)for(f=(l=e.split(j2)).length-1;o<f;o++)r+=l[o]+s[o];return r+l[f]},j2=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in e0)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),Mbe=/hsl[a]?\(/,OR=function(e){var i,t=e.join(" ");if(j2.lastIndex=0,j2.test(t))return i=Mbe.test(t),e[1]=kR(e[1],i),e[0]=kR(e[0],i,PR(e[1])),!0},i1=(n=Date.now,e=500,t=33,i=n(),r=i,a=s=1e3/240,p=function m(v){var y,_,C,b,g=n()-r,M=!0===v;if(g>e&&(i+=g-t),((y=(C=(r+=g)-i)-a)>0||M)&&(b=++f.frame,h=C-1e3*f.time,f.time=C/=1e3,a+=y+(y>=s?4:s-y),_=1),M||(c=l(m)),_)for(d=0;d<o.length;d++)o[d](C,h,b,v)},f={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(v){return h/(1e3/(v||60))},wake:function(){uR&&(!nm&&Q9()&&(C1=nm=window,im=C1.document||{},t1.gsap=Oi,(C1.gsapVersions||(C1.gsapVersions=[])).push(Oi.version),fR(n8||C1.GreenSockGlobals||!C1.gsap&&C1||{}),u=C1.requestAnimationFrame,NR.forEach(IR)),c&&f.sleep(),l=u||function(v){return setTimeout(v,a-1e3*f.time+1|0)},t0=1,p(2))},sleep:function(){(u?C1.cancelAnimationFrame:clearTimeout)(c),t0=0,l=X4},lagSmoothing:function(v,g){e=v||1/0,t=Math.min(g||33,e)},fps:function(v){a=1e3*f.time+(s=1e3/(v||240))},add:function(v,g,M){var y=g?function(_,C,b,x){v(_,C,b,x),f.remove(y)}:v;return f.remove(v),o[M?"unshift":"push"](y),Ko(),y},remove:function(v,g){~(g=o.indexOf(v))&&o.splice(g,1)&&d>=g&&d--},_listeners:o=[]}),Ko=function(){return!t0&&i1.wake()},wt={},ybe=/^[\d.\-M][\d.\-,\s]/,_be=/["']/g,Cbe=function(e){for(var o,c,l,t={},i=e.substr(1,e.length-3).split(":"),r=i[0],s=1,a=i.length;s<a;s++)c=i[s],o=s!==a-1?c.lastIndexOf(","):c.length,l=c.substr(0,o),t[r]=isNaN(l)?l.replace(_be,"").trim():+l,r=c.substr(o+1).trim();return t},FR=function(e){return function(t){return 1-e(1-t)}},UR=function n(e,t){for(var r,i=e._first;i;)i instanceof Pi?n(i,t):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==t&&(i.timeline?n(i.timeline,t):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=t)),i=i._next},Fs=function(e,t){return e&&(hn(e)?e:wt[e]||function(e){var t=(e+"").split("("),i=wt[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[Cbe(t[1])]:function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",t);return e.substring(t,~r&&r<i?e.indexOf(")",i+1):i)}(e).split(",").map(vR)):wt._CE&&ybe.test(e)?wt._CE("",e):i}(e))||t},Us=function(e,t,i,r){void 0===i&&(i=function(c){return 1-t(1-c)}),void 0===r&&(r=function(c){return c<.5?t(2*c)/2:1-t(2*(1-c))/2});var a,s={easeIn:t,easeOut:i,easeInOut:r};return Ri(e,function(o){for(var c in wt[o]=t1[o]=s,wt[a=o.toLowerCase()]=i,s)wt[a+("easeIn"===c?".in":"easeOut"===c?".out":".inOut")]=wt[o+"."+c]=s[c]}),s},BR=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},gm=function n(e,t,i){var r=t>=1?t:1,s=(i||(e?.3:.45))/(t<1?t:1),a=s/K9*(Math.asin(1/r)||0),o=function(u){return 1===u?1:r*Math.pow(2,-10*u)*Kxe((u-a)*s)+1},c="out"===e?o:"in"===e?function(l){return 1-o(1-l)}:BR(o);return s=K9/s,c.config=function(l,u){return n(e,l,u)},c},vm=function n(e,t){void 0===t&&(t=1.70158);var i=function(a){return a?--a*a*((t+1)*a+t)+1:0},r="out"===e?i:"in"===e?function(s){return 1-i(1-s)}:BR(i);return r.config=function(s){return n(e,s)},r};Ri("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;Us(n+",Power"+(t-1),e?function(i){return Math.pow(i,t)}:function(i){return i},function(i){return 1-Math.pow(1-i,t)},function(i){return i<.5?Math.pow(2*i,t)/2:1-Math.pow(2*(1-i),t)/2})}),wt.Linear.easeNone=wt.none=wt.Linear.easeIn,Us("Elastic",gm("in"),gm("out"),gm()),function(n,e){var s=function(o){return o<.36363636363636365?n*o*o:o<.7272727272727273?n*Math.pow(o-1.5/e,2)+.75:o<.9090909090909092?n*(o-=2.25/e)*o+.9375:n*Math.pow(o-2.625/e,2)+.984375};Us("Bounce",function(a){return 1-s(1-a)},s)}(7.5625,2.75),Us("Expo",function(n){return n?Math.pow(2,10*(n-1)):0}),Us("Circ",function(n){return-(sR(1-n*n)-1)}),Us("Sine",function(n){return 1===n?1:1-Zxe(n*Xxe)}),Us("Back",vm("in"),vm("out"),vm()),wt.SteppedEase=wt.steps=t1.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,r=e+(t?0:1),s=t?1:0;return function(o){return((r*K4(0,.99999999,o)|0)+s)*i}}},jo.ease=wt["quad.out"],Ri("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return cm+=n+","+n+"Params,"});var GR=function(e,t){this.id=Yxe++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:mR,this.set=t?t.getSetter:wm},n0=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Yo(this,+t.duration,1,1),this.data=t.data,fn&&(this._ctx=fn,fn.data.push(this)),t0||i1.wake()}var e=n.prototype;return e.delay=function(i){return i||0===i?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,Yo(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(Ko(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(f8(this,i),!s._dp||s.parent||wR(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Cr(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===kt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),gR(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+CR(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?i:1-i)+CR(this),r):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(i,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,r):this._repeat?Xo(this._tTime,s)+1:1},e.timeScale=function(i){if(!arguments.length)return this._rts===-kt?0:this._rts;if(this._rts===i)return this;var r=this.parent&&this._ts?l8(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-kt?0:this._rts,this.totalTime(K4(-Math.abs(this._delay),this._tDur,r),!0),u8(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ko(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==kt&&(this._tTime-=kt)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Cr(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(Ii(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?l8(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){void 0===i&&(i=ebe);var r=ri;return ri=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),"nested"!==this.data&&!1!==i.kill&&this.kill(),ri=r,this},e.globalTime=function(i){for(var r=this,s=arguments.length?i:r.rawTime();r;)s=r._start+s/(r._ts||1),r=r._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(i):s},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,SR(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,SR(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(x1(this,i),Ii(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,Ii(r))},e.play=function(i,r){return null!=i&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return null!=i&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return null!=i&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-kt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-kt,this},e.isActive=function(){var s,i=this.parent||this._dp,r=this._start;return!(i&&!(this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=r&&s<this.endTime(!0)-kt))},e.eventCallback=function(i,r,s){var a=this.vars;return arguments.length>1?(r?(a[i]=r,s&&(a[i+"Params"]=s),"onUpdate"===i&&(this._onUpdate=r)):delete a[i],this):a[i]},e.then=function(i){var r=this;return new Promise(function(s){var a=hn(i)?i:MR,o=function(){var l=r.then;r.then=null,hn(a)&&(a=a(r))&&(a.then||a===r)&&(r.then=l),s(a),r.then=l};r._initted&&1===r.totalProgress()&&r._ts>=0||!r._tTime&&r._ts<0?o():r._prom=o})},e.kill=function(){Q4(this)},n}();w1(n0.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-kt,_prom:0,_ps:!1,_rts:1});var Pi=function(n){function e(i,r){var s;return void 0===i&&(i={}),(s=n.call(this,i)||this).labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Ii(i.sortChildren),rn&&Cr(i.parent||rn,Kr(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&xR(Kr(s),i.scrollTrigger),s}rR(e,n);var t=e.prototype;return t.to=function(r,s,a){return Z4(0,arguments,this),this},t.from=function(r,s,a){return Z4(1,arguments,this),this},t.fromTo=function(r,s,a,o){return Z4(2,arguments,this),this},t.set=function(r,s,a){return s.duration=0,s.parent=this,Y4(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new An(r,s,x1(this,a),1),this},t.call=function(r,s,a){return Cr(this,An.delayedCall(0,r,s),a)},t.staggerTo=function(r,s,a,o,c,l,u){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=l,a.onCompleteParams=u,a.parent=this,new An(r,a,x1(this,c)),this},t.staggerFrom=function(r,s,a,o,c,l,u){return a.runBackwards=1,Y4(a).immediateRender=Ii(a.immediateRender),this.staggerTo(r,s,a,o,c,l,u)},t.staggerFromTo=function(r,s,a,o,c,l,u,f){return o.startAt=a,Y4(o).immediateRender=Ii(o.immediateRender),this.staggerTo(r,s,o,c,l,u,f)},t.render=function(r,s,a){var h,d,p,m,v,g,M,y,_,C,b,x,o=this._time,c=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=r<=0?0:qn(r),f=this._zTime<0!=r<0&&(this._initted||!l);if(this!==rn&&u>c&&r>=0&&(u=c),u!==this._tTime||a||f){if(o!==this._time&&l&&(u+=this._time-o,r+=this._time-o),h=u,_=this._start,g=!(y=this._ts),f&&(l||(o=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(b=this._yoyo,v=l+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(100*v+r,s,a);if(h=qn(u%v),u===c?(m=this._repeat,h=l):((m=~~(u/v))&&m===u/v&&(h=l,m--),h>l&&(h=l)),C=Xo(this._tTime,v),!o&&this._tTime&&C!==m&&this._tTime-C*v-this._dur<=0&&(C=m),b&&1&m&&(h=l-h,x=1),m!==C&&!this._lock){var S=b&&1&C,w=S===(b&&1&m);if(m<C&&(S=!S),o=S?0:u%l?l:u,this._lock=1,this.render(o||(x?0:qn(m*v)),s,!l)._lock=0,this._tTime=u,!s&&this.parent&&S1(this,"onRepeat"),this.vars.repeatRefresh&&!x&&(this.invalidate()._lock=1),o&&o!==this._time||g!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,c=this._tDur,w&&(this._lock=2,this.render(o=S?l:-1e-4,!0),this.vars.repeatRefresh&&!x&&this.invalidate()),this._lock=0,!this._ts&&!g)return this;UR(this,x)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(M=function(e,t,i){var r;if(i>t)for(r=e._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,qn(o),qn(h)),M&&(u-=h-(h=M._start))),this._tTime=u,this._time=h,this._act=!y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,o=0),!o&&h&&!s&&!m&&(S1(this,"onStart"),this._tTime!==u))return this;if(h>=o&&r>=0)for(d=this._first;d;){if(p=d._next,(d._act||h>=d._start)&&d._ts&&M!==d){if(d.parent!==this)return this.render(r,s,a);if(d.render(d._ts>0?(h-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(h-d._start)*d._ts,s,a),h!==this._time||!this._ts&&!g){M=0,p&&(u+=this._zTime=-kt);break}}d=p}else{d=this._last;for(var A=r<0?r:h;d;){if(p=d._prev,(d._act||A<=d._end)&&d._ts&&M!==d){if(d.parent!==this)return this.render(r,s,a);if(d.render(d._ts>0?(A-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(A-d._start)*d._ts,s,a||ri&&(d._initted||d._startAt)),h!==this._time||!this._ts&&!g){M=0,p&&(u+=this._zTime=A?-kt:kt);break}}d=p}}if(M&&!s&&(this.pause(),M.render(h>=o?0:-kt)._zTime=h>=o?1:-1,this._ts))return this._start=_,u8(this),this.render(r,s,a);this._onUpdate&&!s&&S1(this,"onUpdate",!0),(u===c&&this._tTime>=this.totalDuration()||!u&&o)&&(_===this._start||Math.abs(y)!==Math.abs(this._ts))&&(this._lock||((r||!l)&&(u===c&&this._ts>0||!u&&this._ts<0)&&G2(this,1),!s&&(!(r<0)||o)&&(u||o||!c)&&(S1(this,u===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(r,s){var a=this;if(Jr(s)||(s=x1(this,s,r)),!(r instanceof n0)){if(si(r))return r.forEach(function(o){return a.add(o,s)}),this;if(Un(r))return this.addLabel(r,s);if(!hn(r))return this;r=An.delayedCall(0,r)}return this!==r?Cr(this,r,s):this},t.getChildren=function(r,s,a,o){void 0===r&&(r=!0),void 0===s&&(s=!0),void 0===a&&(a=!0),void 0===o&&(o=-_1);for(var c=[],l=this._first;l;)l._start>=o&&(l instanceof An?s&&c.push(l):(a&&c.push(l),r&&c.push.apply(c,l.getChildren(!0,s,a)))),l=l._next;return c},t.getById=function(r){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===r)return s[a]},t.remove=function(r){return Un(r)?this.removeLabel(r):hn(r)?this.killTweensOf(r):(c8(this,r),r===this._recent&&(this._recent=this._last),Os(this))},t.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=qn(i1.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),n.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},t.addLabel=function(r,s){return this.labels[r]=x1(this,s),this},t.removeLabel=function(r){return delete this.labels[r],this},t.addPause=function(r,s,a){var o=An.delayedCall(0,s||X4,a);return o.data="isPause",this._hasPause=1,Cr(this,o,x1(this,r))},t.removePause=function(r){var s=this._first;for(r=x1(this,r);s;)s._start===r&&"isPause"===s.data&&G2(s),s=s._next},t.killTweensOf=function(r,s,a){for(var o=this.getTweensOf(r,a),c=o.length;c--;)$2!==o[c]&&o[c].kill(r,s);return this},t.getTweensOf=function(r,s){for(var u,a=[],o=b1(r),c=this._first,l=Jr(s);c;)c instanceof An?tbe(c._targets,o)&&(l?(!$2||c._initted&&c._ts)&&c.globalTime(0)<=s&&c.globalTime(c.totalDuration())>s:!s||c.isActive())&&a.push(c):(u=c.getTweensOf(o,s)).length&&a.push.apply(a,u),c=c._next;return a},t.tweenTo=function(r,s){s=s||{};var d,a=this,o=x1(a,r),l=s.startAt,u=s.onStart,f=s.onStartParams,h=s.immediateRender,p=An.to(a,w1({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(l&&"time"in l?l.time:a._time))/a.timeScale())||kt,onStart:function(){if(a.pause(),!d){var v=s.duration||Math.abs((o-(l&&"time"in l?l.time:a._time))/a.timeScale());p._dur!==v&&Yo(p,v,0,1).render(p._time,!0,!0),d=1}u&&u.apply(p,f||[])}},s));return h?p.render(0):p},t.tweenFromTo=function(r,s,a){return this.tweenTo(s,w1({startAt:{time:x1(this,r)}},a))},t.recent=function(){return this._recent},t.nextLabel=function(r){return void 0===r&&(r=this._time),DR(this,x1(this,r))},t.previousLabel=function(r){return void 0===r&&(r=this._time),DR(this,x1(this,r),1)},t.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+kt)},t.shiftChildren=function(r,s,a){void 0===a&&(a=0);for(var l,o=this._first,c=this.labels;o;)o._start>=a&&(o._start+=r,o._end+=r),o=o._next;if(s)for(l in c)c[l]>=a&&(c[l]+=r);return Os(this)},t.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return n.prototype.invalidate.call(this,r)},t.clear=function(r){void 0===r&&(r=!0);for(var a,s=this._first;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Os(this)},t.totalDuration=function(r){var l,u,f,s=0,a=this,o=a._last,c=_1;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-r:r));if(a._dirty){for(f=a.parent;o;)l=o._prev,o._dirty&&o.totalDuration(),(u=o._start)>c&&a._sort&&o._ts&&!a._lock?(a._lock=1,Cr(a,o,u-o._delay,1)._lock=0):c=u,u<0&&o._ts&&(s-=u,(!f&&!a._dp||f&&f.smoothChildTiming)&&(a._start+=u/a._ts,a._time-=u,a._tTime-=u),a.shiftChildren(-u,!1,-1/0),c=0),o._end>s&&o._ts&&(s=o._end),o=l;Yo(a,a===rn&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},e.updateRoot=function(r){if(rn._ts&&(gR(rn,l8(r,rn)),dR=i1.frame),i1.frame>=pR){pR+=e1.autoSleep||120;var s=rn._first;if((!s||!s._ts)&&e1.autoSleep&&i1._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||i1.sleep()}}},e}(n0);w1(Pi.prototype,{_lock:0,_hasPause:0,_forcing:0});var $2,ym,bbe=function(e,t,i,r,s,a,o){var f,h,d,p,m,v,g,M,c=new ki(this._pt,e,t,0,1,YR,null,s),l=0,u=0;for(c.b=i,c.e=r,i+="",(g=~(r+="").indexOf("random("))&&(r=J4(r)),a&&(a(M=[i,r],e,t),i=M[0],r=M[1]),h=i.match(tm)||[];f=tm.exec(r);)p=f[0],m=r.substring(l,f.index),d?d=(d+1)%5:"rgba("===m.substr(-5)&&(d=1),p!==h[u++]&&(v=parseFloat(h[u-1])||0,c._pt={_next:c._pt,p:m||1===u?m:",",s:v,c:"="===p.charAt(1)?qo(v,p)-v:parseFloat(p)-v,m:d&&d<4?Math.round:0},l=tm.lastIndex);return c.c=l<r.length?r.substring(l,r.length):"",c.fp=o,(cR.test(r)||g)&&(c.e=0),this._pt=c,c},Mm=function(e,t,i,r,s,a,o,c,l,u){hn(r)&&(r=r(s||0,e,a));var p,f=e[t],h="get"!==i?i:hn(f)?l?e[t.indexOf("set")||!hn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():f,d=hn(f)?l?Lbe:qR:Cm;if(Un(r)&&(~r.indexOf("random(")&&(r=J4(r)),"="===r.charAt(1)&&((p=qo(h,r)+(ai(h)||0))||0===p)&&(r=p)),!u||h!==r||ym)return isNaN(h*r)||""===r?(!f&&!(t in e)&&rm(t,r),bbe.call(this,e,t,h,r,d,c||e1.stringFilter,l)):(p=new ki(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof f?zbe:XR,0,d),l&&(p.fp=l),o&&p.modifier(o,this,e),this._pt=p)},WR=function(e,t,i,r,s,a){var o,c,l,u;if(n1[e]&&!1!==(o=new n1[e]).init(s,o.rawVars?t[e]:function(e,t,i,r,s){if(hn(e)&&(e=r0(e,s,t,i,r)),!_r(e)||e.style&&e.nodeType||si(e)||aR(e))return Un(e)?r0(e,s,t,i,r):e;var o,a={};for(o in e)a[o]=r0(e[o],s,t,i,r);return a}(t[e],r,s,a,i),i,r,a)&&(i._pt=c=new ki(i._pt,s,e,0,1,o.render,o,0,o.priority),i!==Zo))for(l=i._ptLookup[i._targets.indexOf(s)],u=o._props.length;u--;)l[o._props[u]]=c;return o},_m=function n(e,t,i){var x,S,w,A,I,k,U,z,P,O,G,ee,j,r=e.vars,s=r.ease,a=r.startAt,o=r.immediateRender,c=r.lazy,l=r.onUpdate,u=r.onUpdateParams,f=r.callbackScope,h=r.runBackwards,d=r.yoyoEase,p=r.keyframes,m=r.autoRevert,v=e._dur,g=e._startAt,M=e._targets,y=e.parent,_=y&&"nested"===y.data?y.vars.targets:M,C="auto"===e._overwrite&&!Z9,b=e.timeline;if(b&&(!p||!s)&&(s="none"),e._ease=Fs(s,jo.ease),e._yEase=d?FR(Fs(!0===d?s:d,jo.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!b&&!!r.runBackwards,!b||p&&!r.stagger){if(ee=(z=M[0]?Ps(M[0]).harness:0)&&r[z.prop],x=o8(r,sm),g&&(g._zTime<0&&g.progress(1),t<0&&h&&o&&!m?g.render(-1,!0):g.revert(h&&v?r8:Qxe),g._lazy=0),a){if(G2(e._startAt=An.set(M,w1({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!g&&Ii(c),startAt:null,delay:0,onUpdate:l,onUpdateParams:u,callbackScope:f,stagger:0},a))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ri||!o&&!m)&&e._startAt.revert(r8),o&&v&&t<=0&&i<=0)return void(t&&(e._zTime=t))}else if(h&&v&&!g)if(t&&(o=!1),w=w1({overwrite:!1,data:"isFromStart",lazy:o&&!g&&Ii(c),immediateRender:o,stagger:0,parent:y},x),ee&&(w[z.prop]=ee),G2(e._startAt=An.set(M,w)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(ri?e._startAt.revert(r8):e._startAt.render(-1,!0)),e._zTime=t,o){if(!t)return}else n(e._startAt,kt,kt);for(e._pt=e._ptCache=0,c=v&&Ii(c)||c&&!v,S=0;S<M.length;S++){if(U=(I=M[S])._gsap||lm(M)[S]._gsap,e._ptLookup[S]=O={},am[U.id]&&B2.length&&a8(),G=_===M?S:_.indexOf(I),z&&!1!==(P=new z).init(I,ee||x,e,G,_)&&(e._pt=A=new ki(e._pt,I,P.name,0,1,P.render,P,0,P.priority),P._props.forEach(function(J){O[J]=A}),P.priority&&(k=1)),!z||ee)for(w in x)n1[w]&&(P=WR(w,x,e,G,I,_))?P.priority&&(k=1):O[w]=A=Mm.call(e,I,w,"get",x[w],G,_,0,r.stringFilter);e._op&&e._op[S]&&e.kill(I,e._op[S]),C&&e._pt&&($2=e,rn.killTweensOf(I,O,e.globalTime(t)),j=!e.parent,$2=0),e._pt&&c&&(am[U.id]=1)}k&&ZR(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!j,p&&t<=0&&b.render(_1,!0,!0)},Tbe=function(e,t,i,r){var a,o,s=t.ease||r||"power1.inOut";if(si(t))o=i[e]||(i[e]=[]),t.forEach(function(c,l){return o.push({t:l/(t.length-1)*100,v:c,e:s})});else for(a in t)o=i[a]||(i[a]=[]),"ease"===a||o.push({t:parseFloat(e),v:t[a],e:s})},r0=function(e,t,i,r,s){return hn(e)?e.call(t,i,r,s):Un(e)&&~e.indexOf("random(")?J4(e):e},jR=cm+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",$R={};Ri(jR+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return $R[n]=1});var An=function(n){function e(i,r,s,a){var o;"number"==typeof r&&(s.duration=r,r=s,s=null);var _,C,b,x,S,w,A,I,c=(o=n.call(this,a?r:Y4(r))||this).vars,l=c.duration,u=c.delay,f=c.immediateRender,h=c.stagger,d=c.overwrite,p=c.keyframes,m=c.defaults,v=c.scrollTrigger,g=c.yoyoEase,M=r.parent||rn,y=(si(i)||aR(i)?Jr(i[0]):"length"in r)?[i]:b1(i);if(o._targets=y.length?lm(y):i8("GSAP target "+i+" not found. https://greensock.com",!e1.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=d,p||h||t8(l)||t8(u)){if(r=o.vars,(_=o.timeline=new Pi({data:"nested",defaults:m||{},targets:M&&"nested"===M.data?M.vars.targets:y})).kill(),_.parent=_._dp=Kr(o),_._start=0,h||t8(l)||t8(u)){if(x=y.length,A=h&&TR(h),_r(h))for(S in h)~jR.indexOf(S)&&(I||(I={}),I[S]=h[S]);for(C=0;C<x;C++)(b=o8(r,$R)).stagger=0,g&&(b.yoyoEase=g),I&&ks(b,I),w=y[C],b.duration=+r0(l,Kr(o),C,w,y),b.delay=(+r0(u,Kr(o),C,w,y)||0)-o._delay,!h&&1===x&&b.delay&&(o._delay=u=b.delay,o._start+=u,b.delay=0),_.to(w,b,A?A(C,w,y):0),_._ease=wt.none;_.duration()?l=u=0:o.timeline=0}else if(p){Y4(w1(_.vars.defaults,{ease:"none"})),_._ease=Fs(p.ease||r.ease||"none");var U,z,P,k=0;if(si(p))p.forEach(function(O){return _.to(y,O,">")}),_.duration();else{for(S in b={},p)"ease"===S||"easeEach"===S||Tbe(S,p[S],b,p.easeEach);for(S in b)for(U=b[S].sort(function(O,G){return O.t-G.t}),k=0,C=0;C<U.length;C++)(P={ease:(z=U[C]).e,duration:(z.t-(C?U[C-1].t:0))/100*l})[S]=z.v,_.to(y,P,k),k+=P.duration;_.duration()<l&&_.to({},{duration:l-_.duration()})}}l||o.duration(l=_.duration())}else o.timeline=0;return!0===d&&!Z9&&($2=Kr(o),rn.killTweensOf(y),$2=0),Cr(M,Kr(o),s),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(f||!l&&!p&&o._start===qn(M._time)&&Ii(f)&&sbe(Kr(o))&&"nested"!==M.data)&&(o._tTime=-kt,o.render(Math.max(0,-u)||0)),v&&xR(Kr(o),v),o}rR(e,n);var t=e.prototype;return t.render=function(r,s,a){var h,d,p,m,v,g,M,y,_,o=this._time,c=this._tDur,l=this._dur,u=r<0,f=r>c-kt&&!u?c:r<kt?0:r;if(l){if(f!==this._tTime||!r||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(h=f,y=this.timeline,this._repeat){if(m=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*m+r,s,a);if(h=qn(f%m),f===c?(p=this._repeat,h=l):((p=~~(f/m))&&p===f/m&&(h=l,p--),h>l&&(h=l)),(g=this._yoyo&&1&p)&&(_=this._yEase,h=l-h),v=Xo(this._tTime,m),h===o&&!a&&this._initted)return this._tTime=f,this;p!==v&&(y&&this._yEase&&UR(y,g),this.vars.repeatRefresh&&!g&&!this._lock&&(this._lock=a=1,this.render(qn(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(bR(this,u?r:h,a,s,f))return this._tTime=0,this;if(o!==this._time)return this;if(l!==this._dur)return this.render(r,s,a)}if(this._tTime=f,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=M=(_||this._ease)(h/l),this._from&&(this.ratio=M=1-M),h&&!o&&!s&&!p&&(S1(this,"onStart"),this._tTime!==f))return this;for(d=this._pt;d;)d.r(M,d.d),d=d._next;y&&y.render(r<0?r:!h&&g?-kt:y._dur*y._ease(h/this._dur),s,a)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(u&&um(this,r,0,a),S1(this,"onUpdate")),this._repeat&&p!==v&&this.vars.onRepeat&&!s&&this.parent&&S1(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&um(this,r,0,!0),(r||!l)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&G2(this,1),!s&&(!u||o)&&(f||o||g)&&(S1(this,f===c?"onComplete":"onReverseComplete",!0),this._prom&&!(f<c&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,i,r){var l,u,f,s=e.ratio,a=t<0||!t&&(!e._start&&abe(e)&&(e._initted||!fm(e))||(e._ts<0||e._dp._ts<0)&&!fm(e))?0:1,o=e._rDelay,c=0;if(o&&e._repeat&&(c=K4(0,e._tDur,t),u=Xo(c,o),e._yoyo&&1&u&&(a=1-a),u!==Xo(e._tTime,o)&&(s=1-a,e.vars.repeatRefresh&&e._initted&&e.invalidate())),a!==s||ri||r||e._zTime===kt||!t&&e._zTime){if(!e._initted&&bR(e,t,r,i,c))return;for(f=e._zTime,e._zTime=t||(i?kt:0),i||(i=t&&!f),e.ratio=a,e._from&&(a=1-a),e._time=0,e._tTime=c,l=e._pt;l;)l.r(a,l.d),l=l._next;t<0&&um(e,t,0,!0),e._onUpdate&&!i&&S1(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&S1(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===a&&(a&&G2(e,1),!i&&!ri&&(S1(e,a?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,r,s,a);return this},t.targets=function(){return this._targets},t.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),n.prototype.invalidate.call(this,r)},t.resetTo=function(r,s,a,o){t0||i1.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||_m(this,c),function(e,t,i,r,s,a,o){var l,u,f,h,c=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!c)for(c=e._ptCache[t]=[],f=e._ptLookup,h=e._targets.length;h--;){if((l=f[h][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return ym=1,e.vars[t]="+=0",_m(e,o),ym=0,1;c.push(l)}for(h=c.length;h--;)(l=(u=c[h])._pt||u).s=!r&&0!==r||s?l.s+(r||0)+a*l.c:r,l.c=i-l.s,u.e&&(u.e=Mn(i)+ai(u.e)),u.b&&(u.b=l.s+ai(u.b))}(this,r,s,a,o,this._ease(c/this._dur),c)?this.resetTo(r,s,a,o):(f8(this,0),this.parent||_R(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(r,s){if(void 0===s&&(s="all"),!(r||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?Q4(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,$2&&!0!==$2.vars.overwrite)._first||Q4(this),this.parent&&a!==this.timeline.totalDuration()&&Yo(this,this._dur*this.timeline._tDur/a,0,1),this}var f,h,d,p,m,v,g,o=this._targets,c=r?b1(r):o,l=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var i=e.length,r=i===t.length;r&&i--&&e[i]===t[i];);return i<0}(o,c))return"all"===s&&(this._pt=0),Q4(this);for(f=this._op=this._op||[],"all"!==s&&(Un(s)&&(m={},Ri(s,function(M){return m[M]=1}),s=m),s=function(e,t){var s,a,o,c,i=e[0]?Ps(e[0]).harness:0,r=i&&i.aliases;if(!r)return t;for(a in s=ks({},t),r)if(a in s)for(o=(c=r[a].split(",")).length;o--;)s[c[o]]=s[a];return s}(o,s)),g=o.length;g--;)if(~c.indexOf(o[g]))for(m in h=l[g],"all"===s?(f[g]=s,p=h,d={}):(d=f[g]=f[g]||{},p=s),p)(v=h&&h[m])&&((!("kill"in v.d)||!0===v.d.kill(m))&&c8(this,v,"_pt"),delete h[m]),"all"!==d&&(d[m]=1);return this._initted&&!this._pt&&u&&Q4(this),this},e.to=function(r,s){return new e(r,s,arguments[2])},e.from=function(r,s){return Z4(1,arguments)},e.delayedCall=function(r,s,a,o){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},e.fromTo=function(r,s,a){return Z4(2,arguments)},e.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(r,s)},e.killTweensOf=function(r,s,a){return rn.killTweensOf(r,s,a)},e}(n0);w1(An.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ri("staggerTo,staggerFrom,staggerFromTo",function(n){An[n]=function(){var e=new Pi,t=hm.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var Cm=function(e,t,i){return e[t]=i},qR=function(e,t,i){return e[t](i)},Lbe=function(e,t,i,r){return e[t](r.fp,i)},Hbe=function(e,t,i){return e.setAttribute(t,i)},wm=function(e,t){return hn(e[t])?qR:J9(e[t])&&e.setAttribute?Hbe:Cm},XR=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},zbe=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},YR=function(e,t){var i=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round(1e4*(i.s+i.c*e))/1e4)+r,i=i._next;r+=t.c}t.set(t.t,t.p,r,t)},xm=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},Vbe=function(e,t,i,r){for(var a,s=this._pt;s;)a=s._next,s.p===r&&s.modifier(e,t,i),s=a},Dbe=function(e){for(var i,r,t=this._pt;t;)r=t._next,t.p===e&&!t.op||t.op===e?c8(this,t,"_pt"):t.dep||(i=1),t=r;return!i},Nbe=function(e,t,i,r){r.mSet(e,t,r.m.call(r.tween,i,r.mt),r)},ZR=function(e){for(var i,r,s,a,t=e._pt;t;){for(i=t._next,r=s;r&&r.pr>t.pr;)r=r._next;(t._prev=r?r._prev:a)?t._prev._next=t:s=t,(t._next=r)?r._prev=t:a=t,t=i}e._pt=s},ki=function(){function n(t,i,r,s,a,o,c,l,u){this.t=i,this.s=s,this.c=a,this.p=r,this.r=o||XR,this.d=c||this,this.set=l||Cm,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(i,r,s){this.mSet=this.mSet||this.set,this.set=Nbe,this.m=i,this.mt=s,this.tween=r},n}();Ri(cm+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return sm[n]=1}),t1.TweenMax=t1.TweenLite=An,t1.TimelineLite=t1.TimelineMax=Pi,rn=new Pi({sortChildren:!1,defaults:jo,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),e1.stringFilter=OR;var Bs=[],h8={},Ibe=[],KR=0,Rbe=0,bm=function(e){return(h8[e]||Ibe).map(function(t){return t()})},Sm=function(){var e=Date.now(),t=[];e-KR>2&&(bm("matchMediaInit"),Bs.forEach(function(i){var a,o,c,l,r=i.queries,s=i.conditions;for(o in r)(a=C1.matchMedia(r[o]).matches)&&(c=1),a!==s[o]&&(s[o]=a,l=1);l&&(i.revert(),c&&t.push(i))}),bm("matchMediaRevert"),t.forEach(function(i){return i.onMatch(i)}),KR=e,bm("matchMedia"))},JR=function(){function n(t,i){this.selector=i&&dm(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Rbe++,t&&this.add(t)}var e=n.prototype;return e.add=function(i,r,s){hn(i)&&(s=r,r=i,i=hn);var a=this,o=function(){var f,l=fn,u=a.selector;return l&&l!==a&&l.data.push(a),s&&(a.selector=dm(s)),fn=a,f=r.apply(a,arguments),hn(f)&&a._r.push(f),fn=l,a.selector=u,a.isReverted=!1,f};return a.last=o,i===hn?o(a):i?a[i]=o:o},e.ignore=function(i){var r=fn;fn=null,i(this),fn=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof n?i.push.apply(i,r.getTweens()):r instanceof An&&!(r.parent&&"nested"===r.parent.data)&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var s=this;if(i){var a=this.getTweens();this.data.forEach(function(c){"isFlip"===c.data&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(l){return a.splice(a.indexOf(l),1)}))}),a.map(function(c){return{g:c.globalTime(0),t:c}}).sort(function(c,l){return l.g-c.g||-1/0}).forEach(function(c){return c.t.revert(i)}),this.data.forEach(function(c){return!(c instanceof An)&&c.revert&&c.revert(i)}),this._r.forEach(function(c){return c(i,s)}),this.isReverted=!0}else this.data.forEach(function(c){return c.kill&&c.kill()});if(this.clear(),r)for(var o=Bs.length;o--;)Bs[o].id===this.id&&Bs.splice(o,1)},e.revert=function(i){this.kill(i||{})},n}(),Pbe=function(){function n(t){this.contexts=[],this.scope=t}var e=n.prototype;return e.add=function(i,r,s){_r(i)||(i={matches:i});var c,l,u,a=new JR(0,s||this.scope),o=a.conditions={};for(l in fn&&!a.selector&&(a.selector=fn.selector),this.contexts.push(a),r=a.add("onMatch",r),a.queries=i,i)"all"===l?u=1:(c=C1.matchMedia(i[l]))&&(Bs.indexOf(a)<0&&Bs.push(a),(o[l]=c.matches)&&(u=1),c.addListener?c.addListener(Sm):c.addEventListener("change",Sm));return u&&r(a),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},n}(),d8={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(r){return IR(r)})},timeline:function(e){return new Pi(e)},getTweensOf:function(e,t){return rn.getTweensOf(e,t)},getProperty:function(e,t,i,r){Un(e)&&(e=b1(e)[0]);var s=Ps(e||{}).get,a=i?MR:vR;return"native"===i&&(i=""),e&&(t?a((n1[t]&&n1[t].get||s)(e,t,i,r)):function(o,c,l){return a((n1[o]&&n1[o].get||s)(e,o,c,l))})},quickSetter:function(e,t,i){if((e=b1(e)).length>1){var r=e.map(function(u){return Oi.quickSetter(u,t,i)}),s=r.length;return function(u){for(var f=s;f--;)r[f](u)}}var a=n1[t],o=Ps(e=e[0]||{}),c=o.harness&&(o.harness.aliases||{})[t]||t,l=a?function(u){var f=new a;Zo._pt=0,f.init(e,i?u+i:u,Zo,0,[e]),f.render(1,f),Zo._pt&&xm(1,Zo)}:o.set(e,c);return a?l:function(u){return l(e,c,i?u+i:u,o,1)}},quickTo:function(e,t,i){var r,s=Oi.to(e,ks(((r={})[t]="+=0.1",r.paused=!0,r),i||{})),a=function(c,l,u){return s.resetTo(t,c,l,u)};return a.tween=s,a},isTweening:function(e){return rn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Fs(e.ease,jo.ease)),yR(jo,e||{})},config:function(e){return yR(e1,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,s=e.defaults,a=e.extendTimeline;(e.plugins||"").split(",").forEach(function(o){return o&&!n1[o]&&!t1[o]&&i8(t+" effect requires "+o+" plugin.")}),om[t]=function(o,c,l){return i(b1(o),w1(c||{},s),l)},a&&(Pi.prototype[t]=function(o,c,l){return this.add(om[t](o,_r(c)?c:(l=c)&&{},this),l)})},registerEase:function(e,t){wt[e]=Fs(t)},parseEase:function(e,t){return arguments.length?Fs(e,t):wt},getById:function(e){return rn.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,i=new Pi(e);for(i.smoothChildTiming=Ii(e.smoothChildTiming),rn.remove(i),i._dp=0,i._time=i._tTime=rn._time,r=rn._first;r;)s=r._next,(t||!(!r._dur&&r instanceof An&&r.vars.onComplete===r._targets[0]))&&Cr(i,r,r._start-r._delay),r=s;return Cr(rn,i,0),i},context:function(e,t){return e?new JR(e,t):fn},matchMedia:function(e){return new Pbe(e)},matchMediaRefresh:function(){return Bs.forEach(function(e){var i,r,t=e.conditions;for(r in t)t[r]&&(t[r]=!1,i=1);i&&e.revert()})||Sm()},addEventListener:function(e,t){var i=h8[e]||(h8[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=h8[e],r=i&&i.indexOf(t);r>=0&&i.splice(r,1)},utils:{wrap:function n(e,t,i){var r=t-e;return si(e)?zR(e,n(0,e.length),t):W2(i,function(s){return(r+(s-e)%r)%r+e})},wrapYoyo:function n(e,t,i){var r=t-e,s=2*r;return si(e)?zR(e,n(0,e.length-1),t):W2(i,function(a){return e+((a=(s+(a-e)%s)%s||0)>r?s-a:a)})},distribute:TR,random:HR,snap:LR,normalize:function(e,t,i){return VR(e,t,0,1,i)},getUnit:ai,clamp:function(e,t,i){return W2(i,function(r){return K4(e,t,r)})},splitColor:RR,toArray:b1,selector:dm,mapRange:VR,pipe:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(r){return t.reduce(function(s,a){return a(s)},r)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||ai(i))}},interpolate:function n(e,t,i,r){var s=isNaN(e+t)?0:function(d){return(1-d)*e+d*t};if(!s){var c,l,u,f,h,a=Un(e),o={};if(!0===i&&(r=1)&&(i=null),a)e={p:e},t={p:t};else if(si(e)&&!si(t)){for(u=[],h=(f=e.length)-2,l=1;l<f;l++)u.push(n(e[l-1],e[l]));f--,s=function(p){p*=f;var m=Math.min(h,~~p);return u[m](p-m)},i=t}else r||(e=ks(si(e)?[]:{},e));if(!u){for(c in t)Mm.call(o,e,c,"get",t[c]);s=function(p){return xm(p,o)||(a?e.p:e)}}}return W2(i,s)},shuffle:ER},install:fR,effects:om,ticker:i1,updateRoot:Pi.updateRoot,plugins:n1,globalTimeline:rn,core:{PropTween:ki,globals:hR,Tween:An,Timeline:Pi,Animation:n0,getCache:Ps,_removeLinkedListItem:c8,reverting:function(){return ri},context:function(e){return e&&fn&&(fn.data.push(e),e._ctx=fn),fn},suppressOverwrites:function(e){return Z9=e}}};Ri("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return d8[n]=An[n]}),i1.add(Pi.updateRoot),Zo=d8.to({},{duration:0});var kbe=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},Am=function(e,t){return{name:e,rawVars:1,init:function(r,s,a){a._onInit=function(o){var c,l;if(Un(s)&&(c={},Ri(s,function(u){return c[u]=1}),s=c),t){for(l in c={},s)c[l]=t(s[l]);s=c}!function(e,t){var r,s,a,i=e._targets;for(r in t)for(s=i.length;s--;)(a=e._ptLookup[s][r])&&(a=a.d)&&(a._pt&&(a=kbe(a,r)),a&&a.modifier&&a.modifier(t[r],e,i[s],r))}(o,s)}}}},Oi=d8.registerPlugin({name:"attr",init:function(e,t,i,r,s){var a,o,c;for(a in this.tween=i,t)c=e.getAttribute(a)||"",(o=this.add(e,"setAttribute",(c||0)+"",t[a],r,s,0,0,a)).op=a,o.b=c,this._props.push(a)},render:function(e,t){for(var i=t._pt;i;)ri?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},Am("roundProps",pm),Am("modifiers"),Am("snap",LR))||d8;An.version=Pi.version=Oi.version="3.12.2",uR=1,Q9()&&Ko();var QR,q2,Jo,Em,Gs,eP,Tm,aP,Qr={},Ws=180/Math.PI,Qo=Math.PI/180,ec=Math.atan2,tP=1e8,Lm=/([A-Z])/g,Bbe=/(left|right|width|margin|padding|x)/i,Gbe=/[\s,\(]\S/,wr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Hm=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},Wbe=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},jbe=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},$be=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},nP=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},iP=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},qbe=function(e,t,i){return e.style[t]=i},Xbe=function(e,t,i){return e.style.setProperty(t,i)},Ybe=function(e,t,i){return e._gsap[t]=i},Zbe=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},Kbe=function(e,t,i,r,s){var a=e._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},Jbe=function(e,t,i,r,s){var a=e._gsap;a[t]=i,a.renderTransform(s,a)},sn="transform",q1=sn+"Origin",Qbe=function n(e,t){var i=this,r=this.target,s=r.style;if(e in Qr&&s){if(this.tfm=this.tfm||{},"transform"===e)return wr.transform.split(",").forEach(function(a){return n.call(i,a,t)});if(~(e=wr[e]||e).indexOf(",")?e.split(",").forEach(function(a){return i.tfm[a]=e2(r,a)}):this.tfm[e]=r._gsap.x?r._gsap[e]:e2(r,e),this.props.indexOf(sn)>=0)return;r._gsap.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(q1,t,"")),e=sn}(s||t)&&this.props.push(e,t,s[e])},rP=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},eSe=function(){var s,a,e=this.props,t=this.target,i=t.style,r=t._gsap;for(s=0;s<e.length;s+=3)e[s+1]?t[e[s]]=e[s+2]:e[s+2]?i[e[s]]=e[s+2]:i.removeProperty("--"===e[s].substr(0,2)?e[s]:e[s].replace(Lm,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)r[a]=this.tfm[a];r.svg&&(r.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(!(s=Tm())||!s.isStart)&&!i[sn]&&(rP(i),r.uncache=1)}},sP=function(e,t){var i={target:e,props:[],revert:eSe,save:Qbe};return e._gsap||Oi.core.getCache(e),t&&t.split(",").forEach(function(r){return i.save(r)}),i},zm=function(e,t){var i=q2.createElementNS?q2.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):q2.createElement(e);return i.style?i:q2.createElement(e)},xr=function n(e,t,i){var r=getComputedStyle(e);return r[t]||r.getPropertyValue(t.replace(Lm,"-$1").toLowerCase())||r.getPropertyValue(t)||!i&&n(e,tc(t)||t,1)||""},oP="O,Moz,ms,Ms,Webkit".split(","),tc=function(e,t,i){var s=(t||Gs).style,a=5;if(e in s&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);a--&&!(oP[a]+e in s););return a<0?null:(3===a?"ms":a>=0?oP[a]:"")+e},Vm=function(){typeof window<"u"&&window.document&&(QR=window,Jo=(q2=QR.document).documentElement,Gs=zm("div")||{style:{}},zm("div"),sn=tc(sn),q1=sn+"Origin",Gs.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",aP=!!tc("perspective"),Tm=Oi.core.reverting,Em=1)},Dm=function n(e){var a,t=zm("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,r=this.nextSibling,s=this.style.cssText;if(Jo.appendChild(t),t.appendChild(this),this.style.display="block",e)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=n}catch{}else this._gsapBBox&&(a=this._gsapBBox());return i&&(r?i.insertBefore(this,r):i.appendChild(this)),Jo.removeChild(t),this.style.cssText=s,a},cP=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},lP=function(e){var t;try{t=e.getBBox()}catch{t=Dm.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===Dm||(t=Dm.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+cP(e,["x","cx","x1"])||0,y:+cP(e,["y","cy","y1"])||0,width:0,height:0}},uP=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!lP(e))},s0=function(e,t){if(t){var i=e.style;t in Qr&&t!==q1&&(t=sn),i.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),i.removeProperty(t.replace(Lm,"-$1").toLowerCase())):i.removeAttribute(t)}},X2=function(e,t,i,r,s,a){var o=new ki(e._pt,t,i,0,1,a?iP:nP);return e._pt=o,o.b=r,o.e=s,e._props.push(i),o},fP={deg:1,rad:1,turn:1},tSe={grid:1,flex:1},Y2=function n(e,t,i,r){var p,m,v,g,s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=Gs.style,c=Bbe.test(t),l="svg"===e.tagName.toLowerCase(),u=(l?"client":"offset")+(c?"Width":"Height"),f=100,h="px"===r,d="%"===r;return r===a||!s||fP[r]||fP[a]?s:("px"!==a&&!h&&(s=n(e,t,i,"px")),g=e.getCTM&&uP(e),!d&&"%"!==a||!Qr[t]&&!~t.indexOf("adius")?(o[c?"width":"height"]=f+(h?a:r),m=~t.indexOf("adius")||"em"===r&&e.appendChild&&!l?e:e.parentNode,g&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===q2||!m.appendChild)&&(m=q2.body),(v=m._gsap)&&d&&v.width&&c&&v.time===i1.time&&!v.uncache?Mn(s/v.width*f):((d||"%"===a)&&!tSe[xr(m,"display")]&&(o.position=xr(e,"position")),m===e&&(o.position="static"),m.appendChild(Gs),p=Gs[u],m.removeChild(Gs),o.position="absolute",c&&d&&((v=Ps(m)).time=i1.time,v.width=m[u]),Mn(h?p*s/f:p&&s?f/p*s:0))):(p=g?e.getBBox()[c?"width":"height"]:e[u],Mn(d?s/p*f:s/100*p)))},e2=function(e,t,i,r){var s;return Em||Vm(),t in wr&&"transform"!==t&&~(t=wr[t]).indexOf(",")&&(t=t.split(",")[0]),Qr[t]&&"transform"!==t?(s=o0(e,r),s="transformOrigin"!==t?s[t]:s.svg?s.origin:m8(xr(e,q1))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=p8[t]&&p8[t](e,t,i)||xr(e,t)||mR(e,t)||("opacity"===t?1:0)),i&&!~(s+"").trim().indexOf(" ")?Y2(e,t,s,i)+i:s},nSe=function(e,t,i,r){if(!i||"none"===i){var s=tc(t,e,1),a=s&&xr(e,s,1);a&&a!==i?(t=s,i=a):"borderColor"===t&&(i=xr(e,"borderTopColor"))}var u,f,h,d,p,m,v,g,M,y,_,o=new ki(this._pt,e.style,t,0,1,YR),c=0,l=0;if(o.b=i,o.e=r,i+="","auto"==(r+="")&&(e.style[t]=r,r=xr(e,t)||r,e.style[t]=i),OR(u=[i,r]),r=u[1],h=(i=u[0]).match($o)||[],(r.match($o)||[]).length){for(;f=$o.exec(r);)v=f[0],M=r.substring(c,f.index),p?p=(p+1)%5:("rgba("===M.substr(-5)||"hsla("===M.substr(-5))&&(p=1),v!==(m=h[l++]||"")&&(d=parseFloat(m)||0,_=m.substr((d+"").length),"="===v.charAt(1)&&(v=qo(d,v)+_),g=parseFloat(v),y=v.substr((g+"").length),c=$o.lastIndex-y.length,y||(y=y||e1.units[t]||_,c===r.length&&(r+=y,o.e+=y)),_!==y&&(d=Y2(e,t,m,y)||0),o._pt={_next:o._pt,p:M||1===l?M:",",s:d,c:g-d,m:p&&p<4||"zIndex"===t?Math.round:0});o.c=c<r.length?r.substring(c,r.length):""}else o.r="display"===t&&"none"===r?iP:nP;return cR.test(r)&&(o.e=0),this._pt=o,o},hP={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},iSe=function(e){var t=e.split(" "),i=t[0],r=t[1]||"50%";return("top"===i||"bottom"===i||"left"===r||"right"===r)&&(e=i,i=r,r=e),t[0]=hP[i]||i,t[1]=hP[r]||r,t.join(" ")},rSe=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var o,c,l,i=t.t,r=i.style,s=t.u,a=i._gsap;if("all"===s||!0===s)r.cssText="",c=1;else for(l=(s=s.split(",")).length;--l>-1;)Qr[o=s[l]]&&(c=1,o="transformOrigin"===o?q1:sn),s0(i,o);c&&(s0(i,sn),a&&(a.svg&&i.removeAttribute("transform"),o0(i,1),a.uncache=1,rP(r)))}},p8={clearProps:function(e,t,i,r,s){if("isFromStart"!==s.data){var a=e._pt=new ki(e._pt,t,i,0,0,rSe);return a.u=r,a.pr=-10,a.tween=s,e._props.push(i),1}}},a0=[1,0,0,1,0,0],dP={},pP=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},mP=function(e){var t=xr(e,sn);return pP(t)?a0:t.substr(7).match(oR).map(Mn)},Nm=function(e,t){var a,o,c,l,i=e._gsap||Ps(e),r=e.style,s=mP(e);return i.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(c=e.transform.baseVal.consolidate().matrix).a,c.b,c.c,c.d,c.e,c.f]).join(",")?a0:s:(s===a0&&!e.offsetParent&&e!==Jo&&!i.svg&&(c=r.display,r.display="block",(!(a=e.parentNode)||!e.offsetParent)&&(l=1,o=e.nextElementSibling,Jo.appendChild(e)),s=mP(e),c?r.display=c:s0(e,"display"),l&&(o?a.insertBefore(e,o):a?a.appendChild(e):Jo.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Im=function(e,t,i,r,s,a){var b,x,w,o=e._gsap,c=s||Nm(e,!0),l=o.xOrigin||0,u=o.yOrigin||0,f=o.xOffset||0,h=o.yOffset||0,d=c[0],p=c[1],m=c[2],v=c[3],g=c[4],M=c[5],y=t.split(" "),_=parseFloat(y[0])||0,C=parseFloat(y[1])||0;i?c!==a0&&(x=d*v-p*m)&&(w=_*(-p/x)+C*(d/x)-(d*M-p*g)/x,_=_*(v/x)+C*(-m/x)+(m*M-v*g)/x,C=w):(_=(b=lP(e)).x+(~y[0].indexOf("%")?_/100*b.width:_),C=b.y+(~(y[1]||y[0]).indexOf("%")?C/100*b.height:C)),r||!1!==r&&o.smooth?(o.xOffset=f+((g=_-l)*d+(M=C-u)*m)-g,o.yOffset=h+(g*p+M*v)-M):o.xOffset=o.yOffset=0,o.xOrigin=_,o.yOrigin=C,o.smooth=!!r,o.origin=t,o.originIsAbsolute=!!i,e.style[q1]="0px 0px",a&&(X2(a,o,"xOrigin",l,_),X2(a,o,"yOrigin",u,C),X2(a,o,"xOffset",f,o.xOffset),X2(a,o,"yOffset",h,o.yOffset)),e.setAttribute("data-svg-origin",_+" "+C)},o0=function(e,t){var i=e._gsap||new GR(e);if("x"in i&&!t&&!i.uncache)return i;var u,f,h,d,p,m,v,g,M,y,_,C,b,x,S,w,A,I,k,U,z,P,O,G,ee,j,J,R,$,ae,se,ce,r=e.style,s=i.scaleX<0,a="px",o="deg",c=getComputedStyle(e),l=xr(e,q1)||"0";return u=f=h=m=v=g=M=y=_=0,d=p=1,i.svg=!(!e.getCTM||!uP(e)),c.translate&&(("none"!==c.translate||"none"!==c.scale||"none"!==c.rotate)&&(r[sn]=("none"!==c.translate?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==c.rotate?"rotate("+c.rotate+") ":"")+("none"!==c.scale?"scale("+c.scale.split(" ").join(",")+") ":"")+("none"!==c[sn]?c[sn]:"")),r.scale=r.rotate=r.translate="none"),x=Nm(e,i.svg),i.svg&&(i.uncache?(ee=e.getBBox(),l=i.xOrigin-ee.x+"px "+(i.yOrigin-ee.y)+"px",G=""):G=!t&&e.getAttribute("data-svg-origin"),Im(e,G||l,!!G||i.originIsAbsolute,!1!==i.smooth,x)),C=i.xOrigin||0,b=i.yOrigin||0,x!==a0&&(I=x[0],k=x[1],U=x[2],z=x[3],u=P=x[4],f=O=x[5],6===x.length?(d=Math.sqrt(I*I+k*k),p=Math.sqrt(z*z+U*U),m=I||k?ec(k,I)*Ws:0,(M=U||z?ec(U,z)*Ws+m:0)&&(p*=Math.abs(Math.cos(M*Qo))),i.svg&&(u-=C-(C*I+b*U),f-=b-(C*k+b*z))):(ae=x[7],J=x[8],R=x[9],se=x[11],u=x[12],f=x[13],h=x[14],v=(S=ec(ce=x[6],$=x[10]))*Ws,S&&(G=P*(w=Math.cos(-S))+J*(A=Math.sin(-S)),ee=O*w+R*A,j=ce*w+$*A,J=P*-A+J*w,R=O*-A+R*w,$=ce*-A+$*w,se=ae*-A+se*w,P=G,O=ee,ce=j),g=(S=ec(-U,$))*Ws,S&&(w=Math.cos(-S),se=z*(A=Math.sin(-S))+se*w,I=G=I*w-J*A,k=ee=k*w-R*A,U=j=U*w-$*A),m=(S=ec(k,I))*Ws,S&&(G=I*(w=Math.cos(S))+k*(A=Math.sin(S)),ee=P*w+O*A,k=k*w-I*A,O=O*w-P*A,I=G,P=ee),v&&Math.abs(v)+Math.abs(m)>359.9&&(v=m=0,g=180-g),d=Mn(Math.sqrt(I*I+k*k+U*U)),p=Mn(Math.sqrt(O*O+ce*ce)),S=ec(P,O),M=Math.abs(S)>2e-4?S*Ws:0,_=se?1/(se<0?-se:se):0),i.svg&&(G=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!pP(xr(e,sn)),G&&e.setAttribute("transform",G))),Math.abs(M)>90&&Math.abs(M)<270&&(s?(d*=-1,M+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,M+=M<=0?180:-180)),t=t||i.uncache,i.x=u-((i.xPercent=u&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+a,i.y=f-((i.yPercent=f&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+a,i.z=h+a,i.scaleX=Mn(d),i.scaleY=Mn(p),i.rotation=Mn(m)+o,i.rotationX=Mn(v)+o,i.rotationY=Mn(g)+o,i.skewX=M+o,i.skewY=y+o,i.transformPerspective=_+a,(i.zOrigin=parseFloat(l.split(" ")[2])||0)&&(r[q1]=m8(l)),i.xOffset=i.yOffset=0,i.force3D=e1.force3D,i.renderTransform=i.svg?aSe:aP?gP:sSe,i.uncache=0,i},m8=function(e){return(e=e.split(" "))[0]+" "+e[1]},Rm=function(e,t,i){var r=ai(t);return Mn(parseFloat(t)+parseFloat(Y2(e,"x",i+"px",r)))+r},sSe=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,gP(e,t)},js="0deg",c0="0px",$s=") ",gP=function(e,t){var i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,c=i.z,l=i.rotation,u=i.rotationY,f=i.rotationX,h=i.skewX,d=i.skewY,p=i.scaleX,m=i.scaleY,v=i.transformPerspective,g=i.force3D,M=i.target,y=i.zOrigin,_="",C="auto"===g&&e&&1!==e||!0===g;if(y&&(f!==js||u!==js)){var w,b=parseFloat(u)*Qo,x=Math.sin(b),S=Math.cos(b);b=parseFloat(f)*Qo,w=Math.cos(b),a=Rm(M,a,x*w*-y),o=Rm(M,o,-Math.sin(b)*-y),c=Rm(M,c,S*w*-y+y)}v!==c0&&(_+="perspective("+v+$s),(r||s)&&(_+="translate("+r+"%, "+s+"%) "),(C||a!==c0||o!==c0||c!==c0)&&(_+=c!==c0||C?"translate3d("+a+", "+o+", "+c+") ":"translate("+a+", "+o+$s),l!==js&&(_+="rotate("+l+$s),u!==js&&(_+="rotateY("+u+$s),f!==js&&(_+="rotateX("+f+$s),(h!==js||d!==js)&&(_+="skew("+h+", "+d+$s),(1!==p||1!==m)&&(_+="scale("+p+", "+m+$s),M.style[sn]=_||"translate(0, 0)"},aSe=function(e,t){var C,b,x,S,w,i=t||this,r=i.xPercent,s=i.yPercent,a=i.x,o=i.y,c=i.rotation,l=i.skewX,u=i.skewY,f=i.scaleX,h=i.scaleY,d=i.target,p=i.xOrigin,m=i.yOrigin,v=i.xOffset,g=i.yOffset,M=i.forceCSS,y=parseFloat(a),_=parseFloat(o);c=parseFloat(c),l=parseFloat(l),(u=parseFloat(u))&&(l+=u=parseFloat(u),c+=u),c||l?(c*=Qo,l*=Qo,C=Math.cos(c)*f,b=Math.sin(c)*f,x=Math.sin(c-l)*-h,S=Math.cos(c-l)*h,l&&(u*=Qo,w=Math.tan(l-u),x*=w=Math.sqrt(1+w*w),S*=w,u&&(w=Math.tan(u),C*=w=Math.sqrt(1+w*w),b*=w)),C=Mn(C),b=Mn(b),x=Mn(x),S=Mn(S)):(C=f,S=h,b=x=0),(y&&!~(a+"").indexOf("px")||_&&!~(o+"").indexOf("px"))&&(y=Y2(d,"x",a,"px"),_=Y2(d,"y",o,"px")),(p||m||v||g)&&(y=Mn(y+p-(p*C+m*x)+v),_=Mn(_+m-(p*b+m*S)+g)),(r||s)&&(w=d.getBBox(),y=Mn(y+r/100*w.width),_=Mn(_+s/100*w.height)),d.setAttribute("transform",w="matrix("+C+","+b+","+x+","+S+","+y+","+_+")"),M&&(d.style[sn]=w)},oSe=function(e,t,i,r,s){var f,h,a=360,o=Un(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?Ws:1)-r,u=r+l+"deg";return o&&("short"===(f=s.split("_")[1])&&(l%=a)!=l%180&&(l+=l<0?a:-a),"cw"===f&&l<0?l=(l+a*tP)%a-~~(l/a)*a:"ccw"===f&&l>0&&(l=(l-a*tP)%a-~~(l/a)*a)),e._pt=h=new ki(e._pt,t,i,r,l,Wbe),h.e=u,h.u="deg",e._props.push(i),h},vP=function(e,t){for(var i in t)e[i]=t[i];return e},cSe=function(e,t,i){var o,c,l,u,f,h,p,r=vP({},i._gsap),a=i.style;for(c in r.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),a[sn]=t,o=o0(i,1),s0(i,sn),i.setAttribute("transform",l)):(l=getComputedStyle(i)[sn],a[sn]=t,o=o0(i,1),a[sn]=l),Qr)(l=r[c])!==(u=o[c])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(c)<0&&(f=ai(l)!==(p=ai(u))?Y2(i,c,l,p):parseFloat(l),h=parseFloat(u),e._pt=new ki(e._pt,o,c,f,h-f,Hm),e._pt.u=p||0,e._props.push(c));vP(o,r)};Ri("padding,margin,Width,Radius",function(n,e){var t="Top",i="Right",r="Bottom",s="Left",a=(e<3?[t,i,r,s]:[t+s,t+i,r+i,r+s]).map(function(o){return e<2?n+o:"border"+o+n});p8[e>1?"border"+n:n]=function(o,c,l,u,f){var h,d;if(arguments.length<4)return h=a.map(function(p){return e2(o,p,l)}),5===(d=h.join(" ")).split(h[0]).length?h[0]:d;h=(u+"").split(" "),d={},a.forEach(function(p,m){return d[p]=h[m]=h[m]||h[(m-1)/2|0]}),o.init(c,d,f)}});var MP={name:"css",register:Vm,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,r,s){var l,u,f,h,d,p,m,v,g,M,y,_,C,b,x,S,a=this._props,o=e.style,c=i.vars.startAt;for(m in Em||Vm(),this.styles=this.styles||sP(e),S=this.styles.props,this.tween=i,t)if("autoRound"!==m&&(u=t[m],!n1[m]||!WR(m,t,i,r,e,s)))if(p=p8[m],"function"==(d=typeof u)&&(d=typeof(u=u.call(i,r,e,s))),"string"===d&&~u.indexOf("random(")&&(u=J4(u)),p)p(this,e,m,u,i)&&(x=1);else if("--"===m.substr(0,2))l=(getComputedStyle(e).getPropertyValue(m)+"").trim(),u+="",j2.lastIndex=0,j2.test(l)||(v=ai(l),g=ai(u)),g?v!==g&&(l=Y2(e,m,l,g)+g):v&&(u+=v),this.add(o,"setProperty",l,u,r,s,0,0,m),a.push(m),S.push(m,0,o[m]);else if("undefined"!==d){if(c&&m in c?(l="function"==typeof c[m]?c[m].call(i,r,e,s):c[m],Un(l)&&~l.indexOf("random(")&&(l=J4(l)),ai(l+"")||(l+=e1.units[m]||ai(e2(e,m))||""),"="===(l+"").charAt(1)&&(l=e2(e,m))):l=e2(e,m),h=parseFloat(l),(M="string"===d&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),f=parseFloat(u),m in wr&&("autoAlpha"===m&&(1===h&&"hidden"===e2(e,"visibility")&&f&&(h=0),S.push("visibility",0,o.visibility),X2(this,o,"visibility",h?"inherit":"hidden",f?"inherit":"hidden",!f)),"scale"!==m&&"transform"!==m&&~(m=wr[m]).indexOf(",")&&(m=m.split(",")[0])),y=m in Qr)if(this.styles.save(m),_||((C=e._gsap).renderTransform&&!t.parseTransform||o0(e,t.parseTransform),b=!1!==t.smoothOrigin&&C.smooth,(_=this._pt=new ki(this._pt,o,sn,0,1,C.renderTransform,C,0,-1)).dep=1),"scale"===m)this._pt=new ki(this._pt,C,"scaleY",C.scaleY,(M?qo(C.scaleY,M+f):f)-C.scaleY||0,Hm),this._pt.u=0,a.push("scaleY",m),m+="X";else{if("transformOrigin"===m){S.push(q1,0,o[q1]),u=iSe(u),C.svg?Im(e,u,0,b,0,this):((g=parseFloat(u.split(" ")[2])||0)!==C.zOrigin&&X2(this,C,"zOrigin",C.zOrigin,g),X2(this,o,m,m8(l),m8(u)));continue}if("svgOrigin"===m){Im(e,u,1,b,0,this);continue}if(m in dP){oSe(this,C,m,h,M?qo(h,M+u):u);continue}if("smoothOrigin"===m){X2(this,C,"smooth",C.smooth,u);continue}if("force3D"===m){C[m]=u;continue}if("transform"===m){cSe(this,u,e);continue}}else m in o||(m=tc(m)||m);if(y||(f||0===f)&&(h||0===h)&&!Gbe.test(u)&&m in o)f||(f=0),(v=(l+"").substr((h+"").length))!==(g=ai(u)||(m in e1.units?e1.units[m]:v))&&(h=Y2(e,m,l,g)),this._pt=new ki(this._pt,y?C:o,m,h,(M?qo(h,M+f):f)-h,y||"px"!==g&&"zIndex"!==m||!1===t.autoRound?Hm:$be),this._pt.u=g||0,v!==g&&"%"!==g&&(this._pt.b=l,this._pt.r=jbe);else if(m in o)nSe.call(this,e,m,l,M?M+u:u);else if(m in e)this.add(e,m,l||e[m],M?M+u:u,r,s);else if("parseTransform"!==m){rm(m,u);continue}y||(m in o?S.push(m,0,o[m]):S.push(m,1,l||e[m])),a.push(m)}x&&ZR(this)},render:function(e,t){if(t.tween._time||!Tm())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:e2,aliases:wr,getSetter:function(e,t,i){var r=wr[t];return r&&r.indexOf(",")<0&&(t=r),t in Qr&&t!==q1&&(e._gsap.x||e2(e,"x"))?i&&eP===i?"scale"===t?Zbe:Ybe:(eP=i||{})&&("scale"===t?Kbe:Jbe):e.style&&!J9(e.style[t])?qbe:~t.indexOf("-")?Xbe:wm(e,t)},core:{_removeProperty:s0,_getMatrix:Nm}};Oi.utils.checkPrefix=tc,Oi.core.getStyleSaver=sP,function(n,e,t,i){var r=Ri(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){Qr[s]=1});Ri(e,function(s){e1.units[s]="deg",dP[s]=1}),wr[r[13]]=n+","+e,Ri("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var a=s.split(":");wr[a[1]]=r[a[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Ri("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){e1.units[n]="px"}),Oi.registerPlugin(MP);var l0=Oi.registerPlugin(MP)||Oi;function yP(n,e,t,i,r,s,a){try{var o=n[s](a),c=o.value}catch(l){return void t(l)}o.done?e(c):Promise.resolve(c).then(i,r)}const CP=1,wP=2,t2=3,g8=0,zSe=1,VSe=2,r2=0,HP=1,zP=2,VP=3,Om=4,DP=5,J2=301,qs=302,u0=306,Xs=1e3,oi=1001,yn=1003,en=1006,s2=1008,Q2=1009,es=1014,a2=1015,d0=1016,Ys=1020,A1=1023,Zs=1026,sc=1027,p0=2300,ac=2301,Ks=3001,jt="srgb",Bn="srgb-linear",Zm="display-p3",w8="display-p3-linear",x8="linear",Kt="srgb",b8="rec709",S8="p3",pk="300 es",o2=2e3;class Qs{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const ci=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const ea=Math.PI/180,lc=180/Math.PI;function r1(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ci[255&n]+ci[n>>8&255]+ci[n>>16&255]+ci[n>>24&255]+"-"+ci[255&e]+ci[e>>8&255]+"-"+ci[e>>16&15|64]+ci[e>>24&255]+"-"+ci[63&t|128]+ci[t>>8&255]+"-"+ci[t>>16&255]+ci[t>>24&255]+ci[255&i]+ci[i>>8&255]+ci[i>>16&255]+ci[i>>24&255]).toLowerCase()}function dn(n,e,t){return Math.max(e,Math.min(t,n))}function Qm(n,e){return(n%e+e)%e}function m0(n,e,t){return(1-t)*n+t*e}function eg(n){return 0==(n&n-1)&&0!==n}function gk(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function T8(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Fi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ct(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const uc_DEG2RAD=ea,uc_degToRad=function pAe(n){return n*ea},uc_radToDeg=function mAe(n){return n*lc};class Z{constructor(e=0,t=0){Z.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class dt{constructor(e,t,i,r,s,a,o,c,l){dt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,a,o,c,l)}set(e,t,i,r,s,a,o,c,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=c,u[6]=i,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],c=i[6],l=i[1],u=i[4],f=i[7],h=i[2],d=i[5],p=i[8],m=r[0],v=r[3],g=r[6],M=r[1],y=r[4],_=r[7],C=r[2],b=r[5],x=r[8];return s[0]=a*m+o*M+c*C,s[3]=a*v+o*y+c*b,s[6]=a*g+o*_+c*x,s[1]=l*m+u*M+f*C,s[4]=l*v+u*y+f*b,s[7]=l*g+u*_+f*x,s[2]=h*m+d*M+p*C,s[5]=h*v+d*y+p*b,s[8]=h*g+d*_+p*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-i*s*u+i*o*c+r*s*l-r*a*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],l=e[7],u=e[8],f=u*a-o*l,h=o*c-u*s,d=l*s-a*c,p=t*f+i*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=f*m,e[1]=(r*l-u*i)*m,e[2]=(o*i-r*a)*m,e[3]=h*m,e[4]=(u*t-r*c)*m,e[5]=(r*s-o*t)*m,e[6]=d*m,e[7]=(i*c-l*t)*m,e[8]=(a*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const c=Math.cos(s),l=Math.sin(s);return this.set(i*c,i*l,-i*(c*a+l*o)+a+e,-r*l,r*c,-r*(-l*a+c*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(tg.makeScale(e,t)),this}rotate(e){return this.premultiply(tg.makeRotation(-e)),this}translate(e,t){return this.premultiply(tg.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const tg=new dt;function vk(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const vAe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function fc(n,e){return new vAe[n](e)}function g0(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function MAe(){const n=g0("canvas");return n.style.display="block",n}const Mk={};function v0(n){n in Mk||(Mk[n]=!0,console.warn(n))}const yk=(new dt).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),_k=(new dt).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),L8={[Bn]:{transfer:x8,primaries:b8,toReference:n=>n,fromReference:n=>n},[jt]:{transfer:Kt,primaries:b8,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[w8]:{transfer:x8,primaries:S8,toReference:n=>n.applyMatrix3(_k),fromReference:n=>n.applyMatrix3(yk)},[Zm]:{transfer:Kt,primaries:S8,toReference:n=>n.convertSRGBToLinear().applyMatrix3(_k),fromReference:n=>n.applyMatrix3(yk).convertLinearToSRGB()}},yAe=new Set([Bn,w8]),Tt={enabled:!0,_workingColorSpace:Bn,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!yAe.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,L8[t].fromReference)((0,L8[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return L8[n].primaries},getTransfer:function(n){return""===n?x8:L8[n].transfer}};function hc(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function ng(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let dc;class Ck{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===dc&&(dc=g0("canvas")),dc.width=e.width,dc.height=e.height;const i=dc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=dc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=g0("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=255*hc(s[a]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*hc(t[i]/255)):hc(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _Ae=0;class pc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_Ae++}),this.uuid=r1(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)s.push(ig(r[a].isDataTexture?r[a].image:r[a]))}else s=ig(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function ig(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Ck.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let CAe=0,T1=(()=>{class n extends Qs{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=oi,s=oi,a=en,o=s2,c=A1,l=Q2,u=n.DEFAULT_ANISOTROPY,f=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:CAe++}),this.uuid=r1(),this.name="",this.source=new pc(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=a,this.minFilter=o,this.anisotropy=u,this.format=c,this.internalFormat=null,this.type=l,this.offset=new Z(0,0),this.repeat=new Z(1,1),this.center=new Z(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof f?this.colorSpace=f:(v0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=f===Ks?jt:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Xs:t.x=t.x-Math.floor(t.x);break;case oi:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Xs:t.y=t.y-Math.floor(t.y);break;case oi:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return v0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===jt?Ks:3e3}set encoding(t){v0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Ks?jt:""}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class It{constructor(e=0,t=0,i=0,r=1){It.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,l=c[0],u=c[4],f=c[8],h=c[1],d=c[5],p=c[9],m=c[2],v=c[6],g=c[10];if(Math.abs(u-h)<.01&&Math.abs(f-m)<.01&&Math.abs(p-v)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+m)<.1&&Math.abs(p+v)<.1&&Math.abs(l+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(l+1)/2,_=(d+1)/2,C=(g+1)/2,b=(u+h)/4,x=(f+m)/4,S=(p+v)/4;return y>_&&y>C?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=b/i,s=x/i):_>C?_<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(_),i=b/r,s=S/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=x/s,r=S/s),this.set(i,r,s,t),this}let M=Math.sqrt((v-p)*(v-p)+(f-m)*(f-m)+(h-u)*(h-u));return Math.abs(M)<.001&&(M=1),this.x=(v-p)/M,this.y=(f-m)/M,this.z=(h-u)/M,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class wAe extends Qs{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new It(0,0,e,t),this.scissorTest=!1,this.viewport=new It(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==i.encoding&&(v0("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Ks?jt:""),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:en,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new T1(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new pc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ta extends wAe{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class rg extends T1{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=yn,this.minFilter=yn,this.wrapR=oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class wk extends T1{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=yn,this.minFilter=yn,this.wrapR=oi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Xn{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let c=i[r+0],l=i[r+1],u=i[r+2],f=i[r+3];const h=s[a+0],d=s[a+1],p=s[a+2],m=s[a+3];if(0===o)return e[t+0]=c,e[t+1]=l,e[t+2]=u,void(e[t+3]=f);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=m);if(f!==m||c!==h||l!==d||u!==p){let v=1-o;const g=c*h+l*d+u*p+f*m,M=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){const C=Math.sqrt(y),b=Math.atan2(C,g*M);v=Math.sin(v*b)/C,o=Math.sin(o*b)/C}const _=o*M;if(c=c*v+h*_,l=l*v+d*_,u=u*v+p*_,f=f*v+m*_,v===1-o){const C=1/Math.sqrt(c*c+l*l+u*u+f*f);c*=C,l*=C,u*=C,f*=C}}e[t]=c,e[t+1]=l,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],c=i[r+1],l=i[r+2],u=i[r+3],f=s[a],h=s[a+1],d=s[a+2],p=s[a+3];return e[t]=o*p+u*f+c*d-l*h,e[t+1]=c*p+u*h+l*f-o*d,e[t+2]=l*p+u*d+o*h-c*f,e[t+3]=u*p-o*f-c*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,c=Math.sin,l=o(i/2),u=o(r/2),f=o(s/2),h=c(i/2),d=c(r/2),p=c(s/2);switch(a){case"XYZ":this._x=h*u*f+l*d*p,this._y=l*d*f-h*u*p,this._z=l*u*p+h*d*f,this._w=l*u*f-h*d*p;break;case"YXZ":this._x=h*u*f+l*d*p,this._y=l*d*f-h*u*p,this._z=l*u*p-h*d*f,this._w=l*u*f+h*d*p;break;case"ZXY":this._x=h*u*f-l*d*p,this._y=l*d*f+h*u*p,this._z=l*u*p+h*d*f,this._w=l*u*f-h*d*p;break;case"ZYX":this._x=h*u*f-l*d*p,this._y=l*d*f+h*u*p,this._z=l*u*p-h*d*f,this._w=l*u*f+h*d*p;break;case"YZX":this._x=h*u*f+l*d*p,this._y=l*d*f+h*u*p,this._z=l*u*p-h*d*f,this._w=l*u*f-h*d*p;break;case"XZY":this._x=h*u*f-l*d*p,this._y=l*d*f-h*u*p,this._z=l*u*p+h*d*f,this._w=l*u*f+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],c=t[9],l=t[2],u=t[6],f=t[10],h=i+o+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-c)*d,this._y=(s-l)*d,this._z=(a-r)*d}else if(i>o&&i>f){const d=2*Math.sqrt(1+i-o-f);this._w=(u-c)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(s+l)/d}else if(o>f){const d=2*Math.sqrt(1+o-i-f);this._w=(s-l)/d,this._x=(r+a)/d,this._y=.25*d,this._z=(c+u)/d}else{const d=2*Math.sqrt(1+f-i-o);this._w=(a-r)/d,this._x=(s+l)/d,this._y=(c+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(dn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,c=t._y,l=t._z,u=t._w;return this._x=i*u+a*o+r*l-s*c,this._y=r*u+a*c+s*o-i*l,this._z=s*u+a*l+i*c-r*o,this._w=a*u-i*o-r*c-s*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const c=1-o*o;if(c<=Number.EPSILON){const d=1-t;return this._w=d*a+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(c),u=Math.atan2(l,o),f=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=a*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class T{constructor(e=0,t=0,i=0){T.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(xk.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(xk.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,c=e.w,l=c*t+a*r-o*i,u=c*i+o*t-s*r,f=c*r+s*i-a*t,h=-s*t-a*i-o*r;return this.x=l*c+h*-s+u*-o-f*-a,this.y=u*c+h*-a+f*-s-l*-o,this.z=f*c+h*-o+l*-a-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,c=t.z;return this.x=r*c-s*o,this.y=s*a-i*c,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return sg.copy(this).projectOnVector(e),this.sub(sg)}reflect(e){return this.sub(sg.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(dn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sg=new T,xk=new Xn;class Sr{constructor(e=new T(1/0,1/0,1/0),t=new T(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(l2.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(l2.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=l2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),mc.copy(e.boundingBox),mc.applyMatrix4(e.matrixWorld),this.union(mc);else{const r=e.geometry;if(void 0!==r)if(t&&void 0!==r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let a=0,o=s.count;a<o;a++)l2.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(l2)}else null===r.boundingBox&&r.computeBoundingBox(),mc.copy(r.boundingBox),mc.applyMatrix4(e.matrixWorld),this.union(mc)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,l2),l2.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(M0),H8.subVectors(this.max,M0),gc.subVectors(e.a,M0),vc.subVectors(e.b,M0),Mc.subVectors(e.c,M0),ts.subVectors(vc,gc),ns.subVectors(Mc,vc),na.subVectors(gc,Mc);let t=[0,-ts.z,ts.y,0,-ns.z,ns.y,0,-na.z,na.y,ts.z,0,-ts.x,ns.z,0,-ns.x,na.z,0,-na.x,-ts.y,ts.x,0,-ns.y,ns.x,0,-na.y,na.x,0];return!(!ag(t,gc,vc,Mc,H8)||(t=[1,0,0,0,1,0,0,0,1],!ag(t,gc,vc,Mc,H8)))&&(z8.crossVectors(ts,ns),t=[z8.x,z8.y,z8.z],ag(t,gc,vc,Mc,H8))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,l2).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(l2).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(c2[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),c2[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),c2[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),c2[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),c2[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),c2[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),c2[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),c2[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(c2)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const c2=[new T,new T,new T,new T,new T,new T,new T,new T],l2=new T,mc=new Sr,gc=new T,vc=new T,Mc=new T,ts=new T,ns=new T,na=new T,M0=new T,H8=new T,z8=new T,ia=new T;function ag(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){ia.fromArray(n,s);const o=r.x*Math.abs(ia.x)+r.y*Math.abs(ia.y)+r.z*Math.abs(ia.z),c=e.dot(ia),l=t.dot(ia),u=i.dot(ia);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>o)return!1}return!0}const xAe=new Sr,y0=new T,og=new T;class X1{constructor(e=new T,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):xAe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;y0.subVectors(e,this.center);const t=y0.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(y0,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(og.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(y0.copy(e.center).add(og)),this.expandByPoint(y0.copy(e.center).sub(og))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const u2=new T,cg=new T,V8=new T,is=new T,lg=new T,D8=new T,ug=new T;class yc{constructor(e=new T,t=new T(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,u2)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=u2.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(u2.copy(this.origin).addScaledVector(this.direction,t),u2.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){cg.copy(e).add(t).multiplyScalar(.5),V8.copy(t).sub(e).normalize(),is.copy(this.origin).sub(cg);const s=.5*e.distanceTo(t),a=-this.direction.dot(V8),o=is.dot(this.direction),c=-is.dot(V8),l=is.lengthSq(),u=Math.abs(1-a*a);let f,h,d,p;if(u>0)if(f=a*c-o,h=a*o-c,p=s*u,f>=0)if(h>=-p)if(h<=p){const m=1/u;f*=m,h*=m,d=f*(f+a*h+2*o)+h*(a*f+h+2*c)+l}else h=s,f=Math.max(0,-(a*h+o)),d=-f*f+h*(h+2*c)+l;else h=-s,f=Math.max(0,-(a*h+o)),d=-f*f+h*(h+2*c)+l;else h<=-p?(f=Math.max(0,-(-a*s+o)),h=f>0?-s:Math.min(Math.max(-s,-c),s),d=-f*f+h*(h+2*c)+l):h<=p?(f=0,h=Math.min(Math.max(-s,-c),s),d=h*(h+2*c)+l):(f=Math.max(0,-(a*s+o)),h=f>0?s:Math.min(Math.max(-s,-c),s),d=-f*f+h*(h+2*c)+l);else h=a>0?-s:s,f=Math.max(0,-(a*h+o)),d=-f*f+h*(h+2*c)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(cg).addScaledVector(V8,h),d}intersectSphere(e,t){u2.subVectors(e.center,this.origin);const i=u2.dot(this.direction),r=u2.dot(u2)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,c=i+a;return c<0?null:this.at(o<0?c:o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,c;const l=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(s=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),f>=0?(o=(e.min.z-h.z)*f,c=(e.max.z-h.z)*f):(o=(e.max.z-h.z)*f,c=(e.min.z-h.z)*f),i>c||o>r)||((o>i||i!=i)&&(i=o),(c<r||r!=r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,u2)}intersectTriangle(e,t,i,r,s){lg.subVectors(t,e),D8.subVectors(i,e),ug.crossVectors(lg,D8);let o,a=this.direction.dot(ug);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}is.subVectors(this.origin,e);const c=o*this.direction.dot(D8.crossVectors(is,D8));if(c<0)return null;const l=o*this.direction.dot(lg.cross(is));if(l<0||c+l>a)return null;const u=-o*is.dot(ug);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class $e{constructor(e,t,i,r,s,a,o,c,l,u,f,h,d,p,m,v){$e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,a,o,c,l,u,f,h,d,p,m,v)}set(e,t,i,r,s,a,o,c,l,u,f,h,d,p,m,v){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=a,g[9]=o,g[13]=c,g[2]=l,g[6]=u,g[10]=f,g[14]=h,g[3]=d,g[7]=p,g[11]=m,g[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new $e).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/_c.setFromMatrixColumn(e,0).length(),s=1/_c.setFromMatrixColumn(e,1).length(),a=1/_c.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),c=Math.cos(r),l=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if("XYZ"===e.order){const h=a*u,d=a*f,p=o*u,m=o*f;t[0]=c*u,t[4]=-c*f,t[8]=l,t[1]=d+p*l,t[5]=h-m*l,t[9]=-o*c,t[2]=m-h*l,t[6]=p+d*l,t[10]=a*c}else if("YXZ"===e.order){const h=c*u,d=c*f,p=l*u,m=l*f;t[0]=h+m*o,t[4]=p*o-d,t[8]=a*l,t[1]=a*f,t[5]=a*u,t[9]=-o,t[2]=d*o-p,t[6]=m+h*o,t[10]=a*c}else if("ZXY"===e.order){const h=c*u,d=c*f,p=l*u,m=l*f;t[0]=h-m*o,t[4]=-a*f,t[8]=p+d*o,t[1]=d+p*o,t[5]=a*u,t[9]=m-h*o,t[2]=-a*l,t[6]=o,t[10]=a*c}else if("ZYX"===e.order){const h=a*u,d=a*f,p=o*u,m=o*f;t[0]=c*u,t[4]=p*l-d,t[8]=h*l+m,t[1]=c*f,t[5]=m*l+h,t[9]=d*l-p,t[2]=-l,t[6]=o*c,t[10]=a*c}else if("YZX"===e.order){const h=a*c,d=a*l,p=o*c,m=o*l;t[0]=c*u,t[4]=m-h*f,t[8]=p*f+d,t[1]=f,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=d*f+p,t[10]=h-m*f}else if("XZY"===e.order){const h=a*c,d=a*l,p=o*c,m=o*l;t[0]=c*u,t[4]=-f,t[8]=l*u,t[1]=h*f+m,t[5]=a*u,t[9]=d*f-p,t[2]=p*f-d,t[6]=o*u,t[10]=m*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bAe,e,SAe)}lookAt(e,t,i){const r=this.elements;return s1.subVectors(e,t),0===s1.lengthSq()&&(s1.z=1),s1.normalize(),rs.crossVectors(i,s1),0===rs.lengthSq()&&(1===Math.abs(i.z)?s1.x+=1e-4:s1.z+=1e-4,s1.normalize(),rs.crossVectors(i,s1)),rs.normalize(),N8.crossVectors(s1,rs),r[0]=rs.x,r[4]=N8.x,r[8]=s1.x,r[1]=rs.y,r[5]=N8.y,r[9]=s1.y,r[2]=rs.z,r[6]=N8.z,r[10]=s1.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],c=i[8],l=i[12],u=i[1],f=i[5],h=i[9],d=i[13],p=i[2],m=i[6],v=i[10],g=i[14],M=i[3],y=i[7],_=i[11],C=i[15],b=r[0],x=r[4],S=r[8],w=r[12],A=r[1],I=r[5],k=r[9],U=r[13],z=r[2],P=r[6],O=r[10],G=r[14],ee=r[3],j=r[7],J=r[11],R=r[15];return s[0]=a*b+o*A+c*z+l*ee,s[4]=a*x+o*I+c*P+l*j,s[8]=a*S+o*k+c*O+l*J,s[12]=a*w+o*U+c*G+l*R,s[1]=u*b+f*A+h*z+d*ee,s[5]=u*x+f*I+h*P+d*j,s[9]=u*S+f*k+h*O+d*J,s[13]=u*w+f*U+h*G+d*R,s[2]=p*b+m*A+v*z+g*ee,s[6]=p*x+m*I+v*P+g*j,s[10]=p*S+m*k+v*O+g*J,s[14]=p*w+m*U+v*G+g*R,s[3]=M*b+y*A+_*z+C*ee,s[7]=M*x+y*I+_*P+C*j,s[11]=M*S+y*k+_*O+C*J,s[15]=M*w+y*U+_*G+C*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],c=e[9],l=e[13],u=e[2],f=e[6],h=e[10],d=e[14];return e[3]*(+s*c*f-r*l*f-s*o*h+i*l*h+r*o*d-i*c*d)+e[7]*(+t*c*d-t*l*h+s*a*h-r*a*d+r*l*u-s*c*u)+e[11]*(+t*l*f-t*o*d-s*a*f+i*a*d+s*o*u-i*l*u)+e[15]*(-r*o*u-t*c*f+t*o*h+r*a*f-i*a*h+i*c*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],c=e[6],l=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],m=e[13],v=e[14],g=e[15],M=f*v*l-m*h*l+m*c*d-o*v*d-f*c*g+o*h*g,y=p*h*l-u*v*l-p*c*d+a*v*d+u*c*g-a*h*g,_=u*m*l-p*f*l+p*o*d-a*m*d-u*o*g+a*f*g,C=p*f*c-u*m*c-p*o*h+a*m*h+u*o*v-a*f*v,b=t*M+i*y+r*_+s*C;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/b;return e[0]=M*x,e[1]=(m*h*s-f*v*s-m*r*d+i*v*d+f*r*g-i*h*g)*x,e[2]=(o*v*s-m*c*s+m*r*l-i*v*l-o*r*g+i*c*g)*x,e[3]=(f*c*s-o*h*s-f*r*l+i*h*l+o*r*d-i*c*d)*x,e[4]=y*x,e[5]=(u*v*s-p*h*s+p*r*d-t*v*d-u*r*g+t*h*g)*x,e[6]=(p*c*s-a*v*s-p*r*l+t*v*l+a*r*g-t*c*g)*x,e[7]=(a*h*s-u*c*s+u*r*l-t*h*l-a*r*d+t*c*d)*x,e[8]=_*x,e[9]=(p*f*s-u*m*s-p*i*d+t*m*d+u*i*g-t*f*g)*x,e[10]=(a*m*s-p*o*s+p*i*l-t*m*l-a*i*g+t*o*g)*x,e[11]=(u*o*s-a*f*s-u*i*l+t*f*l+a*i*d-t*o*d)*x,e[12]=C*x,e[13]=(u*m*r-p*f*r+p*i*h-t*m*h-u*i*v+t*f*v)*x,e[14]=(p*o*r-a*m*r-p*i*c+t*m*c+a*i*v-t*o*v)*x,e[15]=(a*f*r-u*o*r+u*i*c-t*f*c-a*i*h+t*o*h)*x,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,c=e.z,l=s*a,u=s*o;return this.set(l*a+i,l*o-r*c,l*c+r*o,0,l*o+r*c,u*o+i,u*c-r*a,0,l*c-r*o,u*c+r*a,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,c=t._w,l=s+s,u=a+a,f=o+o,h=s*l,d=s*u,p=s*f,m=a*u,v=a*f,g=o*f,M=c*l,y=c*u,_=c*f,C=i.x,b=i.y,x=i.z;return r[0]=(1-(m+g))*C,r[1]=(d+_)*C,r[2]=(p-y)*C,r[3]=0,r[4]=(d-_)*b,r[5]=(1-(h+g))*b,r[6]=(v+M)*b,r[7]=0,r[8]=(p+y)*x,r[9]=(v-M)*x,r[10]=(1-(h+m))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=_c.set(r[0],r[1],r[2]).length();const a=_c.set(r[4],r[5],r[6]).length(),o=_c.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Y1.copy(this);const l=1/s,u=1/a,f=1/o;return Y1.elements[0]*=l,Y1.elements[1]*=l,Y1.elements[2]*=l,Y1.elements[4]*=u,Y1.elements[5]*=u,Y1.elements[6]*=u,Y1.elements[8]*=f,Y1.elements[9]*=f,Y1.elements[10]*=f,t.setFromRotationMatrix(Y1),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=o2){const c=this.elements,l=2*s/(t-e),u=2*s/(i-r),f=(t+e)/(t-e),h=(i+r)/(i-r);let d,p;if(o===o2)d=-(a+s)/(a-s),p=-2*a*s/(a-s);else{if(2001!==o)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);d=-a/(a-s),p=-a*s/(a-s)}return c[0]=l,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=u,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=d,c[14]=p,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=o2){const c=this.elements,l=1/(t-e),u=1/(i-r),f=1/(a-s),h=(t+e)*l,d=(i+r)*u;let p,m;if(o===o2)p=(a+s)*f,m=-2*f;else{if(2001!==o)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);p=s*f,m=-1*f}return c[0]=2*l,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*u,c[9]=0,c[13]=-d,c[2]=0,c[6]=0,c[10]=m,c[14]=-p,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const _c=new T,Y1=new $e,bAe=new T(0,0,0),SAe=new T(1,1,1),rs=new T,N8=new T,s1=new T,bk=new $e,Sk=new Xn;let AAe=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,a=s[0],o=s[4],c=s[8],l=s[1],u=s[5],f=s[9],h=s[2],d=s[6],p=s[10];switch(i){case"XYZ":this._y=Math.asin(dn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-dn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(dn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a));break;case"ZYX":this._y=Math.asin(-dn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(dn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-dn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-f,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return bk.makeRotationFromQuaternion(t),this.setFromRotationMatrix(bk,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return Sk.setFromEuler(this),this.setFromQuaternion(Sk,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class fg{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let EAe=0;const Ak=new T,Cc=new Xn,f2=new $e,I8=new T,_0=new T,TAe=new T,LAe=new Xn,Ek=new T(1,0,0),Tk=new T(0,1,0),Lk=new T(0,0,1),HAe={type:"added"},zAe={type:"removed"};let _n=(()=>{class n extends Qs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:EAe++}),this.uuid=r1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new T,i=new AAe,r=new Xn,s=new T(1,1,1);i._onChange(function a(){r.setFromEuler(i,!1)}),r._onChange(function o(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new $e},normalMatrix:{value:new dt}}),this.matrix=new $e,this.matrixWorld=new $e,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new fg,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Cc.setFromAxisAngle(t,i),this.quaternion.multiply(Cc),this}rotateOnWorldAxis(t,i){return Cc.setFromAxisAngle(t,i),this.quaternion.premultiply(Cc),this}rotateX(t){return this.rotateOnAxis(Ek,t)}rotateY(t){return this.rotateOnAxis(Tk,t)}rotateZ(t){return this.rotateOnAxis(Lk,t)}translateOnAxis(t,i){return Ak.copy(t).applyQuaternion(this.quaternion),this.position.add(Ak.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Ek,t)}translateY(t){return this.translateOnAxis(Tk,t)}translateZ(t){return this.translateOnAxis(Lk,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(f2.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?I8.copy(t):I8.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),_0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?f2.lookAt(_0,I8,this.up):f2.lookAt(I8,_0,this.up),this.quaternion.setFromRotationMatrix(f2),s&&(f2.extractRotation(s.matrixWorld),Cc.setFromRotationMatrix(f2),this.quaternion.premultiply(Cc.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(HAe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(zAe)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),f2.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),f2.multiply(t.parent.matrixWorld)),t.applyMatrix4(f2),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectByProperty(t,i);if(void 0!==o)return o}}getObjectsByProperty(t,i){let r=[];this[t]===i&&r.push(this);for(let s=0,a=this.children.length;s<a;s++){const o=this.children[s].getObjectsByProperty(t,i);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_0,t,TAe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_0,LAe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const a=i[r];(!0===a.matrixWorldAutoUpdate||!0===t)&&a.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let a=0,o=s.length;a<o;a++){const c=s[a];!0===c.matrixWorldAutoUpdate&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function a(c,l){return void 0===c[l.uuid]&&(c[l.uuid]=l.toJSON(t)),l.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(t.geometries,this.geometry);const c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){const l=c.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++)a(t.shapes,l[u]);else a(t.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const c=[];for(let l=0,u=this.material.length;l<u;l++)c.push(a(t.materials,this.material[l]));s.material=c}else s.material=a(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++)s.animations.push(a(t.animations,this.animations[c]))}if(i){const c=o(t.geometries),l=o(t.materials),u=o(t.textures),f=o(t.images),h=o(t.shapes),d=o(t.skeletons),p=o(t.animations),m=o(t.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),f.length>0&&(r.images=f),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),p.length>0&&(r.animations=p),m.length>0&&(r.nodes=m)}return r.object=s,r;function o(c){const l=[];for(const u in c){const f=c[u];delete f.metadata,l.push(f)}return l}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new T(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Z1=new T,h2=new T,hg=new T,d2=new T,wc=new T,xc=new T,Hk=new T,dg=new T,pg=new T,mg=new T;let R8=!1;class a1{constructor(e=new T,t=new T,i=new T){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Z1.subVectors(e,t),r.cross(Z1);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Z1.subVectors(r,t),h2.subVectors(i,t),hg.subVectors(e,t);const a=Z1.dot(Z1),o=Z1.dot(h2),c=Z1.dot(hg),l=h2.dot(h2),u=h2.dot(hg),f=a*l-o*o;if(0===f)return s.set(-2,-1,-1);const h=1/f,d=(l*c-o*u)*h,p=(a*u-o*c)*h;return s.set(1-d-p,p,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,d2),d2.x>=0&&d2.y>=0&&d2.x+d2.y<=1}static getUV(e,t,i,r,s,a,o,c){return!1===R8&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),R8=!0),this.getInterpolation(e,t,i,r,s,a,o,c)}static getInterpolation(e,t,i,r,s,a,o,c){return this.getBarycoord(e,t,i,r,d2),c.setScalar(0),c.addScaledVector(s,d2.x),c.addScaledVector(a,d2.y),c.addScaledVector(o,d2.z),c}static isFrontFacing(e,t,i,r){return Z1.subVectors(i,t),h2.subVectors(e,t),Z1.cross(h2).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Z1.subVectors(this.c,this.b),h2.subVectors(this.a,this.b),.5*Z1.cross(h2).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return a1.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return a1.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return!1===R8&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),R8=!0),a1.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return a1.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return a1.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return a1.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;wc.subVectors(r,i),xc.subVectors(s,i),dg.subVectors(e,i);const c=wc.dot(dg),l=xc.dot(dg);if(c<=0&&l<=0)return t.copy(i);pg.subVectors(e,r);const u=wc.dot(pg),f=xc.dot(pg);if(u>=0&&f<=u)return t.copy(r);const h=c*f-u*l;if(h<=0&&c>=0&&u<=0)return a=c/(c-u),t.copy(i).addScaledVector(wc,a);mg.subVectors(e,s);const d=wc.dot(mg),p=xc.dot(mg);if(p>=0&&d<=p)return t.copy(s);const m=d*l-c*p;if(m<=0&&l>=0&&p<=0)return o=l/(l-p),t.copy(i).addScaledVector(xc,o);const v=u*p-d*f;if(v<=0&&f-u>=0&&d-p>=0)return Hk.subVectors(s,r),o=(f-u)/(f-u+(d-p)),t.copy(r).addScaledVector(Hk,o);const g=1/(v+m+h);return a=m*g,o=h*g,t.copy(i).addScaledVector(wc,a).addScaledVector(xc,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let VAe=0;class Ui extends Qs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:VAe++}),this.uuid=r1(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const a=[];for(const o in s){const c=s[o];delete c.metadata,a.push(c)}return a}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const zk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ss={h:0,s:0,l:0},P8={h:0,s:0,l:0};function gg(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class K{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=jt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Tt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Tt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Tt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Tt.workingColorSpace){if(e=Qm(e,1),t=dn(t,0,1),i=dn(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=gg(a,s,e+1/3),this.g=gg(a,s,e),this.b=gg(a,s,e-1/3)}return Tt.toWorkingColorSpace(this,r),this}setStyle(e,t=jt){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(3===a)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===a)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=jt){const i=zk[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=hc(e.r),this.g=hc(e.g),this.b=hc(e.b),this}copyLinearToSRGB(e){return this.r=ng(e.r),this.g=ng(e.g),this.b=ng(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=jt){return Tt.fromWorkingColorSpace(li.copy(this),e),65536*Math.round(dn(255*li.r,0,255))+256*Math.round(dn(255*li.g,0,255))+Math.round(dn(255*li.b,0,255))}getHexString(e=jt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Tt.workingColorSpace){Tt.fromWorkingColorSpace(li.copy(this),t);const i=li.r,r=li.g,s=li.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let c,l;const u=(o+a)/2;if(o===a)c=0,l=0;else{const f=a-o;switch(l=u<=.5?f/(a+o):f/(2-a-o),a){case i:c=(r-s)/f+(r<s?6:0);break;case r:c=(s-i)/f+2;break;case s:c=(i-r)/f+4}c/=6}return e.h=c,e.s=l,e.l=u,e}getRGB(e,t=Tt.workingColorSpace){return Tt.fromWorkingColorSpace(li.copy(this),t),e.r=li.r,e.g=li.g,e.b=li.b,e}getStyle(e=jt){Tt.fromWorkingColorSpace(li.copy(this),e);const t=li.r,i=li.g,r=li.b;return e!==jt?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(ss),this.setHSL(ss.h+e,ss.s+t,ss.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ss),e.getHSL(P8);const i=m0(ss.h,P8.h,t),r=m0(ss.s,P8.s,t),s=m0(ss.l,P8.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const li=new K;K.NAMES=zk;class ui extends Ui{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new K(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=g8,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const En=new T,k8=new Z;class Jt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=a2,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)k8.fromBufferAttribute(this,t),k8.applyMatrix3(e),this.setXY(t,k8.x,k8.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)En.fromBufferAttribute(this,t),En.applyMatrix3(e),this.setXYZ(t,En.x,En.y,En.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)En.fromBufferAttribute(this,t),En.applyMatrix4(e),this.setXYZ(t,En.x,En.y,En.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)En.fromBufferAttribute(this,t),En.applyNormalMatrix(e),this.setXYZ(t,En.x,En.y,En.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)En.fromBufferAttribute(this,t),En.transformDirection(e),this.setXYZ(t,En.x,En.y,En.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Fi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=ct(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Fi(t,this.array)),t}setX(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Fi(t,this.array)),t}setY(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Fi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Fi(t,this.array)),t}setW(e,t){return this.normalized&&(t=ct(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),r=ct(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),r=ct(r,this.array),s=ct(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class Vk extends Jt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Dk extends Jt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class De extends Jt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let NAe=0;const L1=new $e,vg=new _n,bc=new T,o1=new Sr,w0=new Sr,Gn=new T;class lt extends Qs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:NAe++}),this.uuid=r1(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(vk(e)?Dk:Vk)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new dt).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return L1.makeRotationFromQuaternion(e),this.applyMatrix4(L1),this}rotateX(e){return L1.makeRotationX(e),this.applyMatrix4(L1),this}rotateY(e){return L1.makeRotationY(e),this.applyMatrix4(L1),this}rotateZ(e){return L1.makeRotationZ(e),this.applyMatrix4(L1),this}translate(e,t,i){return L1.makeTranslation(e,t,i),this.applyMatrix4(L1),this}scale(e,t,i){return L1.makeScale(e,t,i),this.applyMatrix4(L1),this}lookAt(e){return vg.lookAt(e),vg.updateMatrix(),this.applyMatrix4(vg.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bc).negate(),this.translate(bc.x,bc.y,bc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new De(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Sr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new T(-1/0,-1/0,-1/0),new T(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)o1.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Gn.addVectors(this.boundingBox.min,o1.min),this.boundingBox.expandByPoint(Gn),Gn.addVectors(this.boundingBox.max,o1.max),this.boundingBox.expandByPoint(Gn)):(this.boundingBox.expandByPoint(o1.min),this.boundingBox.expandByPoint(o1.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new X1);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new T,1/0);if(e){const i=this.boundingSphere.center;if(o1.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++)w0.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Gn.addVectors(o1.min,w0.min),o1.expandByPoint(Gn),Gn.addVectors(o1.max,w0.max),o1.expandByPoint(Gn)):(o1.expandByPoint(w0.min),o1.expandByPoint(w0.max));o1.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Gn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Gn));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],c=this.morphTargetsRelative;for(let l=0,u=o.count;l<u;l++)Gn.fromBufferAttribute(o,l),c&&(bc.fromBufferAttribute(e,l),Gn.add(bc)),r=Math.max(r,i.distanceToSquared(Gn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Jt(new Float32Array(4*o),4));const c=this.getAttribute("tangent").array,l=[],u=[];for(let A=0;A<o;A++)l[A]=new T,u[A]=new T;const f=new T,h=new T,d=new T,p=new Z,m=new Z,v=new Z,g=new T,M=new T;function y(A,I,k){f.fromArray(r,3*A),h.fromArray(r,3*I),d.fromArray(r,3*k),p.fromArray(a,2*A),m.fromArray(a,2*I),v.fromArray(a,2*k),h.sub(f),d.sub(f),m.sub(p),v.sub(p);const U=1/(m.x*v.y-v.x*m.y);isFinite(U)&&(g.copy(h).multiplyScalar(v.y).addScaledVector(d,-m.y).multiplyScalar(U),M.copy(d).multiplyScalar(m.x).addScaledVector(h,-v.x).multiplyScalar(U),l[A].add(g),l[I].add(g),l[k].add(g),u[A].add(M),u[I].add(M),u[k].add(M))}let _=this.groups;0===_.length&&(_=[{start:0,count:i.length}]);for(let A=0,I=_.length;A<I;++A){const k=_[A],U=k.start;for(let P=U,O=U+k.count;P<O;P+=3)y(i[P+0],i[P+1],i[P+2])}const C=new T,b=new T,x=new T,S=new T;function w(A){x.fromArray(s,3*A),S.copy(x);const I=l[A];C.copy(I),C.sub(x.multiplyScalar(x.dot(I))).normalize(),b.crossVectors(S,I);const U=b.dot(u[A])<0?-1:1;c[4*A]=C.x,c[4*A+1]=C.y,c[4*A+2]=C.z,c[4*A+3]=U}for(let A=0,I=_.length;A<I;++A){const k=_[A],U=k.start;for(let P=U,O=U+k.count;P<O;P+=3)w(i[P+0]),w(i[P+1]),w(i[P+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new Jt(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let h=0,d=i.count;h<d;h++)i.setXYZ(h,0,0,0);const r=new T,s=new T,a=new T,o=new T,c=new T,l=new T,u=new T,f=new T;if(e)for(let h=0,d=e.count;h<d;h+=3){const p=e.getX(h+0),m=e.getX(h+1),v=e.getX(h+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,v),u.subVectors(a,s),f.subVectors(r,s),u.cross(f),o.fromBufferAttribute(i,p),c.fromBufferAttribute(i,m),l.fromBufferAttribute(i,v),o.add(u),c.add(u),l.add(u),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,c.x,c.y,c.z),i.setXYZ(v,l.x,l.y,l.z)}else for(let h=0,d=t.count;h<d;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),a.fromBufferAttribute(t,h+2),u.subVectors(a,s),f.subVectors(r,s),u.cross(f),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Gn.fromBufferAttribute(e,t),Gn.normalize(),e.setXYZ(t,Gn.x,Gn.y,Gn.z)}toNonIndexed(){function e(o,c){const l=o.array,u=o.itemSize,f=o.normalized,h=new l.constructor(c.length*u);let d=0,p=0;for(let m=0,v=c.length;m<v;m++){d=o.isInterleavedBufferAttribute?c[m]*o.data.stride+o.offset:c[m]*u;for(let g=0;g<u;g++)h[p++]=l[d++]}return new Jt(h,u,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new lt,i=this.index.array,r=this.attributes;for(const o in r){const l=e(r[o],i);t.setAttribute(o,l)}const s=this.morphAttributes;for(const o in s){const c=[],l=s[o];for(let u=0,f=l.length;u<f;u++){const d=e(l[u],i);c.push(d)}t.morphAttributes[o]=c}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,c=a.length;o<c;o++){const l=a[o];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const c=this.parameters;for(const l in c)void 0!==c[l]&&(e[l]=c[l]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i)e.data.attributes[c]=i[c].toJSON(e.data);const r={};let s=!1;for(const c in this.morphAttributes){const l=this.morphAttributes[c],u=[];for(let f=0,h=l.length;f<h;f++)u.push(l[f].toJSON(e.data));u.length>0&&(r[c]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const l in r)this.setAttribute(l,r[l].clone(t));const s=e.morphAttributes;for(const l in s){const u=[],f=s[l];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,u=a.length;l<u;l++){const f=a[l];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const c=e.boundingSphere;return null!==c&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Nk=new $e,ra=new yc,O8=new X1,Ik=new T,Sc=new T,Ac=new T,Ec=new T,Mg=new T,F8=new T,U8=new Z,B8=new Z,G8=new Z,Rk=new T,Pk=new T,kk=new T,W8=new T,j8=new T;class zt extends _n{constructor(e=new lt,t=new ui){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const o=this.morphTargetInfluences;if(s&&o){F8.set(0,0,0);for(let c=0,l=s.length;c<l;c++){const u=o[c];0!==u&&(Mg.fromBufferAttribute(s[c],e),F8.addScaledVector(a?Mg:Mg.sub(t),u))}t.add(F8)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),O8.copy(i.boundingSphere),O8.applyMatrix4(s),ra.copy(e.ray).recast(e.near),(!1!==O8.containsPoint(ra.origin)||!(null===ra.intersectSphere(O8,Ik)||ra.origin.distanceToSquared(Ik)>(e.far-e.near)**2))&&(Nk.copy(s).invert(),ra.copy(e.ray).applyMatrix4(Nk),(null===i.boundingBox||!1!==ra.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,ra)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,c=s.attributes.position,l=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,h=s.groups,d=s.drawRange;if(null!==o)if(Array.isArray(a))for(let p=0,m=h.length;p<m;p++){const v=h[p],g=a[v.materialIndex];for(let _=Math.max(v.start,d.start),C=Math.min(o.count,Math.min(v.start+v.count,d.start+d.count));_<C;_+=3)r=$8(this,g,e,i,l,u,f,o.getX(_),o.getX(_+1),o.getX(_+2)),r&&(r.faceIndex=Math.floor(_/3),r.face.materialIndex=v.materialIndex,t.push(r))}else for(let v=Math.max(0,d.start),g=Math.min(o.count,d.start+d.count);v<g;v+=3)r=$8(this,a,e,i,l,u,f,o.getX(v),o.getX(v+1),o.getX(v+2)),r&&(r.faceIndex=Math.floor(v/3),t.push(r));else if(void 0!==c)if(Array.isArray(a))for(let p=0,m=h.length;p<m;p++){const v=h[p],g=a[v.materialIndex];for(let _=Math.max(v.start,d.start),C=Math.min(c.count,Math.min(v.start+v.count,d.start+d.count));_<C;_+=3)r=$8(this,g,e,i,l,u,f,_,_+1,_+2),r&&(r.faceIndex=Math.floor(_/3),r.face.materialIndex=v.materialIndex,t.push(r))}else for(let v=Math.max(0,d.start),g=Math.min(c.count,d.start+d.count);v<g;v+=3)r=$8(this,a,e,i,l,u,f,v,v+1,v+2),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}function $8(n,e,t,i,r,s,a,o,c,l){n.getVertexPosition(o,Sc),n.getVertexPosition(c,Ac),n.getVertexPosition(l,Ec);const u=function IAe(n,e,t,i,r,s,a,o){let c;if(c=1===e.side?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,0===e.side,o),null===c)return null;j8.copy(o),j8.applyMatrix4(n.matrixWorld);const l=t.ray.origin.distanceTo(j8);return l<t.near||l>t.far?null:{distance:l,point:j8.clone(),object:n}}(n,e,t,i,Sc,Ac,Ec,W8);if(u){r&&(U8.fromBufferAttribute(r,o),B8.fromBufferAttribute(r,c),G8.fromBufferAttribute(r,l),u.uv=a1.getInterpolation(W8,Sc,Ac,Ec,U8,B8,G8,new Z)),s&&(U8.fromBufferAttribute(s,o),B8.fromBufferAttribute(s,c),G8.fromBufferAttribute(s,l),u.uv1=a1.getInterpolation(W8,Sc,Ac,Ec,U8,B8,G8,new Z),u.uv2=u.uv1),a&&(Rk.fromBufferAttribute(a,o),Pk.fromBufferAttribute(a,c),kk.fromBufferAttribute(a,l),u.normal=a1.getInterpolation(W8,Sc,Ac,Ec,Rk,Pk,kk,new T),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a:o,b:c,c:l,normal:new T,materialIndex:0};a1.getNormal(Sc,Ac,Ec,f.normal),u.face=f}return u}class Ar extends lt{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const c=[],l=[],u=[],f=[];let h=0,d=0;function p(m,v,g,M,y,_,C,b,x,S,w){const A=_/x,I=C/S,k=_/2,U=C/2,z=b/2,P=x+1,O=S+1;let G=0,ee=0;const j=new T;for(let J=0;J<O;J++){const R=J*I-U;for(let $=0;$<P;$++)j[m]=($*A-k)*M,j[v]=R*y,j[g]=z,l.push(j.x,j.y,j.z),j[m]=0,j[v]=0,j[g]=b>0?1:-1,u.push(j.x,j.y,j.z),f.push($/x),f.push(1-J/S),G+=1}for(let J=0;J<S;J++)for(let R=0;R<x;R++){const ae=h+R+P*(J+1),se=h+(R+1)+P*(J+1),ce=h+(R+1)+P*J;c.push(h+R+P*J,ae,ce),c.push(ae,se,ce),ee+=6}o.addGroup(d,ee,w),d+=ee,h+=G}p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,r,a,2),p("x","z","y",1,-1,e,i,-t,r,a,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new De(l,3)),this.setAttribute("normal",new De(u,3)),this.setAttribute("uv",new De(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ar(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Tc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function wi(n){const e={};for(let t=0;t<n.length;t++){const i=Tc(n[t]);for(const r in i)e[r]=i[r]}return e}function Ok(n){return null===n.getRenderTarget()?n.outputColorSpace:Tt.workingColorSpace}const PAe={clone:Tc,merge:wi};class Er extends Ui{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Tc(e.uniforms),this.uniformsGroups=function RAe(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;t.uniforms[r]=a&&a.isTexture?{type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?{type:"c",value:a.getHex()}:a&&a.isVector2?{type:"v2",value:a.toArray()}:a&&a.isVector3?{type:"v3",value:a.toArray()}:a&&a.isVector4?{type:"v4",value:a.toArray()}:a&&a.isMatrix3?{type:"m3",value:a.toArray()}:a&&a.isMatrix4?{type:"m4",value:a.toArray()}:{value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class yg extends _n{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new $e,this.projectionMatrix=new $e,this.projectionMatrixInverse=new $e,this.coordinateSystem=o2}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Wn extends yg{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*lc*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ea*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*lc*Math.atan(Math.tan(.5*ea*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ea*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const c=a.fullWidth,l=a.fullHeight;s+=a.offsetX*r/c,t-=a.offsetY*i/l,r*=a.width/c,i*=a.height/l}const o=this.filmOffset;0!==o&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class FAe extends _n{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Wn(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new Wn(-90,1,e,t);s.layers=this.layers,this.add(s);const a=new Wn(-90,1,e,t);a.layers=this.layers,this.add(a);const o=new Wn(-90,1,e,t);o.layers=this.layers,this.add(o);const c=new Wn(-90,1,e,t);c.layers=this.layers,this.add(c);const l=new Wn(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,c]=t;for(const l of t)this.remove(l);if(e===o2)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,c,l,u]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,c),e.setRenderTarget(i,4,r),e.render(t,l),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(f,h,d),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class q8 extends T1{constructor(e,t,i,r,s,a,o,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:J2,i,r,s,a,o,c,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class UAe extends ta{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];void 0!==t.encoding&&(v0("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ks?jt:""),this.texture=new q8(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:en}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Ar(5,5,5),s=new Er({name:"CubemapFromEquirect",uniforms:Tc(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const a=new zt(r,s),o=t.minFilter;return t.minFilter===s2&&(t.minFilter=en),new FAe(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}const _g=new T,BAe=new T,GAe=new dt;class m2{constructor(e=new T(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=_g.subVectors(i,t).cross(BAe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(_g),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||GAe.getNormalMatrix(e),r=this.coplanarPoint(_g).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const sa=new X1,X8=new T;class Cg{constructor(e=new m2,t=new m2,i=new m2,r=new m2,s=new m2,a=new m2){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=o2){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],c=r[3],l=r[4],u=r[5],f=r[6],h=r[7],d=r[8],p=r[9],m=r[10],v=r[11],g=r[12],M=r[13],y=r[14],_=r[15];if(i[0].setComponents(c-s,h-l,v-d,_-g).normalize(),i[1].setComponents(c+s,h+l,v+d,_+g).normalize(),i[2].setComponents(c+a,h+u,v+p,_+M).normalize(),i[3].setComponents(c-a,h-u,v-p,_-M).normalize(),i[4].setComponents(c-o,h-f,v-m,_-y).normalize(),t===o2)i[5].setComponents(c+o,h+f,v+m,_+y).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(o,f,m,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),sa.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),sa.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(sa)}intersectsSprite(e){return sa.center.set(0,0,0),sa.radius=.7071067811865476,sa.applyMatrix4(e.matrixWorld),this.intersectsSphere(sa)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(X8.x=r.normal.x>0?e.max.x:e.min.x,X8.y=r.normal.y>0?e.max.y:e.min.y,X8.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(X8)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Fk(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function WAe(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function a(l){return l.isInterleavedBufferAttribute&&(l=l.data),i.get(l)},remove:function o(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=i.get(l);u&&(n.deleteBuffer(u.buffer),i.delete(l))},update:function c(l,u){if(l.isGLBufferAttribute){const h=i.get(l);return void((!h||h.version<l.version)&&i.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version}))}l.isInterleavedBufferAttribute&&(l=l.data);const f=i.get(l);void 0===f?i.set(l,function r(l,u){const f=l.array,h=l.usage,d=n.createBuffer();let p;if(n.bindBuffer(u,d),n.bufferData(u,f,h),l.onUploadCallback(),f instanceof Float32Array)p=n.FLOAT;else if(f instanceof Uint16Array)if(l.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=n.HALF_FLOAT}else p=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)p=n.SHORT;else if(f instanceof Uint32Array)p=n.UNSIGNED_INT;else if(f instanceof Int32Array)p=n.INT;else if(f instanceof Int8Array)p=n.BYTE;else if(f instanceof Uint8Array)p=n.UNSIGNED_BYTE;else{if(!(f instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);p=n.UNSIGNED_BYTE}return{buffer:d,type:p,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version}}(l,u)):f.version<l.version&&(function s(l,u,f){const h=u.array,d=u.updateRange;n.bindBuffer(f,l),-1===d.count?n.bufferSubData(f,0,h):(t?n.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):n.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1),u.onUploadCallback()}(f.buffer,l,u),f.version=l.version)}}}class zc extends lt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),c=Math.floor(r),l=o+1,u=c+1,f=e/o,h=t/c,d=[],p=[],m=[],v=[];for(let g=0;g<u;g++){const M=g*h-a;for(let y=0;y<l;y++)p.push(y*f-s,-M,0),m.push(0,0,1),v.push(y/o),v.push(1-g/c)}for(let g=0;g<c;g++)for(let M=0;M<o;M++){const _=M+l*(g+1),C=M+1+l*(g+1),b=M+1+l*g;d.push(M+l*g,_,b),d.push(_,C,b)}this.setIndex(d),this.setAttribute("position",new De(p,3)),this.setAttribute("normal",new De(m,3)),this.setAttribute("uv",new De(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zc(e.width,e.height,e.widthSegments,e.heightSegments)}}const ft={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal;\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},ye={common:{diffuse:{value:new K(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new dt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new dt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new dt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new dt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new dt},normalScale:{value:new Z(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new dt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new dt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new dt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new dt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new K(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new K(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0},uvTransform:{value:new dt}},sprite:{diffuse:{value:new K(16777215)},opacity:{value:1},center:{value:new Z(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}}},Tr={basic:{uniforms:wi([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.fog]),vertexShader:ft.meshbasic_vert,fragmentShader:ft.meshbasic_frag},lambert:{uniforms:wi([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,ye.lights,{emissive:{value:new K(0)}}]),vertexShader:ft.meshlambert_vert,fragmentShader:ft.meshlambert_frag},phong:{uniforms:wi([ye.common,ye.specularmap,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,ye.lights,{emissive:{value:new K(0)},specular:{value:new K(1118481)},shininess:{value:30}}]),vertexShader:ft.meshphong_vert,fragmentShader:ft.meshphong_frag},standard:{uniforms:wi([ye.common,ye.envmap,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.roughnessmap,ye.metalnessmap,ye.fog,ye.lights,{emissive:{value:new K(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag},toon:{uniforms:wi([ye.common,ye.aomap,ye.lightmap,ye.emissivemap,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.gradientmap,ye.fog,ye.lights,{emissive:{value:new K(0)}}]),vertexShader:ft.meshtoon_vert,fragmentShader:ft.meshtoon_frag},matcap:{uniforms:wi([ye.common,ye.bumpmap,ye.normalmap,ye.displacementmap,ye.fog,{matcap:{value:null}}]),vertexShader:ft.meshmatcap_vert,fragmentShader:ft.meshmatcap_frag},points:{uniforms:wi([ye.points,ye.fog]),vertexShader:ft.points_vert,fragmentShader:ft.points_frag},dashed:{uniforms:wi([ye.common,ye.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ft.linedashed_vert,fragmentShader:ft.linedashed_frag},depth:{uniforms:wi([ye.common,ye.displacementmap]),vertexShader:ft.depth_vert,fragmentShader:ft.depth_frag},normal:{uniforms:wi([ye.common,ye.bumpmap,ye.normalmap,ye.displacementmap,{opacity:{value:1}}]),vertexShader:ft.meshnormal_vert,fragmentShader:ft.meshnormal_frag},sprite:{uniforms:wi([ye.sprite,ye.fog]),vertexShader:ft.sprite_vert,fragmentShader:ft.sprite_frag},background:{uniforms:{uvTransform:{value:new dt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ft.background_vert,fragmentShader:ft.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ft.backgroundCube_vert,fragmentShader:ft.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ft.cube_vert,fragmentShader:ft.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ft.equirect_vert,fragmentShader:ft.equirect_frag},distanceRGBA:{uniforms:wi([ye.common,ye.displacementmap,{referencePosition:{value:new T},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ft.distanceRGBA_vert,fragmentShader:ft.distanceRGBA_frag},shadow:{uniforms:wi([ye.lights,ye.fog,{color:{value:new K(0)},opacity:{value:1}}]),vertexShader:ft.shadow_vert,fragmentShader:ft.shadow_frag}};Tr.physical={uniforms:wi([Tr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new dt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new dt},clearcoatNormalScale:{value:new Z(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new dt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new dt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new dt},sheen:{value:0},sheenColor:{value:new K(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new dt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new dt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new dt},transmissionSamplerSize:{value:new Z},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new dt},attenuationDistance:{value:0},attenuationColor:{value:new K(0)},specularColor:{value:new K(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new dt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new dt},anisotropyVector:{value:new Z},anisotropyMap:{value:null},anisotropyMapTransform:{value:new dt}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag};const Y8={r:0,b:0,g:0};function BTe(n,e,t,i,r,s,a){const o=new K(0);let l,u,c=!0===s?0:1,f=null,h=0,d=null;function m(v,g){v.getRGB(Y8,Ok(n)),i.buffers.color.setClear(Y8.r,Y8.g,Y8.b,g,a)}return{getClearColor:function(){return o},setClearColor:function(v,g=1){o.set(v),c=g,m(o,c)},getClearAlpha:function(){return c},setClearAlpha:function(v){c=v,m(o,c)},render:function p(v,g){let M=!1,y=!0===g.isScene?g.background:null;y&&y.isTexture&&(y=(g.backgroundBlurriness>0?t:e).get(y)),null===y?m(o,c):y&&y.isColor&&(m(y,1),M=!0);const _=n.xr.getEnvironmentBlendMode();"additive"===_?i.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===_&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),y&&(y.isCubeTexture||y.mapping===u0)?(void 0===u&&(u=new zt(new Ar(1,1,1),new Er({name:"BackgroundCubeMaterial",uniforms:Tc(Tr.backgroundCube.uniforms),vertexShader:Tr.backgroundCube.vertexShader,fragmentShader:Tr.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(C,b,x){this.matrixWorld.copyPosition(x.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=y,u.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=Tt.getTransfer(y.colorSpace)!==Kt,(f!==y||h!==y.version||d!==n.toneMapping)&&(u.material.needsUpdate=!0,f=y,h=y.version,d=n.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):y&&y.isTexture&&(void 0===l&&(l=new zt(new zc(2,2),new Er({name:"BackgroundMaterial",uniforms:Tc(Tr.background.uniforms),vertexShader:Tr.background.vertexShader,fragmentShader:Tr.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=y,l.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,l.material.toneMapped=Tt.getTransfer(y.colorSpace)!==Kt,!0===y.matrixAutoUpdate&&y.updateMatrix(),l.material.uniforms.uvTransform.value.copy(y.matrix),(f!==y||h!==y.version||d!==n.toneMapping)&&(l.material.needsUpdate=!0,f=y,h=y.version,d=n.toneMapping),l.layers.enableAll(),v.unshift(l,l.geometry,l.material,0,0,null))}}}function GTe(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||null!==s,o={},c=v(null);let l=c,u=!1;function d(z){return i.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function p(z){return i.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function v(z){const P=[],O=[],G=[];for(let ee=0;ee<r;ee++)P[ee]=0,O[ee]=0,G[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:O,attributeDivisors:G,object:z,attributes:{},index:null}}function y(){const z=l.newAttributes;for(let P=0,O=z.length;P<O;P++)z[P]=0}function _(z){C(z,0)}function C(z,P){const G=l.enabledAttributes,ee=l.attributeDivisors;l.newAttributes[z]=1,0===G[z]&&(n.enableVertexAttribArray(z),G[z]=1),ee[z]!==P&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,P),ee[z]=P)}function b(){const z=l.newAttributes,P=l.enabledAttributes;for(let O=0,G=P.length;O<G;O++)P[O]!==z[O]&&(n.disableVertexAttribArray(O),P[O]=0)}function x(z,P,O,G,ee,j,J){!0===J?n.vertexAttribIPointer(z,P,O,ee,j):n.vertexAttribPointer(z,P,O,G,ee,j)}function k(){U(),u=!0,l!==c&&(l=c,d(l.object))}function U(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function f(z,P,O,G,ee){let j=!1;if(a){const J=function m(z,P,O){const G=!0===O.wireframe;let ee=o[z.id];void 0===ee&&(ee={},o[z.id]=ee);let j=ee[P.id];void 0===j&&(j={},ee[P.id]=j);let J=j[G];return void 0===J&&(J=v(function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),j[G]=J),J}(G,O,P);l!==J&&(l=J,d(l.object)),j=function g(z,P,O,G){const ee=l.attributes,j=P.attributes;let J=0;const R=O.getAttributes();for(const $ in R)if(R[$].location>=0){const se=ee[$];let ce=j[$];if(void 0===ce&&("instanceMatrix"===$&&z.instanceMatrix&&(ce=z.instanceMatrix),"instanceColor"===$&&z.instanceColor&&(ce=z.instanceColor)),void 0===se||se.attribute!==ce||ce&&se.data!==ce.data)return!0;J++}return l.attributesNum!==J||l.index!==G}(z,G,O,ee),j&&function M(z,P,O,G){const ee={},j=P.attributes;let J=0;const R=O.getAttributes();for(const $ in R)if(R[$].location>=0){let se=j[$];void 0===se&&("instanceMatrix"===$&&z.instanceMatrix&&(se=z.instanceMatrix),"instanceColor"===$&&z.instanceColor&&(se=z.instanceColor));const ce={};ce.attribute=se,se&&se.data&&(ce.data=se.data),ee[$]=ce,J++}l.attributes=ee,l.attributesNum=J,l.index=G}(z,G,O,ee)}else{const J=!0===P.wireframe;(l.geometry!==G.id||l.program!==O.id||l.wireframe!==J)&&(l.geometry=G.id,l.program=O.id,l.wireframe=J,j=!0)}null!==ee&&t.update(ee,n.ELEMENT_ARRAY_BUFFER),(j||u)&&(u=!1,function S(z,P,O,G){if(!1===i.isWebGL2&&(z.isInstancedMesh||G.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const ee=G.attributes,j=O.getAttributes(),J=P.defaultAttributeValues;for(const R in j){const $=j[R];if($.location>=0){let ae=ee[R];if(void 0===ae&&("instanceMatrix"===R&&z.instanceMatrix&&(ae=z.instanceMatrix),"instanceColor"===R&&z.instanceColor&&(ae=z.instanceColor)),void 0!==ae){const se=ae.normalized,ce=ae.itemSize,xe=t.get(ae);if(void 0===xe)continue;const ze=xe.buffer,Te=xe.type,pt=xe.bytesPerElement,at=!0===i.isWebGL2&&(Te===n.INT||Te===n.UNSIGNED_INT||1013===ae.gpuType);if(ae.isInterleavedBufferAttribute){const Pe=ae.data,D=Pe.stride,ge=ae.offset;if(Pe.isInstancedInterleavedBuffer){for(let Q=0;Q<$.locationSize;Q++)C($.location+Q,Pe.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===G._maxInstanceCount&&(G._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let Q=0;Q<$.locationSize;Q++)_($.location+Q);n.bindBuffer(n.ARRAY_BUFFER,ze);for(let Q=0;Q<$.locationSize;Q++)x($.location+Q,ce/$.locationSize,Te,se,D*pt,(ge+ce/$.locationSize*Q)*pt,at)}else{if(ae.isInstancedBufferAttribute){for(let Pe=0;Pe<$.locationSize;Pe++)C($.location+Pe,ae.meshPerAttribute);!0!==z.isInstancedMesh&&void 0===G._maxInstanceCount&&(G._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let Pe=0;Pe<$.locationSize;Pe++)_($.location+Pe);n.bindBuffer(n.ARRAY_BUFFER,ze);for(let Pe=0;Pe<$.locationSize;Pe++)x($.location+Pe,ce/$.locationSize,Te,se,ce*pt,ce/$.locationSize*Pe*pt,at)}}else if(void 0!==J){const se=J[R];if(void 0!==se)switch(se.length){case 2:n.vertexAttrib2fv($.location,se);break;case 3:n.vertexAttrib3fv($.location,se);break;case 4:n.vertexAttrib4fv($.location,se);break;default:n.vertexAttrib1fv($.location,se)}}}}b()}(z,P,O,G),null!==ee&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(ee).buffer))},reset:k,resetDefaultState:U,dispose:function w(){k();for(const z in o){const P=o[z];for(const O in P){const G=P[O];for(const ee in G)p(G[ee].object),delete G[ee];delete P[O]}delete o[z]}},releaseStatesOfGeometry:function A(z){if(void 0===o[z.id])return;const P=o[z.id];for(const O in P){const G=P[O];for(const ee in G)p(G[ee].object),delete G[ee];delete P[O]}delete o[z.id]},releaseStatesOfProgram:function I(z){for(const P in o){const O=o[P];if(void 0===O[z.id])continue;const G=O[z.id];for(const ee in G)p(G[ee].object),delete G[ee];delete O[z.id]}},initAttributes:y,enableAttribute:_,disableUnusedAttributes:b}}function WTe(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function a(l){s=l},this.render=function o(l,u){n.drawArrays(s,l,u),t.update(u,s,1)},this.renderInstances=function c(l,u,f){if(0===f)return;let h,d;if(r)h=n,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[d](s,l,u,f),t.update(u,s,f)}}function jTe(n,e,t){let i;function s(x){if("highp"===x){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return"mediump"===x&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===n.constructor.name;let o=void 0!==t.precision?t.precision:"highp";const c=s(o);c!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",c,"instead."),o=c);const l=a||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,_=a||e.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const x=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:v,maxVaryings:g,maxFragmentUniforms:M,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:a?n.getParameter(n.MAX_SAMPLES):0}}function $Te(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new m2,o=new dt,c={value:null,needsUpdate:!1};function u(f,h,d,p){const m=null!==f?f.length:0;let v=null;if(0!==m){if(v=c.value,!0!==p||null===v){const g=d+4*m,M=h.matrixWorldInverse;o.getNormalMatrix(M),(null===v||v.length<g)&&(v=new Float32Array(g));for(let y=0,_=d;y!==m;++y,_+=4)a.copy(f[y]).applyMatrix4(M,o),a.normal.toArray(v,_),v[_+3]=a.constant}c.value=v,c.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const d=0!==f.length||h||0!==i||r;return r=h,i=f.length,d},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){t=u(f,h,0)},this.setState=function(f,h,d){const p=f.clippingPlanes,m=f.clipIntersection,v=f.clipShadows,g=n.get(f);if(!r||null===p||0===p.length||s&&!v)s?u(null):function l(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const M=s?0:i,y=4*M;let _=g.clippingState||null;c.value=_,_=u(p,h,y,d);for(let C=0;C!==y;++C)_[C]=t[C];g.clippingState=_,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=M}}}function qTe(n){let e=new WeakMap;function t(a,o){return 303===o?a.mapping=J2:304===o&&(a.mapping=qs),a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const c=e.get(o);void 0!==c&&(e.delete(o),c.dispose())}return{get:function i(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const o=a.mapping;if(303===o||304===o){if(e.has(a))return t(e.get(a).texture,a.mapping);{const c=a.image;if(c&&c.height>0){const l=new UAe(c.height/2);return l.fromEquirectangularTexture(n,a),e.set(a,l),a.addEventListener("dispose",r),t(l.texture,a.mapping)}return null}}}return a},dispose:function s(){e=new WeakMap}}}class Z8 extends yg{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,c=r-t;if(null!==this.view&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,a=s+l*this.view.width,o-=u*this.view.offsetY,c=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Uk=[.125,.215,.35,.446,.526,.582],wg=new Z8,Bk=new K;let xg=null;const oa=(1+Math.sqrt(5))/2,Dc=1/oa,Gk=[new T(1,1,1),new T(-1,1,1),new T(1,1,-1),new T(-1,1,-1),new T(0,oa,Dc),new T(0,oa,-Dc),new T(Dc,0,oa),new T(-Dc,0,oa),new T(oa,Dc,0),new T(-oa,Dc,0)];class Wk{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){xg=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=qk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=$k(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(xg),e.scissorTest=!1,K8(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===J2||e.mapping===qs?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),xg=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:en,minFilter:en,generateMipmaps:!1,type:d0,format:A1,colorSpace:Bn,depthBuffer:!1},r=jk(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=jk(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function XTe(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+Uk.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let c=1/o;a>n-4?c=Uk[a-n+4-1]:0===a&&(c=0),i.push(c);const l=1/(o-2),u=-l,f=1+l,h=[u,u,f,u,f,f,u,u,f,f,u,f],d=6,p=6,m=3,v=2,g=1,M=new Float32Array(m*p*d),y=new Float32Array(v*p*d),_=new Float32Array(g*p*d);for(let b=0;b<d;b++){const x=b%3*2/3-1,S=b>2?0:-1;M.set([x,S,0,x+2/3,S,0,x+2/3,S+1,0,x,S,0,x+2/3,S+1,0,x,S+1,0],m*p*b),y.set(h,v*p*b),_.set([b,b,b,b,b,b],g*p*b)}const C=new lt;C.setAttribute("position",new Jt(M,m)),C.setAttribute("uv",new Jt(y,v)),C.setAttribute("faceIndex",new Jt(_,g)),e.push(C),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function YTe(n,e,t){const i=new Float32Array(20),r=new T(0,1,0);return new Er({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new zt(this._lodPlanes[0],e);this._renderer.compile(t,wg)}_sceneToCubeUV(e,t,i,r){const o=new Wn(90,1,t,i),c=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.toneMapping;u.getClearColor(Bk),u.toneMapping=r2,u.autoClear=!1;const d=new ui({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new zt(new Ar,d);let m=!1;const v=e.background;v?v.isColor&&(d.color.copy(v),e.background=null,m=!0):(d.color.copy(Bk),m=!0);for(let g=0;g<6;g++){const M=g%3;0===M?(o.up.set(0,c[g],0),o.lookAt(l[g],0,0)):1===M?(o.up.set(0,0,c[g]),o.lookAt(0,l[g],0)):(o.up.set(0,c[g],0),o.lookAt(0,0,l[g]));const y=this._cubeSize;K8(r,M*y,g>2?y:0,y,y),u.setRenderTarget(r),m&&u.render(p,o),u.render(e,o)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=f,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===J2||e.mapping===qs;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=qk()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=$k());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new zt(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const c=this._cubeSize;K8(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(a,wg)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,Gk[(r-1)%Gk.length])}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const c=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new zt(this._lodPlanes[r],l),h=l.uniforms,d=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/39,m=s/p,v=isFinite(s)?1+Math.floor(3*m):20;v>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to 20`);const g=[];let M=0;for(let x=0;x<20;++x){const S=x/m,w=Math.exp(-S*S/2);g.push(w),0===x?M+=w:x<v&&(M+=2*w)}for(let x=0;x<g.length;x++)g[x]=g[x]/M;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=g,h.latitudinal.value="latitudinal"===a,o&&(h.poleAxis.value=o);const{_lodMax:y}=this;h.dTheta.value=p,h.mipInt.value=y-i;const _=this._sizeLods[r];K8(t,3*_*(r>y-4?r-y+4:0),4*(this._cubeSize-_),3*_,2*_),c.setRenderTarget(t),c.render(f,wg)}}function jk(n,e,t){const i=new ta(n,e,t);return i.texture.mapping=u0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function K8(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function $k(){return new Er({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function qk(){return new Er({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ZTe(n){let e=new WeakMap,t=null;function s(o){const c=o.target;c.removeEventListener("dispose",s);const l=e.get(c);void 0!==l&&(e.delete(c),l.dispose())}return{get:function i(o){if(o&&o.isTexture){const c=o.mapping,l=303===c||304===c,u=c===J2||c===qs;if(l||u){if(o.isRenderTargetTexture&&!0===o.needsPMREMUpdate){o.needsPMREMUpdate=!1;let f=e.get(o);return null===t&&(t=new Wk(n)),f=l?t.fromEquirectangular(o,f):t.fromCubemap(o,f),e.set(o,f),f.texture}if(e.has(o))return e.get(o).texture;{const f=o.image;if(l&&f&&f.height>0||u&&f&&function r(o){let c=0;for(let u=0;u<6;u++)void 0!==o[u]&&c++;return 6===c}(f)){null===t&&(t=new Wk(n));const h=l?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,h),o.addEventListener("dispose",s),h.texture}return null}}}return o},dispose:function a(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function KTe(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function JTe(n,e,t,i){const r={},s=new WeakMap;function a(f){const h=f.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);for(const p in h.morphAttributes){const m=h.morphAttributes[p];for(let v=0,g=m.length;v<g;v++)e.remove(m[v])}h.removeEventListener("dispose",a),delete r[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),i.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function l(f){const h=[],d=f.index,p=f.attributes.position;let m=0;if(null!==d){const M=d.array;m=d.version;for(let y=0,_=M.length;y<_;y+=3){const C=M[y+0],b=M[y+1],x=M[y+2];h.push(C,b,b,x,x,C)}}else{if(void 0===p)return;m=p.version;for(let y=0,_=p.array.length/3-1;y<_;y+=3){const C=y+0,b=y+1,x=y+2;h.push(C,b,b,x,x,C)}}const v=new(vk(h)?Dk:Vk)(h,1);v.version=m;const g=s.get(f);g&&e.remove(g),s.set(f,v)}return{get:function o(f,h){return!0===r[h.id]||(h.addEventListener("dispose",a),r[h.id]=!0,t.memory.geometries++),h},update:function c(f){const h=f.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER);const d=f.morphAttributes;for(const p in d){const m=d[p];for(let v=0,g=m.length;v<g;v++)e.update(m[v],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(f){const h=s.get(f);if(h){const d=f.index;null!==d&&h.version<d.version&&l(f)}else l(f);return s.get(f)}}}function QTe(n,e,t,i){const r=i.isWebGL2;let s,o,c;this.setMode=function a(h){s=h},this.setIndex=function l(h){o=h.type,c=h.bytesPerElement},this.render=function u(h,d){n.drawElements(s,d,o,h*c),t.update(d,s,1)},this.renderInstances=function f(h,d,p){if(0===p)return;let m,v;if(r)m=n,v="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",null===m)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[v](s,d,o,h*c,p),t.update(d,s,p)}}function eLe(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}function tLe(n,e){return n[0]-e[0]}function nLe(n,e){return Math.abs(e[1])-Math.abs(n[1])}function iLe(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,a=new It,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function c(l,u,f){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==d?d.length:0;let m=s.get(u);if(void 0===m||m.count!==p){let z=function(){k.dispose(),s.delete(u),u.removeEventListener("dispose",z)};void 0!==m&&m.texture.dispose();const M=void 0!==u.morphAttributes.position,y=void 0!==u.morphAttributes.normal,_=void 0!==u.morphAttributes.color,C=u.morphAttributes.position||[],b=u.morphAttributes.normal||[],x=u.morphAttributes.color||[];let S=0;!0===M&&(S=1),!0===y&&(S=2),!0===_&&(S=3);let w=u.attributes.position.count*S,A=1;w>e.maxTextureSize&&(A=Math.ceil(w/e.maxTextureSize),w=e.maxTextureSize);const I=new Float32Array(w*A*4*p),k=new rg(I,w,A,p);k.type=a2,k.needsUpdate=!0;const U=4*S;for(let P=0;P<p;P++){const O=C[P],G=b[P],ee=x[P],j=w*A*4*P;for(let J=0;J<O.count;J++){const R=J*U;!0===M&&(a.fromBufferAttribute(O,J),I[j+R+0]=a.x,I[j+R+1]=a.y,I[j+R+2]=a.z,I[j+R+3]=0),!0===y&&(a.fromBufferAttribute(G,J),I[j+R+4]=a.x,I[j+R+5]=a.y,I[j+R+6]=a.z,I[j+R+7]=0),!0===_&&(a.fromBufferAttribute(ee,J),I[j+R+8]=a.x,I[j+R+9]=a.y,I[j+R+10]=a.z,I[j+R+11]=4===ee.itemSize?a.w:1)}}m={count:p,texture:k,size:new Z(w,A)},s.set(u,m),u.addEventListener("dispose",z)}let v=0;for(let M=0;M<h.length;M++)v+=h[M];const g=u.morphTargetsRelative?1:1-v;f.getUniforms().setValue(n,"morphTargetBaseInfluence",g),f.getUniforms().setValue(n,"morphTargetInfluences",h),f.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}else{const d=void 0===h?0:h.length;let p=i[u.id];if(void 0===p||p.length!==d){p=[];for(let y=0;y<d;y++)p[y]=[y,0];i[u.id]=p}for(let y=0;y<d;y++){const _=p[y];_[0]=y,_[1]=h[y]}p.sort(nLe);for(let y=0;y<8;y++)y<d&&p[y][1]?(o[y][0]=p[y][0],o[y][1]=p[y][1]):(o[y][0]=Number.MAX_SAFE_INTEGER,o[y][1]=0);o.sort(tLe);const m=u.morphAttributes.position,v=u.morphAttributes.normal;let g=0;for(let y=0;y<8;y++){const _=o[y],C=_[0],b=_[1];C!==Number.MAX_SAFE_INTEGER&&b?(m&&u.getAttribute("morphTarget"+y)!==m[C]&&u.setAttribute("morphTarget"+y,m[C]),v&&u.getAttribute("morphNormal"+y)!==v[C]&&u.setAttribute("morphNormal"+y,v[C]),r[y]=b,g+=b):(m&&!0===u.hasAttribute("morphTarget"+y)&&u.deleteAttribute("morphTarget"+y),v&&!0===u.hasAttribute("morphNormal"+y)&&u.deleteAttribute("morphNormal"+y),r[y]=0)}const M=u.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",M),f.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function rLe(n,e,t,i){let r=new WeakMap;function o(c){const l=c.target;l.removeEventListener("dispose",o),t.remove(l.instanceMatrix),null!==l.instanceColor&&t.remove(l.instanceColor)}return{update:function s(c){const l=i.render.frame,f=e.get(c,c.geometry);if(r.get(f)!==l&&(e.update(f),r.set(f,l)),c.isInstancedMesh&&(!1===c.hasEventListener("dispose",o)&&c.addEventListener("dispose",o),r.get(c)!==l&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),null!==c.instanceColor&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){const h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return f},dispose:function a(){r=new WeakMap}}}const Xk=new T1,Yk=new rg,Zk=new wk,Kk=new q8,Jk=[],Qk=[],eO=new Float32Array(16),tO=new Float32Array(9),nO=new Float32Array(4);function Nc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=Jk[r];if(void 0===s&&(s=new Float32Array(r),Jk[r]=s),0!==e){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function kn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function On(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function J8(n,e){let t=Qk[e];void 0===t&&(t=new Int32Array(e),Qk[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function sLe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function aLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(kn(t,e))return;n.uniform2fv(this.addr,e),On(t,e)}}function oLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(kn(t,e))return;n.uniform3fv(this.addr,e),On(t,e)}}function cLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(kn(t,e))return;n.uniform4fv(this.addr,e),On(t,e)}}function lLe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(kn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),On(t,e)}else{if(kn(t,i))return;nO.set(i),n.uniformMatrix2fv(this.addr,!1,nO),On(t,i)}}function uLe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(kn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),On(t,e)}else{if(kn(t,i))return;tO.set(i),n.uniformMatrix3fv(this.addr,!1,tO),On(t,i)}}function fLe(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(kn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),On(t,e)}else{if(kn(t,i))return;eO.set(i),n.uniformMatrix4fv(this.addr,!1,eO),On(t,i)}}function hLe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function dLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(kn(t,e))return;n.uniform2iv(this.addr,e),On(t,e)}}function pLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(kn(t,e))return;n.uniform3iv(this.addr,e),On(t,e)}}function mLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(kn(t,e))return;n.uniform4iv(this.addr,e),On(t,e)}}function gLe(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function vLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(kn(t,e))return;n.uniform2uiv(this.addr,e),On(t,e)}}function MLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(kn(t,e))return;n.uniform3uiv(this.addr,e),On(t,e)}}function yLe(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(kn(t,e))return;n.uniform4uiv(this.addr,e),On(t,e)}}function _Le(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||Xk,r)}function CLe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Zk,r)}function wLe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Kk,r)}function xLe(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Yk,r)}function SLe(n,e){n.uniform1fv(this.addr,e)}function ALe(n,e){const t=Nc(e,this.size,2);n.uniform2fv(this.addr,t)}function ELe(n,e){const t=Nc(e,this.size,3);n.uniform3fv(this.addr,t)}function TLe(n,e){const t=Nc(e,this.size,4);n.uniform4fv(this.addr,t)}function LLe(n,e){const t=Nc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function HLe(n,e){const t=Nc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function zLe(n,e){const t=Nc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function VLe(n,e){n.uniform1iv(this.addr,e)}function DLe(n,e){n.uniform2iv(this.addr,e)}function NLe(n,e){n.uniform3iv(this.addr,e)}function ILe(n,e){n.uniform4iv(this.addr,e)}function RLe(n,e){n.uniform1uiv(this.addr,e)}function PLe(n,e){n.uniform2uiv(this.addr,e)}function kLe(n,e){n.uniform3uiv(this.addr,e)}function OLe(n,e){n.uniform4uiv(this.addr,e)}function FLe(n,e,t){const i=this.cache,r=e.length,s=J8(t,r);kn(i,s)||(n.uniform1iv(this.addr,s),On(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||Xk,s[a])}function ULe(n,e,t){const i=this.cache,r=e.length,s=J8(t,r);kn(i,s)||(n.uniform1iv(this.addr,s),On(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||Zk,s[a])}function BLe(n,e,t){const i=this.cache,r=e.length,s=J8(t,r);kn(i,s)||(n.uniform1iv(this.addr,s),On(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||Kk,s[a])}function GLe(n,e,t){const i=this.cache,r=e.length,s=J8(t,r);kn(i,s)||(n.uniform1iv(this.addr,s),On(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||Yk,s[a])}class jLe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function bLe(n){switch(n){case 5126:return sLe;case 35664:return aLe;case 35665:return oLe;case 35666:return cLe;case 35674:return lLe;case 35675:return uLe;case 35676:return fLe;case 5124:case 35670:return hLe;case 35667:case 35671:return dLe;case 35668:case 35672:return pLe;case 35669:case 35673:return mLe;case 5125:return gLe;case 36294:return vLe;case 36295:return MLe;case 36296:return yLe;case 35678:case 36198:case 36298:case 36306:case 35682:return _Le;case 35679:case 36299:case 36307:return CLe;case 35680:case 36300:case 36308:case 36293:return wLe;case 36289:case 36303:case 36311:case 36292:return xLe}}(t.type)}}class $Le{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function WLe(n){switch(n){case 5126:return SLe;case 35664:return ALe;case 35665:return ELe;case 35666:return TLe;case 35674:return LLe;case 35675:return HLe;case 35676:return zLe;case 5124:case 35670:return VLe;case 35667:case 35671:return DLe;case 35668:case 35672:return NLe;case 35669:case 35673:return ILe;case 5125:return RLe;case 36294:return PLe;case 36295:return kLe;case 36296:return OLe;case 35678:case 36198:case 36298:case 36306:case 35682:return FLe;case 35679:case 36299:case 36307:return ULe;case 35680:case 36300:case 36308:case 36293:return BLe;case 36289:case 36303:case 36311:case 36292:return GLe}}(t.type)}}class qLe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const Sg=/(\w+)(\])?(\[|\.)?/g;function iO(n,e){n.seq.push(e),n.map[e.id]=e}function XLe(n,e,t){const i=n.name,r=i.length;for(Sg.lastIndex=0;;){const s=Sg.exec(i);let o=s[1];const l=s[3];if("]"===s[2]&&(o|=0),void 0===l||"["===l&&Sg.lastIndex+2===r){iO(t,void 0===l?new jLe(o,n,e):new $Le(o,n,e));break}{let f=t.map[o];void 0===f&&(f=new qLe(o),iO(t,f)),t=f}}}class Q8{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);XLe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],c=i[o.id];!1!==c.needsUpdate&&o.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function rO(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let YLe=0;function sO(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function ZLe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join("\n")}(n.getShaderSource(e),a)}return r}function JLe(n,e){const t=function KLe(n){const e=Tt.getPrimaries(Tt.workingColorSpace),t=Tt.getPrimaries(n);let i;switch(e===t?i="":e===S8&&t===b8?i="LinearDisplayP3ToLinearSRGB":e===b8&&t===S8&&(i="LinearSRGBToLinearDisplayP3"),n){case Bn:case w8:return[i,"LinearTransferOETF"];case jt:case Zm:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function QLe(n,e){let t;switch(e){case HP:t="Linear";break;case zP:t="Reinhard";break;case VP:t="OptimizedCineon";break;case Om:t="ACESFilmic";break;case DP:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function x0(n){return""!==n}function aO(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function oO(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const iHe=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ag(n){return n.replace(iHe,sHe)}const rHe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function sHe(n,e){let t=ft[e];if(void 0===t){const i=rHe.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=ft[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return Ag(t)}const aHe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cO(n){return n.replace(aHe,oHe)}function oHe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function lO(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function dHe(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const c=function cHe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===CP?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===wP?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===t2&&(e="SHADOWMAP_TYPE_VSM"),e}(t),l=function lHe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case J2:case qs:e="ENVMAP_TYPE_CUBE";break;case u0:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function uHe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===qs&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function fHe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case g8:e="ENVMAP_BLENDING_MULTIPLY";break;case zSe:e="ENVMAP_BLENDING_MIX";break;case VSe:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function hHe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),d=t.isWebGL2?"":function eHe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(x0).join("\n")}(t),p=function tHe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),m=r.createProgram();let v,g,M=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(x0).join("\n"),v.length>0&&(v+="\n"),g=[d,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(x0).join("\n"),g.length>0&&(g+="\n")):(v=[lO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(x0).join("\n"),g=[d,lO(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+l:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==r2?"#define TONE_MAPPING":"",t.toneMapping!==r2?ft.tonemapping_pars_fragment:"",t.toneMapping!==r2?QLe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ft.colorspace_pars_fragment,JLe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(x0).join("\n")),a=Ag(a),a=aO(a,t),a=oO(a,t),o=Ag(o),o=aO(o,t),o=oO(o,t),a=cO(a),o=cO(o),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(M="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["#define varying in",t.glslVersion===pk?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===pk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const _=M+g+o,C=rO(r,r.VERTEX_SHADER,M+v+a),b=rO(r,r.FRAGMENT_SHADER,_);if(r.attachShader(m,C),r.attachShader(m,b),void 0!==t.index0AttributeName?r.bindAttribLocation(m,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const w=r.getProgramInfoLog(m).trim(),A=r.getShaderInfoLog(C).trim(),I=r.getShaderInfoLog(b).trim();let k=!0,U=!0;if(!1===r.getProgramParameter(m,r.LINK_STATUS))if(k=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,m,C,b);else{const z=sO(r,C,"vertex"),P=sO(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+w+"\n"+z+"\n"+P)}else""!==w?console.warn("THREE.WebGLProgram: Program Info Log:",w):(""===A||""===I)&&(U=!1);U&&(this.diagnostics={runnable:k,programLog:w,vertexShader:{log:A,prefix:v},fragmentShader:{log:I,prefix:g}})}let x,S;return r.deleteShader(C),r.deleteShader(b),this.getUniforms=function(){return void 0===x&&(x=new Q8(r,m)),x},this.getAttributes=function(){return void 0===S&&(S=function nHe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}(r,m)),S},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=YLe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=C,this.fragmentShader=b,this}let pHe=0;class mHe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(s)&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new gHe(e),t.set(e,i)),i}}class gHe{constructor(e){this.id=pHe++,this.code=e,this.usedTimes=0}}function vHe(n,e,t,i,r,s,a){const o=new fg,c=new mHe,l=[],u=r.isWebGL2,f=r.logarithmicDepthBuffer,h=r.vertexTextures;let d=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(w){return 0===w?"uv":`uv${w}`}return{getParameters:function v(w,A,I,k,U){const z=k.fog,P=U.geometry,G=(w.isMeshStandardMaterial?t:e).get(w.envMap||(w.isMeshStandardMaterial?k.environment:null)),ee=G&&G.mapping===u0?G.image.height:null,j=p[w.type];null!==w.precision&&(d=r.getMaxPrecision(w.precision),d!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",d,"instead."));const J=P.morphAttributes.position||P.morphAttributes.normal||P.morphAttributes.color,R=void 0!==J?J.length:0;let ae,se,ce,xe,$=0;if(void 0!==P.morphAttributes.position&&($=1),void 0!==P.morphAttributes.normal&&($=2),void 0!==P.morphAttributes.color&&($=3),j){const Qt=Tr[j];ae=Qt.vertexShader,se=Qt.fragmentShader}else ae=w.vertexShader,se=w.fragmentShader,c.update(w),ce=c.getVertexShaderID(w),xe=c.getFragmentShaderID(w);const ze=n.getRenderTarget(),Te=!0===U.isInstancedMesh,pt=!!w.map,Pe=!!G,D=!!w.aoMap,ge=!!w.lightMap,Q=!!w.bumpMap,fe=!!w.normalMap,ne=!!w.displacementMap,Fe=!!w.emissiveMap,Se=!!w.metalnessMap,Le=!!w.roughnessMap,qe=w.anisotropy>0,vt=w.clearcoat>0,tn=w.iridescence>0,H=w.sheen>0,E=w.transmission>0,W=qe&&!!w.anisotropyMap,le=vt&&!!w.clearcoatMap,re=vt&&!!w.clearcoatNormalMap,he=vt&&!!w.clearcoatRoughnessMap,Re=tn&&!!w.iridescenceMap,de=tn&&!!w.iridescenceThicknessMap,we=H&&!!w.sheenColorMap,N=H&&!!w.sheenRoughnessMap,pe=!!w.specularMap,te=!!w.specularColorMap,Ze=!!w.specularIntensityMap,Ue=E&&!!w.transmissionMap,Be=E&&!!w.thicknessMap,V=!!w.alphaMap,Ce=!!w.extensions,Me=!!P.attributes.uv1,ie=!!P.attributes.uv2,Ne=!!P.attributes.uv3;let Je=r2;return w.toneMapped&&(null===ze||!0===ze.isXRRenderTarget)&&(Je=n.toneMapping),{isWebGL2:u,shaderID:j,shaderType:w.type,shaderName:w.name,vertexShader:ae,fragmentShader:se,defines:w.defines,customVertexShaderID:ce,customFragmentShaderID:xe,isRawShaderMaterial:!0===w.isRawShaderMaterial,glslVersion:w.glslVersion,precision:d,instancing:Te,instancingColor:Te&&null!==U.instanceColor,supportsVertexTextures:h,outputColorSpace:null===ze?n.outputColorSpace:!0===ze.isXRRenderTarget?ze.texture.colorSpace:Bn,map:pt,matcap:!!w.matcap,envMap:Pe,envMapMode:Pe&&G.mapping,envMapCubeUVHeight:ee,aoMap:D,lightMap:ge,bumpMap:Q,normalMap:fe,displacementMap:h&&ne,emissiveMap:Fe,normalMapObjectSpace:fe&&1===w.normalMapType,normalMapTangentSpace:fe&&0===w.normalMapType,metalnessMap:Se,roughnessMap:Le,anisotropy:qe,anisotropyMap:W,clearcoat:vt,clearcoatMap:le,clearcoatNormalMap:re,clearcoatRoughnessMap:he,iridescence:tn,iridescenceMap:Re,iridescenceThicknessMap:de,sheen:H,sheenColorMap:we,sheenRoughnessMap:N,specularMap:pe,specularColorMap:te,specularIntensityMap:Ze,transmission:E,transmissionMap:Ue,thicknessMap:Be,gradientMap:!!w.gradientMap,opaque:!1===w.transparent&&1===w.blending,alphaMap:V,alphaTest:w.alphaTest>0,alphaHash:!!w.alphaHash,combine:w.combine,mapUv:pt&&m(w.map.channel),aoMapUv:D&&m(w.aoMap.channel),lightMapUv:ge&&m(w.lightMap.channel),bumpMapUv:Q&&m(w.bumpMap.channel),normalMapUv:fe&&m(w.normalMap.channel),displacementMapUv:ne&&m(w.displacementMap.channel),emissiveMapUv:Fe&&m(w.emissiveMap.channel),metalnessMapUv:Se&&m(w.metalnessMap.channel),roughnessMapUv:Le&&m(w.roughnessMap.channel),anisotropyMapUv:W&&m(w.anisotropyMap.channel),clearcoatMapUv:le&&m(w.clearcoatMap.channel),clearcoatNormalMapUv:re&&m(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:he&&m(w.clearcoatRoughnessMap.channel),iridescenceMapUv:Re&&m(w.iridescenceMap.channel),iridescenceThicknessMapUv:de&&m(w.iridescenceThicknessMap.channel),sheenColorMapUv:we&&m(w.sheenColorMap.channel),sheenRoughnessMapUv:N&&m(w.sheenRoughnessMap.channel),specularMapUv:pe&&m(w.specularMap.channel),specularColorMapUv:te&&m(w.specularColorMap.channel),specularIntensityMapUv:Ze&&m(w.specularIntensityMap.channel),transmissionMapUv:Ue&&m(w.transmissionMap.channel),thicknessMapUv:Be&&m(w.thicknessMap.channel),alphaMapUv:V&&m(w.alphaMap.channel),vertexTangents:!!P.attributes.tangent&&(fe||qe),vertexColors:w.vertexColors,vertexAlphas:!0===w.vertexColors&&!!P.attributes.color&&4===P.attributes.color.itemSize,vertexUv1s:Me,vertexUv2s:ie,vertexUv3s:Ne,pointsUvs:!0===U.isPoints&&!!P.attributes.uv&&(pt||V),fog:!!z,useFog:!0===w.fog,fogExp2:z&&z.isFogExp2,flatShading:!0===w.flatShading,sizeAttenuation:!0===w.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===U.isSkinnedMesh,morphTargets:void 0!==P.morphAttributes.position,morphNormals:void 0!==P.morphAttributes.normal,morphColors:void 0!==P.morphAttributes.color,morphTargetsCount:R,morphTextureStride:$,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:Je,useLegacyLights:n._useLegacyLights,decodeVideoTexture:pt&&!0===w.map.isVideoTexture&&Tt.getTransfer(w.map.colorSpace)===Kt,premultipliedAlpha:w.premultipliedAlpha,doubleSided:2===w.side,flipSided:1===w.side,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionDerivatives:Ce&&!0===w.extensions.derivatives,extensionFragDepth:Ce&&!0===w.extensions.fragDepth,extensionDrawBuffers:Ce&&!0===w.extensions.drawBuffers,extensionShaderTextureLOD:Ce&&!0===w.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}},getProgramCacheKey:function g(w){const A=[];if(w.shaderID?A.push(w.shaderID):(A.push(w.customVertexShaderID),A.push(w.customFragmentShaderID)),void 0!==w.defines)for(const I in w.defines)A.push(I),A.push(w.defines[I]);return!1===w.isRawShaderMaterial&&(function M(w,A){w.push(A.precision),w.push(A.outputColorSpace),w.push(A.envMapMode),w.push(A.envMapCubeUVHeight),w.push(A.mapUv),w.push(A.alphaMapUv),w.push(A.lightMapUv),w.push(A.aoMapUv),w.push(A.bumpMapUv),w.push(A.normalMapUv),w.push(A.displacementMapUv),w.push(A.emissiveMapUv),w.push(A.metalnessMapUv),w.push(A.roughnessMapUv),w.push(A.anisotropyMapUv),w.push(A.clearcoatMapUv),w.push(A.clearcoatNormalMapUv),w.push(A.clearcoatRoughnessMapUv),w.push(A.iridescenceMapUv),w.push(A.iridescenceThicknessMapUv),w.push(A.sheenColorMapUv),w.push(A.sheenRoughnessMapUv),w.push(A.specularMapUv),w.push(A.specularColorMapUv),w.push(A.specularIntensityMapUv),w.push(A.transmissionMapUv),w.push(A.thicknessMapUv),w.push(A.combine),w.push(A.fogExp2),w.push(A.sizeAttenuation),w.push(A.morphTargetsCount),w.push(A.morphAttributeCount),w.push(A.numDirLights),w.push(A.numPointLights),w.push(A.numSpotLights),w.push(A.numSpotLightMaps),w.push(A.numHemiLights),w.push(A.numRectAreaLights),w.push(A.numDirLightShadows),w.push(A.numPointLightShadows),w.push(A.numSpotLightShadows),w.push(A.numSpotLightShadowsWithMaps),w.push(A.numLightProbes),w.push(A.shadowMapType),w.push(A.toneMapping),w.push(A.numClippingPlanes),w.push(A.numClipIntersection),w.push(A.depthPacking)}(A,w),function y(w,A){o.disableAll(),A.isWebGL2&&o.enable(0),A.supportsVertexTextures&&o.enable(1),A.instancing&&o.enable(2),A.instancingColor&&o.enable(3),A.matcap&&o.enable(4),A.envMap&&o.enable(5),A.normalMapObjectSpace&&o.enable(6),A.normalMapTangentSpace&&o.enable(7),A.clearcoat&&o.enable(8),A.iridescence&&o.enable(9),A.alphaTest&&o.enable(10),A.vertexColors&&o.enable(11),A.vertexAlphas&&o.enable(12),A.vertexUv1s&&o.enable(13),A.vertexUv2s&&o.enable(14),A.vertexUv3s&&o.enable(15),A.vertexTangents&&o.enable(16),A.anisotropy&&o.enable(17),w.push(o.mask),o.disableAll(),A.fog&&o.enable(0),A.useFog&&o.enable(1),A.flatShading&&o.enable(2),A.logarithmicDepthBuffer&&o.enable(3),A.skinning&&o.enable(4),A.morphTargets&&o.enable(5),A.morphNormals&&o.enable(6),A.morphColors&&o.enable(7),A.premultipliedAlpha&&o.enable(8),A.shadowMapEnabled&&o.enable(9),A.useLegacyLights&&o.enable(10),A.doubleSided&&o.enable(11),A.flipSided&&o.enable(12),A.useDepthPacking&&o.enable(13),A.dithering&&o.enable(14),A.transmission&&o.enable(15),A.sheen&&o.enable(16),A.opaque&&o.enable(17),A.pointsUvs&&o.enable(18),A.decodeVideoTexture&&o.enable(19),w.push(o.mask)}(A,w),A.push(n.outputColorSpace)),A.push(w.customProgramCacheKey),A.join()},getUniforms:function _(w){const A=p[w.type];let I;return I=A?PAe.clone(Tr[A].uniforms):w.uniforms,I},acquireProgram:function C(w,A){let I;for(let k=0,U=l.length;k<U;k++){const z=l[k];if(z.cacheKey===A){I=z,++I.usedTimes;break}}return void 0===I&&(I=new dHe(n,A,w,s),l.push(I)),I},releaseProgram:function b(w){if(0==--w.usedTimes){const A=l.indexOf(w);l[A]=l[l.length-1],l.pop(),w.destroy()}},releaseShaderCache:function x(w){c.remove(w)},programs:l,dispose:function S(){c.dispose()}}}function MHe(){let n=new WeakMap;return{get:function e(s){let a=n.get(s);return void 0===a&&(a={},n.set(s,a)),a},remove:function t(s){n.delete(s)},update:function i(s,a,o){n.get(s)[a]=o},dispose:function r(){n=new WeakMap}}}function yHe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function uO(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function fO(){const n=[];let e=0;const t=[],i=[],r=[];function a(f,h,d,p,m,v){let g=n[e];return void 0===g?(g={id:f.id,object:f,geometry:h,material:d,groupOrder:p,renderOrder:f.renderOrder,z:m,group:v},n[e]=g):(g.id=f.id,g.object=f,g.geometry=h,g.material=d,g.groupOrder=p,g.renderOrder=f.renderOrder,g.z=m,g.group=v),e++,g}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function o(f,h,d,p,m,v){const g=a(f,h,d,p,m,v);d.transmission>0?i.push(g):!0===d.transparent?r.push(g):t.push(g)},unshift:function c(f,h,d,p,m,v){const g=a(f,h,d,p,m,v);d.transmission>0?i.unshift(g):!0===d.transparent?r.unshift(g):t.unshift(g)},finish:function u(){for(let f=e,h=n.length;f<h;f++){const d=n[f];if(null===d.id)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}},sort:function l(f,h){t.length>1&&t.sort(f||yHe),i.length>1&&i.sort(h||uO),r.length>1&&r.sort(h||uO)}}}function _He(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let a;return void 0===s?(a=new fO,n.set(i,[a])):r>=s.length?(a=new fO,s.push(a)):a=s[r],a},dispose:function t(){n=new WeakMap}}}function CHe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new T,color:new K};break;case"SpotLight":t={position:new T,direction:new T,color:new K,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new T,color:new K,distance:0,decay:0};break;case"HemisphereLight":t={direction:new T,skyColor:new K,groundColor:new K};break;case"RectAreaLight":t={color:new K,position:new T,halfWidth:new T,halfHeight:new T}}return n[e.id]=t,t}}}let xHe=0;function bHe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function SHe(n,e){const t=new CHe,i=function wHe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Z};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Z,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new T);const s=new T,a=new $e,o=new $e;return{setup:function c(u,f){let h=0,d=0,p=0;for(let k=0;k<9;k++)r.probe[k].set(0,0,0);let m=0,v=0,g=0,M=0,y=0,_=0,C=0,b=0,x=0,S=0,w=0;u.sort(bHe);const A=!0===f?Math.PI:1;for(let k=0,U=u.length;k<U;k++){const z=u[k],P=z.color,O=z.intensity,G=z.distance,ee=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)h+=P.r*O*A,d+=P.g*O*A,p+=P.b*O*A;else if(z.isLightProbe){for(let j=0;j<9;j++)r.probe[j].addScaledVector(z.sh.coefficients[j],O);w++}else if(z.isDirectionalLight){const j=t.get(z);if(j.color.copy(z.color).multiplyScalar(z.intensity*A),z.castShadow){const J=z.shadow,R=i.get(z);R.shadowBias=J.bias,R.shadowNormalBias=J.normalBias,R.shadowRadius=J.radius,R.shadowMapSize=J.mapSize,r.directionalShadow[m]=R,r.directionalShadowMap[m]=ee,r.directionalShadowMatrix[m]=z.shadow.matrix,_++}r.directional[m]=j,m++}else if(z.isSpotLight){const j=t.get(z);j.position.setFromMatrixPosition(z.matrixWorld),j.color.copy(P).multiplyScalar(O*A),j.distance=G,j.coneCos=Math.cos(z.angle),j.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),j.decay=z.decay,r.spot[g]=j;const J=z.shadow;if(z.map&&(r.spotLightMap[x]=z.map,x++,J.updateMatrices(z),z.castShadow&&S++),r.spotLightMatrix[g]=J.matrix,z.castShadow){const R=i.get(z);R.shadowBias=J.bias,R.shadowNormalBias=J.normalBias,R.shadowRadius=J.radius,R.shadowMapSize=J.mapSize,r.spotShadow[g]=R,r.spotShadowMap[g]=ee,b++}g++}else if(z.isRectAreaLight){const j=t.get(z);j.color.copy(P).multiplyScalar(O),j.halfWidth.set(.5*z.width,0,0),j.halfHeight.set(0,.5*z.height,0),r.rectArea[M]=j,M++}else if(z.isPointLight){const j=t.get(z);if(j.color.copy(z.color).multiplyScalar(z.intensity*A),j.distance=z.distance,j.decay=z.decay,z.castShadow){const J=z.shadow,R=i.get(z);R.shadowBias=J.bias,R.shadowNormalBias=J.normalBias,R.shadowRadius=J.radius,R.shadowMapSize=J.mapSize,R.shadowCameraNear=J.camera.near,R.shadowCameraFar=J.camera.far,r.pointShadow[v]=R,r.pointShadowMap[v]=ee,r.pointShadowMatrix[v]=z.shadow.matrix,C++}r.point[v]=j,v++}else if(z.isHemisphereLight){const j=t.get(z);j.skyColor.copy(z.color).multiplyScalar(O*A),j.groundColor.copy(z.groundColor).multiplyScalar(O*A),r.hemi[y]=j,y++}}M>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=ye.LTC_FLOAT_1,r.rectAreaLTC2=ye.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=ye.LTC_HALF_1,r.rectAreaLTC2=ye.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=p;const I=r.hash;(I.directionalLength!==m||I.pointLength!==v||I.spotLength!==g||I.rectAreaLength!==M||I.hemiLength!==y||I.numDirectionalShadows!==_||I.numPointShadows!==C||I.numSpotShadows!==b||I.numSpotMaps!==x||I.numLightProbes!==w)&&(r.directional.length=m,r.spot.length=g,r.rectArea.length=M,r.point.length=v,r.hemi.length=y,r.directionalShadow.length=_,r.directionalShadowMap.length=_,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=_,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=b+x-S,r.spotLightMap.length=x,r.numSpotLightShadowsWithMaps=S,r.numLightProbes=w,I.directionalLength=m,I.pointLength=v,I.spotLength=g,I.rectAreaLength=M,I.hemiLength=y,I.numDirectionalShadows=_,I.numPointShadows=C,I.numSpotShadows=b,I.numSpotMaps=x,I.numLightProbes=w,r.version=xHe++)},setupView:function l(u,f){let h=0,d=0,p=0,m=0,v=0;const g=f.matrixWorldInverse;for(let M=0,y=u.length;M<y;M++){const _=u[M];if(_.isDirectionalLight){const C=r.directional[h];C.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),h++}else if(_.isSpotLight){const C=r.spot[p];C.position.setFromMatrixPosition(_.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(_.matrixWorld),s.setFromMatrixPosition(_.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),p++}else if(_.isRectAreaLight){const C=r.rectArea[m];C.position.setFromMatrixPosition(_.matrixWorld),C.position.applyMatrix4(g),o.identity(),a.copy(_.matrixWorld),a.premultiply(g),o.extractRotation(a),C.halfWidth.set(.5*_.width,0,0),C.halfHeight.set(0,.5*_.height,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),m++}else if(_.isPointLight){const C=r.point[d];C.position.setFromMatrixPosition(_.matrixWorld),C.position.applyMatrix4(g),d++}else if(_.isHemisphereLight){const C=r.hemi[v];C.direction.setFromMatrixPosition(_.matrixWorld),C.direction.transformDirection(g),v++}}},state:r}}function hO(n,e){const t=new SHe(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function c(f){t.setup(i,f)},setupLightsView:function l(f){t.setupView(i,f)},pushLight:function a(f){i.push(f)},pushShadow:function o(f){r.push(f)}}}function AHe(n,e){let t=new WeakMap;return{get:function i(s,a=0){const o=t.get(s);let c;return void 0===o?(c=new hO(n,e),t.set(s,[c])):a>=o.length?(c=new hO(n,e),o.push(c)):c=o[a],c},dispose:function r(){t=new WeakMap}}}class dO extends Ui{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class pO extends Ui{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function LHe(n,e,t){let i=new Cg;const r=new Z,s=new Z,a=new It,o=new dO({depthPacking:3201}),c=new pO,l={},u=t.maxTextureSize,f={0:1,1:0,2:2},h=new Er({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Z},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new lt;p.setAttribute("position",new Jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new zt(p,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=CP;let g=this.type;function M(C,b){const x=e.update(m);h.defines.VSM_SAMPLES!==C.blurSamples&&(h.defines.VSM_SAMPLES=C.blurSamples,d.defines.VSM_SAMPLES=C.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),null===C.mapPass&&(C.mapPass=new ta(r.x,r.y)),h.uniforms.shadow_pass.value=C.map.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(b,null,x,h,m,null),d.uniforms.shadow_pass.value=C.mapPass.texture,d.uniforms.resolution.value=C.mapSize,d.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(b,null,x,d,m,null)}function y(C,b,x,S){let w=null;const A=!0===x.isPointLight?C.customDistanceMaterial:C.customDepthMaterial;if(void 0!==A)w=A;else if(w=!0===x.isPointLight?c:o,n.localClippingEnabled&&!0===b.clipShadows&&Array.isArray(b.clippingPlanes)&&0!==b.clippingPlanes.length||b.displacementMap&&0!==b.displacementScale||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const I=w.uuid,k=b.uuid;let U=l[I];void 0===U&&(U={},l[I]=U);let z=U[k];void 0===z&&(z=w.clone(),U[k]=z),w=z}return w.visible=b.visible,w.wireframe=b.wireframe,w.side=S===t2?null!==b.shadowSide?b.shadowSide:b.side:null!==b.shadowSide?b.shadowSide:f[b.side],w.alphaMap=b.alphaMap,w.alphaTest=b.alphaTest,w.map=b.map,w.clipShadows=b.clipShadows,w.clippingPlanes=b.clippingPlanes,w.clipIntersection=b.clipIntersection,w.displacementMap=b.displacementMap,w.displacementScale=b.displacementScale,w.displacementBias=b.displacementBias,w.wireframeLinewidth=b.wireframeLinewidth,w.linewidth=b.linewidth,!0===x.isPointLight&&!0===w.isMeshDistanceMaterial&&(n.properties.get(w).light=x),w}function _(C,b,x,S,w){if(!1===C.visible)return;if(C.layers.test(b.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&w===t2)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(x.matrixWorldInverse,C.matrixWorld);const k=e.update(C),U=C.material;if(Array.isArray(U)){const z=k.groups;for(let P=0,O=z.length;P<O;P++){const G=z[P],ee=U[G.materialIndex];if(ee&&ee.visible){const j=y(C,ee,S,w);n.renderBufferDirect(x,null,k,j,C,G)}}}else if(U.visible){const z=y(C,U,S,w);n.renderBufferDirect(x,null,k,z,C,null)}}const I=C.children;for(let k=0,U=I.length;k<U;k++)_(I[k],b,x,S,w)}this.render=function(C,b,x){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===C.length)return;const S=n.getRenderTarget(),w=n.getActiveCubeFace(),A=n.getActiveMipmapLevel(),I=n.state;I.setBlending(0),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);const k=g!==t2&&this.type===t2,U=g===t2&&this.type!==t2;for(let z=0,P=C.length;z<P;z++){const O=C[z],G=O.shadow;if(void 0===G){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}if(!1===G.autoUpdate&&!1===G.needsUpdate)continue;r.copy(G.mapSize);const ee=G.getFrameExtents();if(r.multiply(ee),s.copy(G.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/ee.x),r.x=s.x*ee.x,G.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/ee.y),r.y=s.y*ee.y,G.mapSize.y=s.y)),null===G.map||!0===k||!0===U){const J=this.type!==t2?{minFilter:yn,magFilter:yn}:{};null!==G.map&&G.map.dispose(),G.map=new ta(r.x,r.y,J),G.map.texture.name=O.name+".shadowMap",G.camera.updateProjectionMatrix()}n.setRenderTarget(G.map),n.clear();const j=G.getViewportCount();for(let J=0;J<j;J++){const R=G.getViewport(J);a.set(s.x*R.x,s.y*R.y,s.x*R.z,s.y*R.w),I.viewport(a),G.updateMatrices(O,J),i=G.getFrustum(),_(b,x,G.camera,O,this.type)}!0!==G.isPointLightShadow&&this.type===t2&&M(G,x),G.needsUpdate=!1}g=this.type,v.needsUpdate=!1,n.setRenderTarget(S,w,A)}}function HHe(n,e,t){const i=t.isWebGL2,o=new function r(){let V=!1;const ve=new It;let me=null;const Ce=new It(0,0,0,0);return{setMask:function(Me){me!==Me&&!V&&(n.colorMask(Me,Me,Me,Me),me=Me)},setLocked:function(Me){V=Me},setClear:function(Me,ie,Ne,Je,Tn){!0===Tn&&(Me*=Je,ie*=Je,Ne*=Je),ve.set(Me,ie,Ne,Je),!1===Ce.equals(ve)&&(n.clearColor(Me,ie,Ne,Je),Ce.copy(ve))},reset:function(){V=!1,me=null,Ce.set(-1,0,0,0)}}},c=new function s(){let V=!1,ve=null,me=null,Ce=null;return{setTest:function(Me){Me?ze(n.DEPTH_TEST):Te(n.DEPTH_TEST)},setMask:function(Me){ve!==Me&&!V&&(n.depthMask(Me),ve=Me)},setFunc:function(Me){if(me!==Me){switch(Me){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}me=Me}},setLocked:function(Me){V=Me},setClear:function(Me){Ce!==Me&&(n.clearDepth(Me),Ce=Me)},reset:function(){V=!1,ve=null,me=null,Ce=null}}},l=new function a(){let V=!1,ve=null,me=null,Ce=null,Me=null,ie=null,Ne=null,Je=null,Tn=null;return{setTest:function(Qt){V||(Qt?ze(n.STENCIL_TEST):Te(n.STENCIL_TEST))},setMask:function(Qt){ve!==Qt&&!V&&(n.stencilMask(Qt),ve=Qt)},setFunc:function(Qt,Dr,Si){(me!==Qt||Ce!==Dr||Me!==Si)&&(n.stencilFunc(Qt,Dr,Si),me=Qt,Ce=Dr,Me=Si)},setOp:function(Qt,Dr,Si){(ie!==Qt||Ne!==Dr||Je!==Si)&&(n.stencilOp(Qt,Dr,Si),ie=Qt,Ne=Dr,Je=Si)},setLocked:function(Qt){V=Qt},setClear:function(Qt){Tn!==Qt&&(n.clearStencil(Qt),Tn=Qt)},reset:function(){V=!1,ve=null,me=null,Ce=null,Me=null,ie=null,Ne=null,Je=null,Tn=null}}},u=new WeakMap,f=new WeakMap;let h={},d={},p=new WeakMap,m=[],v=null,g=!1,M=null,y=null,_=null,C=null,b=null,x=null,S=null,w=!1,A=null,I=null,k=null,U=null,z=null;const P=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let O=!1,G=0;const ee=n.getParameter(n.VERSION);-1!==ee.indexOf("WebGL")?(G=parseFloat(/^WebGL (\d)/.exec(ee)[1]),O=G>=1):-1!==ee.indexOf("OpenGL ES")&&(G=parseFloat(/^OpenGL ES (\d)/.exec(ee)[1]),O=G>=2);let j=null,J={};const R=n.getParameter(n.SCISSOR_BOX),$=n.getParameter(n.VIEWPORT),ae=(new It).fromArray(R),se=(new It).fromArray($);function ce(V,ve,me,Ce){const Me=new Uint8Array(4),ie=n.createTexture();n.bindTexture(V,ie),n.texParameteri(V,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(V,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ne=0;Ne<me;Ne++)!i||V!==n.TEXTURE_3D&&V!==n.TEXTURE_2D_ARRAY?n.texImage2D(ve+Ne,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Me):n.texImage3D(ve,0,n.RGBA,1,1,Ce,0,n.RGBA,n.UNSIGNED_BYTE,Me);return ie}const xe={};function ze(V){!0!==h[V]&&(n.enable(V),h[V]=!0)}function Te(V){!1!==h[V]&&(n.disable(V),h[V]=!1)}xe[n.TEXTURE_2D]=ce(n.TEXTURE_2D,n.TEXTURE_2D,1),xe[n.TEXTURE_CUBE_MAP]=ce(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(xe[n.TEXTURE_2D_ARRAY]=ce(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),xe[n.TEXTURE_3D]=ce(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),c.setClear(1),l.setClear(0),ze(n.DEPTH_TEST),c.setFunc(3),ne(!1),Fe(1),ze(n.CULL_FACE),Q(0);const D={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};if(i)D[103]=n.MIN,D[104]=n.MAX;else{const V=e.get("EXT_blend_minmax");null!==V&&(D[103]=V.MIN_EXT,D[104]=V.MAX_EXT)}const ge={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA};function Q(V,ve,me,Ce,Me,ie,Ne,Je){if(0!==V){if(!1===g&&(ze(n.BLEND),g=!0),5===V)Me=Me||ve,ie=ie||me,Ne=Ne||Ce,(ve!==y||Me!==b)&&(n.blendEquationSeparate(D[ve],D[Me]),y=ve,b=Me),(me!==_||Ce!==C||ie!==x||Ne!==S)&&(n.blendFuncSeparate(ge[me],ge[Ce],ge[ie],ge[Ne]),_=me,C=Ce,x=ie,S=Ne),M=V,w=!1;else if(V!==M||Je!==w){if((100!==y||100!==b)&&(n.blendEquation(n.FUNC_ADD),y=100,b=100),Je)switch(V){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",V)}else switch(V){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",V)}_=null,C=null,x=null,S=null,M=V,w=Je}}else!0===g&&(Te(n.BLEND),g=!1)}function ne(V){A!==V&&(n.frontFace(V?n.CW:n.CCW),A=V)}function Fe(V){0!==V?(ze(n.CULL_FACE),V!==I&&n.cullFace(1===V?n.BACK:2===V?n.FRONT:n.FRONT_AND_BACK)):Te(n.CULL_FACE),I=V}function Le(V,ve,me){V?(ze(n.POLYGON_OFFSET_FILL),(U!==ve||z!==me)&&(n.polygonOffset(ve,me),U=ve,z=me)):Te(n.POLYGON_OFFSET_FILL)}return{buffers:{color:o,depth:c,stencil:l},enable:ze,disable:Te,bindFramebuffer:function pt(V,ve){return d[V]!==ve&&(n.bindFramebuffer(V,ve),d[V]=ve,i&&(V===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=ve),V===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=ve)),!0)},drawBuffers:function at(V,ve){let me=m,Ce=!1;if(V)if(me=p.get(ve),void 0===me&&(me=[],p.set(ve,me)),V.isWebGLMultipleRenderTargets){const Me=V.texture;if(me.length!==Me.length||me[0]!==n.COLOR_ATTACHMENT0){for(let ie=0,Ne=Me.length;ie<Ne;ie++)me[ie]=n.COLOR_ATTACHMENT0+ie;me.length=Me.length,Ce=!0}}else me[0]!==n.COLOR_ATTACHMENT0&&(me[0]=n.COLOR_ATTACHMENT0,Ce=!0);else me[0]!==n.BACK&&(me[0]=n.BACK,Ce=!0);Ce&&(t.isWebGL2?n.drawBuffers(me):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(me))},useProgram:function Pe(V){return v!==V&&(n.useProgram(V),v=V,!0)},setBlending:Q,setMaterial:function fe(V,ve){2===V.side?Te(n.CULL_FACE):ze(n.CULL_FACE);let me=1===V.side;ve&&(me=!me),ne(me),1===V.blending&&!1===V.transparent?Q(0):Q(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.premultipliedAlpha),c.setFunc(V.depthFunc),c.setTest(V.depthTest),c.setMask(V.depthWrite),o.setMask(V.colorWrite);const Ce=V.stencilWrite;l.setTest(Ce),Ce&&(l.setMask(V.stencilWriteMask),l.setFunc(V.stencilFunc,V.stencilRef,V.stencilFuncMask),l.setOp(V.stencilFail,V.stencilZFail,V.stencilZPass)),Le(V.polygonOffset,V.polygonOffsetFactor,V.polygonOffsetUnits),!0===V.alphaToCoverage?ze(n.SAMPLE_ALPHA_TO_COVERAGE):Te(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ne,setCullFace:Fe,setLineWidth:function Se(V){V!==k&&(O&&n.lineWidth(V),k=V)},setPolygonOffset:Le,setScissorTest:function qe(V){V?ze(n.SCISSOR_TEST):Te(n.SCISSOR_TEST)},activeTexture:function vt(V){void 0===V&&(V=n.TEXTURE0+P-1),j!==V&&(n.activeTexture(V),j=V)},bindTexture:function tn(V,ve,me){void 0===me&&(me=null===j?n.TEXTURE0+P-1:j);let Ce=J[me];void 0===Ce&&(Ce={type:void 0,texture:void 0},J[me]=Ce),(Ce.type!==V||Ce.texture!==ve)&&(j!==me&&(n.activeTexture(me),j=me),n.bindTexture(V,ve||xe[V]),Ce.type=V,Ce.texture=ve)},unbindTexture:function H(){const V=J[j];void 0!==V&&void 0!==V.type&&(n.bindTexture(V.type,null),V.type=void 0,V.texture=void 0)},compressedTexImage2D:function E(){try{n.compressedTexImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},compressedTexImage3D:function W(){try{n.compressedTexImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texImage2D:function N(){try{n.texImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texImage3D:function pe(){try{n.texImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},updateUBOMapping:function Ue(V,ve){let me=f.get(ve);void 0===me&&(me=new WeakMap,f.set(ve,me));let Ce=me.get(V);void 0===Ce&&(Ce=n.getUniformBlockIndex(ve,V.name),me.set(V,Ce))},uniformBlockBinding:function Be(V,ve){const Ce=f.get(ve).get(V);u.get(ve)!==Ce&&(n.uniformBlockBinding(ve,Ce,V.__bindingPointIndex),u.set(ve,Ce))},texStorage2D:function de(){try{n.texStorage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texStorage3D:function we(){try{n.texStorage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texSubImage2D:function le(){try{n.texSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},texSubImage3D:function re(){try{n.texSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},compressedTexSubImage2D:function he(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},compressedTexSubImage3D:function Re(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}},scissor:function te(V){!1===ae.equals(V)&&(n.scissor(V.x,V.y,V.z,V.w),ae.copy(V))},viewport:function Ze(V){!1===se.equals(V)&&(n.viewport(V.x,V.y,V.z,V.w),se.copy(V))},reset:function ke(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),!0===i&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),h={},j=null,J={},d={},p=new WeakMap,m=[],v=null,g=!1,M=null,y=null,_=null,C=null,b=null,x=null,S=null,w=!1,A=null,I=null,k=null,U=null,z=null,ae.set(0,0,n.canvas.width,n.canvas.height),se.set(0,0,n.canvas.width,n.canvas.height),o.reset(),c.reset(),l.reset()}}}function zHe(n,e,t,i,r,s,a){const o=r.isWebGL2,c=r.maxTextures,l=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const v=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function M(H,E){return g?new OffscreenCanvas(H,E):g0("canvas")}function y(H,E,W,le){let re=1;if((H.width>le||H.height>le)&&(re=le/Math.max(H.width,H.height)),re<1||!0===E){if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap){const he=E?T8:Math.floor,Re=he(re*H.width),de=he(re*H.height);void 0===m&&(m=M(Re,de));const we=W?M(Re,de):m;return we.width=Re,we.height=de,we.getContext("2d").drawImage(H,0,0,Re,de),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+H.width+"x"+H.height+") to ("+Re+"x"+de+")."),we}return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+H.width+"x"+H.height+")."),H}return H}function _(H){return eg(H.width)&&eg(H.height)}function b(H,E){return H.generateMipmaps&&E&&H.minFilter!==yn&&H.minFilter!==en}function x(H){n.generateMipmap(H)}function S(H,E,W,le,re=!1){if(!1===o)return E;if(null!==H){if(void 0!==n[H])return n[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let he=E;if(E===n.RED&&(W===n.FLOAT&&(he=n.R32F),W===n.HALF_FLOAT&&(he=n.R16F),W===n.UNSIGNED_BYTE&&(he=n.R8)),E===n.RED_INTEGER&&(W===n.UNSIGNED_BYTE&&(he=n.R8UI),W===n.UNSIGNED_SHORT&&(he=n.R16UI),W===n.UNSIGNED_INT&&(he=n.R32UI),W===n.BYTE&&(he=n.R8I),W===n.SHORT&&(he=n.R16I),W===n.INT&&(he=n.R32I)),E===n.RG&&(W===n.FLOAT&&(he=n.RG32F),W===n.HALF_FLOAT&&(he=n.RG16F),W===n.UNSIGNED_BYTE&&(he=n.RG8)),E===n.RGBA){const Re=re?x8:Tt.getTransfer(le);W===n.FLOAT&&(he=n.RGBA32F),W===n.HALF_FLOAT&&(he=n.RGBA16F),W===n.UNSIGNED_BYTE&&(he=Re===Kt?n.SRGB8_ALPHA8:n.RGBA8),W===n.UNSIGNED_SHORT_4_4_4_4&&(he=n.RGBA4),W===n.UNSIGNED_SHORT_5_5_5_1&&(he=n.RGB5_A1)}return(he===n.R16F||he===n.R32F||he===n.RG16F||he===n.RG32F||he===n.RGBA16F||he===n.RGBA32F)&&e.get("EXT_color_buffer_float"),he}function w(H,E,W){return!0===b(H,W)||H.isFramebufferTexture&&H.minFilter!==yn&&H.minFilter!==en?Math.log2(Math.max(E.width,E.height))+1:void 0!==H.mipmaps&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?E.mipmaps.length:1}function A(H){return H===yn||1004===H||1005===H?n.NEAREST:n.LINEAR}function I(H){const E=H.target;E.removeEventListener("dispose",I),function U(H){const E=i.get(H);if(void 0===E.__webglInit)return;const W=H.source,le=v.get(W);if(le){const re=le[E.__cacheKey];re.usedTimes--,0===re.usedTimes&&z(H),0===Object.keys(le).length&&v.delete(W)}i.remove(H)}(E),E.isVideoTexture&&p.delete(E)}function k(H){const E=H.target;E.removeEventListener("dispose",k),function P(H){const E=H.texture,W=i.get(H),le=i.get(E);if(void 0!==le.__webglTexture&&(n.deleteTexture(le.__webglTexture),a.memory.textures--),H.depthTexture&&H.depthTexture.dispose(),H.isWebGLCubeRenderTarget)for(let re=0;re<6;re++){if(Array.isArray(W.__webglFramebuffer[re]))for(let he=0;he<W.__webglFramebuffer[re].length;he++)n.deleteFramebuffer(W.__webglFramebuffer[re][he]);else n.deleteFramebuffer(W.__webglFramebuffer[re]);W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer[re])}else{if(Array.isArray(W.__webglFramebuffer))for(let re=0;re<W.__webglFramebuffer.length;re++)n.deleteFramebuffer(W.__webglFramebuffer[re]);else n.deleteFramebuffer(W.__webglFramebuffer);if(W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&n.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer)for(let re=0;re<W.__webglColorRenderbuffer.length;re++)W.__webglColorRenderbuffer[re]&&n.deleteRenderbuffer(W.__webglColorRenderbuffer[re]);W.__webglDepthRenderbuffer&&n.deleteRenderbuffer(W.__webglDepthRenderbuffer)}if(H.isWebGLMultipleRenderTargets)for(let re=0,he=E.length;re<he;re++){const Re=i.get(E[re]);Re.__webglTexture&&(n.deleteTexture(Re.__webglTexture),a.memory.textures--),i.remove(E[re])}i.remove(E),i.remove(H)}(E)}function z(H){const E=i.get(H);n.deleteTexture(E.__webglTexture),delete v.get(H.source)[E.__cacheKey],a.memory.textures--}let O=0;function J(H,E){const W=i.get(H);if(H.isVideoTexture&&function vt(H){const E=a.render.frame;p.get(H)!==E&&(p.set(H,E),H.update())}(H),!1===H.isRenderTargetTexture&&H.version>0&&W.__version!==H.version){const le=H.image;if(null===le)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==le.complete)return void pt(W,H,E);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,W.__webglTexture,n.TEXTURE0+E)}const se={[Xs]:n.REPEAT,[oi]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},ce={[yn]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,1005:n.NEAREST_MIPMAP_LINEAR,[en]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[s2]:n.LINEAR_MIPMAP_LINEAR},xe={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function ze(H,E,W){if(W?(n.texParameteri(H,n.TEXTURE_WRAP_S,se[E.wrapS]),n.texParameteri(H,n.TEXTURE_WRAP_T,se[E.wrapT]),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,se[E.wrapR]),n.texParameteri(H,n.TEXTURE_MAG_FILTER,ce[E.magFilter]),n.texParameteri(H,n.TEXTURE_MIN_FILTER,ce[E.minFilter])):(n.texParameteri(H,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(H,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(H===n.TEXTURE_3D||H===n.TEXTURE_2D_ARRAY)&&n.texParameteri(H,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(E.wrapS!==oi||E.wrapT!==oi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(H,n.TEXTURE_MAG_FILTER,A(E.magFilter)),n.texParameteri(H,n.TEXTURE_MIN_FILTER,A(E.minFilter)),E.minFilter!==yn&&E.minFilter!==en&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),E.compareFunction&&(n.texParameteri(H,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(H,n.TEXTURE_COMPARE_FUNC,xe[E.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const le=e.get("EXT_texture_filter_anisotropic");if(E.magFilter===yn||1005!==E.minFilter&&E.minFilter!==s2||E.type===a2&&!1===e.has("OES_texture_float_linear")||!1===o&&E.type===d0&&!1===e.has("OES_texture_half_float_linear"))return;(E.anisotropy>1||i.get(E).__currentAnisotropy)&&(n.texParameterf(H,le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),i.get(E).__currentAnisotropy=E.anisotropy)}}function Te(H,E){let W=!1;void 0===H.__webglInit&&(H.__webglInit=!0,E.addEventListener("dispose",I));const le=E.source;let re=v.get(le);void 0===re&&(re={},v.set(le,re));const he=function j(H){const E=[];return E.push(H.wrapS),E.push(H.wrapT),E.push(H.wrapR||0),E.push(H.magFilter),E.push(H.minFilter),E.push(H.anisotropy),E.push(H.internalFormat),E.push(H.format),E.push(H.type),E.push(H.generateMipmaps),E.push(H.premultiplyAlpha),E.push(H.flipY),E.push(H.unpackAlignment),E.push(H.colorSpace),E.join()}(E);if(he!==H.__cacheKey){void 0===re[he]&&(re[he]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,W=!0),re[he].usedTimes++;const Re=re[H.__cacheKey];void 0!==Re&&(re[H.__cacheKey].usedTimes--,0===Re.usedTimes&&z(E)),H.__cacheKey=he,H.__webglTexture=re[he].texture}return W}function pt(H,E,W){let le=n.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(le=n.TEXTURE_2D_ARRAY),E.isData3DTexture&&(le=n.TEXTURE_3D);const re=Te(H,E),he=E.source;t.bindTexture(le,H.__webglTexture,n.TEXTURE0+W);const Re=i.get(he);if(he.version!==Re.__version||!0===re){t.activeTexture(n.TEXTURE0+W);const de=Tt.getPrimaries(Tt.workingColorSpace),we=""===E.colorSpace?null:Tt.getPrimaries(E.colorSpace),N=""===E.colorSpace||de===we?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,N);const pe=function C(H){return!o&&(H.wrapS!==oi||H.wrapT!==oi||H.minFilter!==yn&&H.minFilter!==en)}(E)&&!1===_(E.image);let te=y(E.image,pe,!1,u);te=tn(E,te);const Ze=_(te)||o,Ue=s.convert(E.format,E.colorSpace);let V,Be=s.convert(E.type),ke=S(E.internalFormat,Ue,Be,E.colorSpace,E.isVideoTexture);ze(le,E,Ze);const ve=E.mipmaps,me=o&&!0!==E.isVideoTexture,Ce=void 0===Re.__version||!0===re,Me=w(E,te,Ze);if(E.isDepthTexture)ke=n.DEPTH_COMPONENT,o?ke=E.type===a2?n.DEPTH_COMPONENT32F:E.type===es?n.DEPTH_COMPONENT24:E.type===Ys?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT16:E.type===a2&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),E.format===Zs&&ke===n.DEPTH_COMPONENT&&1012!==E.type&&E.type!==es&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),E.type=es,Be=s.convert(E.type)),E.format===sc&&ke===n.DEPTH_COMPONENT&&(ke=n.DEPTH_STENCIL,E.type!==Ys&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),E.type=Ys,Be=s.convert(E.type))),Ce&&(me?t.texStorage2D(n.TEXTURE_2D,1,ke,te.width,te.height):t.texImage2D(n.TEXTURE_2D,0,ke,te.width,te.height,0,Ue,Be,null));else if(E.isDataTexture)if(ve.length>0&&Ze){me&&Ce&&t.texStorage2D(n.TEXTURE_2D,Me,ke,ve[0].width,ve[0].height);for(let ie=0,Ne=ve.length;ie<Ne;ie++)V=ve[ie],me?t.texSubImage2D(n.TEXTURE_2D,ie,0,0,V.width,V.height,Ue,Be,V.data):t.texImage2D(n.TEXTURE_2D,ie,ke,V.width,V.height,0,Ue,Be,V.data);E.generateMipmaps=!1}else me?(Ce&&t.texStorage2D(n.TEXTURE_2D,Me,ke,te.width,te.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,te.width,te.height,Ue,Be,te.data)):t.texImage2D(n.TEXTURE_2D,0,ke,te.width,te.height,0,Ue,Be,te.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){me&&Ce&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Me,ke,ve[0].width,ve[0].height,te.depth);for(let ie=0,Ne=ve.length;ie<Ne;ie++)V=ve[ie],E.format!==A1?null!==Ue?me?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,0,V.width,V.height,te.depth,Ue,V.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ie,ke,V.width,V.height,te.depth,0,V.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):me?t.texSubImage3D(n.TEXTURE_2D_ARRAY,ie,0,0,0,V.width,V.height,te.depth,Ue,Be,V.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ie,ke,V.width,V.height,te.depth,0,Ue,Be,V.data)}else{me&&Ce&&t.texStorage2D(n.TEXTURE_2D,Me,ke,ve[0].width,ve[0].height);for(let ie=0,Ne=ve.length;ie<Ne;ie++)V=ve[ie],E.format!==A1?null!==Ue?me?t.compressedTexSubImage2D(n.TEXTURE_2D,ie,0,0,V.width,V.height,Ue,V.data):t.compressedTexImage2D(n.TEXTURE_2D,ie,ke,V.width,V.height,0,V.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):me?t.texSubImage2D(n.TEXTURE_2D,ie,0,0,V.width,V.height,Ue,Be,V.data):t.texImage2D(n.TEXTURE_2D,ie,ke,V.width,V.height,0,Ue,Be,V.data)}else if(E.isDataArrayTexture)me?(Ce&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Me,ke,te.width,te.height,te.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,te.width,te.height,te.depth,Ue,Be,te.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,ke,te.width,te.height,te.depth,0,Ue,Be,te.data);else if(E.isData3DTexture)me?(Ce&&t.texStorage3D(n.TEXTURE_3D,Me,ke,te.width,te.height,te.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,te.width,te.height,te.depth,Ue,Be,te.data)):t.texImage3D(n.TEXTURE_3D,0,ke,te.width,te.height,te.depth,0,Ue,Be,te.data);else if(E.isFramebufferTexture){if(Ce)if(me)t.texStorage2D(n.TEXTURE_2D,Me,ke,te.width,te.height);else{let ie=te.width,Ne=te.height;for(let Je=0;Je<Me;Je++)t.texImage2D(n.TEXTURE_2D,Je,ke,ie,Ne,0,Ue,Be,null),ie>>=1,Ne>>=1}}else if(ve.length>0&&Ze){me&&Ce&&t.texStorage2D(n.TEXTURE_2D,Me,ke,ve[0].width,ve[0].height);for(let ie=0,Ne=ve.length;ie<Ne;ie++)V=ve[ie],me?t.texSubImage2D(n.TEXTURE_2D,ie,0,0,Ue,Be,V):t.texImage2D(n.TEXTURE_2D,ie,ke,Ue,Be,V);E.generateMipmaps=!1}else me?(Ce&&t.texStorage2D(n.TEXTURE_2D,Me,ke,te.width,te.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ue,Be,te)):t.texImage2D(n.TEXTURE_2D,0,ke,Ue,Be,te);b(E,Ze)&&x(le),Re.__version=he.version,E.onUpdate&&E.onUpdate(E)}H.__version=E.version}function Pe(H,E,W,le,re,he){const Re=s.convert(W.format,W.colorSpace),de=s.convert(W.type),we=S(W.internalFormat,Re,de,W.colorSpace);if(!i.get(E).__hasExternalTextures){const pe=Math.max(1,E.width>>he),te=Math.max(1,E.height>>he);re===n.TEXTURE_3D||re===n.TEXTURE_2D_ARRAY?t.texImage3D(re,he,we,pe,te,E.depth,0,Re,de,null):t.texImage2D(re,he,we,pe,te,0,Re,de,null)}t.bindFramebuffer(n.FRAMEBUFFER,H),qe(E)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,le,re,i.get(W).__webglTexture,0,Le(E)):(re===n.TEXTURE_2D||re>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&re<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,le,re,i.get(W).__webglTexture,he),t.bindFramebuffer(n.FRAMEBUFFER,null)}function D(H,E,W){if(n.bindRenderbuffer(n.RENDERBUFFER,H),E.depthBuffer&&!E.stencilBuffer){let le=!0===o?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(W||qe(E)){const re=E.depthTexture;re&&re.isDepthTexture&&(re.type===a2?le=n.DEPTH_COMPONENT32F:re.type===es&&(le=n.DEPTH_COMPONENT24));const he=Le(E);qe(E)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,he,le,E.width,E.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,he,le,E.width,E.height)}else n.renderbufferStorage(n.RENDERBUFFER,le,E.width,E.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,H)}else if(E.depthBuffer&&E.stencilBuffer){const le=Le(E);W&&!1===qe(E)?n.renderbufferStorageMultisample(n.RENDERBUFFER,le,n.DEPTH24_STENCIL8,E.width,E.height):qe(E)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,le,n.DEPTH24_STENCIL8,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,E.width,E.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,H)}else{const le=!0===E.isWebGLMultipleRenderTargets?E.texture:[E.texture];for(let re=0;re<le.length;re++){const he=le[re],Re=s.convert(he.format,he.colorSpace),de=s.convert(he.type),we=S(he.internalFormat,Re,de,he.colorSpace),N=Le(E);W&&!1===qe(E)?n.renderbufferStorageMultisample(n.RENDERBUFFER,N,we,E.width,E.height):qe(E)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,N,we,E.width,E.height):n.renderbufferStorage(n.RENDERBUFFER,we,E.width,E.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Q(H){const E=i.get(H),W=!0===H.isWebGLCubeRenderTarget;if(H.depthTexture&&!E.__autoAllocateDepthBuffer){if(W)throw new Error("target.depthTexture not supported in Cube render targets");!function ge(H,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,H),!E.depthTexture||!E.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),J(E.depthTexture,0);const le=i.get(E.depthTexture).__webglTexture,re=Le(E);if(E.depthTexture.format===Zs)qe(E)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,le,0,re):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,le,0);else{if(E.depthTexture.format!==sc)throw new Error("Unknown depthTexture format");qe(E)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,le,0,re):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,le,0)}}(E.__webglFramebuffer,H)}else if(W){E.__webglDepthbuffer=[];for(let le=0;le<6;le++)t.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer[le]),E.__webglDepthbuffer[le]=n.createRenderbuffer(),D(E.__webglDepthbuffer[le],H,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer=n.createRenderbuffer(),D(E.__webglDepthbuffer,H,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Le(H){return Math.min(f,H.samples)}function qe(H){const E=i.get(H);return o&&H.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==E.__useRenderToTexture}function tn(H,E){const W=H.colorSpace,le=H.format,re=H.type;return!0===H.isCompressedTexture||!0===H.isVideoTexture||1035===H.format||W!==Bn&&""!==W&&(Tt.getTransfer(W)===Kt?!1===o?!0===e.has("EXT_sRGB")&&le===A1?(H.format=1035,H.minFilter=en,H.generateMipmaps=!1):E=Ck.sRGBToLinear(E):(le!==A1||re!==Q2)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",W)),E}this.allocateTextureUnit=function ee(){const H=O;return H>=c&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+c),O+=1,H},this.resetTextureUnits=function G(){O=0},this.setTexture2D=J,this.setTexture2DArray=function R(H,E){const W=i.get(H);H.version>0&&W.__version!==H.version?pt(W,H,E):t.bindTexture(n.TEXTURE_2D_ARRAY,W.__webglTexture,n.TEXTURE0+E)},this.setTexture3D=function $(H,E){const W=i.get(H);H.version>0&&W.__version!==H.version?pt(W,H,E):t.bindTexture(n.TEXTURE_3D,W.__webglTexture,n.TEXTURE0+E)},this.setTextureCube=function ae(H,E){const W=i.get(H);H.version>0&&W.__version!==H.version?function at(H,E,W){if(6!==E.image.length)return;const le=Te(H,E),re=E.source;t.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+W);const he=i.get(re);if(re.version!==he.__version||!0===le){t.activeTexture(n.TEXTURE0+W);const Re=Tt.getPrimaries(Tt.workingColorSpace),de=""===E.colorSpace?null:Tt.getPrimaries(E.colorSpace),we=""===E.colorSpace||Re===de?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,E.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,E.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,we);const N=E.isCompressedTexture||E.image[0].isCompressedTexture,pe=E.image[0]&&E.image[0].isDataTexture,te=[];for(let ie=0;ie<6;ie++)te[ie]=N||pe?pe?E.image[ie].image:E.image[ie]:y(E.image[ie],!1,!0,l),te[ie]=tn(E,te[ie]);const Ze=te[0],Ue=_(Ze)||o,Be=s.convert(E.format,E.colorSpace),ke=s.convert(E.type),V=S(E.internalFormat,Be,ke,E.colorSpace),ve=o&&!0!==E.isVideoTexture,me=void 0===he.__version||!0===le;let Me,Ce=w(E,Ze,Ue);if(ze(n.TEXTURE_CUBE_MAP,E,Ue),N){ve&&me&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ce,V,Ze.width,Ze.height);for(let ie=0;ie<6;ie++){Me=te[ie].mipmaps;for(let Ne=0;Ne<Me.length;Ne++){const Je=Me[Ne];E.format!==A1?null!==Be?ve?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ne,0,0,Je.width,Je.height,Be,Je.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ne,V,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ve?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ne,0,0,Je.width,Je.height,Be,ke,Je.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ne,V,Je.width,Je.height,0,Be,ke,Je.data)}}}else{Me=E.mipmaps,ve&&me&&(Me.length>0&&Ce++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ce,V,te[0].width,te[0].height));for(let ie=0;ie<6;ie++)if(pe){ve?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,te[ie].width,te[ie].height,Be,ke,te[ie].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,V,te[ie].width,te[ie].height,0,Be,ke,te[ie].data);for(let Ne=0;Ne<Me.length;Ne++){const Tn=Me[Ne].image[ie].image;ve?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ne+1,0,0,Tn.width,Tn.height,Be,ke,Tn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ne+1,V,Tn.width,Tn.height,0,Be,ke,Tn.data)}}else{ve?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,0,0,Be,ke,te[ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,0,V,Be,ke,te[ie]);for(let Ne=0;Ne<Me.length;Ne++){const Je=Me[Ne];ve?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ne+1,0,0,Be,ke,Je.image[ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ie,Ne+1,V,Be,ke,Je.image[ie])}}}b(E,Ue)&&x(n.TEXTURE_CUBE_MAP),he.__version=re.version,E.onUpdate&&E.onUpdate(E)}H.__version=E.version}(W,H,E):t.bindTexture(n.TEXTURE_CUBE_MAP,W.__webglTexture,n.TEXTURE0+E)},this.rebindTextures=function fe(H,E,W){const le=i.get(H);void 0!==E&&Pe(le.__webglFramebuffer,H,H.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==W&&Q(H)},this.setupRenderTarget=function ne(H){const E=H.texture,W=i.get(H),le=i.get(E);H.addEventListener("dispose",k),!0!==H.isWebGLMultipleRenderTargets&&(void 0===le.__webglTexture&&(le.__webglTexture=n.createTexture()),le.__version=E.version,a.memory.textures++);const re=!0===H.isWebGLCubeRenderTarget,he=!0===H.isWebGLMultipleRenderTargets,Re=_(H)||o;if(re){W.__webglFramebuffer=[];for(let de=0;de<6;de++)if(o&&E.mipmaps&&E.mipmaps.length>0){W.__webglFramebuffer[de]=[];for(let we=0;we<E.mipmaps.length;we++)W.__webglFramebuffer[de][we]=n.createFramebuffer()}else W.__webglFramebuffer[de]=n.createFramebuffer()}else{if(o&&E.mipmaps&&E.mipmaps.length>0){W.__webglFramebuffer=[];for(let de=0;de<E.mipmaps.length;de++)W.__webglFramebuffer[de]=n.createFramebuffer()}else W.__webglFramebuffer=n.createFramebuffer();if(he)if(r.drawBuffers){const de=H.texture;for(let we=0,N=de.length;we<N;we++){const pe=i.get(de[we]);void 0===pe.__webglTexture&&(pe.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&H.samples>0&&!1===qe(H)){const de=he?E:[E];W.__webglMultisampledFramebuffer=n.createFramebuffer(),W.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,W.__webglMultisampledFramebuffer);for(let we=0;we<de.length;we++){const N=de[we];W.__webglColorRenderbuffer[we]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,W.__webglColorRenderbuffer[we]);const pe=s.convert(N.format,N.colorSpace),te=s.convert(N.type),Ze=S(N.internalFormat,pe,te,N.colorSpace,!0===H.isXRRenderTarget),Ue=Le(H);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ue,Ze,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+we,n.RENDERBUFFER,W.__webglColorRenderbuffer[we])}n.bindRenderbuffer(n.RENDERBUFFER,null),H.depthBuffer&&(W.__webglDepthRenderbuffer=n.createRenderbuffer(),D(W.__webglDepthRenderbuffer,H,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(re){t.bindTexture(n.TEXTURE_CUBE_MAP,le.__webglTexture),ze(n.TEXTURE_CUBE_MAP,E,Re);for(let de=0;de<6;de++)if(o&&E.mipmaps&&E.mipmaps.length>0)for(let we=0;we<E.mipmaps.length;we++)Pe(W.__webglFramebuffer[de][we],H,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+de,we);else Pe(W.__webglFramebuffer[de],H,E,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+de,0);b(E,Re)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(he){const de=H.texture;for(let we=0,N=de.length;we<N;we++){const pe=de[we],te=i.get(pe);t.bindTexture(n.TEXTURE_2D,te.__webglTexture),ze(n.TEXTURE_2D,pe,Re),Pe(W.__webglFramebuffer,H,pe,n.COLOR_ATTACHMENT0+we,n.TEXTURE_2D,0),b(pe,Re)&&x(n.TEXTURE_2D)}t.unbindTexture()}else{let de=n.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(o?de=H.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(de,le.__webglTexture),ze(de,E,Re),o&&E.mipmaps&&E.mipmaps.length>0)for(let we=0;we<E.mipmaps.length;we++)Pe(W.__webglFramebuffer[we],H,E,n.COLOR_ATTACHMENT0,de,we);else Pe(W.__webglFramebuffer,H,E,n.COLOR_ATTACHMENT0,de,0);b(E,Re)&&x(de),t.unbindTexture()}H.depthBuffer&&Q(H)},this.updateRenderTargetMipmap=function Fe(H){const E=_(H)||o,W=!0===H.isWebGLMultipleRenderTargets?H.texture:[H.texture];for(let le=0,re=W.length;le<re;le++){const he=W[le];if(b(he,E)){const Re=H.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,de=i.get(he).__webglTexture;t.bindTexture(Re,de),x(Re),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Se(H){if(o&&H.samples>0&&!1===qe(H)){const E=H.isWebGLMultipleRenderTargets?H.texture:[H.texture],W=H.width,le=H.height;let re=n.COLOR_BUFFER_BIT;const he=[],Re=H.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,de=i.get(H),we=!0===H.isWebGLMultipleRenderTargets;if(we)for(let N=0;N<E.length;N++)t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+N,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,de.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+N,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,de.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,de.__webglFramebuffer);for(let N=0;N<E.length;N++){he.push(n.COLOR_ATTACHMENT0+N),H.depthBuffer&&he.push(Re);const pe=void 0!==de.__ignoreDepthValues&&de.__ignoreDepthValues;if(!1===pe&&(H.depthBuffer&&(re|=n.DEPTH_BUFFER_BIT),H.stencilBuffer&&(re|=n.STENCIL_BUFFER_BIT)),we&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,de.__webglColorRenderbuffer[N]),!0===pe&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Re]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Re])),we){const te=i.get(E[N]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,te,0)}n.blitFramebuffer(0,0,W,le,0,0,W,le,re,n.NEAREST),d&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,he)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),we)for(let N=0;N<E.length;N++){t.bindFramebuffer(n.FRAMEBUFFER,de.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+N,n.RENDERBUFFER,de.__webglColorRenderbuffer[N]);const pe=i.get(E[N]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,de.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+N,n.TEXTURE_2D,pe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,de.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Q,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=qe}function VHe(n,e,t){const i=t.isWebGL2;return{convert:function r(s,a=""){let o;const c=Tt.getTransfer(a);if(s===Q2)return n.UNSIGNED_BYTE;if(1017===s)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===s)return n.UNSIGNED_SHORT_5_5_5_1;if(1010===s)return n.BYTE;if(1011===s)return n.SHORT;if(1012===s)return n.UNSIGNED_SHORT;if(1013===s)return n.INT;if(s===es)return n.UNSIGNED_INT;if(s===a2)return n.FLOAT;if(s===d0)return i?n.HALF_FLOAT:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===s)return n.ALPHA;if(s===A1)return n.RGBA;if(1024===s)return n.LUMINANCE;if(1025===s)return n.LUMINANCE_ALPHA;if(s===Zs)return n.DEPTH_COMPONENT;if(s===sc)return n.DEPTH_STENCIL;if(1035===s)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(1028===s)return n.RED;if(1029===s)return n.RED_INTEGER;if(1030===s)return n.RG;if(1031===s)return n.RG_INTEGER;if(1033===s)return n.RGBA_INTEGER;if(33776===s||33777===s||33778===s||33779===s)if(c===Kt){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(33776===s)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(33776===s)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===s)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(37492===s)return c===Kt?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(37496===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(37808===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return c===Kt?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s||36494===s||36495===s){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(36492===s)return c===Kt?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===s)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===s)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===s||36284===s||36285===s||36286===s){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(36492===s)return o.COMPRESSED_RED_RGTC1_EXT;if(36284===s)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===s)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===s)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===Ys?i?n.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class DHe extends Wn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class K1 extends _n{constructor(){super(),this.isGroup=!0,this.type="Group"}}const NHe={type:"move"};class Eg{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new K1,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new K1,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new T,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new T),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new K1,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new T,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new T),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,c=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const m of e.hand.values()){const v=t.getJointPose(m,i),g=this._getHandJoint(l,m);null!==v&&(g.matrix.fromArray(v.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=v.radius),g.visible=null!==v}const h=l.joints["index-finger-tip"].position.distanceTo(l.joints["thumb-tip"].position),d=.02,p=.005;l.inputState.pinching&&h>d+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&h<=d-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==c&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(NHe)))}return null!==o&&(o.visible=null!==r),null!==c&&(c.visible=null!==s),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new K1;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class IHe extends T1{constructor(e,t,i,r,s,a,o,c,l,u){if((u=void 0!==u?u:Zs)!==Zs&&u!==sc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Zs&&(i=es),void 0===i&&u===sc&&(i=Ys),super(null,r,s,a,o,c,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:yn,this.minFilter=void 0!==c?c:yn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class RHe extends Qs{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",c=1,l=null,u=null,f=null,h=null,d=null,p=null;const m=t.getContextAttributes();let v=null,g=null;const M=[],y=[],_=new Wn;_.layers.enable(1),_.viewport=new It;const C=new Wn;C.layers.enable(2),C.viewport=new It;const b=[_,C],x=new DHe;x.layers.enable(1),x.layers.enable(2);let S=null,w=null;function A(R){const $=y.indexOf(R.inputSource);if(-1===$)return;const ae=M[$];void 0!==ae&&(ae.update(R.inputSource,R.frame,l||a),ae.dispatchEvent({type:R.type,data:R.inputSource}))}function I(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",k);for(let R=0;R<M.length;R++){const $=y[R];null!==$&&(y[R]=null,M[R].disconnect($))}S=null,w=null,e.setRenderTarget(v),d=null,h=null,f=null,r=null,g=null,J.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function k(R){for(let $=0;$<R.removed.length;$++){const ae=R.removed[$],se=y.indexOf(ae);se>=0&&(y[se]=null,M[se].disconnect(ae))}for(let $=0;$<R.added.length;$++){const ae=R.added[$];let se=y.indexOf(ae);if(-1===se){for(let xe=0;xe<M.length;xe++){if(xe>=y.length){y.push(ae),se=xe;break}if(null===y[xe]){y[xe]=ae,se=xe;break}}if(-1===se)break}const ce=M[se];ce&&ce.connect(ae)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(R){let $=M[R];return void 0===$&&($=new Eg,M[R]=$),$.getTargetRaySpace()},this.getControllerGrip=function(R){let $=M[R];return void 0===$&&($=new Eg,M[R]=$),$.getGripSpace()},this.getHand=function(R){let $=M[R];return void 0===$&&($=new Eg,M[R]=$),$.getHandSpace()},this.setFramebufferScaleFactor=function(R){s=R,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(R){o=R,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(R){l=R},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return f},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(){var R=function lSe(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function a(c){yP(s,i,r,a,o,"next",c)}function o(c){yP(s,i,r,a,o,"throw",c)}a(void 0)})}}(function*($){if(r=$,null!==r){if(v=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",I),r.addEventListener("inputsourceschange",k),!0!==m.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)d=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:d}),g=new ta(d.framebufferWidth,d.framebufferHeight,{format:A1,type:Q2,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil});else{let ae=null,se=null,ce=null;m.depth&&(ce=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ae=m.stencil?sc:Zs,se=m.stencil?Ys:es);const xe={colorFormat:t.RGBA8,depthFormat:ce,scaleFactor:s};f=new XRWebGLBinding(r,t),h=f.createProjectionLayer(xe),r.updateRenderState({layers:[h]}),g=new ta(h.textureWidth,h.textureHeight,{format:A1,type:Q2,depthTexture:new IHe(h.textureWidth,h.textureHeight,se,void 0,void 0,void 0,void 0,void 0,void 0,ae),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(c),l=null,a=yield r.requestReferenceSpace(o),J.setContext(r),J.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function($){return R.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const U=new T,z=new T;function O(R,$){null===$?R.matrixWorld.copy(R.matrix):R.matrixWorld.multiplyMatrices($.matrixWorld,R.matrix),R.matrixWorldInverse.copy(R.matrixWorld).invert()}this.updateCamera=function(R){if(null===r)return;x.near=C.near=_.near=R.near,x.far=C.far=_.far=R.far,(S!==x.near||w!==x.far)&&(r.updateRenderState({depthNear:x.near,depthFar:x.far}),S=x.near,w=x.far);const $=R.parent,ae=x.cameras;O(x,$);for(let se=0;se<ae.length;se++)O(ae[se],$);2===ae.length?function P(R,$,ae){U.setFromMatrixPosition($.matrixWorld),z.setFromMatrixPosition(ae.matrixWorld);const se=U.distanceTo(z),ce=$.projectionMatrix.elements,xe=ae.projectionMatrix.elements,ze=ce[14]/(ce[10]-1),Te=ce[14]/(ce[10]+1),pt=(ce[9]+1)/ce[5],at=(ce[9]-1)/ce[5],Pe=(ce[8]-1)/ce[0],D=(xe[8]+1)/xe[0],ge=ze*Pe,Q=ze*D,fe=se/(-Pe+D),ne=fe*-Pe;$.matrixWorld.decompose(R.position,R.quaternion,R.scale),R.translateX(ne),R.translateZ(fe),R.matrixWorld.compose(R.position,R.quaternion,R.scale),R.matrixWorldInverse.copy(R.matrixWorld).invert();const Fe=ze+fe,Se=Te+fe;R.projectionMatrix.makePerspective(ge-ne,Q+(se-ne),pt*Te/Se*Fe,at*Te/Se*Fe,Fe,Se),R.projectionMatrixInverse.copy(R.projectionMatrix).invert()}(x,_,C):x.projectionMatrix.copy(_.projectionMatrix),function G(R,$,ae){null===ae?R.matrix.copy($.matrixWorld):(R.matrix.copy(ae.matrixWorld),R.matrix.invert(),R.matrix.multiply($.matrixWorld)),R.matrix.decompose(R.position,R.quaternion,R.scale),R.updateMatrixWorld(!0),R.projectionMatrix.copy($.projectionMatrix),R.projectionMatrixInverse.copy($.projectionMatrixInverse),R.isPerspectiveCamera&&(R.fov=2*lc*Math.atan(1/R.projectionMatrix.elements[5]),R.zoom=1)}(R,x,$)},this.getCamera=function(){return x},this.getFoveation=function(){if(null!==h||null!==d)return c},this.setFoveation=function(R){c=R,null!==h&&(h.fixedFoveation=R),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=R)};let ee=null;const J=new Fk;J.setAnimationLoop(function j(R,$){if(u=$.getViewerPose(l||a),p=$,null!==u){const ae=u.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let se=!1;ae.length!==x.cameras.length&&(x.cameras.length=0,se=!0);for(let ce=0;ce<ae.length;ce++){const xe=ae[ce];let ze=null;if(null!==d)ze=d.getViewport(xe);else{const pt=f.getViewSubImage(h,xe);ze=pt.viewport,0===ce&&(e.setRenderTargetTextures(g,pt.colorTexture,h.ignoreDepthValues?void 0:pt.depthStencilTexture),e.setRenderTarget(g))}let Te=b[ce];void 0===Te&&(Te=new Wn,Te.layers.enable(ce),Te.viewport=new It,b[ce]=Te),Te.matrix.fromArray(xe.transform.matrix),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.projectionMatrix.fromArray(xe.projectionMatrix),Te.projectionMatrixInverse.copy(Te.projectionMatrix).invert(),Te.viewport.set(ze.x,ze.y,ze.width,ze.height),0===ce&&(x.matrix.copy(Te.matrix),x.matrix.decompose(x.position,x.quaternion,x.scale)),!0===se&&x.cameras.push(Te)}}for(let ae=0;ae<M.length;ae++){const se=y[ae],ce=M[ae];null!==se&&void 0!==ce&&ce.update(se,$,l||a)}ee&&ee(R,$),$.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:$}),p=null}),this.setAnimationLoop=function(R){ee=R},this.dispose=function(){}}}function PHe(n,e){function t(v,g){!0===v.matrixAutoUpdate&&v.updateMatrix(),g.value.copy(v.matrix)}function s(v,g){v.opacity.value=g.opacity,g.color&&v.diffuse.value.copy(g.color),g.emissive&&v.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.bumpMap&&(v.bumpMap.value=g.bumpMap,t(g.bumpMap,v.bumpMapTransform),v.bumpScale.value=g.bumpScale,1===g.side&&(v.bumpScale.value*=-1)),g.normalMap&&(v.normalMap.value=g.normalMap,t(g.normalMap,v.normalMapTransform),v.normalScale.value.copy(g.normalScale),1===g.side&&v.normalScale.value.negate()),g.displacementMap&&(v.displacementMap.value=g.displacementMap,t(g.displacementMap,v.displacementMapTransform),v.displacementScale.value=g.displacementScale,v.displacementBias.value=g.displacementBias),g.emissiveMap&&(v.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,v.emissiveMapTransform)),g.specularMap&&(v.specularMap.value=g.specularMap,t(g.specularMap,v.specularMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest);const M=e.get(g).envMap;if(M&&(v.envMap.value=M,v.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,v.reflectivity.value=g.reflectivity,v.ior.value=g.ior,v.refractionRatio.value=g.refractionRatio),g.lightMap){v.lightMap.value=g.lightMap;const y=!0===n._useLegacyLights?Math.PI:1;v.lightMapIntensity.value=g.lightMapIntensity*y,t(g.lightMap,v.lightMapTransform)}g.aoMap&&(v.aoMap.value=g.aoMap,v.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,v.aoMapTransform))}return{refreshFogUniforms:function i(v,g){g.color.getRGB(v.fogColor.value,Ok(n)),g.isFog?(v.fogNear.value=g.near,v.fogFar.value=g.far):g.isFogExp2&&(v.fogDensity.value=g.density)},refreshMaterialUniforms:function r(v,g,M,y,_){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(v,g):g.isMeshToonMaterial?(s(v,g),function f(v,g){g.gradientMap&&(v.gradientMap.value=g.gradientMap)}(v,g)):g.isMeshPhongMaterial?(s(v,g),function u(v,g){v.specular.value.copy(g.specular),v.shininess.value=Math.max(g.shininess,1e-4)}(v,g)):g.isMeshStandardMaterial?(s(v,g),function h(v,g){v.metalness.value=g.metalness,g.metalnessMap&&(v.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,v.metalnessMapTransform)),v.roughness.value=g.roughness,g.roughnessMap&&(v.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,v.roughnessMapTransform)),e.get(g).envMap&&(v.envMapIntensity.value=g.envMapIntensity)}(v,g),g.isMeshPhysicalMaterial&&function d(v,g,M){v.ior.value=g.ior,g.sheen>0&&(v.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),v.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(v.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,v.sheenColorMapTransform)),g.sheenRoughnessMap&&(v.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,v.sheenRoughnessMapTransform))),g.clearcoat>0&&(v.clearcoat.value=g.clearcoat,v.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(v.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,v.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(v.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),1===g.side&&v.clearcoatNormalScale.value.negate())),g.iridescence>0&&(v.iridescence.value=g.iridescence,v.iridescenceIOR.value=g.iridescenceIOR,v.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(v.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,v.iridescenceMapTransform)),g.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),g.transmission>0&&(v.transmission.value=g.transmission,v.transmissionSamplerMap.value=M.texture,v.transmissionSamplerSize.value.set(M.width,M.height),g.transmissionMap&&(v.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,v.transmissionMapTransform)),v.thickness.value=g.thickness,g.thicknessMap&&(v.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=g.attenuationDistance,v.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(v.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(v.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=g.specularIntensity,v.specularColor.value.copy(g.specularColor),g.specularColorMap&&(v.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,v.specularColorMapTransform)),g.specularIntensityMap&&(v.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,v.specularIntensityMapTransform))}(v,g,_)):g.isMeshMatcapMaterial?(s(v,g),function p(v,g){g.matcap&&(v.matcap.value=g.matcap)}(v,g)):g.isMeshDepthMaterial?s(v,g):g.isMeshDistanceMaterial?(s(v,g),function m(v,g){const M=e.get(g).light;v.referencePosition.value.setFromMatrixPosition(M.matrixWorld),v.nearDistance.value=M.shadow.camera.near,v.farDistance.value=M.shadow.camera.far}(v,g)):g.isMeshNormalMaterial?s(v,g):g.isLineBasicMaterial?(function a(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform))}(v,g),g.isLineDashedMaterial&&function o(v,g){v.dashSize.value=g.dashSize,v.totalSize.value=g.dashSize+g.gapSize,v.scale.value=g.scale}(v,g)):g.isPointsMaterial?function c(v,g,M,y){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.size.value=g.size*M,v.scale.value=.5*y,g.map&&(v.map.value=g.map,t(g.map,v.uvTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}(v,g,M,y):g.isSpriteMaterial?function l(v,g){v.diffuse.value.copy(g.color),v.opacity.value=g.opacity,v.rotation.value=g.rotation,g.map&&(v.map.value=g.map,t(g.map,v.mapTransform)),g.alphaMap&&(v.alphaMap.value=g.alphaMap,t(g.alphaMap,v.alphaMapTransform)),g.alphaTest>0&&(v.alphaTest.value=g.alphaTest)}(v,g):g.isShadowMaterial?(v.color.value.copy(g.color),v.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}}}function kHe(n,e,t,i){let r={},s={},a=[];const o=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function d(M,y,_){const C=M.value;if(void 0===_[y]){if("number"==typeof C)_[y]=C;else{const b=Array.isArray(C)?C:[C],x=[];for(let S=0;S<b.length;S++)x.push(b[S].clone());_[y]=x}return!0}if("number"==typeof C){if(_[y]!==C)return _[y]=C,!0}else{const b=Array.isArray(_[y])?_[y]:[_[y]],x=Array.isArray(C)?C:[C];for(let S=0;S<b.length;S++){const w=b[S];if(!1===w.equals(x[S]))return w.copy(x[S]),!0}}return!1}function m(M){const y={boundary:0,storage:0};return"number"==typeof M?(y.boundary=4,y.storage=4):M.isVector2?(y.boundary=8,y.storage=8):M.isVector3||M.isColor?(y.boundary=16,y.storage=12):M.isVector4?(y.boundary=16,y.storage=16):M.isMatrix3?(y.boundary=48,y.storage=48):M.isMatrix4?(y.boundary=64,y.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),y}function v(M){const y=M.target;y.removeEventListener("dispose",v);const _=a.indexOf(y.__bindingPointIndex);a.splice(_,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}return{bind:function c(M,y){i.uniformBlockBinding(M,y.program)},update:function l(M,y){let _=r[M.id];void 0===_&&(function p(M){const y=M.uniforms;let _=0;let b=0;for(let x=0,S=y.length;x<S;x++){const w=y[x],A={boundary:0,storage:0},I=Array.isArray(w.value)?w.value:[w.value];for(let k=0,U=I.length;k<U;k++){const P=m(I[k]);A.boundary+=P.boundary,A.storage+=P.storage}w.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),w.__offset=_,x>0&&(b=_%16,0!==b&&16-b-A.boundary<0&&(_+=16-b,w.__offset=_)),_+=A.storage}b=_%16,b>0&&(_+=16-b),M.__size=_,M.__cache={}}(M),_=function u(M){const y=function f(){for(let M=0;M<o;M++)if(-1===a.indexOf(M))return a.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();M.__bindingPointIndex=y;const _=n.createBuffer(),C=M.__size,b=M.usage;return n.bindBuffer(n.UNIFORM_BUFFER,_),n.bufferData(n.UNIFORM_BUFFER,C,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,y,_),_}(M),r[M.id]=_,M.addEventListener("dispose",v)),i.updateUBOMapping(M,y.program);const b=e.render.frame;s[M.id]!==b&&(function h(M){const _=M.uniforms,C=M.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[M.id]);for(let b=0,x=_.length;b<x;b++){const S=_[b];if(!0===d(S,b,C)){const w=S.__offset,A=Array.isArray(S.value)?S.value:[S.value];let I=0;for(let k=0;k<A.length;k++){const U=A[k],z=m(U);"number"==typeof U?(S.__data[0]=U,n.bufferSubData(n.UNIFORM_BUFFER,w+I,S.__data)):U.isMatrix3?(S.__data[0]=U.elements[0],S.__data[1]=U.elements[1],S.__data[2]=U.elements[2],S.__data[3]=U.elements[0],S.__data[4]=U.elements[3],S.__data[5]=U.elements[4],S.__data[6]=U.elements[5],S.__data[7]=U.elements[0],S.__data[8]=U.elements[6],S.__data[9]=U.elements[7],S.__data[10]=U.elements[8],S.__data[11]=U.elements[0]):(U.toArray(S.__data,I),I+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,w,S.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(M),s[M.id]=b)},dispose:function g(){for(const M in r)n.deleteBuffer(r[M]);a=[],r={},s={}}}}class mO{constructor(e={}){const{canvas:t=MAe(),context:i=null,depth:r=!0,stencil:s=!0,alpha:a=!1,antialias:o=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==i?i.getContextAttributes().alpha:a;const d=new Uint32Array(4),p=new Int32Array(4);let m=null,v=null;const g=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=jt,this._useLegacyLights=!1,this.toneMapping=r2,this.toneMappingExposure=1;const y=this;let _=!1,C=0,b=0,x=null,S=-1,w=null;const A=new It,I=new It;let k=null;const U=new K(0);let z=0,P=t.width,O=t.height,G=1,ee=null,j=null;const J=new It(0,0,P,O),R=new It(0,0,P,O);let $=!1;const ae=new Cg;let se=!1,ce=!1,xe=null;const ze=new $e,Te=new Z,pt=new T,at={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Pe(){return null===x?G:1}let Q,fe,ne,Fe,Se,Le,qe,vt,tn,H,E,W,le,re,he,Re,de,we,N,pe,te,Ze,Ue,Be,D=i;function ge(L,F){for(let X=0;X<L.length;X++){const Y=t.getContext(L[X],F);if(null!==Y)return Y}return null}try{const L={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r157"),t.addEventListener("webglcontextlost",ve,!1),t.addEventListener("webglcontextrestored",me,!1),t.addEventListener("webglcontextcreationerror",Ce,!1),null===D){const F=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&F.shift(),D=ge(F,L),null===D)throw ge(F)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&D instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===D.getShaderPrecisionFormat&&(D.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}function ke(){Q=new KTe(D),fe=new jTe(D,Q,e),Q.init(fe),Ze=new VHe(D,Q,fe),ne=new HHe(D,Q,fe),Fe=new eLe(D),Se=new MHe,Le=new zHe(D,Q,ne,Se,fe,Ze,Fe),qe=new qTe(y),vt=new ZTe(y),tn=new WAe(D,fe),Ue=new GTe(D,Q,tn,fe),H=new JTe(D,tn,Fe,Ue),E=new rLe(D,H,tn,Fe),N=new iLe(D,fe,Le),Re=new $Te(Se),W=new vHe(y,qe,vt,Q,fe,Ue,Re),le=new PHe(y,Se),re=new _He,he=new AHe(Q,fe),we=new BTe(y,qe,vt,ne,E,h,c),de=new LHe(y,E,fe),Be=new kHe(D,Fe,fe,ne),pe=new WTe(D,Q,Fe,fe),te=new QTe(D,Q,Fe,fe),Fe.programs=W.programs,y.capabilities=fe,y.extensions=Q,y.properties=Se,y.renderLists=re,y.shadowMap=de,y.state=ne,y.info=Fe}ke();const V=new RHe(y,D);function ve(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const L=Fe.autoReset,F=de.enabled,X=de.autoUpdate,B=de.needsUpdate,Y=de.type;ke(),Fe.autoReset=L,de.enabled=F,de.autoUpdate=X,de.needsUpdate=B,de.type=Y}function Ce(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function Me(L){const F=L.target;F.removeEventListener("dispose",Me),function ie(L){(function Ne(L){const F=Se.get(L).programs;void 0!==F&&(F.forEach(function(X){W.releaseProgram(X)}),L.isShaderMaterial&&W.releaseShaderCache(L))})(L),Se.remove(L)}(F)}this.xr=V,this.getContext=function(){return D},this.getContextAttributes=function(){return D.getContextAttributes()},this.forceContextLoss=function(){const L=Q.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=Q.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return G},this.setPixelRatio=function(L){void 0!==L&&(G=L,this.setSize(P,O,!1))},this.getSize=function(L){return L.set(P,O)},this.setSize=function(L,F,X=!0){V.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(P=L,O=F,t.width=Math.floor(L*G),t.height=Math.floor(F*G),!0===X&&(t.style.width=L+"px",t.style.height=F+"px"),this.setViewport(0,0,L,F))},this.getDrawingBufferSize=function(L){return L.set(P*G,O*G).floor()},this.setDrawingBufferSize=function(L,F,X){P=L,O=F,G=X,t.width=Math.floor(L*X),t.height=Math.floor(F*X),this.setViewport(0,0,L,F)},this.getCurrentViewport=function(L){return L.copy(A)},this.getViewport=function(L){return L.copy(J)},this.setViewport=function(L,F,X,B){L.isVector4?J.set(L.x,L.y,L.z,L.w):J.set(L,F,X,B),ne.viewport(A.copy(J).multiplyScalar(G).floor())},this.getScissor=function(L){return L.copy(R)},this.setScissor=function(L,F,X,B){L.isVector4?R.set(L.x,L.y,L.z,L.w):R.set(L,F,X,B),ne.scissor(I.copy(R).multiplyScalar(G).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(L){ne.setScissorTest($=L)},this.setOpaqueSort=function(L){ee=L},this.setTransparentSort=function(L){j=L},this.getClearColor=function(L){return L.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(L=!0,F=!0,X=!0){let B=0;if(L){let Y=!1;if(null!==x){const He=x.texture.format;Y=1033===He||1031===He||1029===He}if(Y){const He=x.texture.type,Ge=He===Q2||He===es||1012===He||He===Ys||1017===He||1018===He,it=we.getClearColor(),rt=we.getClearAlpha(),Mt=it.r,Qe=it.g,ht=it.b;Ge?(d[0]=Mt,d[1]=Qe,d[2]=ht,d[3]=rt,D.clearBufferuiv(D.COLOR,0,d)):(p[0]=Mt,p[1]=Qe,p[2]=ht,p[3]=rt,D.clearBufferiv(D.COLOR,0,p))}else B|=D.COLOR_BUFFER_BIT}F&&(B|=D.DEPTH_BUFFER_BIT),X&&(B|=D.STENCIL_BUFFER_BIT),D.clear(B)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ve,!1),t.removeEventListener("webglcontextrestored",me,!1),t.removeEventListener("webglcontextcreationerror",Ce,!1),re.dispose(),he.dispose(),Se.dispose(),qe.dispose(),vt.dispose(),E.dispose(),Ue.dispose(),Be.dispose(),W.dispose(),V.dispose(),V.removeEventListener("sessionstart",Qt),V.removeEventListener("sessionend",Dr),xe&&(xe.dispose(),xe=null),Si.stop()},this.renderBufferDirect=function(L,F,X,B,Y,He){null===F&&(F=at);const Ge=Y.isMesh&&Y.matrixWorld.determinant()<0,it=function QDe(L,F,X,B,Y){!0!==F.isScene&&(F=at),Le.resetTextureUnits();const He=F.fog,it=null===x?y.outputColorSpace:!0===x.isXRRenderTarget?x.texture.colorSpace:Bn,rt=(B.isMeshStandardMaterial?vt:qe).get(B.envMap||(B.isMeshStandardMaterial?F.environment:null)),Mt=!0===B.vertexColors&&!!X.attributes.color&&4===X.attributes.color.itemSize,Qe=!!X.attributes.tangent&&(!!B.normalMap||B.anisotropy>0),ht=!!X.morphAttributes.position,mn=!!X.morphAttributes.normal,wn=!!X.morphAttributes.color;let z1=r2;B.toneMapped&&(null===x||!0===x.isXRRenderTarget)&&(z1=y.toneMapping);const M2=X.morphAttributes.position||X.morphAttributes.normal||X.morphAttributes.color,Ln=void 0!==M2?M2.length:0,_t=Se.get(B),Kv=v.state.lights;!0!==se||!0!==ce&&L===w||Re.setState(B,L,L===w&&B.id===S);let Hn=!1;B.version===_t.__version?(_t.needsLights&&_t.lightsStateVersion!==Kv.state.version||_t.outputColorSpace!==it||Y.isInstancedMesh&&!1===_t.instancing||!Y.isInstancedMesh&&!0===_t.instancing||Y.isSkinnedMesh&&!1===_t.skinning||!Y.isSkinnedMesh&&!0===_t.skinning||Y.isInstancedMesh&&!0===_t.instancingColor&&null===Y.instanceColor||Y.isInstancedMesh&&!1===_t.instancingColor&&null!==Y.instanceColor||_t.envMap!==rt||!0===B.fog&&_t.fog!==He||void 0!==_t.numClippingPlanes&&(_t.numClippingPlanes!==Re.numPlanes||_t.numIntersection!==Re.numIntersection)||_t.vertexAlphas!==Mt||_t.vertexTangents!==Qe||_t.morphTargets!==ht||_t.morphNormals!==mn||_t.morphColors!==wn||_t.toneMapping!==z1||!0===fe.isWebGL2&&_t.morphTargetsCount!==Ln)&&(Hn=!0):(Hn=!0,_t.__version=B.version);let wa=_t.currentProgram;!0===Hn&&(wa=t5(B,F,Y));let HU=!1,Z0=!1,Jv=!1;const Ai=wa.getUniforms(),xa=_t.uniforms;if(ne.useProgram(wa.program)&&(HU=!0,Z0=!0,Jv=!0),B.id!==S&&(S=B.id,Z0=!0),HU||w!==L){Ai.setValue(D,"projectionMatrix",L.projectionMatrix),Ai.setValue(D,"viewMatrix",L.matrixWorldInverse);const u1=Ai.map.cameraPosition;void 0!==u1&&u1.setValue(D,pt.setFromMatrixPosition(L.matrixWorld)),fe.logarithmicDepthBuffer&&Ai.setValue(D,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),(B.isMeshPhongMaterial||B.isMeshToonMaterial||B.isMeshLambertMaterial||B.isMeshBasicMaterial||B.isMeshStandardMaterial||B.isShaderMaterial)&&Ai.setValue(D,"isOrthographic",!0===L.isOrthographicCamera),w!==L&&(w=L,Z0=!0,Jv=!0)}if(Y.isSkinnedMesh){Ai.setOptional(D,Y,"bindMatrix"),Ai.setOptional(D,Y,"bindMatrixInverse");const u1=Y.skeleton;u1&&(fe.floatVertexTextures?(null===u1.boneTexture&&u1.computeBoneTexture(),Ai.setValue(D,"boneTexture",u1.boneTexture,Le),Ai.setValue(D,"boneTextureSize",u1.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Qv=X.morphAttributes;if((void 0!==Qv.position||void 0!==Qv.normal||void 0!==Qv.color&&!0===fe.isWebGL2)&&N.update(Y,X,wa),(Z0||_t.receiveShadow!==Y.receiveShadow)&&(_t.receiveShadow=Y.receiveShadow,Ai.setValue(D,"receiveShadow",Y.receiveShadow)),B.isMeshGouraudMaterial&&null!==B.envMap&&(xa.envMap.value=rt,xa.flipEnvMap.value=rt.isCubeTexture&&!1===rt.isRenderTargetTexture?-1:1),Z0&&(Ai.setValue(D,"toneMappingExposure",y.toneMappingExposure),_t.needsLights&&function eNe(L,F){L.ambientLightColor.needsUpdate=F,L.lightProbe.needsUpdate=F,L.directionalLights.needsUpdate=F,L.directionalLightShadows.needsUpdate=F,L.pointLights.needsUpdate=F,L.pointLightShadows.needsUpdate=F,L.spotLights.needsUpdate=F,L.spotLightShadows.needsUpdate=F,L.rectAreaLights.needsUpdate=F,L.hemisphereLights.needsUpdate=F}(xa,Jv),He&&!0===B.fog&&le.refreshFogUniforms(xa,He),le.refreshMaterialUniforms(xa,B,G,O,xe),Q8.upload(D,_t.uniformsList,xa,Le)),B.isShaderMaterial&&!0===B.uniformsNeedUpdate&&(Q8.upload(D,_t.uniformsList,xa,Le),B.uniformsNeedUpdate=!1),B.isSpriteMaterial&&Ai.setValue(D,"center",Y.center),Ai.setValue(D,"modelViewMatrix",Y.modelViewMatrix),Ai.setValue(D,"normalMatrix",Y.normalMatrix),Ai.setValue(D,"modelMatrix",Y.matrixWorld),B.isShaderMaterial||B.isRawShaderMaterial){const u1=B.uniformsGroups;for(let eM=0,nNe=u1.length;eM<nNe;eM++)if(fe.isWebGL2){const zU=u1[eM];Be.update(zU,wa),Be.bind(zU,wa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return wa}(L,F,X,B,Y);ne.setMaterial(B,Ge);let rt=X.index,Mt=1;if(!0===B.wireframe){if(rt=H.getWireframeAttribute(X),void 0===rt)return;Mt=2}const Qe=X.drawRange,ht=X.attributes.position;let mn=Qe.start*Mt,wn=(Qe.start+Qe.count)*Mt;null!==He&&(mn=Math.max(mn,He.start*Mt),wn=Math.min(wn,(He.start+He.count)*Mt)),null!==rt?(mn=Math.max(mn,0),wn=Math.min(wn,rt.count)):null!=ht&&(mn=Math.max(mn,0),wn=Math.min(wn,ht.count));const z1=wn-mn;if(z1<0||z1===1/0)return;Ue.setup(Y,B,it,X,rt);let M2,Ln=pe;if(null!==rt&&(M2=tn.get(rt),Ln=te,Ln.setIndex(M2)),Y.isMesh)!0===B.wireframe?(ne.setLineWidth(B.wireframeLinewidth*Pe()),Ln.setMode(D.LINES)):Ln.setMode(D.TRIANGLES);else if(Y.isLine){let _t=B.linewidth;void 0===_t&&(_t=1),ne.setLineWidth(_t*Pe()),Ln.setMode(Y.isLineSegments?D.LINES:Y.isLineLoop?D.LINE_LOOP:D.LINE_STRIP)}else Y.isPoints?Ln.setMode(D.POINTS):Y.isSprite&&Ln.setMode(D.TRIANGLES);if(Y.isInstancedMesh)Ln.renderInstances(mn,z1,Y.count);else if(X.isInstancedBufferGeometry){const Kv=Math.min(X.instanceCount,void 0!==X._maxInstanceCount?X._maxInstanceCount:1/0);Ln.renderInstances(mn,z1,Kv)}else Ln.render(mn,z1)},this.compile=function(L,F){function X(B,Y,He){!0===B.transparent&&2===B.side&&!1===B.forceSinglePass?(B.side=1,B.needsUpdate=!0,t5(B,Y,He),B.side=0,B.needsUpdate=!0,t5(B,Y,He),B.side=2):t5(B,Y,He)}v=he.get(L),v.init(),M.push(v),L.traverseVisible(function(B){B.isLight&&B.layers.test(F.layers)&&(v.pushLight(B),B.castShadow&&v.pushShadow(B))}),v.setupLights(y._useLegacyLights),L.traverse(function(B){const Y=B.material;if(Y)if(Array.isArray(Y))for(let He=0;He<Y.length;He++)X(Y[He],L,B);else X(Y,L,B)}),M.pop(),v=null};let Je=null;function Qt(){Si.stop()}function Dr(){Si.start()}const Si=new Fk;function AU(L,F,X,B){if(!1===L.visible)return;if(L.layers.test(F.layers))if(L.isGroup)X=L.renderOrder;else if(L.isLOD)!0===L.autoUpdate&&L.update(F);else if(L.isLight)v.pushLight(L),L.castShadow&&v.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||ae.intersectsSprite(L)){B&&pt.setFromMatrixPosition(L.matrixWorld).applyMatrix4(ze);const Ge=E.update(L),it=L.material;it.visible&&m.push(L,Ge,it,X,pt.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(!L.frustumCulled||ae.intersectsObject(L))){const Ge=E.update(L),it=L.material;if(B&&(void 0!==L.boundingSphere?(null===L.boundingSphere&&L.computeBoundingSphere(),pt.copy(L.boundingSphere.center)):(null===Ge.boundingSphere&&Ge.computeBoundingSphere(),pt.copy(Ge.boundingSphere.center)),pt.applyMatrix4(L.matrixWorld).applyMatrix4(ze)),Array.isArray(it)){const rt=Ge.groups;for(let Mt=0,Qe=rt.length;Mt<Qe;Mt++){const ht=rt[Mt],mn=it[ht.materialIndex];mn&&mn.visible&&m.push(L,Ge,mn,X,pt.z,ht)}}else it.visible&&m.push(L,Ge,it,X,pt.z,null)}const He=L.children;for(let Ge=0,it=He.length;Ge<it;Ge++)AU(He[Ge],F,X,B)}function EU(L,F,X,B){const Y=L.opaque,He=L.transmissive,Ge=L.transparent;v.setupLightsView(X),!0===se&&Re.setGlobalState(y.clippingPlanes,X),He.length>0&&function JDe(L,F,X,B){const Y=fe.isWebGL2;null===xe&&(xe=new ta(1,1,{generateMipmaps:!0,type:Q.has("EXT_color_buffer_half_float")?d0:Q2,minFilter:s2,samples:Y?4:0})),y.getDrawingBufferSize(Te),Y?xe.setSize(Te.x,Te.y):xe.setSize(T8(Te.x),T8(Te.y));const He=y.getRenderTarget();y.setRenderTarget(xe),y.getClearColor(U),z=y.getClearAlpha(),z<1&&y.setClearColor(16777215,.5),y.clear();const Ge=y.toneMapping;y.toneMapping=r2,e5(L,X,B),Le.updateMultisampleRenderTarget(xe),Le.updateRenderTargetMipmap(xe);let it=!1;for(let rt=0,Mt=F.length;rt<Mt;rt++){const Qe=F[rt],ht=Qe.object,mn=Qe.geometry,wn=Qe.material,z1=Qe.group;if(2===wn.side&&ht.layers.test(B.layers)){const M2=wn.side;wn.side=1,wn.needsUpdate=!0,TU(ht,X,B,mn,wn,z1),wn.side=M2,wn.needsUpdate=!0,it=!0}}!0===it&&(Le.updateMultisampleRenderTarget(xe),Le.updateRenderTargetMipmap(xe)),y.setRenderTarget(He),y.setClearColor(U,z),y.toneMapping=Ge}(Y,He,F,X),B&&ne.viewport(A.copy(B)),Y.length>0&&e5(Y,F,X),He.length>0&&e5(He,F,X),Ge.length>0&&e5(Ge,F,X),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1)}function e5(L,F,X){const B=!0===F.isScene?F.overrideMaterial:null;for(let Y=0,He=L.length;Y<He;Y++){const Ge=L[Y],it=Ge.object,rt=Ge.geometry,Mt=null===B?Ge.material:B,Qe=Ge.group;it.layers.test(X.layers)&&TU(it,F,X,rt,Mt,Qe)}}function TU(L,F,X,B,Y,He){L.onBeforeRender(y,F,X,B,Y,He),L.modelViewMatrix.multiplyMatrices(X.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),Y.onBeforeRender(y,F,X,B,L,He),!0===Y.transparent&&2===Y.side&&!1===Y.forceSinglePass?(Y.side=1,Y.needsUpdate=!0,y.renderBufferDirect(X,F,B,Y,L,He),Y.side=0,Y.needsUpdate=!0,y.renderBufferDirect(X,F,B,Y,L,He),Y.side=2):y.renderBufferDirect(X,F,B,Y,L,He),L.onAfterRender(y,F,X,B,Y,He)}function t5(L,F,X){!0!==F.isScene&&(F=at);const B=Se.get(L),Y=v.state.lights,Ge=Y.state.version,it=W.getParameters(L,Y.state,v.state.shadowsArray,F,X),rt=W.getProgramCacheKey(it);let Mt=B.programs;B.environment=L.isMeshStandardMaterial?F.environment:null,B.fog=F.fog,B.envMap=(L.isMeshStandardMaterial?vt:qe).get(L.envMap||B.environment),void 0===Mt&&(L.addEventListener("dispose",Me),Mt=new Map,B.programs=Mt);let Qe=Mt.get(rt);if(void 0!==Qe){if(B.currentProgram===Qe&&B.lightsStateVersion===Ge)return LU(L,it),Qe}else it.uniforms=W.getUniforms(L),L.onBuild(X,it,y),L.onBeforeCompile(it,y),Qe=W.acquireProgram(it,rt),Mt.set(rt,Qe),B.uniforms=it.uniforms;const ht=B.uniforms;(!L.isShaderMaterial&&!L.isRawShaderMaterial||!0===L.clipping)&&(ht.clippingPlanes=Re.uniform),LU(L,it),B.needsLights=function tNe(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&!0===L.lights}(L),B.lightsStateVersion=Ge,B.needsLights&&(ht.ambientLightColor.value=Y.state.ambient,ht.lightProbe.value=Y.state.probe,ht.directionalLights.value=Y.state.directional,ht.directionalLightShadows.value=Y.state.directionalShadow,ht.spotLights.value=Y.state.spot,ht.spotLightShadows.value=Y.state.spotShadow,ht.rectAreaLights.value=Y.state.rectArea,ht.ltc_1.value=Y.state.rectAreaLTC1,ht.ltc_2.value=Y.state.rectAreaLTC2,ht.pointLights.value=Y.state.point,ht.pointLightShadows.value=Y.state.pointShadow,ht.hemisphereLights.value=Y.state.hemi,ht.directionalShadowMap.value=Y.state.directionalShadowMap,ht.directionalShadowMatrix.value=Y.state.directionalShadowMatrix,ht.spotShadowMap.value=Y.state.spotShadowMap,ht.spotLightMatrix.value=Y.state.spotLightMatrix,ht.spotLightMap.value=Y.state.spotLightMap,ht.pointShadowMap.value=Y.state.pointShadowMap,ht.pointShadowMatrix.value=Y.state.pointShadowMatrix);const mn=Qe.getUniforms(),wn=Q8.seqWithValue(mn.seq,ht);return B.currentProgram=Qe,B.uniformsList=wn,Qe}function LU(L,F){const X=Se.get(L);X.outputColorSpace=F.outputColorSpace,X.instancing=F.instancing,X.instancingColor=F.instancingColor,X.skinning=F.skinning,X.morphTargets=F.morphTargets,X.morphNormals=F.morphNormals,X.morphColors=F.morphColors,X.morphTargetsCount=F.morphTargetsCount,X.numClippingPlanes=F.numClippingPlanes,X.numIntersection=F.numClipIntersection,X.vertexAlphas=F.vertexAlphas,X.vertexTangents=F.vertexTangents,X.toneMapping=F.toneMapping}Si.setAnimationLoop(function Tn(L){Je&&Je(L)}),typeof self<"u"&&Si.setContext(self),this.setAnimationLoop=function(L){Je=L,V.setAnimationLoop(L),null===L?Si.stop():Si.start()},V.addEventListener("sessionstart",Qt),V.addEventListener("sessionend",Dr),this.render=function(L,F){if(void 0===F||!0===F.isCamera){if(!0!==_){if(!0===L.matrixWorldAutoUpdate&&L.updateMatrixWorld(),null===F.parent&&!0===F.matrixWorldAutoUpdate&&F.updateMatrixWorld(),!0===V.enabled&&!0===V.isPresenting&&(!0===V.cameraAutoUpdate&&V.updateCamera(F),F=V.getCamera()),!0===L.isScene&&L.onBeforeRender(y,L,F,x),v=he.get(L,M.length),v.init(),M.push(v),ze.multiplyMatrices(F.projectionMatrix,F.matrixWorldInverse),ae.setFromProjectionMatrix(ze),ce=this.localClippingEnabled,se=Re.init(this.clippingPlanes,ce),m=re.get(L,g.length),m.init(),g.push(m),AU(L,F,0,y.sortObjects),m.finish(),!0===y.sortObjects&&m.sort(ee,j),this.info.render.frame++,!0===se&&Re.beginShadows(),de.render(v.state.shadowsArray,L,F),!0===se&&Re.endShadows(),!0===this.info.autoReset&&this.info.reset(),we.render(m,L),v.setupLights(y._useLegacyLights),F.isArrayCamera){const B=F.cameras;for(let Y=0,He=B.length;Y<He;Y++){const Ge=B[Y];EU(m,L,Ge,Ge.viewport)}}else EU(m,L,F);null!==x&&(Le.updateMultisampleRenderTarget(x),Le.updateRenderTargetMipmap(x)),!0===L.isScene&&L.onAfterRender(y,L,F),Ue.resetDefaultState(),S=-1,w=null,M.pop(),v=M.length>0?M[M.length-1]:null,g.pop(),m=g.length>0?g[g.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(L,F,X){Se.get(L.texture).__webglTexture=F,Se.get(L.depthTexture).__webglTexture=X;const B=Se.get(L);B.__hasExternalTextures=!0,B.__hasExternalTextures&&(B.__autoAllocateDepthBuffer=void 0===X,B.__autoAllocateDepthBuffer||!0===Q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),B.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(L,F){const X=Se.get(L);X.__webglFramebuffer=F,X.__useDefaultFramebuffer=void 0===F},this.setRenderTarget=function(L,F=0,X=0){x=L,C=F,b=X;let B=!0,Y=null,He=!1,Ge=!1;if(L){const rt=Se.get(L);void 0!==rt.__useDefaultFramebuffer?(ne.bindFramebuffer(D.FRAMEBUFFER,null),B=!1):void 0===rt.__webglFramebuffer?Le.setupRenderTarget(L):rt.__hasExternalTextures&&Le.rebindTextures(L,Se.get(L.texture).__webglTexture,Se.get(L.depthTexture).__webglTexture);const Mt=L.texture;(Mt.isData3DTexture||Mt.isDataArrayTexture||Mt.isCompressedArrayTexture)&&(Ge=!0);const Qe=Se.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(Y=Array.isArray(Qe[F])?Qe[F][X]:Qe[F],He=!0):Y=fe.isWebGL2&&L.samples>0&&!1===Le.useMultisampledRTT(L)?Se.get(L).__webglMultisampledFramebuffer:Array.isArray(Qe)?Qe[X]:Qe,A.copy(L.viewport),I.copy(L.scissor),k=L.scissorTest}else A.copy(J).multiplyScalar(G).floor(),I.copy(R).multiplyScalar(G).floor(),k=$;if(ne.bindFramebuffer(D.FRAMEBUFFER,Y)&&fe.drawBuffers&&B&&ne.drawBuffers(L,Y),ne.viewport(A),ne.scissor(I),ne.setScissorTest(k),He){const rt=Se.get(L.texture);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+F,rt.__webglTexture,X)}else if(Ge){const rt=Se.get(L.texture);D.framebufferTextureLayer(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,rt.__webglTexture,X||0,F||0)}S=-1},this.readRenderTargetPixels=function(L,F,X,B,Y,He,Ge){if(!L||!L.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let it=Se.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&void 0!==Ge&&(it=it[Ge]),it){ne.bindFramebuffer(D.FRAMEBUFFER,it);try{const rt=L.texture,Mt=rt.format,Qe=rt.type;if(Mt!==A1&&Ze.convert(Mt)!==D.getParameter(D.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const ht=Qe===d0&&(Q.has("EXT_color_buffer_half_float")||fe.isWebGL2&&Q.has("EXT_color_buffer_float"));if(!(Qe===Q2||Ze.convert(Qe)===D.getParameter(D.IMPLEMENTATION_COLOR_READ_TYPE)||Qe===a2&&(fe.isWebGL2||Q.has("OES_texture_float")||Q.has("WEBGL_color_buffer_float"))||ht))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");F>=0&&F<=L.width-B&&X>=0&&X<=L.height-Y&&D.readPixels(F,X,B,Y,Ze.convert(Mt),Ze.convert(Qe),He)}finally{const rt=null!==x?Se.get(x).__webglFramebuffer:null;ne.bindFramebuffer(D.FRAMEBUFFER,rt)}}},this.copyFramebufferToTexture=function(L,F,X=0){const B=Math.pow(2,-X),Y=Math.floor(F.image.width*B),He=Math.floor(F.image.height*B);Le.setTexture2D(F,0),D.copyTexSubImage2D(D.TEXTURE_2D,X,0,0,L.x,L.y,Y,He),ne.unbindTexture()},this.copyTextureToTexture=function(L,F,X,B=0){const Y=F.image.width,He=F.image.height,Ge=Ze.convert(X.format),it=Ze.convert(X.type);Le.setTexture2D(X,0),D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,X.flipY),D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,X.premultiplyAlpha),D.pixelStorei(D.UNPACK_ALIGNMENT,X.unpackAlignment),F.isDataTexture?D.texSubImage2D(D.TEXTURE_2D,B,L.x,L.y,Y,He,Ge,it,F.image.data):F.isCompressedTexture?D.compressedTexSubImage2D(D.TEXTURE_2D,B,L.x,L.y,F.mipmaps[0].width,F.mipmaps[0].height,Ge,F.mipmaps[0].data):D.texSubImage2D(D.TEXTURE_2D,B,L.x,L.y,Ge,it,F.image),0===B&&X.generateMipmaps&&D.generateMipmap(D.TEXTURE_2D),ne.unbindTexture()},this.copyTextureToTexture3D=function(L,F,X,B,Y=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const He=L.max.x-L.min.x+1,Ge=L.max.y-L.min.y+1,it=L.max.z-L.min.z+1,rt=Ze.convert(B.format),Mt=Ze.convert(B.type);let Qe;if(B.isData3DTexture)Le.setTexture3D(B,0),Qe=D.TEXTURE_3D;else{if(!B.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Le.setTexture2DArray(B,0),Qe=D.TEXTURE_2D_ARRAY}D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,B.flipY),D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),D.pixelStorei(D.UNPACK_ALIGNMENT,B.unpackAlignment);const ht=D.getParameter(D.UNPACK_ROW_LENGTH),mn=D.getParameter(D.UNPACK_IMAGE_HEIGHT),wn=D.getParameter(D.UNPACK_SKIP_PIXELS),z1=D.getParameter(D.UNPACK_SKIP_ROWS),M2=D.getParameter(D.UNPACK_SKIP_IMAGES),Ln=X.isCompressedTexture?X.mipmaps[0]:X.image;D.pixelStorei(D.UNPACK_ROW_LENGTH,Ln.width),D.pixelStorei(D.UNPACK_IMAGE_HEIGHT,Ln.height),D.pixelStorei(D.UNPACK_SKIP_PIXELS,L.min.x),D.pixelStorei(D.UNPACK_SKIP_ROWS,L.min.y),D.pixelStorei(D.UNPACK_SKIP_IMAGES,L.min.z),X.isDataTexture||X.isData3DTexture?D.texSubImage3D(Qe,Y,F.x,F.y,F.z,He,Ge,it,rt,Mt,Ln.data):X.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),D.compressedTexSubImage3D(Qe,Y,F.x,F.y,F.z,He,Ge,it,rt,Ln.data)):D.texSubImage3D(Qe,Y,F.x,F.y,F.z,He,Ge,it,rt,Mt,Ln),D.pixelStorei(D.UNPACK_ROW_LENGTH,ht),D.pixelStorei(D.UNPACK_IMAGE_HEIGHT,mn),D.pixelStorei(D.UNPACK_SKIP_PIXELS,wn),D.pixelStorei(D.UNPACK_SKIP_ROWS,z1),D.pixelStorei(D.UNPACK_SKIP_IMAGES,M2),0===Y&&B.generateMipmaps&&D.generateMipmap(Qe),ne.unbindTexture()},this.initTexture=function(L){L.isCubeTexture?Le.setTextureCube(L,0):L.isData3DTexture?Le.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?Le.setTexture2DArray(L,0):Le.setTexture2D(L,0),ne.unbindTexture()},this.resetState=function(){C=0,b=0,x=null,ne.reset(),Ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return o2}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Zm?"display-p3":"srgb",t.unpackColorSpace=Tt.workingColorSpace===w8?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===jt?Ks:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ks?jt:Bn}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class OHe extends mO{}).prototype.isWebGL1Renderer=!0;class ef{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new K(e),this.near=t,this.far=i}clone(){return new ef(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class gO extends _n{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Lg{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=r1()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=r1()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=r1()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const xi=new T;class ca{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.applyMatrix4(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.applyNormalMatrix(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)xi.fromBufferAttribute(this,t),xi.transformDirection(e),this.setXYZ(t,xi.x,xi.y,xi.z);return this}setX(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Fi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Fi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Fi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Fi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),r=ct(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=ct(t,this.array),i=ct(i,this.array),r=ct(r,this.array),s=ct(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Jt(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ca(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const wO=new T,xO=new It,bO=new It,BHe=new T,SO=new $e,Oc=new T,zg=new X1,AO=new $e,Vg=new yc;class EO extends zt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new $e,this.bindMatrixInverse=new $e,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Sr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Oc.fromBufferAttribute(t,i),this.applyBoneTransform(i,Oc),this.boundingBox.expandByPoint(Oc)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new X1),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Oc.fromBufferAttribute(t,i),this.applyBoneTransform(i,Oc),this.boundingSphere.expandByPoint(Oc)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),zg.copy(this.boundingSphere),zg.applyMatrix4(r),!1!==e.ray.intersectsSphere(zg)&&(AO.copy(r).invert(),Vg.copy(e.ray).applyMatrix4(AO),(null===this.boundingBox||!1!==Vg.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,Vg)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new It,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;xO.fromBufferAttribute(r.attributes.skinIndex,e),bO.fromBufferAttribute(r.attributes.skinWeight,e),wO.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=bO.getComponent(s);if(0!==a){const o=xO.getComponent(s);SO.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(BHe.copy(wO).applyMatrix4(SO),a)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Dg extends _n{constructor(){super(),this.isBone=!0,this.type="Bone"}}class E0 extends T1{constructor(e=null,t=1,i=1,r,s,a,o,c,l=yn,u=yn,f,h){super(null,a,o,c,l,u,r,s,f,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const TO=new $e,GHe=new $e;class af{constructor(e=[],t=[]){this.uuid=r1(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new $e)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new $e;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++)TO.multiplyMatrices(e[s]?e[s].matrixWorld:GHe,t[s]),TO.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new af(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=gk(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new E0(t,e,e,A1,a2);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new Dg),this.bones.push(a),this.boneInverses.push((new $e).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class T0 extends Jt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Fc=new $e,LO=new $e,cf=[],HO=new Sr,WHe=new $e,L0=new zt,H0=new X1;class zO extends zt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new T0(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,WHe)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Sr),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Fc),HO.copy(e.boundingBox).applyMatrix4(Fc),this.boundingBox.union(HO)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new X1),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Fc),H0.copy(e.boundingSphere).applyMatrix4(Fc),this.boundingSphere.union(H0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(L0.geometry=this.geometry,L0.material=this.material,void 0!==L0.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),H0.copy(this.boundingSphere),H0.applyMatrix4(i),!1!==e.ray.intersectsSphere(H0)))for(let s=0;s<r;s++){this.getMatrixAt(s,Fc),LO.multiplyMatrices(i,Fc),L0.matrixWorld=LO,L0.raycast(e,cf);for(let a=0,o=cf.length;a<o;a++){const c=cf[a];c.instanceId=s,c.object=this,t.push(c)}cf.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new T0(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class bi extends Ui{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new K(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const VO=new T,DO=new T,NO=new $e,Ng=new yc,lf=new X1;class la extends _n{constructor(e=new lt,t=new bi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)VO.fromBufferAttribute(t,r-1),DO.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=VO.distanceTo(DO);e.setAttribute("lineDistance",new De(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),lf.copy(i.boundingSphere),lf.applyMatrix4(r),lf.radius+=s,!1===e.ray.intersectsSphere(lf))return;NO.copy(r).invert(),Ng.copy(e.ray).applyMatrix4(NO);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,l=new T,u=new T,f=new T,h=new T,d=this.isLineSegments?2:1,p=i.index,v=i.attributes.position;if(null!==p)for(let y=Math.max(0,a.start),_=Math.min(p.count,a.start+a.count)-1;y<_;y+=d){const C=p.getX(y),b=p.getX(y+1);if(l.fromBufferAttribute(v,C),u.fromBufferAttribute(v,b),Ng.distanceSqToSegment(l,u,h,f)>c)continue;h.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(h);S<e.near||S>e.far||t.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(let y=Math.max(0,a.start),_=Math.min(v.count,a.start+a.count)-1;y<_;y+=d){if(l.fromBufferAttribute(v,y),u.fromBufferAttribute(v,y+1),Ng.distanceSqToSegment(l,u,h,f)>c)continue;h.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const IO=new T,RO=new T;class uf extends la{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)IO.fromBufferAttribute(t,r),RO.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+IO.distanceTo(RO);e.setAttribute("lineDistance",new De(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class PO extends la{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Ig extends Ui{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new K(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const kO=new $e,Rg=new yc,ff=new X1,hf=new T;class OO extends _n{constructor(e=new lt,t=new Ig){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),ff.copy(i.boundingSphere),ff.applyMatrix4(r),ff.radius+=s,!1===e.ray.intersectsSphere(ff))return;kO.copy(r).invert(),Rg.copy(e.ray).applyMatrix4(kO);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=o*o,l=i.index,f=i.attributes.position;if(null!==l)for(let p=Math.max(0,a.start),m=Math.min(l.count,a.start+a.count);p<m;p++){const v=l.getX(p);hf.fromBufferAttribute(f,v),FO(hf,v,c,r,e,t,this)}else for(let p=Math.max(0,a.start),m=Math.min(f.count,a.start+a.count);p<m;p++)hf.fromBufferAttribute(f,p),FO(hf,p,c,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function FO(n,e,t,i,r,s,a){const o=Rg.distanceSqToPoint(n);if(o<t){const c=new T;Rg.closestPointToPoint(n,c),c.applyMatrix4(i);const l=r.ray.origin.distanceTo(c);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:c,index:e,face:null,object:a})}}class $He extends T1{constructor(e,t,i,r,s,a,o,c,l){super(e,t,i,r,s,a,o,c,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Lr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;a=t||e*i[s-1];let l,o=0,c=s-1;for(;o<=c;)if(r=Math.floor(o+(c-o)/2),l=i[r]-a,l<0)o=r+1;else{if(!(l>0)){c=r;break}c=r-1}if(r=c,i[r]===a)return r/(s-1);const u=i[r];return(r+(a-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),c=t||(a.isVector2?new Z:new T);return c.copy(o).sub(a).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new T,r=[],s=[],a=[],o=new T,c=new $e;for(let d=0;d<=e;d++)r[d]=this.getTangentAt(d/e,new T);s[0]=new T,a[0]=new T;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),f<=l&&(l=f,i.set(0,1,0)),h<=l&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(r[d-1],r[d]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(dn(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(c.makeRotationAxis(o,p))}a[d].crossVectors(r[d],s[d])}if(!0===t){let d=Math.acos(dn(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(c.makeRotationAxis(r[p],d*p)),a[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Pg extends Lr{constructor(e=0,t=0,i=1,r=1,s=0,a=2*Math.PI,o=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=c}getPoint(e,t){const i=t||new Z,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=a?0:r),!0===this.aClockwise&&!a&&(s===r?s=-r:s-=r);const o=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=c-this.aX,d=l-this.aY;c=h*u-d*f+this.aX,l=h*f+d*u+this.aY}return i.set(c,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function kg(){let n=0,e=0,t=0,i=0;function r(s,a,o,c){n=s,e=o,t=-3*s+3*a-2*o-c,i=2*s-2*a+o+c}return{initCatmullRom:function(s,a,o,c,l){r(a,o,l*(o-s),l*(c-a))},initNonuniformCatmullRom:function(s,a,o,c,l,u,f){let h=(a-s)/l-(o-s)/(l+u)+(o-a)/u,d=(o-a)/u-(c-a)/(u+f)+(c-o)/f;h*=u,d*=u,r(a,o,h,d)},calc:function(s){const a=s*s;return n+e*s+t*a+i*(a*s)}}}const df=new T,Og=new kg,Fg=new kg,Ug=new kg;function UO(n,e,t,i,r){const s=.5*(i-e),a=.5*(r-t),o=n*n;return(2*t-2*i+s+a)*(n*o)+(-3*t+3*i-2*s-a)*o+s*n+t}function z0(n,e,t,i){return function YHe(n,e){const t=1-n;return t*t*e}(n,e)+function ZHe(n,e){return 2*(1-n)*n*e}(n,t)+function KHe(n,e){return n*n*e}(n,i)}function V0(n,e,t,i,r){return function JHe(n,e){const t=1-n;return t*t*t*e}(n,e)+function QHe(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function eze(n,e){return 3*(1-n)*n*n*e}(n,i)+function tze(n,e){return n*n*n*e}(n,r)}class BO extends Lr{constructor(e=new Z,t=new Z,i=new Z,r=new Z){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Z){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(V0(e,r.x,s.x,a.x,o.x),V0(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class GO extends Lr{constructor(e=new Z,t=new Z){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Z){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Z){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WO extends Lr{constructor(e=new Z,t=new Z,i=new Z){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Z){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(z0(e,r.x,s.x,a.x),z0(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $O extends Lr{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Z){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,c=r[0===a?a:a-1],l=r[a],u=r[a>r.length-2?r.length-1:a+1],f=r[a>r.length-3?r.length-1:a+2];return i.set(UO(o,c.x,l.x,u.x,f.x),UO(o,c.y,l.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new Z).fromArray(r))}return this}}var pf=Object.freeze({__proto__:null,ArcCurve:class qHe extends Pg{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class XHe extends Lr{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new T){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let l,u,o=Math.floor(a),c=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:0===c&&o===s-1&&(o=s-2,c=1),this.closed||o>0?l=r[(o-1)%s]:(df.subVectors(r[0],r[1]).add(r[0]),l=df);const f=r[o%s],h=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(df.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=df),"centripetal"===this.curveType||"chordal"===this.curveType){const d="chordal"===this.curveType?.5:.25;let p=Math.pow(l.distanceToSquared(f),d),m=Math.pow(f.distanceToSquared(h),d),v=Math.pow(h.distanceToSquared(u),d);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),Og.initNonuniformCatmullRom(l.x,f.x,h.x,u.x,p,m,v),Fg.initNonuniformCatmullRom(l.y,f.y,h.y,u.y,p,m,v),Ug.initNonuniformCatmullRom(l.z,f.z,h.z,u.z,p,m,v)}else"catmullrom"===this.curveType&&(Og.initCatmullRom(l.x,f.x,h.x,u.x,this.tension),Fg.initCatmullRom(l.y,f.y,h.y,u.y,this.tension),Ug.initCatmullRom(l.z,f.z,h.z,u.z,this.tension));return i.set(Og.calc(c),Fg.calc(c),Ug.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new T).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:BO,CubicBezierCurve3:class nze extends Lr{constructor(e=new T,t=new T,i=new T,r=new T){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new T){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(V0(e,r.x,s.x,a.x,o.x),V0(e,r.y,s.y,a.y,o.y),V0(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:Pg,LineCurve:GO,LineCurve3:class ize extends Lr{constructor(e=new T,t=new T){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new T){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new T){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:WO,QuadraticBezierCurve3:class jO extends Lr{constructor(e=new T,t=new T,i=new T){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new T){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(z0(e,r.x,s.x,a.x),z0(e,r.y,s.y,a.y),z0(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:$O});class rze extends Lr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);return e.equals(t)||this.curves.push(new pf[!0===e.isVector2?"LineCurve":"LineCurve3"](t,e)),this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],c=o.getLength();return o.getPointAt(0===c?0:1-a/c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],c=a.getPoints(a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e);for(let l=0;l<c.length;l++){const u=c[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new pf[r.type]).fromJSON(r))}return this}}class mf extends rze{constructor(e){super(),this.type="Path",this.currentPoint=new Z,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new GO(this.currentPoint.clone(),new Z(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new WO(this.currentPoint.clone(),new Z(e,t),new Z(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new BO(this.currentPoint.clone(),new Z(e,t),new Z(i,r),new Z(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new $O(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,c){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,a,o,c),this}absellipse(e,t,i,r,s,a,o,c){const l=new Pg(e,t,i,r,s,a,o,c);if(this.curves.length>0){const f=l.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ua extends lt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];function c(M,y,_,C){const b=C+1,x=[];for(let S=0;S<=b;S++){x[S]=[];const w=M.clone().lerp(_,S/b),A=y.clone().lerp(_,S/b),I=b-S;for(let k=0;k<=I;k++)x[S][k]=0===k&&S===b?w:w.clone().lerp(A,k/I)}for(let S=0;S<b;S++)for(let w=0;w<2*(b-S)-1;w++){const A=Math.floor(w/2);w%2==0?(h(x[S][A+1]),h(x[S+1][A]),h(x[S][A])):(h(x[S][A+1]),h(x[S+1][A+1]),h(x[S+1][A]))}}function h(M){s.push(M.x,M.y,M.z)}function d(M,y){const _=3*M;y.x=e[_+0],y.y=e[_+1],y.z=e[_+2]}function m(M,y,_,C){C<0&&1===M.x&&(a[y]=M.x-1),0===_.x&&0===_.z&&(a[y]=C/2/Math.PI+.5)}function v(M){return Math.atan2(M.z,-M.x)}function g(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}(function o(M){const y=new T,_=new T,C=new T;for(let b=0;b<t.length;b+=3)d(t[b+0],y),d(t[b+1],_),d(t[b+2],C),c(y,_,C,M)})(r),function l(M){const y=new T;for(let _=0;_<s.length;_+=3)y.x=s[_+0],y.y=s[_+1],y.z=s[_+2],y.normalize().multiplyScalar(M),s[_+0]=y.x,s[_+1]=y.y,s[_+2]=y.z}(i),function u(){const M=new T;for(let y=0;y<s.length;y+=3){M.x=s[y+0],M.y=s[y+1],M.z=s[y+2];const _=v(M)/2/Math.PI+.5,C=g(M)/Math.PI+.5;a.push(_,1-C)}(function p(){const M=new T,y=new T,_=new T,C=new T,b=new Z,x=new Z,S=new Z;for(let w=0,A=0;w<s.length;w+=9,A+=6){M.set(s[w+0],s[w+1],s[w+2]),y.set(s[w+3],s[w+4],s[w+5]),_.set(s[w+6],s[w+7],s[w+8]),b.set(a[A+0],a[A+1]),x.set(a[A+2],a[A+3]),S.set(a[A+4],a[A+5]),C.copy(M).add(y).add(_).divideScalar(3);const I=v(C);m(b,A+0,M,I),m(x,A+2,y,I),m(S,A+4,_,I)}})(),function f(){for(let M=0;M<a.length;M+=6){const y=a[M+0],_=a[M+2],C=a[M+4],b=Math.max(y,_,C),x=Math.min(y,_,C);b>.9&&x<.1&&(y<.2&&(a[M+0]+=1),_<.2&&(a[M+2]+=1),C<.2&&(a[M+4]+=1))}}()}(),this.setAttribute("position",new De(s,3)),this.setAttribute("normal",new De(s.slice(),3)),this.setAttribute("uv",new De(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ua(e.vertices,e.indices,e.radius,e.details)}}const vf=new T,Mf=new T,$g=new T,yf=new a1;class qO extends lt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const r=Math.pow(10,4),s=Math.cos(ea*t),a=e.getIndex(),o=e.getAttribute("position"),c=a?a.count:o.count,l=[0,0,0],u=["a","b","c"],f=new Array(3),h={},d=[];for(let p=0;p<c;p+=3){a?(l[0]=a.getX(p),l[1]=a.getX(p+1),l[2]=a.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);const{a:m,b:v,c:g}=yf;if(m.fromBufferAttribute(o,l[0]),v.fromBufferAttribute(o,l[1]),g.fromBufferAttribute(o,l[2]),yf.getNormal($g),f[0]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,f[1]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,f[0]!==f[1]&&f[1]!==f[2]&&f[2]!==f[0])for(let M=0;M<3;M++){const y=(M+1)%3,_=f[M],C=f[y],b=yf[u[M]],x=yf[u[y]],S=`${_}_${C}`,w=`${C}_${_}`;w in h&&h[w]?($g.dot(h[w].normal)<=s&&(d.push(b.x,b.y,b.z),d.push(x.x,x.y,x.z)),h[w]=null):S in h||(h[S]={index0:l[M],index1:l[y],normal:$g.clone()})}}for(const p in h)if(h[p]){const{index0:m,index1:v}=h[p];vf.fromBufferAttribute(o,m),Mf.fromBufferAttribute(o,v),d.push(vf.x,vf.y,vf.z),d.push(Mf.x,Mf.y,Mf.z)}this.setAttribute("position",new De(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class as extends mf{constructor(e){super(e),this.uuid=r1(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new mf).fromJSON(r))}return this}}function XO(n,e,t,i,r){let s,a;if(r===function Cze(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)a=KO(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=KO(s,n[s],n[s+1],a);return a&&_f(a,a.next)&&(R0(a),a=a.next),a}function fa(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!_f(t,t.next)&&0!==an(t.prev,t,t.next))t=t.next;else{if(R0(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function N0(n,e,t,i,r,s,a){if(!n)return;!a&&s&&function mze(n,e,t,i){let r=n;do{0===r.z&&(r.z=qg(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function gze(n){let e,t,i,r,s,a,o,c,l=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<l&&(o++,i=i.nextZ,i);e++);for(c=l;o>0||c>0&&i;)0!==o&&(0===c||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,l*=2}while(a>1)}(r)}(n,i,r,s);let c,l,o=n;for(;n.prev!==n.next;)if(c=n.prev,l=n.next,s?oze(n,i,r,s):aze(n))e.push(c.i/t|0),e.push(n.i/t|0),e.push(l.i/t|0),R0(n),n=l.next,o=l.next;else if((n=l)===o){a?1===a?N0(n=cze(fa(n),e,t),e,t,i,r,s,2):2===a&&lze(n,e,t,i,r,s):N0(fa(n),e,t,i,r,s,1);break}}function aze(n){const e=n.prev,t=n,i=n.next;if(an(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,o=e.y,c=t.y,l=i.y,u=r<s?r<a?r:a:s<a?s:a,f=o<c?o<l?o:l:c<l?c:l,h=r>s?r>a?r:a:s>a?s:a,d=o>c?o>l?o:l:c>l?c:l;let p=i.next;for(;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=f&&p.y<=d&&Uc(r,o,s,c,a,l,p.x,p.y)&&an(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function oze(n,e,t,i){const r=n.prev,s=n,a=n.next;if(an(r,s,a)>=0)return!1;const o=r.x,c=s.x,l=a.x,u=r.y,f=s.y,h=a.y,d=o<c?o<l?o:l:c<l?c:l,p=u<f?u<h?u:h:f<h?f:h,m=o>c?o>l?o:l:c>l?c:l,v=u>f?u>h?u:h:f>h?f:h,g=qg(d,p,e,t,i),M=qg(m,v,e,t,i);let y=n.prevZ,_=n.nextZ;for(;y&&y.z>=g&&_&&_.z<=M;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=v&&y!==r&&y!==a&&Uc(o,u,c,f,l,h,y.x,y.y)&&an(y.prev,y,y.next)>=0||(y=y.prevZ,_.x>=d&&_.x<=m&&_.y>=p&&_.y<=v&&_!==r&&_!==a&&Uc(o,u,c,f,l,h,_.x,_.y)&&an(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;y&&y.z>=g;){if(y.x>=d&&y.x<=m&&y.y>=p&&y.y<=v&&y!==r&&y!==a&&Uc(o,u,c,f,l,h,y.x,y.y)&&an(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;_&&_.z<=M;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=v&&_!==r&&_!==a&&Uc(o,u,c,f,l,h,_.x,_.y)&&an(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function cze(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!_f(r,s)&&YO(r,i,i.next,s)&&I0(r,s)&&I0(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),R0(i),R0(i.next),i=n=s),i=i.next}while(i!==n);return fa(i)}function lze(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Mze(a,o)){let c=ZO(a,o);return a=fa(a,a.next),c=fa(c,c.next),N0(a,e,t,i,r,s,0),void N0(c,e,t,i,r,s,0)}o=o.next}a=a.next}while(a!==n)}function fze(n,e){return n.x-e.x}function hze(n,e){const t=function dze(n,e){let r,t=e,i=-1/0;const s=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const h=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>i&&(i=h,r=t.x<t.next.x?t:t.next,h===s))return r}t=t.next}while(t!==e);if(!r)return null;const o=r,c=r.x,l=r.y;let f,u=1/0;t=r;do{s>=t.x&&t.x>=c&&s!==t.x&&Uc(a<l?s:i,a,c,l,a<l?i:s,a,t.x,t.y)&&(f=Math.abs(a-t.y)/(s-t.x),I0(t,n)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&pze(r,t)))&&(r=t,u=f)),t=t.next}while(t!==o);return r}(n,e);if(!t)return e;const i=ZO(t,n);return fa(i,i.next),fa(t,t.next)}function pze(n,e){return an(n.prev,n,e.prev)<0&&an(e.next,n,n.next)<0}function qg(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-t)*r|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function vze(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function Uc(n,e,t,i,r,s,a,o){return(r-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(i-o)}function Mze(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function yze(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&YO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(I0(n,e)&&I0(e,n)&&function _ze(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(an(n.prev,n,e.prev)||an(n,e.prev,e))||_f(n,e)&&an(n.prev,n,n.next)>0&&an(e.prev,e,e.next)>0)}function an(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function _f(n,e){return n.x===e.x&&n.y===e.y}function YO(n,e,t,i){const r=wf(an(n,e,t)),s=wf(an(n,e,i)),a=wf(an(t,i,n)),o=wf(an(t,i,e));return!!(r!==s&&a!==o||0===r&&Cf(n,t,e)||0===s&&Cf(n,i,e)||0===a&&Cf(t,n,i)||0===o&&Cf(t,e,i))}function Cf(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function wf(n){return n>0?1:n<0?-1:0}function I0(n,e){return an(n.prev,n,n.next)<0?an(n,e,n.next)>=0&&an(n,n.prev,e)>=0:an(n,e,n.prev)<0||an(n,n.next,e)<0}function ZO(n,e){const t=new Xg(n.i,n.x,n.y),i=new Xg(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function KO(n,e,t,i){const r=new Xg(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function R0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Xg(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class g2{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return g2.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];JO(e),QO(i,e);let a=e.length;t.forEach(JO);for(let c=0;c<t.length;c++)r.push(a),a+=t[c].length,QO(i,t[c]);const o=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=XO(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,c,l,u,f,h,d;if(i&&(s=function uze(n,e,t,i){const r=[];let s,a,o,c,l;for(s=0,a=e.length;s<a;s++)o=e[s]*i,c=s<a-1?e[s+1]*i:n.length,l=XO(n,o,c,i,!1),l===l.next&&(l.steiner=!0),r.push(vze(l));for(r.sort(fze),s=0;s<r.length;s++)t=hze(r[s],t);return t}(n,e,s,t)),n.length>80*t){o=l=n[0],c=u=n[1];for(let p=t;p<r;p+=t)f=n[p],h=n[p+1],f<o&&(o=f),h<c&&(c=h),f>l&&(l=f),h>u&&(u=h);d=Math.max(l-o,u-c),d=0!==d?32767/d:0}return N0(s,a,t,o,c,d,0),a}(i,r);for(let c=0;c<o.length;c+=3)s.push(o.slice(c,c+3));return s}}function JO(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function QO(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class xf extends lt{constructor(e=new as([new Z(.5,.5),new Z(-.5,.5),new Z(-.5,-.5),new Z(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,c=e.length;o<c;o++)a(e[o]);function a(o){const c=[],l=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,f=void 0!==t.depth?t.depth:1;let h=void 0===t.bevelEnabled||t.bevelEnabled,d=void 0!==t.bevelThickness?t.bevelThickness:.2,p=void 0!==t.bevelSize?t.bevelSize:d-.1,m=void 0!==t.bevelOffset?t.bevelOffset:0,v=void 0!==t.bevelSegments?t.bevelSegments:3;const g=t.extrudePath,M=void 0!==t.UVGenerator?t.UVGenerator:wze;let y,C,b,x,S,_=!1;g&&(y=g.getSpacedPoints(u),_=!0,h=!1,C=g.computeFrenetFrames(u,!1),b=new T,x=new T,S=new T),h||(v=0,d=0,p=0,m=0);const w=o.extractPoints(l);let A=w.shape;const I=w.holes;if(!g2.isClockWise(A)){A=A.reverse();for(let D=0,ge=I.length;D<ge;D++){const Q=I[D];g2.isClockWise(Q)&&(I[D]=Q.reverse())}}const U=g2.triangulateShape(A,I),z=A;for(let D=0,ge=I.length;D<ge;D++)A=A.concat(I[D]);function P(D,ge,Q){return ge||console.error("THREE.ExtrudeGeometry: vec does not exist"),D.clone().addScaledVector(ge,Q)}const O=A.length,G=U.length;function ee(D,ge,Q){let fe,ne,Fe;const Se=D.x-ge.x,Le=D.y-ge.y,qe=Q.x-D.x,vt=Q.y-D.y,tn=Se*Se+Le*Le;if(Math.abs(Se*vt-Le*qe)>Number.EPSILON){const E=Math.sqrt(tn),W=Math.sqrt(qe*qe+vt*vt),le=ge.x-Le/E,re=ge.y+Se/E,de=((Q.x-vt/W-le)*vt-(Q.y+qe/W-re)*qe)/(Se*vt-Le*qe);fe=le+Se*de-D.x,ne=re+Le*de-D.y;const we=fe*fe+ne*ne;if(we<=2)return new Z(fe,ne);Fe=Math.sqrt(we/2)}else{let E=!1;Se>Number.EPSILON?qe>Number.EPSILON&&(E=!0):Se<-Number.EPSILON?qe<-Number.EPSILON&&(E=!0):Math.sign(Le)===Math.sign(vt)&&(E=!0),E?(fe=-Le,ne=Se,Fe=Math.sqrt(tn)):(fe=Se,ne=Le,Fe=Math.sqrt(tn/2))}return new Z(fe/Fe,ne/Fe)}const j=[];for(let D=0,ge=z.length,Q=ge-1,fe=D+1;D<ge;D++,Q++,fe++)Q===ge&&(Q=0),fe===ge&&(fe=0),j[D]=ee(z[D],z[Q],z[fe]);const J=[];let R,$=j.concat();for(let D=0,ge=I.length;D<ge;D++){const Q=I[D];R=[];for(let fe=0,ne=Q.length,Fe=ne-1,Se=fe+1;fe<ne;fe++,Fe++,Se++)Fe===ne&&(Fe=0),Se===ne&&(Se=0),R[fe]=ee(Q[fe],Q[Fe],Q[Se]);J.push(R),$=$.concat(R)}for(let D=0;D<v;D++){const ge=D/v,Q=d*Math.cos(ge*Math.PI/2),fe=p*Math.sin(ge*Math.PI/2)+m;for(let ne=0,Fe=z.length;ne<Fe;ne++){const Se=P(z[ne],j[ne],fe);ze(Se.x,Se.y,-Q)}for(let ne=0,Fe=I.length;ne<Fe;ne++){const Se=I[ne];R=J[ne];for(let Le=0,qe=Se.length;Le<qe;Le++){const vt=P(Se[Le],R[Le],fe);ze(vt.x,vt.y,-Q)}}}const ae=p+m;for(let D=0;D<O;D++){const ge=h?P(A[D],$[D],ae):A[D];_?(x.copy(C.normals[0]).multiplyScalar(ge.x),b.copy(C.binormals[0]).multiplyScalar(ge.y),S.copy(y[0]).add(x).add(b),ze(S.x,S.y,S.z)):ze(ge.x,ge.y,0)}for(let D=1;D<=u;D++)for(let ge=0;ge<O;ge++){const Q=h?P(A[ge],$[ge],ae):A[ge];_?(x.copy(C.normals[D]).multiplyScalar(Q.x),b.copy(C.binormals[D]).multiplyScalar(Q.y),S.copy(y[D]).add(x).add(b),ze(S.x,S.y,S.z)):ze(Q.x,Q.y,f/u*D)}for(let D=v-1;D>=0;D--){const ge=D/v,Q=d*Math.cos(ge*Math.PI/2),fe=p*Math.sin(ge*Math.PI/2)+m;for(let ne=0,Fe=z.length;ne<Fe;ne++){const Se=P(z[ne],j[ne],fe);ze(Se.x,Se.y,f+Q)}for(let ne=0,Fe=I.length;ne<Fe;ne++){const Se=I[ne];R=J[ne];for(let Le=0,qe=Se.length;Le<qe;Le++){const vt=P(Se[Le],R[Le],fe);_?ze(vt.x,vt.y+y[u-1].y,y[u-1].x+Q):ze(vt.x,vt.y,f+Q)}}}function xe(D,ge){let Q=D.length;for(;--Q>=0;){const fe=Q;let ne=Q-1;ne<0&&(ne=D.length-1);for(let Fe=0,Se=u+2*v;Fe<Se;Fe++){const Le=O*Fe,qe=O*(Fe+1);pt(ge+fe+Le,ge+ne+Le,ge+ne+qe,ge+fe+qe)}}}function ze(D,ge,Q){c.push(D),c.push(ge),c.push(Q)}function Te(D,ge,Q){at(D),at(ge),at(Q);const fe=r.length/3,ne=M.generateTopUV(i,r,fe-3,fe-2,fe-1);Pe(ne[0]),Pe(ne[1]),Pe(ne[2])}function pt(D,ge,Q,fe){at(D),at(ge),at(fe),at(ge),at(Q),at(fe);const ne=r.length/3,Fe=M.generateSideWallUV(i,r,ne-6,ne-3,ne-2,ne-1);Pe(Fe[0]),Pe(Fe[1]),Pe(Fe[3]),Pe(Fe[1]),Pe(Fe[2]),Pe(Fe[3])}function at(D){r.push(c[3*D+0]),r.push(c[3*D+1]),r.push(c[3*D+2])}function Pe(D){s.push(D.x),s.push(D.y)}(function se(){const D=r.length/3;if(h){let ge=0,Q=O*ge;for(let fe=0;fe<G;fe++){const ne=U[fe];Te(ne[2]+Q,ne[1]+Q,ne[0]+Q)}ge=u+2*v,Q=O*ge;for(let fe=0;fe<G;fe++){const ne=U[fe];Te(ne[0]+Q,ne[1]+Q,ne[2]+Q)}}else{for(let ge=0;ge<G;ge++){const Q=U[ge];Te(Q[2],Q[1],Q[0])}for(let ge=0;ge<G;ge++){const Q=U[ge];Te(Q[0]+O*u,Q[1]+O*u,Q[2]+O*u)}}i.addGroup(D,r.length/3-D,0)})(),function ce(){const D=r.length/3;let ge=0;xe(z,ge),ge+=z.length;for(let Q=0,fe=I.length;Q<fe;Q++){const ne=I[Q];xe(ne,ge),ge+=ne.length}i.addGroup(D,r.length/3-D,1)}()}this.setAttribute("position",new De(r,3)),this.setAttribute("uv",new De(s,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function xze(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new pf[r.type]).fromJSON(r)),new xf(i,e.options)}}const wze={generateTopUV:function(n,e,t,i,r){const o=e[3*i],c=e[3*i+1],l=e[3*r],u=e[3*r+1];return[new Z(e[3*t],e[3*t+1]),new Z(o,c),new Z(l,u)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[3*t],o=e[3*t+1],c=e[3*t+2],l=e[3*i],u=e[3*i+1],f=e[3*i+2],h=e[3*r],d=e[3*r+1],p=e[3*r+2],m=e[3*s],v=e[3*s+1],g=e[3*s+2];return Math.abs(o-u)<Math.abs(a-l)?[new Z(a,1-c),new Z(l,1-f),new Z(h,1-p),new Z(m,1-g)]:[new Z(o,1-c),new Z(u,1-f),new Z(d,1-p),new Z(v,1-g)]}};class bf extends ua{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bf(e.radius,e.detail)}}class Af extends lt{constructor(e=.5,t=1,i=32,r=1,s=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i);const o=[],c=[],l=[],u=[];let f=e;const h=(t-e)/(r=Math.max(1,r)),d=new T,p=new Z;for(let m=0;m<=r;m++){for(let v=0;v<=i;v++){const g=s+v/i*a;d.x=f*Math.cos(g),d.y=f*Math.sin(g),c.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,u.push(p.x,p.y)}f+=h}for(let m=0;m<r;m++){const v=m*(i+1);for(let g=0;g<i;g++){const M=g+v,_=M+i+1,C=M+i+2,b=M+1;o.push(M,_,b),o.push(_,C,b)}}this.setIndex(o),this.setAttribute("position",new De(c,3)),this.setAttribute("normal",new De(l,3)),this.setAttribute("uv",new De(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Af(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Bc extends lt{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(a+o,Math.PI);let l=0;const u=[],f=new T,h=new T,d=[],p=[],m=[],v=[];for(let g=0;g<=i;g++){const M=[],y=g/i;let _=0;0===g&&0===a?_=.5/t:g===i&&c===Math.PI&&(_=-.5/t);for(let C=0;C<=t;C++){const b=C/t;f.x=-e*Math.cos(r+b*s)*Math.sin(a+y*o),f.y=e*Math.cos(a+y*o),f.z=e*Math.sin(r+b*s)*Math.sin(a+y*o),p.push(f.x,f.y,f.z),h.copy(f).normalize(),m.push(h.x,h.y,h.z),v.push(b+_,1-y),M.push(l++)}u.push(M)}for(let g=0;g<i;g++)for(let M=0;M<t;M++){const _=u[g][M],C=u[g+1][M],b=u[g+1][M+1];(0!==g||a>0)&&d.push(u[g][M+1],_,b),(g!==i-1||c<Math.PI)&&d.push(_,C,b)}this.setIndex(d),this.setAttribute("position",new De(p,3)),this.setAttribute("normal",new De(m,3)),this.setAttribute("uv",new De(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ha extends Ui{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new K(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new K(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Hr extends ha{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Z(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new K(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new K(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new K(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class os extends Ui{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new K(16777215),this.specular=new K(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new K(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=g8,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class nF extends Ui{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Ef extends Ui{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new K(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new K(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=g8,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function da(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function rF(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function ev(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let c=0;c!==e;++c)r[a++]=n[o+c]}return r}function tv(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let a=s[i];if(void 0!==a)if(Array.isArray(a))do{a=s[i],void 0!==a&&(e.push(s.time),t.push.apply(t,a)),s=n[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[i],void 0!==a&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{a=s[i],void 0!==a&&(e.push(s.time),t.push(a)),s=n[r++]}while(void 0!==s)}class P0{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(e>=s)break e;{const o=t[1];e<o&&(i=2,s=o);for(let c=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0}}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Dze extends P0{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],c=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:s=e,o=2*t-i;break;case 2402:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(void 0===c)switch(this.getSettings_().endingEnd){case 2401:a=e,c=2*i-t;break;case 2402:a=1,c=i+r[1]-r[0];break;default:a=e-1,c=t}const l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(c-i),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,l=c-o,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(i-t)/(r-t),m=p*p,v=m*p,g=-h*v+2*h*m-h*p,M=(1+h)*v+(-1.5-2*h)*m+(-.5+h)*p+1,y=(-1-d)*v+(1.5+d)*m+.5*p,_=d*v-d*m;for(let C=0;C!==o;++C)s[C]=g*a[u+C]+M*a[l+C]+y*a[c+C]+_*a[f+C];return s}}class sF extends P0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=e*o,l=c-o,u=(i-t)/(r-t),f=1-u;for(let h=0;h!==o;++h)s[h]=a[l+h]*f+a[c+h]*u;return s}}class Nze extends P0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class zr{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=da(t,this.TimeBufferType),this.values=da(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:da(e.times,Array),values:da(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Nze(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new sF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Dze(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case p0:t=this.InterpolantFactoryMethodDiscrete;break;case ac:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return p0;case this.InterpolantFactoryMethodLinear:return ac;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==a&&i[a]>t;)--a;if(++a,0!==s||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const c=i[o];if("number"==typeof c&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,c),e=!1;break}if(null!==a&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,c,a),e=!1;break}a=c}if(void 0!==r&&function iF(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let o=0,c=r.length;o!==c;++o){const l=r[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let a=1;for(let o=1;o<s;++o){let c=!1;const l=e[o];if(l!==e[o+1]&&(1!==o||l!==e[0]))if(r)c=!0;else{const f=o*i,h=f-i,d=f+i;for(let p=0;p!==i;++p){const m=t[f+p];if(m!==t[h+p]||m!==t[d+p]){c=!0;break}}}if(c){if(o!==a){e[a]=e[o];const f=o*i,h=a*i;for(let d=0;d!==i;++d)t[h+d]=t[f+d]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,c=a*i,l=0;l!==i;++l)t[c+l]=t[o+l];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}zr.prototype.TimeBufferType=Float32Array,zr.prototype.ValueBufferType=Float32Array,zr.prototype.DefaultInterpolation=ac;class Gc extends zr{}Gc.prototype.ValueTypeName="bool",Gc.prototype.ValueBufferType=Array,Gc.prototype.DefaultInterpolation=p0,Gc.prototype.InterpolantFactoryMethodLinear=void 0,Gc.prototype.InterpolantFactoryMethodSmooth=void 0;class aF extends zr{}aF.prototype.ValueTypeName="color";class Wc extends zr{}Wc.prototype.ValueTypeName="number";class Ize extends P0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=(i-t)/(r-t);let l=e*o;for(let u=l+o;l!==u;l+=4)Xn.slerpFlat(s,0,a,l-o,a,l,c);return s}}class pa extends zr{InterpolantFactoryMethodLinear(e){return new Ize(this.times,this.values,this.getValueSize(),e)}}pa.prototype.ValueTypeName="quaternion",pa.prototype.DefaultInterpolation=ac,pa.prototype.InterpolantFactoryMethodSmooth=void 0;class jc extends zr{}jc.prototype.ValueTypeName="string",jc.prototype.ValueBufferType=Array,jc.prototype.DefaultInterpolation=p0,jc.prototype.InterpolantFactoryMethodLinear=void 0,jc.prototype.InterpolantFactoryMethodSmooth=void 0;class $c extends zr{}$c.prototype.ValueTypeName="vector";class k0{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=r1(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(Pze(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(zr.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let c=[],l=[];c.push((o+s-1)%s,o,(o+1)%s),l.push(0,1,0);const u=rF(c);c=ev(c,1,u),l=ev(l,1,u),!r&&0===c[0]&&(c.push(s),l.push(l[0])),a.push(new Wc(".morphTargetInfluences["+t[o].name+"]",c,l).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,c=e.length;o<c;o++){const l=e[o],u=l.name.match(s);if(u&&u.length>1){const f=u[1];let h=r[f];h||(r[f]=h=[]),h.push(l)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,h,d,p,m){if(0!==d.length){const v=[],g=[];tv(d,v,g,p),0!==v.length&&m.push(new f(h,v,g))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let c=e.length||-1;const l=e.hierarchy||[];for(let f=0;f<l.length;f++){const h=l[f].keys;if(h&&0!==h.length)if(h[0].morphTargets){const d={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let m=0;m<h[p].morphTargets.length;m++)d[h[p].morphTargets[m]]=-1;for(const m in d){const v=[],g=[];for(let M=0;M!==h[p].morphTargets.length;++M){const y=h[p];v.push(y.time),g.push(y.morphTarget===m?1:0)}r.push(new Wc(".morphTargetInfluence["+m+"]",v,g))}c=d.length*a}else{const d=".bones["+t[f].name+"]";i($c,d+".position",h,"pos",r),i(pa,d+".quaternion",h,"rot",r),i($c,d+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,c,r,o)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Pze(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Rze(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wc;case"vector":case"vector2":case"vector3":case"vector4":return $c;case"color":return aF;case"quaternion":return pa;case"bool":case"boolean":return Gc;case"string":return jc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];tv(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const qc={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class oF{constructor(e,t,i){const r=this;let c,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){o++,!1===s&&void 0!==r.onStart&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,void 0!==r.onProgress&&r.onProgress(u,a,o),a===o&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return c?c(u):u},this.setURLModifier=function(u){return c=u,this},this.addHandler=function(u,f){return l.push(u,f),this},this.removeHandler=function(u){const f=l.indexOf(u);return-1!==f&&l.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=l.length;f<h;f+=2){const d=l[f],p=l[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return p}return null}}}const kze=new oF;let ma=(()=>{class n{constructor(t){this.manager=void 0!==t?t:kze,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(s,a){r.load(t,s,i,a)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();const v2={};class Oze extends Error{constructor(e,t){super(e),this.response=t}}class c1 extends ma{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=qc.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==v2[e])return void v2[e].push({onLoad:t,onProgress:i,onError:r});v2[e]=[],v2[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,c=this.responseType;fetch(a).then(l=>{if(200===l.status||0===l.status){if(0===l.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===l.body||void 0===l.body.getReader)return l;const u=v2[e],f=l.body.getReader(),h=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=h?parseInt(h):0,p=0!==d;let m=0;const v=new ReadableStream({start(g){!function M(){f.read().then(({done:y,value:_})=>{if(y)g.close();else{m+=_.byteLength;const C=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:d});for(let b=0,x=u.length;b<x;b++){const S=u[b];S.onProgress&&S.onProgress(C)}g.enqueue(_),M()}})}()}});return new Response(v)}throw new Oze(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(c){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>(new DOMParser).parseFromString(u,o));case"json":return l.json();default:if(void 0===o)return l.text();{const f=/charset="?([^;"\s]*)"?/i.exec(o),h=f&&f[1]?f[1].toLowerCase():void 0,d=new TextDecoder(h);return l.arrayBuffer().then(p=>d.decode(p))}}}).then(l=>{qc.add(e,l);const u=v2[e];delete v2[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onLoad&&d.onLoad(l)}}).catch(l=>{const u=v2[e];if(void 0===u)throw this.manager.itemError(e),l;delete v2[e];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Tf extends ma{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=qc.get(e);if(void 0!==a)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=g0("img");function c(){u(),qc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function l(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",c,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",c,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class nv extends ma{constructor(e){super(e)}load(e,t,i,r){const s=new T1,a=new Tf(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class Lf extends _n{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new K(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class iv extends Lf{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.groundColor=new K(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const rv=new $e,cF=new T,lF=new T;class sv{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Z(512,512),this.map=null,this.mapPass=null,this.matrix=new $e,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cg,this._frameExtents=new Z(1,1),this._viewportCount=1,this._viewports=[new It(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;cF.setFromMatrixPosition(e.matrixWorld),t.position.copy(cF),lF.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(lF),t.updateMatrixWorld(),rv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rv),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(rv)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Fze extends sv{constructor(){super(new Wn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*lc*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class av extends Lf{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new Fze}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const uF=new $e,O0=new T,ov=new T;class Uze extends sv{constructor(){super(new Wn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Z(4,2),this._viewportCount=6,this._viewports=[new It(2,1,1,1),new It(0,1,1,1),new It(3,1,1,1),new It(1,1,1,1),new It(3,0,1,1),new It(1,0,1,1)],this._cubeDirections=[new T(1,0,0),new T(-1,0,0),new T(0,0,1),new T(0,0,-1),new T(0,1,0),new T(0,-1,0)],this._cubeUps=[new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,1,0),new T(0,0,1),new T(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),O0.setFromMatrixPosition(e.matrixWorld),i.position.copy(O0),ov.copy(i.position),ov.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(ov),i.updateMatrixWorld(),r.makeTranslation(-O0.x,-O0.y,-O0.z),uF.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uF)}}class cv extends Lf{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Uze}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Bze extends sv{constructor(){super(new Z8(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Hf extends Lf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(_n.DEFAULT_UP),this.updateMatrix(),this.target=new _n,this.shadow=new Bze}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class F0{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class qze extends lt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class fF extends ma{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new c1(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(d,p){if(void 0!==t[p])return t[p];const v=d.interleavedBuffers[p],g=function s(d,p){if(void 0!==i[p])return i[p];const g=new Uint32Array(d.arrayBuffers[p]).buffer;return i[p]=g,g}(d,v.buffer),M=fc(v.type,g),y=new Lg(M,v.stride);return y.uuid=v.uuid,t[p]=y,y}const a=e.isInstancedBufferGeometry?new qze:new lt,o=e.data.index;if(void 0!==o){const d=fc(o.type,o.array);a.setIndex(new Jt(d,1))}const c=e.data.attributes;for(const d in c){const p=c[d];let m;if(p.isInterleavedBufferAttribute){const v=r(e.data,p.data);m=new ca(v,p.itemSize,p.offset,p.normalized)}else{const v=fc(p.type,p.array);m=new(p.isInstancedBufferAttribute?T0:Jt)(v,p.itemSize,p.normalized)}void 0!==p.name&&(m.name=p.name),void 0!==p.usage&&m.setUsage(p.usage),void 0!==p.updateRange&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),a.setAttribute(d,m)}const l=e.data.morphAttributes;if(l)for(const d in l){const p=l[d],m=[];for(let v=0,g=p.length;v<g;v++){const M=p[v];let y;if(M.isInterleavedBufferAttribute){const _=r(e.data,M.data);y=new ca(_,M.itemSize,M.offset,M.normalized)}else{const _=fc(M.type,M.array);y=new Jt(_,M.itemSize,M.normalized)}void 0!==M.name&&(y.name=M.name),m.push(y)}a.morphAttributes[d]=m}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==f)for(let d=0,p=f.length;d!==p;++d){const m=f[d];a.addGroup(m.start,m.count,m.materialIndex)}const h=e.data.boundingSphere;if(void 0!==h){const d=new T;void 0!==h.center&&d.fromArray(h.center),a.boundingSphere=new X1(d,h.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Yze extends ma{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=qc.get(e);if(void 0!==a)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){qc.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class vF{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=MF(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=MF();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function MF(){return(typeof performance>"u"?Date:performance).now()}const uv="\\[\\]\\.:\\/",Qze=new RegExp("["+uv+"]","g"),fv="[^"+uv+"]",eVe="[^"+uv.replace("\\.","")+"]",sVe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",fv)+/(WCOD+)?/.source.replace("WCOD",eVe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fv)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fv)+"$"),aVe=["material","materials","bones","map"];class oVe{constructor(e,t,i){const r=i||$t.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let $t=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Qze,"")}static parseTrackName(t){const i=sVe.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const a=r.nodeName.substring(s+1);-1!==aVe.indexOf(a)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=a)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(a){for(let o=0;o<a.length;o++){const c=a[o];if(c.name===i||c.uuid===i)return c;const l=r(c.children);if(l)return l}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let a=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===u){u=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const o=t[s];if(void 0===o)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let c=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=a}else void 0!==o.fromArray&&void 0!==o.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=oVe,n})();$t.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},$t.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},$t.prototype.GetterByBindingType=[$t.prototype._getValue_direct,$t.prototype._getValue_array,$t.prototype._getValue_arrayElement,$t.prototype._getValue_toArray],$t.prototype.SetterByBindingTypeAndVersioning=[[$t.prototype._setValue_direct,$t.prototype._setValue_direct_setNeedsUpdate,$t.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_array,$t.prototype._setValue_array_setNeedsUpdate,$t.prototype._setValue_array_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_arrayElement,$t.prototype._setValue_arrayElement_setNeedsUpdate,$t.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[$t.prototype._setValue_fromArray,$t.prototype._setValue_fromArray_setNeedsUpdate,$t.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class hv{constructor(e,t,i=0,r=1/0){this.ray=new yc(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new fg,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return dv(e,this,i,t),i.sort(wF),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)dv(e[r],this,i,t);return i.sort(wF),i}}function wF(n,e){return n.distance-e.distance}function dv(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===i){const r=n.children;for(let s=0,a=r.length;s<a;s++)dv(r[s],e,t,!0)}}class xF{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(dn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}function U0(n){return U0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U0(n)}function ut(n,e,t){return(e=function dVe(n){var e=function hVe(n,e){if("object"!==U0(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!==U0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===U0(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"157"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="157");var DF=class{constructor(e,t){ut(this,"target",void 0),ut(this,"name",void 0),ut(this,"intersected",void 0),ut(this,"wasIntersected",!1),ut(this,"distance",void 0),this.target=e,this.name=t,this.intersected=!1,this.distance=0}},Gi=class{constructor(e,t=null){ut(this,"type",void 0),ut(this,"cancelBubble",void 0),ut(this,"originalEvent",void 0),ut(this,"coords",new Z(0,0)),ut(this,"distance",0),ut(this,"intersected",!1),this.cancelBubble=!1,this.type=e,this.originalEvent=t}stopPropagation(){this.cancelBubble=!0}},pVe=class{constructor(e,t,i,r){ut(this,"renderer",void 0),ut(this,"camera",void 0),ut(this,"domElement",void 0),ut(this,"bindEventsOnBodyElement",void 0),ut(this,"autoAdd",void 0),ut(this,"scene",void 0),ut(this,"mouse",void 0),ut(this,"supportsPointerEvents",void 0),ut(this,"interactiveObjects",void 0),ut(this,"closestObject",void 0),ut(this,"raycaster",void 0),ut(this,"treatTouchEventsAsMouseEvents",void 0),ut(this,"dispose",()=>{this.domElement.removeEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("pointermove",this.onDocumentPointerMove):this.domElement.removeEventListener("pointermove",this.onDocumentPointerMove),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("mousemove",this.onDocumentMouseMove):this.domElement.removeEventListener("mousemove",this.onDocumentMouseMove),this.domElement.removeEventListener("mousedown",this.onMouseDown),this.domElement.removeEventListener("mouseup",this.onMouseUp),this.domElement.removeEventListener("touchstart",this.onTouchStart),this.domElement.removeEventListener("touchmove",this.onTouchMove),this.domElement.removeEventListener("touchend",this.onTouchEnd)}),ut(this,"add",(s,a=[])=>{if(s&&!this.interactiveObjects.find(o=>o.target===s))if(a.length>0)a.forEach(o=>{let c=s.getObjectByName(o);if(c){let l=new DF(c,o);this.interactiveObjects.push(l)}});else{let o=new DF(s,s.name);this.interactiveObjects.push(o)}}),ut(this,"remove",(s,a=[])=>{!s||(a.length>0?a.forEach(o=>{let c=s.getObjectByName(o);c&&(this.interactiveObjects=this.interactiveObjects.filter(l=>l.target!==c))}):this.interactiveObjects=this.interactiveObjects.filter(o=>o.target!==s))}),ut(this,"update",()=>{this.raycaster.setFromCamera(this.mouse,this.camera),this.interactiveObjects.forEach(c=>{c.target&&this.checkIntersection(c)}),this.interactiveObjects.sort(function(c,l){return c.distance-l.distance});let a,o,s=this.interactiveObjects.find(c=>c.intersected)??null;if(s!=this.closestObject){if(this.closestObject){let c=new Gi("mouseout");this.dispatch(this.closestObject,c)}if(s){let c=new Gi("mouseover");this.dispatch(s,c)}this.closestObject=s}this.interactiveObjects.forEach(c=>{!c.intersected&&c.wasIntersected&&(a||(a=new Gi("mouseleave")),this.dispatch(c,a))}),this.interactiveObjects.forEach(c=>{c.intersected&&!c.wasIntersected&&(o||(o=new Gi("mouseenter")),this.dispatch(c,o))})}),ut(this,"checkIntersection",s=>{let a=this.raycaster.intersectObjects([s.target],!0);if(s.wasIntersected=s.intersected,a.length>0){let o=a[0].distance;a.forEach(c=>{c.distance<o&&(o=c.distance)}),s.intersected=!0,s.distance=o}else s.intersected=!1}),ut(this,"onDocumentMouseMove",s=>{this.mapPositionToPoint(this.mouse,s.clientX,s.clientY);let a=new Gi("mousemove",s);this.interactiveObjects.forEach(o=>{this.dispatch(o,a)})}),ut(this,"onDocumentPointerMove",s=>{this.mapPositionToPoint(this.mouse,s.clientX,s.clientY);let a=new Gi("pointermove",s);this.interactiveObjects.forEach(o=>{this.dispatch(o,a)})}),ut(this,"onTouchMove",s=>{s.touches.length>0&&this.mapPositionToPoint(this.mouse,s.touches[0].clientX,s.touches[0].clientY);let a=new Gi(this.treatTouchEventsAsMouseEvents?"mousemove":"touchmove",s);this.interactiveObjects.forEach(o=>{this.dispatch(o,a)})}),ut(this,"onMouseClick",s=>{this.update();let a=new Gi("click",s);this.interactiveObjects.forEach(o=>{o.intersected&&this.dispatch(o,a)})}),ut(this,"onMouseDown",s=>{this.mapPositionToPoint(this.mouse,s.clientX,s.clientY),this.update();let a=new Gi("mousedown",s);this.interactiveObjects.forEach(o=>{o.intersected&&this.dispatch(o,a)})}),ut(this,"onPointerDown",s=>{this.mapPositionToPoint(this.mouse,s.clientX,s.clientY),this.update();let a=new Gi("pointerdown",s);this.interactiveObjects.forEach(o=>{o.intersected&&this.dispatch(o,a)})}),ut(this,"onTouchStart",s=>{s.touches.length>0&&this.mapPositionToPoint(this.mouse,s.touches[0].clientX,s.touches[0].clientY),this.update();let a=new Gi(this.treatTouchEventsAsMouseEvents?"mousedown":"touchstart",s);this.interactiveObjects.forEach(o=>{o.intersected&&this.dispatch(o,a)})}),ut(this,"onMouseUp",s=>{let a=new Gi("mouseup",s);this.interactiveObjects.forEach(o=>{this.dispatch(o,a)})}),ut(this,"onPointerUp",s=>{let a=new Gi("pointerup",s);this.interactiveObjects.forEach(o=>{this.dispatch(o,a)})}),ut(this,"onTouchEnd",s=>{s.touches.length>0&&this.mapPositionToPoint(this.mouse,s.touches[0].clientX,s.touches[0].clientY),this.update();let a=new Gi(this.treatTouchEventsAsMouseEvents?"mouseup":"touchend",s);this.interactiveObjects.forEach(o=>{this.dispatch(o,a)})}),ut(this,"dispatch",(s,a)=>{s.target&&!a.cancelBubble&&(a.coords=this.mouse,a.distance=s.distance,a.intersected=s.intersected,s.target.dispatchEvent(a))}),ut(this,"mapPositionToPoint",(s,a,o)=>{let c=this.renderer.domElement.getBoundingClientRect();s.x=(a-c.left)/c.width*2-1,s.y=-(o-c.top)/c.height*2+1}),this.renderer=e,this.camera=t,this.domElement=i,this.bindEventsOnBodyElement=!(r&&typeof r.bindEventsOnBodyElement<"u")||r.bindEventsOnBodyElement,this.scene=r&&typeof r.scene<"u"?r.scene:null,this.scene&&(this.scene.onBeforeRender=()=>{this.autoAdd&&null!==this.scene&&this.scene.traverse(s=>{this.add(s),s.addEventListener("removed",a=>{this.remove(a.target)})}),this.update()}),this.autoAdd=!!(r&&typeof r.autoAdd<"u")&&r.autoAdd,this.autoAdd&&null===this.scene&&console.error("Attention: Options.scene needs to be set when using options.autoAdd"),this.mouse=new Z(-1,1),this.supportsPointerEvents=!!window.PointerEvent,this.interactiveObjects=[],this.closestObject=null,this.raycaster=new hv,i.addEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?i.ownerDocument.addEventListener("pointermove",this.onDocumentPointerMove):i.addEventListener("pointermove",this.onDocumentPointerMove),i.addEventListener("pointerdown",this.onPointerDown),i.addEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?i.ownerDocument.addEventListener("mousemove",this.onDocumentMouseMove):i.addEventListener("mousemove",this.onDocumentMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),i.addEventListener("touchstart",this.onTouchStart,{passive:!0}),i.addEventListener("touchmove",this.onTouchMove,{passive:!0}),i.addEventListener("touchend",this.onTouchEnd,{passive:!0}),this.treatTouchEventsAsMouseEvents=!0}};let kf=(()=>{var n;class e{constructor(){this.colliders={},this.ui={},this.pointer=new Z,this.colliderOptions={name:"object",mesh:null,cb:i=>{console.log("Collided ",i)}},this.intersectedObjects=[],this.raycasterOptions={origin:new T(0,0,0),direction:null,near:0,far:10},this.raycaster=new hv,this.tempMatrix=new $e}initInteractionManager(i,r,s){return this.interactionManager=new pVe(i,r,s),this.interactionManager.update.bind(this)}addToInteractions(i){this.interactionManager.add(i)}raycast(){return this.intersectedObjects.reduce((r,s)=>{const a=this.raycaster.intersectObject(s,!0);return a[0]&&(!r||a[0].distance<r.distance)?(a[0].object=s,a[0]):r},null)}intersectObjects(i){let r;return i.pointer&&null!==i.pointer.x&&null!==i.pointer.y?this.raycaster.setFromCamera(i.pointer,i.camera):(console.log("setting the ray from controller"),this.tempMatrix.identity().extractRotation(i.controller.matrixWorld),this.raycaster.ray.origin.setFromMatrixPosition(i.controller.matrixWorld),this.raycaster.ray.direction.set(0,0,-1).applyMatrix4(this.tempMatrix)),r=this.raycast(),r&&this.colliders[r.object.uuid]()}removeFromColliders(i){this.colliders=this.colliders.filter(r=>r.name!==i)}setRay(i){this.raycaster.setFromCamera(i.pointer,i.camera)}addToColliders(i){this.intersectedObjects.push(i.mesh),Object.assign({},this.colliderOptions,i),this.colliders[i.mesh.uuid]=i.cb}update(){this.interactionManager.update()}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})(),NF=(()=>{var n;class e{constructor(){this.meshBasicMaterial=new ui,this.normalMaterial=new nF,this.meshLambert=new Ef,this.standardMaterial=new ha({roughness:.05,metalness:1}),this.materials={matte:new os({specular:4802889,shininess:1}),flat:new Ef({}),colors:new os({color:16777215,specular:16777215,shininess:2,vertexColors:!0}),multiColors:new os({shininess:2,vertexColors:!0}),plastic:new os({specular:12698049,shininess:250})},this.params={color:16777215,transmission:1,opacity:1,metalness:0,roughness:0,ior:1.5,thickness:.01,attenuationDistance:1,specularIntensity:1,envMapIntensity:1}}getMaterial(i){return new Hr(this.params)}getStandardMaterial(){return this.standardMaterial.clone()}getMeshPhysicalMaterial(i){}getMaterialByName(i){return this.materials[i]}getBasicMaterial(){return this.standardMaterial}getRandomColoredMaterial(){return new ha({color:16777215*Math.random()})}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})();class Vr{constructor(e,t,i,r,s="div"){this.parent=e,this.object=t,this.property=i,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),Vr.nextNameID=Vr.nextNameID||0,this.$name.id="lil-gui-name-"+ ++Vr.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",a=>a.stopPropagation()),this.domElement.addEventListener("keyup",a=>a.stopPropagation()),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(i)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class mVe extends Vr{constructor(e,t,i){super(e,t,i,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",()=>{this.setValue(this.$input.checked),this._callOnFinishChange()}),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function gv(n){let e,t;return(e=n.match(/(#|0x)?([a-f0-9]{6})/i))?t=e[2]:(e=n.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?t=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=n.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(t=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!t&&"#"+t}const gVe={isPrimitive:!0,match:n=>"string"==typeof n,fromHexString:gv,toHexString:gv},B0={isPrimitive:!0,match:n=>"number"==typeof n,fromHexString:n=>parseInt(n.substring(1),16),toHexString:n=>"#"+n.toString(16).padStart(6,0)},vVe=[gVe,B0,{isPrimitive:!1,match:n=>Array.isArray(n),fromHexString(n,e,t=1){const i=B0.fromHexString(n);e[0]=(i>>16&255)/255*t,e[1]=(i>>8&255)/255*t,e[2]=(255&i)/255*t},toHexString:([n,e,t],i=1)=>B0.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)},{isPrimitive:!1,match:n=>Object(n)===n,fromHexString(n,e,t=1){const i=B0.fromHexString(n);e.r=(i>>16&255)/255*t,e.g=(i>>8&255)/255*t,e.b=(255&i)/255*t},toHexString:({r:n,g:e,b:t},i=1)=>B0.toHexString(n*(i=255/i)<<16^e*i<<8^t*i<<0)}];class yVe extends Vr{constructor(e,t,i,r){super(e,t,i,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=function MVe(n){return vVe.find(e=>e.match(n))}(this.initialValue),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",()=>{this._setValueFromHexString(this.$input.value)}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$text.addEventListener("input",()=>{const s=gv(this.$text.value);s&&this._setValueFromHexString(s)}),this.$text.addEventListener("focus",()=>{this._textFocused=!0,this.$text.select()}),this.$text.addEventListener("blur",()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()}),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class vv extends Vr{constructor(e,t,i){super(e,t,i,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",r=>{r.preventDefault(),this.getValue().call(this.object),this._callOnChange()}),this.$button.addEventListener("touchstart",()=>{},{passive:!0}),this.$disable=this.$button}}class _Ve extends Vr{constructor(e,t,i,r,s,a){super(e,t,i,"number"),this._initInput(),this.min(r),this.max(s);const o=void 0!==a;this.step(o?a:this._getImplicitStep(),o),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const i=M=>{const y=parseFloat(this.$input.value);isNaN(y)||(this._snapClampSetValue(y+M),this.$input.value=this.getValue())};let o,c,l,u,f,a=!1;const p=M=>{if(a){const y=M.clientX-o;Math.abs(M.clientY-c)>5?(M.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(y)>5&&m()}a||(f-=(M.clientY-l)*this._step*this._arrowKeyMultiplier(M),u+f>this._max?f=this._max-u:u+f<this._min&&(f=this._min-u),this._snapClampSetValue(u+f)),l=M.clientY},m=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",m)};this.$input.addEventListener("input",()=>{let M=parseFloat(this.$input.value);isNaN(M)||(this._stepExplicit&&(M=this._snap(M)),this.setValue(this._clamp(M)))}),this.$input.addEventListener("keydown",M=>{"Enter"===M.key&&this.$input.blur(),"ArrowUp"===M.code&&(M.preventDefault(),i(this._step*this._arrowKeyMultiplier(M))),"ArrowDown"===M.code&&(M.preventDefault(),i(this._step*this._arrowKeyMultiplier(M)*-1))}),this.$input.addEventListener("wheel",M=>{this._inputFocused&&(M.preventDefault(),i(this._step*this._normalizeMouseWheel(M)))},{passive:!1}),this.$input.addEventListener("mousedown",M=>{o=M.clientX,c=l=M.clientY,a=!0,u=this.getValue(),f=0,window.addEventListener("mousemove",p),window.addEventListener("mouseup",m)}),this.$input.addEventListener("focus",()=>{this._inputFocused=!0}),this.$input.addEventListener("blur",()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()})}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=g=>{const M=this.$slider.getBoundingClientRect();let y=((g,M,y,_,C)=>(g-M)/(y-M)*(this._max-_)+_)(g,M.left,M.right,this._min);this._snapClampSetValue(y)},r=g=>{t(g.clientX)},s=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",s)};let o,c,a=!1;const l=g=>{g.preventDefault(),this._setDraggingStyle(!0),t(g.touches[0].clientX),a=!1},f=g=>{if(a){const y=g.touches[0].clientY-c;Math.abs(g.touches[0].clientX-o)>Math.abs(y)?l(g):(window.removeEventListener("touchmove",f),window.removeEventListener("touchend",h))}else g.preventDefault(),t(g.touches[0].clientX)},h=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",h)},d=this._callOnFinishChange.bind(this);let m;this.$slider.addEventListener("mousedown",g=>{this._setDraggingStyle(!0),t(g.clientX),window.addEventListener("mousemove",r),window.addEventListener("mouseup",s)}),this.$slider.addEventListener("touchstart",g=>{g.touches.length>1||(this._hasScrollBar?(o=g.touches[0].clientX,c=g.touches[0].clientY,a=!0):l(g),window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",h))},{passive:!1}),this.$slider.addEventListener("wheel",g=>{if(Math.abs(g.deltaX)<Math.abs(g.deltaY)&&this._hasScrollBar)return;g.preventDefault();const y=this._normalizeMouseWheel(g)*this._step;this._snapClampSetValue(this.getValue()+y),this.$input.value=this.getValue(),clearTimeout(m),m=setTimeout(d,400)},{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:i}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,i=-e.wheelDelta/120,i*=this._stepExplicit?1:10),t+-i}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class CVe extends Vr{constructor(e,t,i,r){super(e,t,i,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach(s=>{const a=document.createElement("option");a.innerHTML=s,this.$select.appendChild(a)}),this.$select.addEventListener("change",()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()}),this.$select.addEventListener("focus",()=>{this.$display.classList.add("focus")}),this.$select.addEventListener("blur",()=>{this.$display.classList.remove("focus")}),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class wVe extends Vr{constructor(e,t,i){super(e,t,i,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",()=>{this.setValue(this.$input.value)}),this.$input.addEventListener("keydown",r=>{"Enter"===r.code&&this.$input.blur()}),this.$input.addEventListener("blur",()=>{this._callOnFinishChange()}),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let IF=!1;class Mv{constructor({parent:e,autoPlace:t=void 0===e,container:i,width:r,title:s="Controls",closeFolders:a=!1,injectStyles:o=!0,touchStyles:c=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",()=>this.openAnimated(this._closed)),this.$title.addEventListener("keydown",l=>{("Enter"===l.code||"Space"===l.code)&&(l.preventDefault(),this.$title.click())}),this.$title.addEventListener("touchstart",()=>{},{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(s),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),c&&this.domElement.classList.add("allow-touch-styles"),!IF&&o&&(function bVe(n){const e=document.createElement("style");e.innerHTML=n;const t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(e,t):document.head.appendChild(e)}('.lil-gui {\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  text-align: left;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  --background-color: #1f1f1f;\n  --text-color: #ebebeb;\n  --title-background-color: #111111;\n  --title-text-color: #ebebeb;\n  --widget-color: #424242;\n  --hover-color: #4f4f4f;\n  --focus-color: #595959;\n  --number-color: #2cc9ff;\n  --string-color: #a2db3c;\n  --font-size: 11px;\n  --input-font-size: 11px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --padding: 4px;\n  --spacing: 4px;\n  --widget-height: 20px;\n  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);\n  --name-width: 45%;\n  --slider-knob-width: 2px;\n  --slider-input-width: 27%;\n  --color-input-width: 27%;\n  --slider-input-min-width: 45px;\n  --color-input-min-width: 45px;\n  --folder-indent: 7px;\n  --widget-padding: 0 0 0 3px;\n  --widget-border-radius: 2px;\n  --checkbox-size: calc(0.75 * var(--widget-height));\n  --scrollbar-width: 5px;\n}\n.lil-gui, .lil-gui * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.lil-gui.root {\n  width: var(--width, 245px);\n  display: flex;\n  flex-direction: column;\n}\n.lil-gui.root > .title {\n  background: var(--title-background-color);\n  color: var(--title-text-color);\n}\n.lil-gui.root > .children {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lil-gui.root > .children::-webkit-scrollbar {\n  width: var(--scrollbar-width);\n  height: var(--scrollbar-width);\n  background: var(--background-color);\n}\n.lil-gui.root > .children::-webkit-scrollbar-thumb {\n  border-radius: var(--scrollbar-width);\n  background: var(--focus-color);\n}\n@media (pointer: coarse) {\n  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {\n    --widget-height: 28px;\n    --padding: 6px;\n    --spacing: 6px;\n    --font-size: 13px;\n    --input-font-size: 16px;\n    --folder-indent: 10px;\n    --scrollbar-width: 7px;\n    --slider-input-min-width: 50px;\n    --color-input-min-width: 65px;\n  }\n}\n.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {\n  --widget-height: 28px;\n  --padding: 6px;\n  --spacing: 6px;\n  --font-size: 13px;\n  --input-font-size: 16px;\n  --folder-indent: 10px;\n  --scrollbar-width: 7px;\n  --slider-input-min-width: 50px;\n  --color-input-min-width: 65px;\n}\n.lil-gui.autoPlace {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 1001;\n}\n\n.lil-gui .controller {\n  display: flex;\n  align-items: center;\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n}\n.lil-gui .controller.disabled {\n  opacity: 0.5;\n}\n.lil-gui .controller.disabled, .lil-gui .controller.disabled * {\n  pointer-events: none !important;\n}\n.lil-gui .controller > .name {\n  min-width: var(--name-width);\n  flex-shrink: 0;\n  white-space: pre;\n  padding-right: var(--spacing);\n  line-height: var(--widget-height);\n}\n.lil-gui .controller .widget {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--widget-height);\n}\n.lil-gui .controller.string input {\n  color: var(--string-color);\n}\n.lil-gui .controller.boolean .widget {\n  cursor: pointer;\n}\n.lil-gui .controller.color .display {\n  width: 100%;\n  height: var(--widget-height);\n  border-radius: var(--widget-border-radius);\n  position: relative;\n}\n@media (hover: hover) {\n  .lil-gui .controller.color .display:hover:before {\n    content: " ";\n    display: block;\n    position: absolute;\n    border-radius: var(--widget-border-radius);\n    border: 1px solid #fff9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.lil-gui .controller.color input[type=color] {\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.lil-gui .controller.color input[type=text] {\n  margin-left: var(--spacing);\n  font-family: var(--font-family-mono);\n  min-width: var(--color-input-min-width);\n  width: var(--color-input-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.option select {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  max-width: 100%;\n}\n.lil-gui .controller.option .display {\n  position: relative;\n  pointer-events: none;\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  line-height: var(--widget-height);\n  max-width: 100%;\n  overflow: hidden;\n  word-break: break-all;\n  padding-left: 0.55em;\n  padding-right: 1.75em;\n  background: var(--widget-color);\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .display.focus {\n    background: var(--focus-color);\n  }\n}\n.lil-gui .controller.option .display.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.option .display:after {\n  font-family: "lil-gui";\n  content: "\u2195";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding-right: 0.375em;\n}\n.lil-gui .controller.option .widget,\n.lil-gui .controller.option select {\n  cursor: pointer;\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .widget:hover .display {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number input {\n  color: var(--number-color);\n}\n.lil-gui .controller.number.hasSlider input {\n  margin-left: var(--spacing);\n  width: var(--slider-input-width);\n  min-width: var(--slider-input-min-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.number .slider {\n  width: 100%;\n  height: var(--widget-height);\n  background-color: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  padding-right: var(--slider-knob-width);\n  overflow: hidden;\n  cursor: ew-resize;\n  touch-action: pan-y;\n}\n@media (hover: hover) {\n  .lil-gui .controller.number .slider:hover {\n    background-color: var(--hover-color);\n  }\n}\n.lil-gui .controller.number .slider.active {\n  background-color: var(--focus-color);\n}\n.lil-gui .controller.number .slider.active .fill {\n  opacity: 0.95;\n}\n.lil-gui .controller.number .fill {\n  height: 100%;\n  border-right: var(--slider-knob-width) solid var(--number-color);\n  box-sizing: content-box;\n}\n\n.lil-gui-dragging .lil-gui {\n  --hover-color: var(--widget-color);\n}\n.lil-gui-dragging * {\n  cursor: ew-resize !important;\n}\n\n.lil-gui-dragging.lil-gui-vertical * {\n  cursor: ns-resize !important;\n}\n\n.lil-gui .title {\n  height: var(--title-height);\n  line-height: calc(var(--title-height) - 4px);\n  font-weight: 600;\n  padding: 0 var(--padding);\n  -webkit-tap-highlight-color: transparent;\n  cursor: pointer;\n  outline: none;\n  text-decoration-skip: objects;\n}\n.lil-gui .title:before {\n  font-family: "lil-gui";\n  content: "\u25be";\n  padding-right: 2px;\n  display: inline-block;\n}\n.lil-gui .title:active {\n  background: var(--title-background-color);\n  opacity: 0.75;\n}\n@media (hover: hover) {\n  body:not(.lil-gui-dragging) .lil-gui .title:hover {\n    background: var(--title-background-color);\n    opacity: 0.85;\n  }\n  .lil-gui .title:focus {\n    text-decoration: underline var(--focus-color);\n  }\n}\n.lil-gui.root > .title:focus {\n  text-decoration: none !important;\n}\n.lil-gui.closed > .title:before {\n  content: "\u25b8";\n}\n.lil-gui.closed > .children {\n  transform: translateY(-7px);\n  opacity: 0;\n}\n.lil-gui.closed:not(.transition) > .children {\n  display: none;\n}\n.lil-gui.transition > .children {\n  transition-duration: 300ms;\n  transition-property: height, opacity, transform;\n  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);\n  overflow: hidden;\n  pointer-events: none;\n}\n.lil-gui .children:empty:before {\n  content: "Empty";\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n  display: block;\n  height: var(--widget-height);\n  font-style: italic;\n  line-height: var(--widget-height);\n  opacity: 0.5;\n}\n.lil-gui.root > .children > .lil-gui > .title {\n  border: 0 solid var(--widget-color);\n  border-width: 1px 0;\n  transition: border-color 300ms;\n}\n.lil-gui.root > .children > .lil-gui.closed > .title {\n  border-bottom-color: transparent;\n}\n.lil-gui + .controller {\n  border-top: 1px solid var(--widget-color);\n  margin-top: 0;\n  padding-top: var(--spacing);\n}\n.lil-gui .lil-gui .lil-gui > .title {\n  border: none;\n}\n.lil-gui .lil-gui .lil-gui > .children {\n  border: none;\n  margin-left: var(--folder-indent);\n  border-left: 2px solid var(--widget-color);\n}\n.lil-gui .lil-gui .controller {\n  border: none;\n}\n\n.lil-gui input {\n  -webkit-tap-highlight-color: transparent;\n  border: 0;\n  outline: none;\n  font-family: var(--font-family);\n  font-size: var(--input-font-size);\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  background: var(--widget-color);\n  color: var(--text-color);\n  width: 100%;\n}\n@media (hover: hover) {\n  .lil-gui input:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui input:active {\n    background: var(--focus-color);\n  }\n}\n.lil-gui input:disabled {\n  opacity: 1;\n}\n.lil-gui input[type=text],\n.lil-gui input[type=number] {\n  padding: var(--widget-padding);\n}\n.lil-gui input[type=text]:focus,\n.lil-gui input[type=number]:focus {\n  background: var(--focus-color);\n}\n.lil-gui input::-webkit-outer-spin-button,\n.lil-gui input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.lil-gui input[type=number] {\n  -moz-appearance: textfield;\n}\n.lil-gui input[type=checkbox] {\n  appearance: none;\n  -webkit-appearance: none;\n  height: var(--checkbox-size);\n  width: var(--checkbox-size);\n  border-radius: var(--widget-border-radius);\n  text-align: center;\n  cursor: pointer;\n}\n.lil-gui input[type=checkbox]:checked:before {\n  font-family: "lil-gui";\n  content: "\u2713";\n  font-size: var(--checkbox-size);\n  line-height: var(--checkbox-size);\n}\n@media (hover: hover) {\n  .lil-gui input[type=checkbox]:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button {\n  -webkit-tap-highlight-color: transparent;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  color: var(--text-color);\n  width: 100%;\n  height: var(--widget-height);\n  text-transform: none;\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  border: 1px solid var(--widget-color);\n  text-align: center;\n  line-height: calc(var(--widget-height) - 4px);\n}\n@media (hover: hover) {\n  .lil-gui button:hover {\n    background: var(--hover-color);\n    border-color: var(--hover-color);\n  }\n  .lil-gui button:focus {\n    border-color: var(--focus-color);\n  }\n}\n.lil-gui button:active {\n  background: var(--focus-color);\n}\n\n@font-face {\n  font-family: "lil-gui";\n  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");\n}'),IF=!0),i?i.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this._closeFolders=a}add(e,t,i,r,s){if(Object(i)===i)return new CVe(this,e,t,i);const a=e[t];switch(typeof a){case"number":return new _Ve(this,e,t,i,r,s);case"boolean":return new mVe(this,e,t);case"string":return new wVe(this,e,t);case"function":return new vv(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",a)}addColor(e,t,i=1){return new yVe(this,e,t,i)}addFolder(e){const t=new Mv({parent:this,title:e});return this.root._closeFolders&&t.close(),t}load(e,t=!0){return e.controllers&&this.controllers.forEach(i=>{i instanceof vv||i._name in e.controllers&&i.load(e.controllers[i._name])}),t&&e.folders&&this.folders.forEach(i=>{i._title in e.folders&&i.load(e.folders[i._title])}),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach(i=>{if(!(i instanceof vv)){if(i._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${i._name}"`);t.controllers[i._name]=i.save()}}),e&&this.folders.forEach(i=>{if(i._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${i._title}"`);t.folders[i._title]=i.save()}),t}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame(()=>{this.$children.style.height=this.$children.clientHeight+"px",this.domElement.classList.add("transition");const i=s=>{s.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",i))};this.$children.addEventListener("transitionend",i);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame(()=>{this.$children.style.height=r+"px"})}),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach(i=>i.reset()),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),void 0!==this._onOpenClose&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach(e=>e.destroy())}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach(t=>{e=e.concat(t.controllersRecursive())}),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach(t=>{e=e.concat(t.foldersRecursive())}),e}}const SVe=Mv;let G0=(()=>{var n;class e{constructor(){this.positionOptions={min:-20,max:20},this.intensityOptions={min:0,max:10,precision:1}}addToDebug(i){this.gui||(this.gui=new SVe({closeFolders:!0}),this.gui.open(!1));const r=this.gui.addFolder(`${i.name||i.obj.name}`);for(const[s,a]of Object.entries(i.properties))switch(s){case"Position":this.addPosition(i,r,a);break;case"Color":this.addColor(i,r,a);break;case"Intensity":this.addIntensity(i,r,a);break;case"Rotation":this.addRotation(i,r,a);break;case"Scale":this.addScale(i,r,a);break;case"LookAt":const o=r.addFolder("LookAt");this.addPosition(i,o,a);break;default:r.add(i.obj,s,i.min,i.max,i.precision)}}addScale(i,r,s){const a=r.addFolder("Scale"),o=Object.assign({},{min:0,max:100,precision:1},s);a.add(i.obj.scale,"x",o.min,o.max,o.precision),a.add(i.obj.scale,"y",o.min,o.max,o.precision),a.add(i.obj.scale,"z",o.min,o.max,o.precision)}addRotation(i,r,s){const a=r.addFolder("Rotation"),o=Object.assign({},{min:0,max:360,precision:1},s);a.add(i.obj.rotation,"x",o.min,o.max,o.precision),a.add(i.obj.rotation,"y",o.min,o.max,o.precision),a.add(i.obj.rotation,"z",o.min,o.max,o.precision)}addIntensity(i,r,s){const a=r.addFolder("Intensity"),o=Object.assign({},this.intensityOptions,s);a.add(i.obj,"intensity",o.min,o.max,o.precision)}addColor(i,r,s){const a=r.addFolder("Color");a.addColor(i.obj,"color").onChange(o=>{i.obj.color.set(o)}),a.open()}addPosition(i,r,s){const a=r.addFolder("Position"),o=Object.assign({},this.positionOptions,s);a.add(i.obj.position,"x",o.min,o.max,o.precision).onChange(c=>{i.obj.position.x=c}),a.add(i.obj.position,"y",o.min,o.max,o.precision).onChange(c=>{}),a.add(i.obj.position,"z",o.min,o.max,o.precision).onChange(c=>{}),a.open()}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})(),RF=(()=>{var n;class e{constructor(i,r,s){this.interactions=i,this.materials=r,this.debug=s,this.boxGeometry=new Ar(1,1,1),this.sphereGeometry=new Bc(15,32,16),this.basicMaterial=new ui({color:16776960}),this.material=this.materials.getRandomColoredMaterial(),this.boxDefaultOptions={scale:1,position:{x:0,y:1.6,z:2},name:"box",material:this.material,cb:a=>{console.log("Collided with a box ",a)}},this.sphereDefaultOptions={name:"sphere",interactive:!0}}createReticle(){const i=new zt(new Af(.15,.2,32).rotateX(-Math.PI/2),new ui);return i.matrixAutoUpdate=!1,i.visible=!1,this.reticle=i,this.reticle}createIcosahedron(i){const r=Object.assign({radius:1.5,detail:0},i);this.materials.getRandomColoredMaterial(),r.material&&this.materials.getMaterial(r.material);const a=new zt(new bf(r.radius,r.detail),this.materials.getRandomColoredMaterial());return a.scale.x=1.3,a}createGround(){const i=new zc(1e4,1e4),r=new Ef({color:16777215});r.color.setHSL(.095,1,.75);const s=new zt(i,r);return s.position.y=-33,s.rotation.x=-Math.PI/2,s.receiveShadow=!0,s}createSkyDom(i){const r=document.getElementById("vertexShader").textContent,s=document.getElementById("fragmentShader").textContent,a={topColor:{value:new K(30719)},bottomColor:{value:new K(16777215)},offset:{value:33},exponent:{value:.6}};a.topColor.value.copy(i.color);const o=new Bc(4e3,32,15),c=new Er({uniforms:a,vertexShader:r,fragmentShader:s,side:1});return new zt(o,c)}createBackground(i){}createSphere(i){const r=Object.assign({},this.sphereDefaultOptions,i),s=new zt(this.sphereGeometry,r.material||this.materials.getRandomColoredMaterial());return s.name=r.name,s}createHeart(){const a=(new as).moveTo(25,25).bezierCurveTo(25,25,20,0,0,0).bezierCurveTo(-30,0,-30,35,-30,35).bezierCurveTo(-30,55,-10,77,25,95).bezierCurveTo(60,77,80,55,80,35).bezierCurveTo(80,35,80,0,50,0).bezierCurveTo(35,0,25,25,25,25);return this.addShape(a,{depth:8,bevelEnabled:!0,bevelSegments:2,steps:2,bevelSize:1,bevelThickness:1},15728640,60,100,0,0,0,Math.PI,.003)}createRoundedRect(i){const s=new as;return s.moveTo(i.x,i.y+i.radius),s.lineTo(i.x,i.y+i.height-i.radius),s.quadraticCurveTo(i.x,i.y+i.height,i.x+i.radius,i.y+i.height),s.lineTo(i.x+i.width-i.radius,i.y+i.height),s.quadraticCurveTo(i.x+i.width,i.y+i.height,i.x+i.width,i.y+i.height-i.radius),s.lineTo(i.x+i.width,i.y+i.radius),s.quadraticCurveTo(i.x+i.width,i.y,i.x+i.width-i.radius,i.y),s.lineTo(i.x+i.radius,i.y),s.quadraticCurveTo(i.x,i.y,i.x,i.y+i.radius),this.addShape(s,{depth:1,bevelEnabled:!0,bevelSegments:3,steps:3,bevelSize:2,bevelThickness:.5},16777215,i.width/2,0,0,0,0,0,1)}addShape(i,r,s,a,o,c,l,u,f,h){let d=new xf(i,r),p=new zt(d,new os({color:s}));return p.position.set(a,o,c),p.rotation.set(l,u,f),p.scale.set(h,h,h),p}createBox(i){const r=Object.assign({},this.boxDefaultOptions,i),s=new zt(this.boxGeometry,r.material||this.materials.getRandomColoredMaterial());return s.position.set(r.position.x,r.position.y,r.position.z),s.name=r.name,s}createNav(i){const r=new K1,s=new Ar(5,5,5),a=new os({color:11184674}),o=new qO(s),c=new uf(o,new bi({color:0,linewidth:2}));for(let l=-100;l<100;l+=10)for(let u=-100;u<100;u+=10){if(0==l&&0==u)continue;const f=new zt(s,a);f.position.set(l,2.5,u);const h=c.clone();h.position.copy(f.position),r.add(f),r.add(h)}return r.name="nav",r}createBoxes(i){const r=i.number||1e3,s=i.position||40,a=[];for(let o=0;o<r;o++){const c=new zt(this.boxGeometry,this.materials.getRandomColoredMaterial());c.position.x=40*Math.random()-20,c.position.y=1.6*Math.random(),c.position.z=Math.random()*s-20,c.rotation.x=2*Math.random()*Math.PI,c.rotation.y=2*Math.random()*Math.PI,c.rotation.z=2*Math.random()*Math.PI,c.scale.x=Math.random()+.5,c.scale.y=Math.random()+.5,c.scale.z=Math.random()+.5,c.name="box"+o,a.push(c)}return a}}return(n=e).\u0275fac=function(i){return new(i||n)(be(kf),be(NF),be(G0))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})(),PF=(()=>{var n;class e{constructor(){this.dirLight=new Hf(16631159,4),this.spotLight=new av(16769694,15,10,Math.PI/4,.2,1.5)}createSpotLight(i){const r=this.spotLight.clone();return r.castShadow=!0,r.shadow.bias=-1e-4,r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.camera.near=.1,r.shadow.camera.far=100,[r]}createHemLight(i){const r=new iv(16165226,10470393,.8);return r.color.setHSL(.6,1,.6),r.groundColor.setHSL(.095,1,.75),r.position.set(-.6,-2,-6),[r]}createPointLight(){const i=new cv(11789055,1.5,13,0);return i.castShadow=!0,i.shadow.bias=-.005,i}createDirLight(i){const s=new Hf(16777215,i?.intensity||2);return s.castShadow=!0,s.color.setHSL(.1,1,.95),s.color.convertLinearToSRGB(),s.position.set(-0,12,-15),s.castShadow=!0,s.shadow.mapSize.width=2048,s.shadow.mapSize.height=2048,s.shadow.camera.left=-50,s.shadow.camera.right=50,s.shadow.camera.top=50,s.shadow.camera.bottom=-50,s.shadow.camera.far=100,s.shadow.bias=-1e-4,s.target.position.set(0,0,-2),[s,s.target]}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})();const yv=new WeakMap;class AVe extends ma{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new c1(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{this.parse(a,t,r)},i,r)}parse(e,t,i){this.decodeDracoFile(e,t,null,null,jt).catch(i)}decodeDracoFile(e,t,i,r,s=Bn){return this.decodeGeometry(e,{attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:s}).then(t)}decodeGeometry(e,t){const i=JSON.stringify(t);if(yv.has(e)){const c=yv.get(e);if(c.key===i)return c.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=this._getWorker(s,e.byteLength).then(c=>(r=c,new Promise((l,u)=>{r._callbacks[s]={resolve:l,reject:u},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),yv.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new lt;e.index&&t.setIndex(new Jt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,c=new Jt(a,r.itemSize);"color"===s&&(this._assignVertexColorSpace(c,r.vertexColorSpace),c.normalized=!(a instanceof Float32Array)),t.setAttribute(s,c)}return t}_assignVertexColorSpace(e,t){if(t!==jt)return;const i=new K;for(let r=0,s=e.count;r<s;r++)i.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new c1(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=EVe.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function EVe(){let n,e;function r(a,o,c,l,u,f){const h=f.num_components(),p=c.num_points()*h,m=p*u.BYTES_PER_ELEMENT,v=function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}(a,u),g=a._malloc(m);o.GetAttributeDataArrayForAllPoints(c,f,v,m,g);const M=new u(a.HEAPF32.buffer,g,p).slice();return a._free(g),{name:l,array:M,itemSize:h}}onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(u){n.onModuleLoaded=function(f){u({draco:f})},DracoDecoderModule(n)});break;case"decode":const c=o.buffer,l=o.taskConfig;e.then(u=>{const f=u.draco,h=new f.Decoder;try{const d=function t(a,o,c,l){const u=l.attributeIDs,f=l.attributeTypes;let h,d;const p=o.GetEncodedGeometryType(c);if(p===a.TRIANGULAR_MESH)h=new a.Mesh,d=o.DecodeArrayToMesh(c,c.byteLength,h);else{if(p!==a.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");h=new a.PointCloud,d=o.DecodeArrayToPointCloud(c,c.byteLength,h)}if(!d.ok()||0===h.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+d.error_msg());const m={index:null,attributes:[]};for(const v in u){const g=self[f[v]];let M,y;if(l.useUniqueIDs)y=u[v],M=o.GetAttributeByUniqueId(h,y);else{if(y=o.GetAttributeId(h,a[u[v]]),-1===y)continue;M=o.GetAttribute(h,y)}const _=r(a,o,h,v,g,M);"color"===v&&(_.vertexColorSpace=l.vertexColorSpace),m.attributes.push(_)}return p===a.TRIANGULAR_MESH&&(m.index=function i(a,o,c){const u=3*c.num_faces(),f=4*u,h=a._malloc(f);o.GetTrianglesUInt32Array(c,f,h);const d=new Uint32Array(a.HEAPF32.buffer,h,u).slice();return a._free(h),{array:d,itemSize:1}}(a,o,h)),a.destroy(h),m}(f,h,new Int8Array(c),l),p=d.attributes.map(m=>m.array.buffer);d.index&&p.push(d.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:d},p)}catch(d){console.error(d),self.postMessage({type:"error",id:o.id,error:d.message})}finally{f.destroy(h)}})}}}function kF(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const a=[],o=n.getAttribute("position");if(void 0===o)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let c=0;c<o.count;c++)a.push(c);n.setIndex(a),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2==0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class LVe extends ma{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new NVe(t)}),this.register(function(t){return new BVe(t)}),this.register(function(t){return new GVe(t)}),this.register(function(t){return new WVe(t)}),this.register(function(t){return new RVe(t)}),this.register(function(t){return new PVe(t)}),this.register(function(t){return new kVe(t)}),this.register(function(t){return new OVe(t)}),this.register(function(t){return new DVe(t)}),this.register(function(t){return new FVe(t)}),this.register(function(t){return new IVe(t)}),this.register(function(t){return new UVe(t)}),this.register(function(t){return new zVe(t)}),this.register(function(t){return new jVe(t)}),this.register(function(t){return new $Ve(t)})}load(e,t,i,r){const s=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:F0.extractUrlBase(e),this.manager.itemStart(e);const o=function(l){r?r(l):console.error(l),s.manager.itemError(e),s.manager.itemEnd(e)},c=new c1(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{s.parse(l,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={},c=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(c.decode(new Uint8Array(e,0,4))===OF){try{a[xt.KHR_BINARY_GLTF]=new qVe(e)}catch(f){return void(r&&r(f))}s=JSON.parse(a[xt.KHR_BINARY_GLTF].content)}else s=JSON.parse(c.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new aDe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](l);o[f.name]=f,a[f.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const f=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(f){case xt.KHR_MATERIALS_UNLIT:a[f]=new VVe;break;case xt.KHR_DRACO_MESH_COMPRESSION:a[f]=new XVe(s,this.dracoLoader);break;case xt.KHR_TEXTURE_TRANSFORM:a[f]=new YVe;break;case xt.KHR_MESH_QUANTIZATION:a[f]=new ZVe;break;default:h.indexOf(f)>=0&&void 0===o[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function HVe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const xt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class zVe{constructor(e){this.parser=e,this.name=xt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,c=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let l;const u=new K(16777215);void 0!==c.color&&u.setRGB(c.color[0],c.color[1],c.color[2],Bn);const f=void 0!==c.range?c.range:0;switch(c.type){case"directional":l=new Hf(u),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new cv(u),l.distance=f;break;case"spot":l=new av(u),l.distance=f,c.spot=c.spot||{},c.spot.innerConeAngle=void 0!==c.spot.innerConeAngle?c.spot.innerConeAngle:0,c.spot.outerConeAngle=void 0!==c.spot.outerConeAngle?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,us(l,c),void 0!==c.intensity&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===o?null:this._loadLight(o).then(function(c){return i._getNodeRef(t.cache,o,c)})}}class VVe{constructor(){this.name=xt.KHR_MATERIALS_UNLIT}getMaterialType(){return ui}extendParams(e,t,i){const r=[];e.color=new K(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Bn),e.opacity=a[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,jt))}return Promise.all(r)}}class DVe{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class NVe{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Hr:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Z(o,o)}return Promise.all(s)}}class IVe{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Hr:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class RVe{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Hr:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new K(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];if(void 0!==a.sheenColorFactor){const o=a.sheenColorFactor;t.sheenColor.setRGB(o[0],o[1],o[2],Bn)}return void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,jt)),void 0!==a.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class PVe{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Hr:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class kVe{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Hr:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=(new K).setRGB(o[0],o[1],o[2],Bn),Promise.all(s)}}class OVe{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Hr:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class FVe{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Hr:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=(new K).setRGB(o[0],o[1],o[2],Bn),void 0!==a.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,jt)),Promise.all(s)}}class UVe{constructor(e){this.parser=e,this.name=xt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Hr:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return void 0!==a.anisotropyStrength&&(t.anisotropy=a.anisotropyStrength),void 0!==a.anisotropyRotation&&(t.anisotropyRotation=a.anisotropyRotation),void 0!==a.anisotropyTexture&&s.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class BVe{constructor(e){this.parser=e,this.name=xt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class GVe{constructor(e){this.parser=e,this.name=xt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let c=i.textureLoader;if(o.uri){const l=i.options.manager.getHandler(o.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,a.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class WVe{constructor(e){this.parser=e,this.name=xt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let c=i.textureLoader;if(o.uri){const l=i.options.manager.getHandler(o.uri);null!==l&&(c=l)}return this.detectSupport().then(function(l){if(l)return i.loadTextureImage(e,a.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class jVe{constructor(e){this.name=xt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const u=r.count,f=r.byteStride,h=new Uint8Array(o,r.byteOffset||0,r.byteLength||0);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(u,f,h,r.mode,r.filter).then(function(d){return d.buffer}):a.ready.then(function(){const d=new ArrayBuffer(u*f);return a.decodeGltfBuffer(new Uint8Array(d),u,f,h,r.mode,r.filter),d})})}return null}}class $Ve{constructor(e){this.name=xt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const l of r.primitives)if(l.mode!==H1.TRIANGLES&&l.mode!==H1.TRIANGLE_STRIP&&l.mode!==H1.TRIANGLE_FAN&&void 0!==l.mode)return null;const a=i.extensions[this.name].attributes,o=[],c={};for(const l in a)o.push(this.parser.getDependency("accessor",a[l]).then(u=>(c[l]=u,c[l])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(l=>{const u=l.pop(),f=u.isGroup?u.children:[u],h=l[0].count,d=[];for(const p of f){const m=new $e,v=new T,g=new Xn,M=new T(1,1,1),y=new zO(p.geometry,p.material,h);for(let _=0;_<h;_++)c.TRANSLATION&&v.fromBufferAttribute(c.TRANSLATION,_),c.ROTATION&&g.fromBufferAttribute(c.ROTATION,_),c.SCALE&&M.fromBufferAttribute(c.SCALE,_),y.setMatrixAt(_,m.compose(v,g,M));for(const _ in c)"TRANSLATION"!==_&&"ROTATION"!==_&&"SCALE"!==_&&p.geometry.setAttribute(_,c[_]);_n.prototype.copy.call(y,p),this.parser.assignFinalMaterial(y),d.push(y)}return u.isGroup?(u.clear(),u.add(...d),u):d[0]}))}}const OF="glTF";class qVe{constructor(e){this.name=xt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==OF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let a=0;for(;a<r;){const o=s.getUint32(a,!0);a+=4;const c=s.getUint32(a,!0);if(a+=4,1313821514===c){const l=new Uint8Array(e,12+a,o);this.content=i.decode(l)}else if(5130562===c){const l=12+a;this.body=e.slice(l,l+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class XVe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=xt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},c={},l={};for(const u in a){const f=xv[u]||u.toLowerCase();o[f]=a[u]}for(const u in e.attributes){const f=xv[u]||u.toLowerCase();if(void 0!==a[u]){const h=i.accessors[e.attributes[u]];l[f]=Xc[h.componentType].name,c[f]=!0===h.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(h){for(const d in h.attributes){const m=c[d];void 0!==m&&(h.attributes[d].normalized=m)}f(h)},o,l)})})}}class YVe{constructor(){this.name=xt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ZVe{constructor(){this.name=xt.KHR_MESH_QUANTIZATION}}class UF extends P0{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,c=2*o,l=3*o,u=r-t,f=(i-t)/u,h=f*f,d=h*f,p=e*l,m=p-l,v=-2*d+3*h,g=d-h,M=1-v,y=g-h+f;for(let _=0;_!==o;_++)s[_]=M*a[m+_+o]+y*(a[m+_+c]*u)+v*a[p+_+o]+g*(a[p+_]*u);return s}}const KVe=new Xn;class JVe extends UF{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return KVe.fromArray(s).normalize().toArray(s),s}}const H1={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Xc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},BF={9728:yn,9729:en,9984:1004,9985:1007,9986:1005,9987:s2},GF={33071:oi,33648:1002,10497:Xs},wv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xv={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ls={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},QVe={CUBICSPLINE:void 0,LINEAR:ac,STEP:p0};function eDe(n){return void 0===n.DefaultMaterial&&(n.DefaultMaterial=new ha({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial}function Ca(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function us(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function nDe(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function iDe(n){let e;const t=n.extensions&&n.extensions[xt.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+Sv(t.attributes):n.indices+":"+Sv(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+Sv(n.targets[i]);return e}function Sv(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Av(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const sDe=new $e;class aDe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new HVe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new nv(this.options.manager):new Yze(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new c1(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};return Ca(s,o,r),us(o,r),Promise.all(i._invokeAll(function(c){return c.afterRoot&&c.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,c=a.length;o<c;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];void 0!==a.mesh&&(this._addNodeRef(this.meshCache,a.mesh),void 0!==a.skin&&(i[a.mesh].isSkinnedMesh=!0)),void 0!==a.camera&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const c=this.associations.get(a);null!=c&&this.associations.set(o,c);for(const[l,u]of a.children.entries())s(u,o.children[l])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[xt.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(F0.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const a=wv[r.type],c=!0===r.normalized,l=new(0,Xc[r.componentType])(r.count*a);return Promise.resolve(new Jt(l,a,c))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],c=wv[r.type],l=Xc[r.componentType],u=l.BYTES_PER_ELEMENT,h=r.byteOffset||0,d=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;let m,v;if(d&&d!==u*c){const g=Math.floor(h/d),M="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count;let y=t.cache.get(M);y||(m=new l(o,g*d,r.count*d/u),y=new Lg(m,d/u),t.cache.add(M,y)),v=new ca(y,c,h%d/u,p)}else m=null===o?new l(r.count*c):new l(o,h,r.count*c),v=new Jt(m,c,p);if(void 0!==r.sparse){const _=r.sparse.values.byteOffset||0,C=new(0,Xc[r.sparse.indices.componentType])(a[1],r.sparse.indices.byteOffset||0,r.sparse.count*wv.SCALAR),b=new l(a[2],_,r.sparse.count*c);null!==o&&(v=new Jt(v.array.slice(),v.itemSize,v.normalized));for(let x=0,S=C.length;x<S;x++){const w=C[x];if(v.setX(w,b[x*c]),c>=2&&v.setY(w,b[x*c+1]),c>=3&&v.setZ(w,b[x*c+2]),c>=4&&v.setW(w,b[x*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const c=this.options.manager.getHandler(a.uri);null!==c&&(o=c)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],o=s.images[t],c=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=a.name||o.name||"",""===u.name&&"string"==typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(u.name=o.uri);const h=(s.samplers||{})[a.sampler]||{};return u.magFilter=BF[h.magFilter]||en,u.minFilter=BF[h.minFilter]||s2,u.wrapS=GF[h.wrapS]||Xs,u.wrapT=GF[h.wrapT]||Xs,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(f=>f.clone());const a=r.images[e],o=self.URL||self.webkitURL;let c=a.uri||"",l=!1;if(void 0!==a.bufferView)c=this.getDependency("bufferView",a.bufferView).then(function(f){l=!0;const h=new Blob([f],{type:a.mimeType});return c=o.createObjectURL(h),c});else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then(function(f){return new Promise(function(h,d){let p=h;!0===t.isImageBitmapLoader&&(p=function(m){const v=new T1(m);v.needsUpdate=!0,h(v)}),t.load(F0.resolveURL(f,s.path),p,void 0,d)})}).then(function(f){return!0===l&&o.revokeObjectURL(c),f.userData.mimeType=a.mimeType||function rDe(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(a.uri),f}).catch(function(f){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),f});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((a=a.clone()).channel=i.texCoord),s.extensions[xt.KHR_TEXTURE_TRANSFORM]){const o=void 0!==i.extensions?i.extensions[xt.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const c=s.associations.get(a);a=s.extensions[xt.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,c)}}return void 0!==r&&(a.colorSpace=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let c=this.cache.get(o);c||(c=new Ig,Ui.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,c.sizeAttenuation=!1,this.cache.add(o,c)),i=c}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let c=this.cache.get(o);c||(c=new bi,Ui.prototype.copy.call(c,i),c.color.copy(i.color),c.map=i.map,this.cache.add(o,c)),i=c}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let c=this.cache.get(o);c||(c=i.clone(),s&&(c.vertexColors=!0),a&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(o,c),this.associations.set(c,this.associations.get(i))),i=c}e.material=i}getMaterialType(){return ha}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let a;const o={},l=[];if((s.extensions||{})[xt.KHR_MATERIALS_UNLIT]){const f=r[xt.KHR_MATERIALS_UNLIT];a=f.getMaterialType(),l.push(f.extendParams(o,s,t))}else{const f=s.pbrMetallicRoughness||{};if(o.color=new K(1,1,1),o.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;o.color.setRGB(h[0],h[1],h[2],Bn),o.opacity=h[3]}void 0!==f.baseColorTexture&&l.push(t.assignTexture(o,"map",f.baseColorTexture,jt)),o.metalness=void 0!==f.metallicFactor?f.metallicFactor:1,o.roughness=void 0!==f.roughnessFactor?f.roughnessFactor:1,void 0!==f.metallicRoughnessTexture&&(l.push(t.assignTexture(o,"metalnessMap",f.metallicRoughnessTexture)),l.push(t.assignTexture(o,"roughnessMap",f.metallicRoughnessTexture))),a=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,o)})))}!0===s.doubleSided&&(o.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,"MASK"===u&&(o.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&a!==ui&&(l.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new Z(1,1),void 0!==s.normalTexture.scale)){const f=s.normalTexture.scale;o.normalScale.set(f,f)}if(void 0!==s.occlusionTexture&&a!==ui&&(l.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(o.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&a!==ui){const f=s.emissiveFactor;o.emissive=(new K).setRGB(f[0],f[1],f[2],Bn)}return void 0!==s.emissiveTexture&&a!==ui&&l.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,jt)),Promise.all(l).then(function(){const f=new a(o);return s.name&&(f.name=s.name),us(f,s),t.associations.set(f,{materials:e}),s.extensions&&Ca(r,f,s),f})}createUniqueName(e){const t=$t.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[xt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(c){return WF(c,o,t)})}const a=[];for(let o=0,c=e.length;o<c;o++){const l=e[o],u=iDe(l),f=r[u];if(f)a.push(f.promise);else{let h;h=l.extensions&&l.extensions[xt.KHR_DRACO_MESH_COMPRESSION]?s(l):WF(new lt,l,t),r[u]={primitive:l,promise:h},a.push(h)}}return Promise.all(a)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],a=s.primitives,o=[];for(let c=0,l=a.length;c<l;c++){const u=void 0===a[c].material?eDe(this.cache):this.getDependency("material",a[c].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(c){const l=c.slice(0,c.length-1),u=c[c.length-1],f=[];for(let d=0,p=u.length;d<p;d++){const m=u[d],v=a[d];let g;const M=l[d];if(v.mode===H1.TRIANGLES||v.mode===H1.TRIANGLE_STRIP||v.mode===H1.TRIANGLE_FAN||void 0===v.mode)g=!0===s.isSkinnedMesh?new EO(m,M):new zt(m,M),!0===g.isSkinnedMesh&&g.normalizeSkinWeights(),v.mode===H1.TRIANGLE_STRIP?g.geometry=kF(g.geometry,1):v.mode===H1.TRIANGLE_FAN&&(g.geometry=kF(g.geometry,2));else if(v.mode===H1.LINES)g=new uf(m,M);else if(v.mode===H1.LINE_STRIP)g=new la(m,M);else if(v.mode===H1.LINE_LOOP)g=new PO(m,M);else{if(v.mode!==H1.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);g=new OO(m,M)}Object.keys(g.geometry.morphAttributes).length>0&&nDe(g,s),g.name=t.createUniqueName(s.name||"mesh_"+e),us(g,s),v.extensions&&Ca(r,g,v),t.assignFinalMaterial(g),f.push(g)}for(let d=0,p=f.length;d<p;d++)t.associations.set(f[d],{meshes:e,primitives:d});if(1===f.length)return s.extensions&&Ca(r,f[0],s),f[0];const h=new K1;s.extensions&&Ca(r,h,s),t.associations.set(h,{meshes:e});for(let d=0,p=f.length;d<p;d++)h.add(f[d]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new Wn(uc_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new Z8(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),us(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),a=r,o=[],c=[];for(let l=0,u=a.length;l<u;l++){const f=a[l];if(f){o.push(f);const h=new $e;null!==s&&h.fromArray(s.array,16*l),c.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new af(o,c)})}loadAnimation(e){const i=this,r=this.json.animations[e],s=r.name?r.name:"animation_"+e,a=[],o=[],c=[],l=[],u=[];for(let f=0,h=r.channels.length;f<h;f++){const d=r.channels[f],p=r.samplers[d.sampler],m=d.target,g=void 0!==r.parameters?r.parameters[p.input]:p.input,M=void 0!==r.parameters?r.parameters[p.output]:p.output;void 0!==m.node&&(a.push(this.getDependency("node",m.node)),o.push(this.getDependency("accessor",g)),c.push(this.getDependency("accessor",M)),l.push(p),u.push(m))}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(c),Promise.all(l),Promise.all(u)]).then(function(f){const h=f[0],d=f[1],p=f[2],m=f[3],v=f[4],g=[];for(let M=0,y=h.length;M<y;M++){const _=h[M],C=d[M],b=p[M],x=m[M],S=v[M];if(void 0===_)continue;_.updateMatrix&&_.updateMatrix();const w=i._createAnimationTracks(_,C,b,x,S);if(w)for(let A=0;A<w.length;A++)g.push(w[A])}return new k0(s,void 0,g)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&a.traverse(function(o){if(o.isMesh)for(let c=0,l=r.weights.length;c<l;c++)o.morphTargetInfluences[c]=r.weights[c]}),a})}loadNode(e){const i=this,r=this.json.nodes[e],s=i._loadNodeShallow(e),a=[],o=r.children||[];for(let l=0,u=o.length;l<u;l++)a.push(i.getDependency("node",o[l]));const c=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),c]).then(function(l){const u=l[0],f=l[1],h=l[2];null!==h&&u.traverse(function(d){d.isSkinnedMesh&&d.bind(h,sDe)});for(let d=0,p=f.length;d<p;d++)u.add(f[d]);return u})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],a=s.name?r.createUniqueName(s.name):"",o=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&o.push(c),void 0!==s.camera&&o.push(r.getDependency("camera",s.camera).then(function(l){return r._getNodeRef(r.cameraCache,s.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){o.push(l)}),this.nodeCache[e]=Promise.all(o).then(function(l){let u;if(u=!0===s.isBone?new Dg:l.length>1?new K1:1===l.length?l[0]:new _n,u!==l[0])for(let f=0,h=l.length;f<h;f++)u.add(l[f]);if(s.name&&(u.userData.name=s.name,u.name=a),us(u,s),s.extensions&&Ca(i,u,s),void 0!==s.matrix){const f=new $e;f.fromArray(s.matrix),u.applyMatrix4(f)}else void 0!==s.translation&&u.position.fromArray(s.translation),void 0!==s.rotation&&u.quaternion.fromArray(s.rotation),void 0!==s.scale&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new K1;i.name&&(s.name=r.createUniqueName(i.name)),us(s,i),i.extensions&&Ca(t,s,i);const a=i.nodes||[],o=[];for(let c=0,l=a.length;c<l;c++)o.push(r.getDependency("node",a[c]));return Promise.all(o).then(function(c){for(let u=0,f=c.length;u<f;u++)s.add(c[u]);return r.associations=(u=>{const f=new Map;for(const[h,d]of r.associations)(h instanceof Ui||h instanceof T1)&&f.set(h,d);return u.traverse(h=>{const d=r.associations.get(h);null!=d&&f.set(h,d)}),f})(s),s})}_createAnimationTracks(e,t,i,r,s){const a=[],o=e.name?e.name:e.uuid,c=[];let l;switch(ls[s.path]===ls.weights?e.traverse(function(h){h.morphTargetInfluences&&c.push(h.name?h.name:h.uuid)}):c.push(o),ls[s.path]){case ls.weights:l=Wc;break;case ls.rotation:l=pa;break;case ls.position:case ls.scale:l=$c;break;default:l=1===i.itemSize?Wc:$c}const u=void 0!==r.interpolation?QVe[r.interpolation]:ac,f=this._getArrayFromAccessor(i);for(let h=0,d=c.length;h<d;h++){const p=new l(c[h]+"."+ls[s.path],t.array,f,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(p),a.push(p)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=Av(t.constructor),r=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){return new(this instanceof pa?JVe:UF)(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function WF(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(c){n.setAttribute(o,c)})}for(const a in i){const o=xv[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(void 0!==e.indices&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return Tt.workingColorSpace!==Bn&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Tt.workingColorSpace}" not supported.`),us(n,e),function oDe(n,e,t){const i=e.attributes,r=new Sr;if(void 0===i.POSITION)return;{const o=t.json.accessors[i.POSITION],c=o.min,l=o.max;if(void 0===c||void 0===l)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new T(c[0],c[1],c[2]),new T(l[0],l[1],l[2])),o.normalized){const u=Av(Xc[o.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const o=new T,c=new T;for(let l=0,u=s.length;l<u;l++){const f=s[l];if(void 0!==f.POSITION){const h=t.json.accessors[f.POSITION],d=h.min,p=h.max;if(void 0!==d&&void 0!==p){if(c.setX(Math.max(Math.abs(d[0]),Math.abs(p[0]))),c.setY(Math.max(Math.abs(d[1]),Math.abs(p[1]))),c.setZ(Math.max(Math.abs(d[2]),Math.abs(p[2]))),h.normalized){const m=Av(Xc[h.componentType]);c.multiplyScalar(m)}o.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const a=new X1;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function tDe(n,e,t){let i=!1,r=!1,s=!1;for(let l=0,u=e.length;l<u;l++){const f=e[l];if(void 0!==f.POSITION&&(i=!0),void 0!==f.NORMAL&&(r=!0),void 0!==f.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],o=[],c=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];if(i){const h=void 0!==f.POSITION?t.getDependency("accessor",f.POSITION):n.attributes.position;a.push(h)}if(r){const h=void 0!==f.NORMAL?t.getDependency("accessor",f.NORMAL):n.attributes.normal;o.push(h)}if(s){const h=void 0!==f.COLOR_0?t.getDependency("accessor",f.COLOR_0):n.attributes.color;c.push(h)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(c)]).then(function(l){const f=l[1],h=l[2];return i&&(n.morphAttributes.position=l[0]),r&&(n.morphAttributes.normal=f),s&&(n.morphAttributes.color=h),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}let Ev=(()=>{var n;class e{constructor(i){this.debugService=i,this.gltfLoader=new LVe,this.bufferLoader=new fF,this.textureLoader=new nv,this.dracoLoader=new AVe,this.dracoLoader.setDecoderConfig({type:"js"}),this.dracoLoader.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.6/"),this.dracoLoader.preload(),this.gltfLoader.setDRACOLoader(this.dracoLoader)}loadModel(i){new ui;const s=new Z(15,15);this.gltfLoader.load(i.path,a=>{console.log("GLTF ",a);const o=a.scene;o.position.z=-0,o.scale.set(3,3,3),o.traverse(f=>{f.isMesh&&(f.castShadow=!0,f.receiveShadow=!0,f.castShadow=!0,f.receiveShadow=!0,f.material.map&&(f.material.map.anisotropy=16)),f.isLight&&(f.visible=visible)});const l=o.children[0].material;l.map.repeat=s,l.normalMap.repeat=s,o.children[1].castShadow=!0,i.scene.add(o),console.log("After model loaded ",Date.now()),i.onLoadCB()},a=>{i.onLoadProgress(a)},a=>{console.error("Error loading model")})}createScene(i,r,s){const a=new zt(i,s);return a.position.y=-.5,a.scale.set(r,r,r),a.castShadow=!0,a.receiveShadow=!0,a}loadTexture(i){return this.textureLoader.load(i)}}return(n=e).\u0275fac=function(i){return new(i||n)(be(G0))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();var Yn={d:(n,e)=>{for(var t in e)Yn.o(e,t)&&!Yn.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},l1={};Yn.d(l1,{g1:()=>Ff,gO:()=>Y0,km:()=>Of,zV:()=>q0,ol:()=>qv,uM:()=>Uf,N1:()=>vU,xv:()=>$v,PH:()=>Gf,UH:()=>Bf,ZP:()=>IDe,Vx:()=>MU});var Of={};Yn.r(Of),Yn.d(Of,{COLUMN:()=>Wf,COLUMN_REVERSE:()=>$F,ROW:()=>j0,ROW_REVERSE:()=>jF,contentDirection:()=>qF});var Ff={};Yn.r(Ff),Yn.d(Ff,{CENTER:()=>Lv,END:()=>Hv,START:()=>Tv,STRETCH:()=>XF,alignItems:()=>YF,warnAboutDeprecatedAlignItems:()=>ZF});var Uf={};Yn.r(Uf),Yn.d(Uf,{CENTER:()=>Vv,END:()=>Dv,SPACE_AROUND:()=>Nv,SPACE_BETWEEN:()=>Iv,SPACE_EVENLY:()=>Rv,START:()=>zv,justifyContent:()=>KF});var Bf={};Yn.r(Bf),Yn.d(Bf,{NORMAL:()=>$0,NOWRAP:()=>Yc,PRE:()=>jf,PRE_LINE:()=>Zc,PRE_WRAP:()=>$f,WHITE_CHARS:()=>kv,collapseWhitespaceOnInlines:()=>tU,collapseWhitespaceOnString:()=>JF,newlineBreakability:()=>QF,shouldBreak:()=>eU});var Gf={};Yn.r(Gf),Yn.d(Gf,{CENTER:()=>Ov,JUSTIFY:()=>Fv,JUSTIFY_CENTER:()=>cU,JUSTIFY_LEFT:()=>oU,JUSTIFY_RIGHT:()=>qf,LEFT:()=>sU,RIGHT:()=>aU,textAlign:()=>lU});const yt=(n=>{var e={};return Yn.d(e,n),e})({BufferAttribute:()=>Jt,BufferGeometry:()=>lt,CanvasTexture:()=>$He,Color:()=>K,FileLoader:()=>c1,LinearFilter:()=>en,Mesh:()=>zt,Object3D:()=>_n,Plane:()=>m2,PlaneGeometry:()=>zc,ShaderMaterial:()=>Er,TextureLoader:()=>nv,Vector2:()=>Z,Vector3:()=>T}),j0="row",jF="row-reverse",Wf="column",$F="column-reverse";function qF(n,e,t,i){let r=t,s="getWidth",a="x",o="y";0===e.indexOf(Wf)&&(s="getHeight",a="y",o="x");for(let c=0;c<n.childrenBoxes.length;c++){const l=n.childrenBoxes[c],u=l.id,f=l[s](),h=l.margin||0;r+=h*i,n.childrenPos[u]={[a]:r+f/2*i,[o]:0},r+=i*(f+h)}}const Tv="start",Lv="center",Hv="end",XF="stretch";function YF(n,e){const t=n.getAlignItems();-1===lDe.indexOf(t)&&console.warn(`alignItems === '${t}' is not supported`);let i="getWidth",r="x";0===e.indexOf(j0)&&(i="getHeight",r="y");const s=n[i]()/2-(n.padding||0);n.childrenBoxes.forEach(a=>{let o;switch(t){case Hv:case"right":case"bottom":o=0===e.indexOf(j0)?-s+a[i]()/2+(a.margin||0):s-a[i]()/2-(a.margin||0);break;case Tv:case"left":case"top":o=0===e.indexOf(j0)?s-a[i]()/2-(a.margin||0):-s+a[i]()/2+(a.margin||0)}n.childrenPos[a.id][r]=o||0})}function ZF(n){-1!==uDe.indexOf(n)&&console.warn(`alignItems === '${n}' is deprecated and will be remove in 7.x.x. Fallback are 'start'|'end'`)}const lDe=[Tv,Lv,Hv,XF,"top","right","bottom","left"],uDe=["top","right","bottom","left"],zv="start",Vv="center",Dv="end",Nv="space-around",Iv="space-between",Rv="space-evenly";function KF(n,e,t,i){const r=n.getJustifyContent();-1===fDe.indexOf(r)&&console.warn(`justifyContent === '${r}' is not supported`);const s=0===e.indexOf("row")?"width":"height",a=n.getChildrenSideSum(s),c=("width"===s?n.getInnerWidth():n.getInnerHeight())-a,u=function hDe(n,e){switch(n){case Dv:return e;case Vv:return e/2}return 0}(r,2*t-a*Math.sign(t)),f=function dDe(n,e,t,i){const r=Array(n.length).fill(0);if(e>0)switch(t){case Iv:if(n.length>1){const s=e/(n.length-1)*i;r[0]=0;for(let a=1;a<n.length;a++)r[a]=s*a}break;case Rv:if(n.length>1){const s=e/(n.length+1)*i;for(let a=0;a<n.length;a++)r[a]=s*(a+1)}break;case Nv:if(n.length>1){const s=e/n.length*i,a=s/2;r[0]=a;for(let o=1;o<n.length;o++)r[o]=a+s*o}}return r}(n.childrenBoxes,c,r,i),h=0===e.indexOf("row")?"x":"y";n.childrenBoxes.forEach((d,p)=>{n.childrenPos[d.id][h]-=u-f[p]})}const fDe=[zv,Vv,Dv,Nv,Iv,Rv];function Pv(n){return class extends n{constructor(t){super(t),this.isBoxComponent=!0,this.childrenPos={}}getInnerWidth(){const t=this.getContentDirection();switch(t){case"row":case"row-reverse":return this.width-(2*this.padding||0)||this.getChildrenSideSum("width");case"column":case"column-reverse":return this.getHighestChildSizeOn("width");default:console.error(`Invalid contentDirection : ${t}`)}}getInnerHeight(){const t=this.getContentDirection();switch(t){case"row":case"row-reverse":return this.getHighestChildSizeOn("height");case"column":case"column-reverse":return this.height-(2*this.padding||0)||this.getChildrenSideSum("height");default:console.error(`Invalid contentDirection : ${t}`)}}getChildrenSideSum(t){return this.childrenBoxes.reduce((i,r)=>{const s=2*r.margin||0;return i+("width"===t?r.getWidth()+s:r.getHeight()+s)},0)}setPosFromParentRecords(){this.parentUI&&this.parentUI.childrenPos[this.id]&&(this.position.x=this.parentUI.childrenPos[this.id].x,this.position.y=this.parentUI.childrenPos[this.id].y)}computeChildrenPosition(){if(this.children.length>0){const t=this.getContentDirection();let i;switch(t){case j0:i=-this.getInnerWidth()/2;break;case jF:i=this.getInnerWidth()/2;break;case Wf:i=this.getInnerHeight()/2;break;case $F:i=-this.getInnerHeight()/2}const r=-Math.sign(i);qF(this,t,i,r),KF(this,t,i,r),YF(this,t)}}getHighestChildSizeOn(t){return this.childrenBoxes.reduce((i,r)=>{const s=r.margin||0,a="width"===t?r.getWidth()+2*s:r.getHeight()+2*s;return Math.max(i,a)},0)}getWidth(){return this.parentUI&&"stretch"===this.parentUI.getAlignItems()&&-1!==this.parentUI.getContentDirection().indexOf("column")?this.parentUI.getWidth()-(2*this.parentUI.padding||0):this.width||this.getInnerWidth()+(2*this.padding||0)}getHeight(){return this.parentUI&&"stretch"===this.parentUI.getAlignItems()&&-1!==this.parentUI.getContentDirection().indexOf("row")?this.parentUI.getHeight()-(2*this.parentUI.padding||0):this.height||this.getInnerHeight()+(2*this.padding||0)}}}const kv={"\t":"\t","\n":"\n","\r":"\r"," ":" "},$0="normal",Yc="nowrap",jf="pre",Zc="pre-line",$f="pre-wrap",JF=function(n,e){switch(e){case Yc:case $0:n=n.replace(/\n/g," ");case Zc:n=n.replace(/[ ]{2,}/g," ")}return n},QF=function(n){switch(n){case jf:case $f:case Zc:return"mandatory"}},eU=function(n,e,t,i){const r=n[e];switch(i.WHITESPACE){case $0:case Zc:case $f:if("mandatory"===r.lineBreak)return!0;if(t+(r.xadvance?r.xadvance:r.width)+(r.xoffset?r.xoffset:0)+(r.kerning?r.kerning:0)>i.INNER_WIDTH)return!0;const c=rU(n,e,i);return function pDe(n,e,t,i){return!(!n||!n.glyph||e+t<i.INNER_WIDTH)&&i.BREAKON.indexOf(n.glyph)>-1}(n[e-1],t,c,i);case jf:return"mandatory"===r.lineBreak;default:return!1}},tU=function(n,e){const t=n[0],i=n[n.length-1];switch(e){case $f:t.glyph&&"\n"===t.glyph&&n.length>1&&iU([t],n[1]),i.glyph&&"\n"===i.glyph&&n.length>1&&nU([i],n[n.length-2]);break;case Zc:case Yc:case $0:let s,r=[];for(let a=0;a<n.length;a++){const o=n[a];if(!(o.glyph&&kv[o.glyph]&&n.length>a))break;r.push(o),s=n[a+1]}iU(r,s),r=[],s=null;for(let a=n.length-1;a>0;a--){const o=n[a];if(!(o.glyph&&kv[o.glyph]&&a>0))break;r.push(o),s=n[a-1]}nU(r,s);break;case jf:break;default:return console.warn(`whiteSpace: '${e}' is not valid`),0}return t.offsetX};function nU(n,e){if(e)for(let t=0;t<n.length;t++){const i=n[t];i.width=0,i.height=0,i.offsetX=e.offsetX+e.width}}function iU(n,e){if(e)for(let t=0;t<n.length;t++){const i=n[t];i.width=0,i.height=0,i.offsetX=e.offsetX}}function rU(n,e,t,i){if(i=i||0,!n[e])return i;const r=n[e],o=r.xadvance?r.xadvance:r.width;return r.lineBreak?i+o:rU(n,e+1,t,i+o+t.LETTERSPACING+(r.xoffset?r.xoffset:0)+(r.kerning?r.kerning:0))}const sU="left",aU="right",Ov="center",Fv="justify",oU="justify-left",qf="justify-right",cU="justify-center";function lU(n,e,t){for(let i=0;i<n.length;i++){const r=n[i],s=mDe(r,e,t,i===n.length-1);for(let a=0;a<r.length;a++)r[a].offsetX+=s;r.x=s}if(0===e.indexOf(Fv))for(let i=0;i<n.length;i++){const r=n[i];if(-1!==e.indexOf("-")&&i===n.length-1)return;const s=t-r.width;if(s<=0)return;let a=0;for(let u=1;u<r.length-1;u++)a+=" "===r[u].glyph?1:0;const o=s/a;let c=1;e===qf&&(r.reverse(),c=-1);let l=0;for(let u=1;u<=r.length-1;u++){const f=r[u];f.offsetX+=l*c,l+=" "===f.glyph?o:0}e===qf&&r.reverse()}}const mDe=(n,e,t,i)=>{switch(e){case oU:case Fv:case sU:return-t/2;case qf:case aU:return t/2-n.width;case Ov:return-n.width/2;case cU:return i?-n.width/2:-t/2;default:console.warn(`textAlign: '${e}' is not valid`)}};function uU(n){return class extends n{computeInlinesPosition(){const t=this.getWidth()-(2*this.padding||0),i=this.getHeight()-(2*this.padding||0),r=this.getJustifyContent(),s=this.getTextAlign(),a=this.getInterLine(),o=this.computeLines();o.interLine=a;const c=Math.abs(o.height),l=(()=>{switch(r){case"start":return i/2;case"end":return c-i/2;case"center":return c/2;default:console.warn(`justifyContent: '${r}' is not valid`)}})();o.forEach(u=>{u.y+=l,u.forEach(f=>{f.offsetY+=l})}),lU(o,s,t),this.lines=o}calculateBestFit(t){if(0!==this.childrenInlines.length)switch(t){case"grow":this.calculateGrowFit();break;case"shrink":this.calculateShrinkFit();break;case"auto":this.calculateAutoFit()}}calculateGrowFit(){const t=this.getHeight()-(2*this.padding||0);let i=1;const s=this.childrenInlines.find(u=>u.isText);let l,a=1,o=2,c=s._fitFontSize?s._fitFontSize/s.getFontSize():1;do{if(l=this.calculateHeight(c),l>t){if(c<=a){this.childrenInlines.forEach(u=>{u.isInlineBlock||(u._fitFontSize=u.getFontSize())});break}o=c,c-=(o-a)/2}else{if(Math.abs(t-l)<.075)break;Math.abs(c-o)<5e-10&&(o*=2),a=c,c+=(o-a)/2}}while(++i<=10)}calculateShrinkFit(){const t=this.getHeight()-(2*this.padding||0);let i=1;const s=this.childrenInlines.find(u=>u.isText);let l,a=0,o=1,c=s._fitFontSize?s._fitFontSize/s.getFontSize():1;do{if(l=this.calculateHeight(c),l>t)o=c,c-=(o-a)/2;else{if(c>=o){this.childrenInlines.forEach(u=>{u.isInlineBlock||(u._fitFontSize=u.getFontSize())});break}if(Math.abs(t-l)<.075)break;a=c,c+=(o-a)/2}}while(++i<=10)}calculateAutoFit(){const t=this.getHeight()-(2*this.padding||0);let i=1;const s=this.childrenInlines.find(u=>u.isText);let l,a=0,o=2,c=s._fitFontSize?s._fitFontSize/s.getFontSize():1;do{if(l=this.calculateHeight(c),l>t)o=c,c-=(o-a)/2;else{if(Math.abs(t-l)<.075)break;Math.abs(c-o)<5e-10&&(o*=2),a=c,c+=(o-a)/2}}while(++i<=10)}computeLines(){const t=this.getWidth()-(2*this.padding||0),i=[[]];i.height=0;const r=this.getInterLine();this.childrenInlines.reduce((c,l)=>{if(!l.inlines)return;const u=l._fitFontSize||l.getFontSize(),f=l.isText?l.getLetterSpacing()*u:0,h=l.getWhiteSpace(),d=l.getBreakOn(),p={WHITESPACE:h,LETTERSPACING:f,BREAKON:d,INNER_WIDTH:t};return l.inlines.reduce((v,g,M,y)=>{const _=g.kerning?g.kerning:0,C=g.xoffset?g.xoffset:0,b=g.xadvance?g.xadvance:g.width;return eU(y,M,v,p)?(i.push([g]),g.offsetX=C,0===g.width?0:b+f):(i[i.length-1].push(g),g.offsetX=v+C+_,v+b+_+f)},c)},0);let s=0,a=0,o=-r/2;return i.forEach(c=>{if(c.lineHeight=c.reduce((u,f)=>Math.max(u,void 0!==f.lineHeight?f.lineHeight:f.height),0),c.lineBase=c.reduce((u,f)=>Math.max(u,void 0!==f.lineBase?f.lineBase:f.height),0),c.width=0,c.height=c.lineHeight,c[0]){const u=this.getWhiteSpace(),f=tU(c,u);c.forEach(h=>{h.offsetX-=f}),c.width=this.computeLineWidth(c),c.width>s&&(s=c.width),c.forEach(h=>{h.offsetY=o-h.height-h.anchor,h.lineHeight<c.lineHeight&&(h.offsetY-=c.lineBase-h.lineBase)}),c.y=o,a+=c.lineHeight+r,o-=c.lineHeight+r}}),i.height=a,i.width=s,i}calculateHeight(t){this.childrenInlines.forEach(r=>{r.isInlineBlock||(r._fitFontSize=r.getFontSize()*t,r.calculateInlines(r._fitFontSize))});const i=this.computeLines();return Math.abs(i.height)}computeLineWidth(t){const r=t[t.length-1];return r.offsetX+r.width+t[0].offsetX}}}const gDe=new yt.FileLoader,Uv=[],Xf={},vDe=new yt.TextureLoader,Bv=[],Yf={},fi={};function Gv(n){if(n._kernings)return;const e={};for(let t=0;t<n.kernings.length;t++){const i=n.kernings[t];0!==i.amount&&(e[String.fromCharCode(i.first,i.second)]=i.amount)}n._kernings=e}const q0={setFontFamily:function MDe(n,e){"string"==typeof e?function _De(n,e){-1===Uv.indexOf(e)&&(Uv.push(e),gDe.load(e,t=>{const i=JSON.parse(t);Gv(i),Xf[e]=i;for(const r of Object.keys(fi))e===fi[r].jsonURL&&fi[r].component._updateFontFamily(i)})),fi[n.id]||(fi[n.id]={component:n}),fi[n.id].jsonURL=e,Xf[e]&&n._updateFontFamily(Xf[e])}(n,e):(fi[n.id]||(fi[n.id]={component:n}),Gv(e),fi[n.id].json=e,n._updateFontFamily(e))},setFontTexture:function yDe(n,e){-1===Bv.indexOf(e)&&(Bv.push(e),vDe.load(e,t=>{t.generateMipmaps=!1,t.minFilter=yt.LinearFilter,t.magFilter=yt.LinearFilter,Yf[e]=t;for(const i of Object.keys(fi))e===fi[i].textureURL&&fi[i].component._updateFontTexture(t)})),fi[n.id]||(fi[n.id]={component:n}),fi[n.id].textureURL=e,Yf[e]&&n._updateFontTexture(Yf[e])},getFontOf:function fU(n){const e=fi[n.id];return!e&&n.parentUI?fU(n.parentUI):e},addFont:function CDe(n,e,t){t.generateMipmaps=!1,t.minFilter=yt.LinearFilter,t.magFilter=yt.LinearFilter,Uv.push(n),Xf[n]=e,Gv(e),t&&(Bv.push(n),Yf[n]=t)}};let X0=(()=>{class n{static requestUpdate(t,i,r,s){t.traverse(a=>{a.isUI&&(this.requestedUpdates[a.id]?(i&&(this.requestedUpdates[a.id].updateParsing=!0),r&&(this.requestedUpdates[a.id].updateLayout=!0),s&&(this.requestedUpdates[a.id].updateInner=!0)):this.requestedUpdates[a.id]={updateParsing:i,updateLayout:r,updateInner:s,needCallback:i||r||s})})}static register(t){this.components.includes(t)||this.components.push(t)}static disposeOf(t){const i=this.components.indexOf(t);i>-1&&this.components.splice(i,1)}static update(){if(Object.keys(this.requestedUpdates).length>0){const t=this.components.filter(i=>!i.parentUI);t.forEach(i=>this.traverseParsing(i)),t.forEach(i=>this.traverseUpdates(i))}}static traverseParsing(t){const i=this.requestedUpdates[t.id];i&&i.updateParsing&&(t.parseParams(),i.updateParsing=!1),t.childrenUIs.forEach(r=>this.traverseParsing(r))}static traverseUpdates(t){const i=this.requestedUpdates[t.id];delete this.requestedUpdates[t.id],i&&i.updateLayout&&(i.updateLayout=!1,t.updateLayout()),i&&i.updateInner&&(i.updateInner=!1,t.updateInner()),t.childrenUIs.forEach(r=>{this.traverseUpdates(r)}),i&&i.needCallback&&t.onAfterUpdate()}}return n.components=[],n.requestedUpdates={},n})();const Zn={container:null,fontFamily:null,fontSize:.05,fontKerning:"normal",bestFit:"none",offset:.01,interLine:.01,breakOn:"- ,.:?!\n",whiteSpace:Zc,contentDirection:Wf,alignItems:Lv,justifyContent:zv,textAlign:Ov,textType:"MSDF",fontColor:new yt.Color(16777215),fontOpacity:1,fontPXRange:4,fontSupersampling:!0,borderRadius:.01,borderWidth:0,borderColor:new yt.Color("black"),borderOpacity:1,backgroundSize:"cover",backgroundColor:new yt.Color(2236962),backgroundWhiteColor:new yt.Color(16777215),backgroundOpacity:.8,backgroundOpaqueOpacity:1,getDefaultTexture:function wDe(){if(!Zf){const n=document.createElement("canvas").getContext("2d");n.canvas.width=1,n.canvas.height=1,n.fillStyle="#ffffff",n.fillRect(0,0,1,1),Zf=new yt.CanvasTexture(n.canvas),Zf.isDefault=!0}return Zf},hiddenOverflow:!1,letterSpacing:0};let Zf;function Kf(n){return class extends n{constructor(t){super(t),ut(this,"_rebuildParentUI",()=>{this.parentUI=this.parent&&this.parent.isUI?this.parent:null}),this.states={},this.currentState=void 0,this.isUI=!0,this.autoLayout=!0,this.childrenUIs=[],this.childrenBoxes=[],this.childrenTexts=[],this.childrenInlines=[],this.parentUI=null,this.addEventListener("added",this._rebuildParentUI),this.addEventListener("removed",this._rebuildParentUI)}getClippingPlanes(){const t=[];if(this.parentUI){if(this.isBlock&&this.parentUI.getHiddenOverflow()){const i=this.parentUI.getHeight()/2-(this.parentUI.padding||0),r=this.parentUI.getWidth()/2-(this.parentUI.padding||0),s=[new yt.Plane(new yt.Vector3(0,1,0),i),new yt.Plane(new yt.Vector3(0,-1,0),i),new yt.Plane(new yt.Vector3(1,0,0),r),new yt.Plane(new yt.Vector3(-1,0,0),r)];s.forEach(a=>{a.applyMatrix4(this.parent.matrixWorld)}),t.push(...s)}this.parentUI.parentUI&&t.push(...this.parentUI.getClippingPlanes())}return t}getHighestParent(){return this.parentUI?this.parent.getHighestParent():this}_getProperty(t){return void 0===this[t]&&this.parentUI?this.parent._getProperty(t):void 0!==this[t]?this[t]:Zn[t]}getFontSize(){return this._getProperty("fontSize")}getFontKerning(){return this._getProperty("fontKerning")}getLetterSpacing(){return this._getProperty("letterSpacing")}getFontTexture(){return void 0===this.fontTexture&&this.parentUI?this.parent._getProperty("fontTexture"):void 0!==this.fontTexture?this.fontTexture:Zn.getDefaultTexture()}getFontFamily(){return this._getProperty("fontFamily")}getBreakOn(){return this._getProperty("breakOn")}getWhiteSpace(){return this._getProperty("whiteSpace")}getTextAlign(){return this._getProperty("textAlign")}getTextType(){return this._getProperty("textType")}getFontColor(){return this._getProperty("fontColor")}getFontSupersampling(){return this._getProperty("fontSupersampling")}getFontOpacity(){return this._getProperty("fontOpacity")}getFontPXRange(){return this._getProperty("fontPXRange")}getBorderRadius(){return this._getProperty("borderRadius")}getBorderWidth(){return this._getProperty("borderWidth")}getBorderColor(){return this._getProperty("borderColor")}getBorderOpacity(){return this._getProperty("borderOpacity")}getContainer(){return!this.threeOBJ&&this.parent?this.parent.getContainer():this.threeOBJ?this:Zn.container}getParentsNumber(t){return t=t||0,this.parentUI?this.parentUI.getParentsNumber(t+1):t}getBackgroundOpacity(){return this.backgroundOpacity||0===this.backgroundOpacity?this.backgroundOpacity:Zn.backgroundOpacity}getBackgroundColor(){return this.backgroundColor||Zn.backgroundColor}getBackgroundTexture(){return this.backgroundTexture||Zn.getDefaultTexture()}getAlignContent(){return this.alignContent||Zn.alignContent}getAlignItems(){return this.alignItems||Zn.alignItems}getContentDirection(){return this.contentDirection||Zn.contentDirection}getJustifyContent(){return this.justifyContent||Zn.justifyContent}getInterLine(){return void 0===this.interLine?Zn.interLine:this.interLine}getOffset(){return void 0===this.offset?Zn.offset:this.offset}getBackgroundSize(){return void 0===this.backgroundSize?Zn.backgroundSize:this.backgroundSize}getHiddenOverflow(){return void 0===this.hiddenOverflow?Zn.hiddenOverflow:this.hiddenOverflow}getBestFit(){return void 0===this.bestFit?Zn.bestFit:this.bestFit}_rebuildChildrenLists(){this.childrenUIs=this.children.filter(t=>t.isUI),this.childrenBoxes=this.children.filter(t=>t.isBoxComponent),this.childrenInlines=this.children.filter(t=>t.isInline),this.childrenTexts=this.children.filter(t=>t.isText)}add(){for(const i of Object.keys(arguments))arguments[i].isInline&&this.update(null,!0);const t=super.add(...arguments);return this._rebuildChildrenLists(),t}remove(){for(const i of Object.keys(arguments))arguments[i].isInline&&this.update(null,!0);const t=super.remove(...arguments);return this._rebuildChildrenLists(),t}update(t,i,r){X0.requestUpdate(this,t,i,r)}onAfterUpdate(){}_updateFontFamily(t){this.fontFamily=t,this.traverse(i=>{i.isUI&&i.update(!0,!0,!1)}),this.getHighestParent().update(!1,!0,!1)}_updateFontTexture(t){this.fontTexture=t,this.getHighestParent().update(!1,!0,!1)}set(t){let i,r,s;if(X0.register(this),t&&JSON.stringify(t)!==JSON.stringify({})){t.alignContent&&(t.alignItems=t.alignContent,t.textAlign||(t.textAlign=t.alignContent),console.warn("`alignContent` property has been deprecated, please rely on `alignItems` and `textAlign` instead."),delete t.alignContent),t.alignItems&&ZF(t.alignItems);for(const a of Object.keys(t))if(this[a]!=t[a])switch(a){case"content":case"fontSize":case"fontKerning":case"breakOn":case"whiteSpace":this.isText&&(i=!0),r=!0,this[a]=t[a];break;case"bestFit":this.isBlock&&(i=!0,r=!0),this[a]=t[a];break;case"width":case"height":case"padding":(this.isInlineBlock||this.isBlock&&"none"!=this.getBestFit())&&(i=!0),r=!0,this[a]=t[a];break;case"letterSpacing":case"interLine":this.isBlock&&"none"!=this.getBestFit()&&(i=!0),r=!0,this[a]=t[a];break;case"margin":case"contentDirection":case"justifyContent":case"alignContent":case"alignItems":case"textAlign":case"textType":r=!0,this[a]=t[a];break;case"fontColor":case"fontOpacity":case"fontSupersampling":case"offset":case"backgroundColor":case"backgroundOpacity":case"backgroundTexture":case"backgroundSize":case"borderRadius":case"borderWidth":case"borderColor":case"borderOpacity":s=!0,this[a]=t[a];break;case"hiddenOverflow":this[a]=t[a]}t.fontFamily&&q0.setFontFamily(this,t.fontFamily),t.fontTexture&&q0.setFontTexture(this,t.fontTexture),this.parentUI&&"none"!=this.parentUI.getBestFit()&&this.parentUI.update(!0,!0,!1),this.update(i,r,s),r&&this.getHighestParent().update(!1,!0,!1)}}setupState(t){this.states[t.state]={attributes:t.attributes,onSet:t.onSet}}setState(t){const i=this.states[t];i?t!==this.currentState&&(this.currentState=t,i.onSet&&i.onSet(),i.attributes&&this.set(i.attributes)):console.warn(`state "${t}" does not exist within this component:`,this.name)}clear(){this.traverse(t=>{X0.disposeOf(t),t.material&&t.material.dispose(),t.geometry&&t.geometry.dispose()})}}}function Wv(n){return class extends n{constructor(t){super(t),this.textUniforms={u_texture:{value:this.getFontTexture()},u_color:{value:this.getFontColor()},u_opacity:{value:this.getFontOpacity()},u_pxRange:{value:this.getFontPXRange()},u_useRGSS:{value:this.getFontSupersampling()}},this.backgroundUniforms={u_texture:{value:this.getBackgroundTexture()},u_color:{value:this.getBackgroundColor()},u_opacity:{value:this.getBackgroundOpacity()},u_backgroundMapping:{value:this.getBackgroundSize()},u_borderWidth:{value:this.getBorderWidth()},u_borderColor:{value:this.getBorderColor()},u_borderRadiusTopLeft:{value:this.getBorderRadius()},u_borderRadiusTopRight:{value:this.getBorderRadius()},u_borderRadiusBottomRight:{value:this.getBorderRadius()},u_borderRadiusBottomLeft:{value:this.getBorderRadius()},u_borderOpacity:{value:this.getBorderOpacity()},u_size:{value:new yt.Vector2(1,1)},u_tSize:{value:new yt.Vector2(1,1)}}}updateBackgroundMaterial(){this.backgroundUniforms.u_texture.value=this.getBackgroundTexture(),this.backgroundUniforms.u_tSize.value.set(this.backgroundUniforms.u_texture.value.image.width,this.backgroundUniforms.u_texture.value.image.height),this.size&&this.backgroundUniforms.u_size.value.copy(this.size),this.backgroundUniforms.u_texture.value.isDefault?(this.backgroundUniforms.u_color.value=this.getBackgroundColor(),this.backgroundUniforms.u_opacity.value=this.getBackgroundOpacity()):(this.backgroundUniforms.u_color.value=this.backgroundColor||Zn.backgroundWhiteColor,this.backgroundUniforms.u_opacity.value=this.backgroundOpacity||0===this.backgroundOpacity?this.backgroundOpacity:Zn.backgroundOpaqueOpacity),this.backgroundUniforms.u_backgroundMapping.value=(()=>{switch(this.getBackgroundSize()){case"stretch":return 0;case"contain":return 1;case"cover":return 2}})();const t=this.getBorderRadius();this.backgroundUniforms.u_borderWidth.value=this.getBorderWidth(),this.backgroundUniforms.u_borderColor.value=this.getBorderColor(),this.backgroundUniforms.u_borderOpacity.value=this.getBorderOpacity(),Array.isArray(t)?(this.backgroundUniforms.u_borderRadiusTopLeft.value=t[0],this.backgroundUniforms.u_borderRadiusTopRight.value=t[1],this.backgroundUniforms.u_borderRadiusBottomRight.value=t[2],this.backgroundUniforms.u_borderRadiusBottomLeft.value=t[3]):(this.backgroundUniforms.u_borderRadiusTopLeft.value=t,this.backgroundUniforms.u_borderRadiusTopRight.value=t,this.backgroundUniforms.u_borderRadiusBottomRight.value=t,this.backgroundUniforms.u_borderRadiusBottomLeft.value=t)}updateTextMaterial(){this.textUniforms.u_texture.value=this.getFontTexture(),this.textUniforms.u_color.value=this.getFontColor(),this.textUniforms.u_opacity.value=this.getFontOpacity(),this.textUniforms.u_pxRange.value=this.getFontPXRange(),this.textUniforms.u_useRGSS.value=this.getFontSupersampling()}getBackgroundMaterial(){return(!this.backgroundMaterial||!this.backgroundUniforms)&&(this.backgroundMaterial=this._makeBackgroundMaterial()),this.backgroundMaterial}getFontMaterial(){return(!this.fontMaterial||!this.textUniforms)&&(this.fontMaterial=this._makeTextMaterial()),this.fontMaterial}_makeTextMaterial(){return new yt.ShaderMaterial({uniforms:this.textUniforms,transparent:!0,clipping:!0,vertexShader:xDe,fragmentShader:bDe,extensions:{derivatives:!0}})}_makeBackgroundMaterial(){return new yt.ShaderMaterial({uniforms:this.backgroundUniforms,transparent:!0,clipping:!0,vertexShader:SDe,fragmentShader:ADe,extensions:{derivatives:!0}})}updateClippingPlanes(t){const i=void 0!==t?t:this.getClippingPlanes();JSON.stringify(i)!==JSON.stringify(this.clippingPlanes)&&(this.clippingPlanes=i,this.fontMaterial&&(this.fontMaterial.clippingPlanes=this.clippingPlanes),this.backgroundMaterial&&(this.backgroundMaterial.clippingPlanes=this.clippingPlanes))}}}const xDe="\nvarying vec2 vUv;\n\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvUv = uv;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\tgl_Position.z -= 0.00001;\n\n\t#include <clipping_planes_vertex>\n\n}\n",bDe="\n\nuniform sampler2D u_texture;\nuniform vec3 u_color;\nuniform float u_opacity;\nuniform float u_pxRange;\nuniform bool u_useRGSS;\n\nvarying vec2 vUv;\n\n#include <clipping_planes_pars_fragment>\n\n// functions from the original msdf repo:\n// https://github.com/Chlumsky/msdfgen#using-a-multi-channel-distance-field\n\nfloat median(float r, float g, float b) {\n\treturn max(min(r, g), min(max(r, g), b));\n}\n\nfloat screenPxRange() {\n\tvec2 unitRange = vec2(u_pxRange)/vec2(textureSize(u_texture, 0));\n\tvec2 screenTexSize = vec2(1.0)/fwidth(vUv);\n\treturn max(0.5*dot(unitRange, screenTexSize), 1.0);\n}\n\nfloat tap(vec2 offsetUV) {\n\tvec3 msd = texture( u_texture, offsetUV ).rgb;\n\tfloat sd = median(msd.r, msd.g, msd.b);\n\tfloat screenPxDistance = screenPxRange() * (sd - 0.5);\n\tfloat alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n\treturn alpha;\n}\n\nvoid main() {\n\n\tfloat alpha;\n\n\tif ( u_useRGSS ) {\n\n\t\t// shader-based supersampling based on https://bgolus.medium.com/sharper-mipmapping-using-shader-based-supersampling-ed7aadb47bec\n\t\t// per pixel partial derivatives\n\t\tvec2 dx = dFdx(vUv);\n\t\tvec2 dy = dFdy(vUv);\n\n\t\t// rotated grid uv offsets\n\t\tvec2 uvOffsets = vec2(0.125, 0.375);\n\t\tvec2 offsetUV = vec2(0.0, 0.0);\n\n\t\t// supersampled using 2x2 rotated grid\n\t\talpha = 0.0;\n\t\toffsetUV.xy = vUv + uvOffsets.x * dx + uvOffsets.y * dy;\n\t\talpha += tap(offsetUV);\n\t\toffsetUV.xy = vUv - uvOffsets.x * dx - uvOffsets.y * dy;\n\t\talpha += tap(offsetUV);\n\t\toffsetUV.xy = vUv + uvOffsets.y * dx - uvOffsets.x * dy;\n\t\talpha += tap(offsetUV);\n\t\toffsetUV.xy = vUv - uvOffsets.y * dx + uvOffsets.x * dy;\n\t\talpha += tap(offsetUV);\n\t\talpha *= 0.25;\n\n\t} else {\n\n\t\talpha = tap( vUv );\n\n\t}\n\n\n\t// apply the opacity\n\talpha *= u_opacity;\n\n\t// this is useful to avoid z-fighting when quads overlap because of kerning\n\tif ( alpha < 0.02) discard;\n\n\n\tgl_FragColor = vec4( u_color, alpha );\n\n\t#include <clipping_planes_fragment>\n\n}\n",SDe="\nvarying vec2 vUv;\n\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvUv = uv;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <clipping_planes_vertex>\n\n}\n",ADe="\n\nuniform sampler2D u_texture;\nuniform vec3 u_color;\nuniform float u_opacity;\n\nuniform float u_borderRadiusTopLeft;\nuniform float u_borderRadiusTopRight;\nuniform float u_borderRadiusBottomLeft;\nuniform float u_borderRadiusBottomRight;\nuniform float u_borderWidth;\nuniform vec3 u_borderColor;\nuniform float u_borderOpacity;\nuniform vec2 u_size;\nuniform vec2 u_tSize;\nuniform int u_backgroundMapping;\n\nvarying vec2 vUv;\n\n#include <clipping_planes_pars_fragment>\n\nfloat getEdgeDist() {\n\tvec2 ndc = vec2( vUv.x * 2.0 - 1.0, vUv.y * 2.0 - 1.0 );\n\tvec2 planeSpaceCoord = vec2( u_size.x * 0.5 * ndc.x, u_size.y * 0.5 * ndc.y );\n\tvec2 corner = u_size * 0.5;\n\tvec2 offsetCorner = corner - abs( planeSpaceCoord );\n\tfloat innerRadDist = min( offsetCorner.x, offsetCorner.y ) * -1.0;\n\tif (vUv.x < 0.5 && vUv.y >= 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - u_size * 0.5 + u_borderRadiusTopLeft, 0.0 ) ) - u_borderRadiusTopLeft;\n\t\tfloat s = step( innerRadDist * -1.0, u_borderRadiusTopLeft );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n\tif (vUv.x >= 0.5 && vUv.y >= 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - u_size * 0.5 + u_borderRadiusTopRight, 0.0 ) ) - u_borderRadiusTopRight;\n\t\tfloat s = step( innerRadDist * -1.0, u_borderRadiusTopRight );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n\tif (vUv.x >= 0.5 && vUv.y < 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - u_size * 0.5 + u_borderRadiusBottomRight, 0.0 ) ) - u_borderRadiusBottomRight;\n\t\tfloat s = step( innerRadDist * -1.0, u_borderRadiusBottomRight );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n\tif (vUv.x < 0.5 && vUv.y < 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - u_size * 0.5 + u_borderRadiusBottomLeft, 0.0 ) ) - u_borderRadiusBottomLeft;\n\t\tfloat s = step( innerRadDist * -1.0, u_borderRadiusBottomLeft );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n}\n\nvec4 sampleTexture() {\n\tfloat textureRatio = u_tSize.x / u_tSize.y;\n\tfloat panelRatio = u_size.x / u_size.y;\n\tvec2 uv = vUv;\n\tif ( u_backgroundMapping == 1 ) { // contain\n\t\tif ( textureRatio < panelRatio ) { // repeat on X\n\t\t\tfloat newX = uv.x * ( panelRatio / textureRatio );\n\t\t\tnewX += 0.5 - 0.5 * ( panelRatio / textureRatio );\n\t\t\tuv.x = newX;\n\t\t} else { // repeat on Y\n\t\t\tfloat newY = uv.y * ( textureRatio / panelRatio );\n\t\t\tnewY += 0.5 - 0.5 * ( textureRatio / panelRatio );\n\t\t\tuv.y = newY;\n\t\t}\n\t} else if ( u_backgroundMapping == 2 ) { // cover\n\t\tif ( textureRatio < panelRatio ) { // stretch on Y\n\t\t\tfloat newY = uv.y * ( textureRatio / panelRatio );\n\t\t\tnewY += 0.5 - 0.5 * ( textureRatio / panelRatio );\n\t\t\tuv.y = newY;\n\t\t} else { // stretch on X\n\t\t\tfloat newX = uv.x * ( panelRatio / textureRatio );\n\t\t\tnewX += 0.5 - 0.5 * ( panelRatio / textureRatio );\n\t\t\tuv.x = newX;\n\t\t}\n\t}\n\treturn texture2D( u_texture, uv ).rgba;\n}\n\nvoid main() {\n\n\tfloat edgeDist = getEdgeDist();\n\tfloat change = fwidth( edgeDist );\n\n\tvec4 textureSample = sampleTexture();\n\tvec3 blendedColor = textureSample.rgb * u_color;\n\n\tfloat alpha = smoothstep( change, 0.0, edgeDist );\n\tfloat blendedOpacity = u_opacity * textureSample.a * alpha;\n\n\tvec4 frameColor = vec4( blendedColor, blendedOpacity );\n\n\tif ( u_borderWidth <= 0.0 ) {\n\t\tgl_FragColor = frameColor;\n\t} else {\n\t\tvec4 borderColor = vec4( u_borderColor, u_borderOpacity * alpha );\n\t\tfloat stp = smoothstep( edgeDist + change, edgeDist, u_borderWidth * -1.0 );\n\t\tgl_FragColor = mix( frameColor, borderColor, stp );\n\t}\n\n\t#include <clipping_planes_fragment>\n}\n";class hU extends yt.Mesh{constructor(e){super(new yt.PlaneGeometry,e),this.castShadow=!0,this.receiveShadow=!0,this.name="MeshUI-Frame"}}let Jf=null;function Kc(...n){if(!Jf)throw new Error("Cannot use mixins with Base null");let e=Jf;Jf=null;let i,t=n.length;for(;--t>=0;)i=n[t],e=i(e);return e}Kc.withBase=n=>(Jf=n,Kc);class Y0 extends(Kc.withBase(yt.Object3D)(Pv,uU,Wv,Kf)){constructor(e){super(e),this.isBlock=!0,this.size=new yt.Vector2(1,1),this.frame=new hU(this.getBackgroundMaterial()),this.frame.onBeforeRender=()=>{this.updateClippingPlanes&&this.updateClippingPlanes()},this.add(this.frame),this.set(e)}parseParams(){const e=this.getBestFit();"none"!=e&&this.childrenTexts.length?this.calculateBestFit(e):this.childrenTexts.forEach(t=>{t._fitFontSize=void 0})}updateLayout(){const e=this.getWidth(),t=this.getHeight();e&&t?(this.size.set(e,t),this.frame.scale.set(e,t,1),this.frame&&this.updateBackgroundMaterial(),this.frame.renderOrder=this.getParentsNumber(),this.autoLayout&&this.setPosFromParentRecords(),this.childrenInlines.length&&this.computeInlinesPosition(),this.computeChildrenPosition(),this.parentUI&&(this.position.z=this.getOffset())):console.warn("Block got no dimension from its parameters or from children parameters")}updateInner(){this.parentUI&&(this.position.z=this.getOffset()),this.frame&&this.updateBackgroundMaterial()}}function dU(n){return class extends n{constructor(t){super(t),this.isInline=!0}}}function pU(n){let e,t,i,r=0;for(let o=0;o<n.length;++o){const c=n[o];if(c.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===e&&(e=c.array.constructor),e!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===t&&(t=c.itemSize),t!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=c.normalized),i!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=c.array.length}const s=new e(r);let a=0;for(let o=0;o<n.length;++o)s.set(n[o].array,a),a+=n[o].array.length;return new yt.BufferAttribute(s,t,i)}class TDe extends yt.PlaneGeometry{constructor(e,t){const i=e.glyph,r=e.fontSize;super(e.width,e.height),null===i.match(/\s/g)?(-1===t.info.charset.indexOf(i)&&console.error(`The character '${i}' is not included in the font characters set.`),this.mapUVs(t,i),this.transformGeometry(e)):(this.nullifyUVs(),this.scale(0,0,1),this.translate(0,r/2,0))}mapUVs(e,t){const i=e.chars.find(u=>u.char===t),r=e.common,s=i.x/r.scaleW,a=(i.x+i.width)/r.scaleW,o=1-(i.y+i.height)/r.scaleH,c=1-i.y/r.scaleH,l=this.attributes.uv;for(let u=0;u<l.count;u++){let f=l.getX(u),h=l.getY(u);[f,h]=(()=>{switch(u){case 0:return[s,c];case 1:return[a,c];case 2:return[s,o];case 3:return[a,o]}})(),l.setXY(u,f,h)}}nullifyUVs(){const e=this.attributes.uv;for(let t=0;t<e.count;t++)e.setXY(t,0,0)}transformGeometry(e){this.translate(e.width/2,e.height/2,0)}}const jv={getGlyphDimensions:function LDe(n){const e=n.font,t=n.fontSize,i=n.glyph,r=t/e.info.size,s=e.chars.find(f=>f.char===i);let a=s?s.width*r:t/3,o=s?s.height*r:0;return 0===a&&(a=s?s.xadvance*r:t),0===o&&(o=.7*t),"\n"===i&&(a=0),{width:a,height:o,anchor:s?s.yoffset*r:0,xadvance:s?s.xadvance*r:a,xoffset:s?s.xoffset*r:0}},getGlyphPairKerning:function HDe(n,e){const t=n._kernings;return t[e]?t[e]:0},buildText:function zDe(){const n=[];this.inlines.forEach((i,r)=>{n[r]=new TDe(i,this.getFontFamily()),n[r].translate(i.offsetX,i.offsetY,0)});const e=function EDe(n,e=!1){const t=null!==n[0].index,i=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),s={},a={},o=n[0].morphTargetsRelative,c=new yt.BufferGeometry;let l=0;for(let u=0;u<n.length;++u){const f=n[u];let h=0;if(t!==(null!==f.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const d in f.attributes){if(!i.has(d))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+d+'" attribute exists among all geometries, or in none of them.'),null;void 0===s[d]&&(s[d]=[]),s[d].push(f.attributes[d]),h++}if(h!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(o!==f.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const d in f.morphAttributes){if(!r.has(d))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[d]&&(a[d]=[]),a[d].push(f.morphAttributes[d])}if(c.userData.mergedUserData=c.userData.mergedUserData||[],c.userData.mergedUserData.push(f.userData),e){let d;if(t)d=f.index.count;else{if(void 0===f.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;d=f.attributes.position.count}c.addGroup(l,d,u),l+=d}}if(t){let u=0;const f=[];for(let h=0;h<n.length;++h){const d=n[h].index;for(let p=0;p<d.count;++p)f.push(d.getX(p)+u);u+=n[h].attributes.position.count}c.setIndex(f)}for(const u in s){const f=pU(s[u]);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" attribute."),null;c.setAttribute(u,f)}for(const u in a){const f=a[u][0].length;if(0===f)break;c.morphAttributes=c.morphAttributes||{},c.morphAttributes[u]=[];for(let h=0;h<f;++h){const d=[];for(let m=0;m<a[u].length;++m)d.push(a[u][m][h]);const p=pU(d);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" morphAttribute."),null;c.morphAttributes[u].push(p)}}return c}(n);return new yt.Mesh(e,this.getFontMaterial())}};function VDe(n){return class extends n{createText(){const t=this,i=(()=>{if("MSDF"===this.getTextType())return jv.buildText.call(this);console.warn(`'${this.getTextType()}' is not a supported text type.\nSee https://github.com/felixmariotto/three-mesh-ui/wiki/Using-a-custom-text-type`)})();return i.renderOrder=1/0,i.onBeforeRender=function(){t.updateClippingPlanes&&t.updateClippingPlanes()},i}getGlyphDimensions(t){if("MSDF"===t.textType)return jv.getGlyphDimensions(t);console.warn(`'${t.textType}' is not a supported text type.\nSee https://github.com/felixmariotto/three-mesh-ui/wiki/Using-a-custom-text-type`)}getGlyphPairKerning(t,i,r){if("MSDF"===t)return jv.getGlyphPairKerning(i,r);console.warn(`'${t}' is not a supported text type.\nSee https://github.com/felixmariotto/three-mesh-ui/wiki/Using-a-custom-text-type`)}}}const DDe=function gU(n){n.children.forEach(e=>{e.children.length>0&&gU(e),n.remove(e),X0.disposeOf(e),e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose()}),n.children=[]};class $v extends(Kc.withBase(yt.Object3D)(dU,VDe,Wv,Kf)){constructor(e){super(e),this.isText=!0,this.set(e)}parseParams(){this.calculateInlines(this._fitFontSize||this.getFontSize())}updateLayout(){DDe(this),this.inlines&&(this.textContent=this.createText(),this.updateTextMaterial(),this.add(this.textContent)),this.position.z=this.getOffset()}updateInner(){this.position.z=this.getOffset(),this.textContent&&this.updateTextMaterial()}calculateInlines(e){const t=this.content,i=this.getFontFamily(),r=this.getBreakOn(),s=this.getTextType(),a=this.getWhiteSpace();if(!i||"string"==typeof i)return void(q0.getFontOf(this)||console.warn("no font was found"));if(!this.content)return void(this.inlines=null);if(!s)return void console.error("You must provide a 'textType' attribute so three-mesh-ui knows how to render your text.\n See https://github.com/felixmariotto/three-mesh-ui/wiki/Using-a-custom-text-type");const o=JF(t,a),c=Array.from?Array.from(o):String(o).split(""),l=e/i.info.size,u=i.common.lineHeight*l,f=i.common.base*l,h=c.map(d=>{const p=this.getGlyphDimensions({textType:s,glyph:d,font:i,fontSize:e});let m=null;return a!==Yc&&(r.includes(d)||d.match(/\s/g))&&(m="possible"),d.match(/\n/g)&&(m=QF(a)),{height:p.height,width:p.width,anchor:p.anchor,xadvance:p.xadvance,xoffset:p.xoffset,lineBreak:m,glyph:d,fontSize:e,lineHeight:u,lineBase:f}});if("none"!==this.getFontKerning())for(let d=1;d<h.length;d++){const p=h[d],v=this.getGlyphPairKerning(s,i,h[d-1].glyph+h[d].glyph);p.kerning=v*(e/i.info.size)}this.inlines=h}}class qv extends(Kc.withBase(yt.Object3D)(dU,Pv,uU,Wv,Kf)){constructor(e){super(e),this.isInlineBlock=!0,this.size=new yt.Vector2(1,1),this.frame=new hU(this.getBackgroundMaterial()),this.frame.onBeforeRender=()=>{this.updateClippingPlanes&&this.updateClippingPlanes()},this.add(this.frame),this.set(e)}parseParams(){this.width||console.warn("inlineBlock has no width. Set to 0.3 by default"),this.height||console.warn("inlineBlock has no height. Set to 0.3 by default"),this.inlines=[{height:this.height||.3,width:this.width||.3,anchor:0,lineBreak:"possible"}]}updateLayout(){const e=this.getWidth(),t=this.getHeight();if(this.inlines){const i=this.inlines[0];this.position.set(i.width/2,i.height/2,0),this.position.x+=i.offsetX,this.position.y+=i.offsetY}this.size.set(e,t),this.frame.scale.set(e,t,1),this.frame&&this.updateBackgroundMaterial(),this.frame.renderOrder=this.getParentsNumber(),this.childrenInlines.length&&this.computeInlinesPosition(),this.computeChildrenPosition(),this.position.z=this.getOffset()}updateInner(){this.position.z=this.getOffset(),this.frame&&this.updateBackgroundMaterial()}}const fs_fr=[[[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]}],[{width:.2,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],fs_eng=[[[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],fs_ru=[[[{width:1/12,chars:[{lowerCase:"\u0439",upperCase:"\u0419"},{lowerCase:"q",upperCase:"Q"}]},{width:1/12,chars:[{lowerCase:"\u0446",upperCase:"\u0426"},{lowerCase:"w",upperCase:"W"}]},{width:1/12,chars:[{lowerCase:"\u0443",upperCase:"\u0423"},{lowerCase:"e",upperCase:"E"}]},{width:1/12,chars:[{lowerCase:"\u043a",upperCase:"\u041a"},{lowerCase:"r",upperCase:"R"}]},{width:1/12,chars:[{lowerCase:"\u0435",upperCase:"\u0415"},{lowerCase:"t",upperCase:"T"}]},{width:1/12,chars:[{lowerCase:"\u043d",upperCase:"\u041d"},{lowerCase:"y",upperCase:"Y"}]},{width:1/12,chars:[{lowerCase:"\u0433",upperCase:"\u0413"},{lowerCase:"u",upperCase:"U"}]},{width:1/12,chars:[{lowerCase:"\u0448",upperCase:"\u0428"},{lowerCase:"i",upperCase:"I"}]},{width:1/12,chars:[{lowerCase:"\u0449",upperCase:"\u0429"},{lowerCase:"o",upperCase:"O"}]},{width:1/12,chars:[{lowerCase:"\u0437",upperCase:"\u0417"},{lowerCase:"p",upperCase:"P"}]},{width:1/12,chars:[{lowerCase:"\u0445",upperCase:"\u0425"},{lowerCase:"{",upperCase:"["}]},{width:1/12,chars:[{lowerCase:"\u044a",upperCase:"\u042a"},{lowerCase:"}",upperCase:"]"}]}],[{width:1/12,chars:[{lowerCase:"\u0444",upperCase:"\u0424"},{lowerCase:"a",upperCase:"A"}]},{width:1/12,chars:[{lowerCase:"\u044b",upperCase:"\u042b"},{lowerCase:"s",upperCase:"S"}]},{width:1/12,chars:[{lowerCase:"\u0432",upperCase:"\u0412"},{lowerCase:"d",upperCase:"D"}]},{width:1/12,chars:[{lowerCase:"\u0430",upperCase:"\u0410"},{lowerCase:"f",upperCase:"F"}]},{width:1/12,chars:[{lowerCase:"\u043f",upperCase:"\u041f"},{lowerCase:"g",upperCase:"G"}]},{width:1/12,chars:[{lowerCase:"\u0440",upperCase:"\u0420"},{lowerCase:"h",upperCase:"H"}]},{width:1/12,chars:[{lowerCase:"\u043e",upperCase:"\u041e"},{lowerCase:"j",upperCase:"J"}]},{width:1/12,chars:[{lowerCase:"\u043b",upperCase:"\u041b"},{lowerCase:"k",upperCase:"K"}]},{width:1/12,chars:[{lowerCase:"\u0434",upperCase:"\u0414"},{lowerCase:"l",upperCase:"L"}]},{width:1/12,chars:[{lowerCase:"\u0436",upperCase:"\u0416"},{lowerCase:":",upperCase:";"}]},{width:1/12,chars:[{lowerCase:"\u044d",upperCase:"\u042d"},{lowerCase:'"',upperCase:"'"}]},{width:1/12,chars:[{lowerCase:"\u0451",upperCase:"\u0401"},{lowerCase:"|",upperCase:"\\"}]}],[{width:.125,command:"shift",chars:[{icon:"shift"}]},{width:1/12,chars:[{lowerCase:"\u044f",upperCase:"\u042f"},{lowerCase:"z",upperCase:"Z"}]},{width:1/12,chars:[{lowerCase:"\u0447",upperCase:"\u0427"},{lowerCase:"x",upperCase:"X"}]},{width:1/12,chars:[{lowerCase:"\u0441",upperCase:"\u0421"},{lowerCase:"c",upperCase:"C"}]},{width:1/12,chars:[{lowerCase:"\u043c",upperCase:"\u041c"},{lowerCase:"v",upperCase:"V"}]},{width:1/12,chars:[{lowerCase:"\u0438",upperCase:"\u0418"},{lowerCase:"b",upperCase:"B"}]},{width:1/12,chars:[{lowerCase:"\u0442",upperCase:"\u0422"},{lowerCase:"n",upperCase:"N"}]},{width:1/12,chars:[{lowerCase:"\u044c",upperCase:"\u042c"},{lowerCase:"m",upperCase:"M"}]},{width:1/12,chars:[{lowerCase:"\u0431",upperCase:"\u0411"},{lowerCase:",",upperCase:""}]},{width:1/12,chars:[{lowerCase:"\u044e",upperCase:"\u042e"},{lowerCase:".",upperCase:""}]},{width:.125,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.15,command:"switch-set",chars:[{lowerCase:"eng"}]},{width:.15,command:"switch",chars:[{lowerCase:".?12"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.3,command:"switch",chars:[{lowerCase:"\u0410\u0411\u0412"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],fs_de=[[[{width:1/11,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:1/11,chars:[{lowerCase:"w",upperCase:"W"}]},{width:1/11,chars:[{lowerCase:"e",upperCase:"E"}]},{width:1/11,chars:[{lowerCase:"r",upperCase:"R"}]},{width:1/11,chars:[{lowerCase:"t",upperCase:"T"}]},{width:1/11,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:1/11,chars:[{lowerCase:"u",upperCase:"U"}]},{width:1/11,chars:[{lowerCase:"i",upperCase:"I"}]},{width:1/11,chars:[{lowerCase:"o",upperCase:"O"}]},{width:1/11,chars:[{lowerCase:"p",upperCase:"P"}]},{width:1/11,chars:[{lowerCase:"\xfc",upperCase:"\xdc"}]}],[{width:1/11,chars:[{lowerCase:"a",upperCase:"A"}]},{width:1/11,chars:[{lowerCase:"s",upperCase:"S"}]},{width:1/11,chars:[{lowerCase:"d",upperCase:"D"}]},{width:1/11,chars:[{lowerCase:"f",upperCase:"F"}]},{width:1/11,chars:[{lowerCase:"g",upperCase:"G"}]},{width:1/11,chars:[{lowerCase:"h",upperCase:"H"}]},{width:1/11,chars:[{lowerCase:"j",upperCase:"J"}]},{width:1/11,chars:[{lowerCase:"k",upperCase:"K"}]},{width:1/11,chars:[{lowerCase:"l",upperCase:"L"}]},{width:1/11,chars:[{lowerCase:"\xf6",upperCase:"\xd6"}]},{width:1/11,chars:[{lowerCase:"\xe4",upperCase:"\xc4"}]}],[{width:2/11,command:"shift",chars:[{icon:"shift"}]},{width:1/11,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:1/11,chars:[{lowerCase:"x",upperCase:"X"}]},{width:1/11,chars:[{lowerCase:"c",upperCase:"C"}]},{width:1/11,chars:[{lowerCase:"v",upperCase:"V"}]},{width:1/11,chars:[{lowerCase:"b",upperCase:"B"}]},{width:1/11,chars:[{lowerCase:"n",upperCase:"N"}]},{width:1/11,chars:[{lowerCase:"m",upperCase:"M"}]},{width:2/11,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],fs_es=[[[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]},{width:.1,chars:[{lowerCase:"\xf1",upperCase:"\xd1"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],fs_el=[[[{width:.1,chars:[{lowerCase:";",upperCase:":"},{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"\u03c2",upperCase:"\u03c2"},{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"\u03b5",upperCase:"\u0395"},{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"\u03c1",upperCase:"\u03a1"},{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"\u03c4",upperCase:"\u03a4"},{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"\u03c5",upperCase:"\u03a5"},{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"\u03b8",upperCase:"\u0398"},{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"\u03b9",upperCase:"\u0399"},{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"\u03bf",upperCase:"\u039f"},{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"\u03c0",upperCase:"\u03a0"},{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"\u03b1",upperCase:"\u0391"},{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"\u03c3",upperCase:"\u03a3"},{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"\u03b4",upperCase:"\u0394"},{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"\u03c6",upperCase:"\u03a6"},{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"\u03b3",upperCase:"\u0393"},{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"\u03b7",upperCase:"\u0397"},{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"\u03be",upperCase:"\u039e"},{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"\u03ba",upperCase:"\u039a"},{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"\u03bb",upperCase:"\u039b"},{lowerCase:"l",upperCase:"L"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"\u03b6",upperCase:"\u0396"},{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"\u03c7",upperCase:"\u03a7"},{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"\u03c8",upperCase:"\u03a8"},{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"\u03c9",upperCase:"\u03a9"},{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"\u03b2",upperCase:"\u0392"},{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"\u03bd",upperCase:"\u039d"},{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"\u03bc",upperCase:"\u039c"},{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.15,command:"switch-set",chars:[{lowerCase:"eng"}]},{width:.15,command:"switch",chars:[{lowerCase:".?12"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],fs_nord=[[[{width:1/11,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:1/11,chars:[{lowerCase:"w",upperCase:"W"}]},{width:1/11,chars:[{lowerCase:"e",upperCase:"E"}]},{width:1/11,chars:[{lowerCase:"r",upperCase:"R"}]},{width:1/11,chars:[{lowerCase:"t",upperCase:"T"}]},{width:1/11,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:1/11,chars:[{lowerCase:"u",upperCase:"U"}]},{width:1/11,chars:[{lowerCase:"i",upperCase:"I"}]},{width:1/11,chars:[{lowerCase:"o",upperCase:"O"}]},{width:1/11,chars:[{lowerCase:"p",upperCase:"P"}]},{width:1/11,chars:[{lowerCase:"\xe5",upperCase:"\xc5"}]}],[{width:1/11,chars:[{lowerCase:"a",upperCase:"A"}]},{width:1/11,chars:[{lowerCase:"s",upperCase:"S"}]},{width:1/11,chars:[{lowerCase:"d",upperCase:"D"}]},{width:1/11,chars:[{lowerCase:"f",upperCase:"F"}]},{width:1/11,chars:[{lowerCase:"g",upperCase:"G"}]},{width:1/11,chars:[{lowerCase:"h",upperCase:"H"}]},{width:1/11,chars:[{lowerCase:"j",upperCase:"J"}]},{width:1/11,chars:[{lowerCase:"k",upperCase:"K"}]},{width:1/11,chars:[{lowerCase:"l",upperCase:"L"}]},{width:1/11,chars:[{lowerCase:"\xe6",upperCase:"\xc6"}]},{width:1/11,chars:[{lowerCase:"\xf8",upperCase:"\xd8"}]}],[{width:2/11,command:"shift",chars:[{icon:"shift"}]},{width:1/11,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:1/11,chars:[{lowerCase:"x",upperCase:"X"}]},{width:1/11,chars:[{lowerCase:"c",upperCase:"C"}]},{width:1/11,chars:[{lowerCase:"v",upperCase:"V"}]},{width:1/11,chars:[{lowerCase:"b",upperCase:"B"}]},{width:1/11,chars:[{lowerCase:"n",upperCase:"N"}]},{width:1/11,chars:[{lowerCase:"m",upperCase:"M"}]},{width:2/11,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],NDe=new yt.TextureLoader;class vU extends(Kc.withBase(yt.Object3D)(Pv,Kf)){constructor(e){let t;if(e||(e={}),e.width||(e.width=1),e.height||(e.height=.4),e.margin||(e.margin=.003),e.padding||(e.padding=.01),super(e),this.currentPanel=0,this.isLowerCase=!0,this.charsetCount=1,e.language||navigator.language)switch(e.language||navigator.language){case"fr":case"fr-CH":case"fr-CA":t=fs_fr;break;case"ru":this.charsetCount=2,t=fs_ru;break;case"de":case"de-DE":case"de-AT":case"de-LI":case"de-CH":t=fs_de;break;case"es":case"es-419":case"es-AR":case"es-CL":case"es-CO":case"es-ES":case"es-CR":case"es-US":case"es-HN":case"es-MX":case"es-PE":case"es-UY":case"es-VE":t=fs_es;break;case"el":this.charsetCount=2,t=fs_el;break;case"nord":t=fs_nord;break;default:t=fs_eng}else t=fs_eng;this.keys=[],this.panels=t.map(i=>{const r=e.height/i.length-2*e.margin,s=new Y0({width:e.width+2*e.padding,height:e.height+2*e.padding,offset:0,padding:e.padding,fontFamily:e.fontFamily,fontTexture:e.fontTexture,backgroundColor:e.backgroundColor,backgroundOpacity:e.backgroundOpacity});return s.charset=0,s.add(...i.map(a=>{const o=new Y0({width:e.width,height:r,margin:e.margin,contentDirection:"row",justifyContent:"center"});o.frame.visible=!1;const c=[];return a.forEach(l=>{const u=new Y0({width:e.width*l.width-2*e.margin,height:r,margin:e.margin,justifyContent:"center",offset:0}),f=l.chars[s.charset].lowerCase||l.chars[s.charset].icon||"undif";if("enter"===f&&e.enterTexture||"shift"===f&&e.shiftTexture||"backspace"===f&&e.backspaceTexture){const h=(()=>{switch(f){case"backspace":return e.backspaceTexture;case"enter":return e.enterTexture;case"shift":return e.shiftTexture;default:console.warn("There is no icon image for this key")}})();NDe.load(h,d=>{u.add(new qv({width:.65*u.width,height:.65*u.height,backgroundSize:"contain",backgroundTexture:d}))})}else u.add(new $v({content:f,offset:0}));u.type="Key",u.info=l,u.info.input=f,u.panel=s,c.push(u),this.keys.push(u)}),o.add(...c),o})),s}),this.add(this.panels[0]),this.set(e)}setNextPanel(){this.panels.forEach(e=>{this.remove(e)}),this.currentPanel=(this.currentPanel+1)%this.panels.length,this.add(this.panels[this.currentPanel]),this.update(!0,!0,!0)}setNextCharset(){this.panels[this.currentPanel].charset=(this.panels[this.currentPanel].charset+1)%this.charsetCount,this.keys.forEach(e=>{if(!this.panels[this.currentPanel].getObjectById(e.id))return;const i=e.info.chars[e.panel.charset]||e.info.chars[0],r=this.isLowerCase||!i.upperCase?i.lowerCase:i.upperCase;if(!e.childrenTexts.length)return;const s=e.childrenTexts[0];e.info.input=r,s.set({content:r}),s.update(!0,!0,!0)})}toggleCase(){this.isLowerCase=!this.isLowerCase,this.keys.forEach(e=>{const t=e.info.chars[e.panel.charset]||e.info.chars[0],i=this.isLowerCase||!t.upperCase?t.lowerCase:t.upperCase;if(!e.childrenTexts.length)return;const r=e.childrenTexts[0];e.info.input=i,r.set({content:i}),r.update(!0,!0,!0)})}parseParams(){}updateLayout(){}updateInner(){}}const MU=()=>X0.update(),yU={Block:Y0,Text:$v,InlineBlock:qv,Keyboard:vU,FontLibrary:q0,update:MU,TextAlign:Gf,Whitespace:Bf,JustifyContent:Uf,AlignItems:Ff,ContentDirection:Of};typeof global<"u"&&(global.ThreeMeshUI=yU);const IDe=yU;var Jc=l1.gO,Xv=l1.xv,RDe=l1.Vx;new K(7837819),new K(8280859),new K(4612974),new K(8295294),new K(9547681),new K(3233839),new K(3568944),new K(16442160),new K(8832927),new K(1131367),new K(6382612),new K(12295171),new K(9061405),new K(10199343),new K(14799969);const J1={white:new K(16777215),black:new K(0),grey:new K(8421504),background:new K(0),bg:new K(10526880),gray:new K(7829367),darkGreen:new K(25600),midGreen:new K(941139),lightGreen:new K(557426),red:new K(12063238),buttonBackground:new K(7829367),buttonFontColor:new K(2236962),hoveredBackground:new K(10066329),hoveredFontColor:new K(16777215)};new K(16711680),new K(16759552),new K(16776960),new K(65280),new K(255),new K(9699517),new K(13107435);let Yv=(()=>{var n;class e{constructor(i){this.interactions=i,this.FontJSON="assets/fonts/Roboto-msdf.json",this.FontImage="assets/fonts/Roboto-msdf.png",this.selectState=!1,this.containerOptions={justifyContent:"center",contentDirection:"row-reverse",fontSize:.07,padding:.02,borderRadius:.11,height:.5,width:1.3,textAlign:"left",fontFamily:this.FontJSON,fontTexture:this.FontImage,backgroundColor:J1.red,rotations:{x:-.55,y:0,z:0},position:{x:0,y:0,z:3},name:"ui panel container",buttons:{prev:{},next:{},upvote:{},moreInfo:{},tweet:{},takePicture:{}},hoveredStateAttributes:{state:"hovered",attributes:{offset:.035,backgroundColor:new K(10066329),backgroundOpacity:1,fontColor:new K(16777215)}},idleStateAttributes:{state:"idle",attributes:{offset:.035,backgroundColor:new K(6710886),backgroundOpacity:.3,fontColor:new K(16777215)}},selectedAttributes:{offset:.02,backgroundColor:J1.buttonBackground,fontColor:J1.buttonFontColor}},this.buttonOptions={width:.4,height:.15,justifyContent:"center",offset:.05,margin:.02,borderRadius:.075},this.defaultOptions={name:"Button Panel Container",buttons:[{name:"Next Button",text:"Next",onClick:r=>{console.log("Next Button is clicked")},onHover:r=>{console.log("Next Button is hovered")},buttonOptions:{width:.4,height:.15,justifyContent:"center",offset:.05,margin:.02,borderRadius:.075}},{name:"Prev Button",text:"Previous",onClick:r=>{console.log("Previous Button is clicked")},onHover:r=>{console.log("Previous Button is hovered")},buttonOptions:{width:.4,height:.15,justifyContent:"center",offset:.05,margin:.02,borderRadius:.075}}]},this.idleStateAttributes={state:"idle",attributes:{width:.4,height:.15,offset:.035,backgroundColor:new K(6710886),backgroundOpacity:.3,fontColor:new K(16777215)},onSet:r=>{}},this.hoveredStateAttributes={state:"hovered",attributes:{width:.4,height:.15,offset:.035,backgroundColor:new K(10066329),backgroundOpacity:1,fontColor:new K(16777215)},onSet:r=>{}},this.selectedAttributes={offset:.02,backgroundColor:new K(7829367),fontColor:new K(2236962)},this.hemLight=new iv(8421504,6316128),this.selected=0,this.selection=[1,2,3]}createMoreInfoPanels(i){const r=new Jc({ref:"container",padding:.025,fontFamily:this.FontJSON,fontTexture:this.FontImage,fontColor:new K(16777215),backgroundOpacity:.5,width:1,height:1});r.rotation.y=-.5,r.name=`More Info Panel ${i.id}`;const s=new Jc({height:.2,width:.9,margin:.025,justifyContent:"center",fontSize:.09}),a=new Xv({content:`${i.title}`});a.name=`${i.id} Text`,s.add(a),s.name=`Painting ${i.id} title`,this.title=s,r.add(this.title);const o=new Jc({height:.53,width:.9,margin:.01,padding:.02,fontSize:.025,alignItems:"start",textAlign:"justify",backgroundOpacity:0,bestFit:"auto"}).add(new Xv({content:i.description}));o.name="Artwork Description";const c=new Jc({contentDirection:"row",padding:.02,margin:.025,backgroundOpacity:.2,height:.65,width:.9,justifyContent:"center",bestFit:"auto"});return c.name="Content Container",this.description=o,c.add(this.description),r.add(c),r}updateInfoPanel(i){this.description.children[1].set({content:String(i.description)}),this.title.children[1].set({content:`${i.title}: ${i.votes} <i class="fa-light fa-thumbs-up fa-bounce"></i>\n  </i> `})}updateVote(i){const r=`${i.text.content.split(":")[0]} : ${i.votes}`;i.text.set({content:r})}createInteractiveButtons(i){const r=Object.assign({},this.defaultOptions,i),s=new Jc({justifyContent:"center",contentDirection:"row-reverse",fontFamily:this.FontJSON,fontTexture:this.FontImage,fontSize:.07,padding:.02,borderRadius:.11,height:.2,width:i.buttons.length/2});return s.name=r.name,this.container=s,r.buttons.forEach((a,o)=>{const c=this.createButton(r.id,a);this.container.add(c)}),s}createButton(i,r){const s=new Jc(this.buttonOptions);return s.name=`Frame ${i} ${r.name}`,s.add(new Xv({content:r.text,name:`${r.name} Text`})),s.setupState({state:"selected",attributes:this.selectedAttributes}),s.setupState(this.idleStateAttributes),s.setupState(this.hoveredStateAttributes),s.position.set(-.5,0,0),this.interactions.addToInteractions(s),this.interactions.addToColliders({mesh:s,name:r.name,cb:()=>{r.onClick(i)}}),s.addEventListener("click",()=>{r.onClick(i)}),s}update(){RDe()}}return(n=e).\u0275fac=function(i){return new(i||n)(be(kf))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:null}),e})(),_U=(()=>{var n;class e{constructor(i,r,s,a,o,c,l){this.objectsService=i,this.interactionsService=r,this.lightsService=s,this.loadersService=a,this.materialsService=o,this.uiService=c,this.debug=l,this.frameDistance=7,this.angle=0,this.frames=[],this.locations=[],this.focusFactor=4,this.framesGroup=new K1,this.frameButton=this.objectsService.createIcosahedron({radius:.12,detail:0}),this.likeButton=this.objectsService.createHeart()}createFrames(i=[],r=[],s){return this.framesGroup.name="Frames Group",this.angle=2*Math.PI/i.length,this.frames=i.map((a,o)=>this.placeFrame(this.createFrame(a,r,o),o)),this.framesGroup.add(...this.frames),this.framesGroup.position.set(0,1.6,0),this.focusFrame(0),this.framesGroup}placeFrame(i,r=0){const s=r*this.angle,a=Math.sin(s)*this.frameDistance,o=-Math.cos(s)*this.frameDistance;i.position.set(a,0,o),i.scale.set(1.3,1.3,1.3),i.rotation.y=s,i.userData.originalPosition=i.position.clone();const c=this.lightsService.createDirLight({intensity:.4})[0];return c.castShadow=!0,c.position.set(Math.sin(s),2,Math.cos(s)),c.name=`${i.name} dir light`,c.target.position.set(a,0,o),c.target.updateWorldMatrix(),i}createFrame(i,r=[],s){const a=new K1;a.name=` ${i.title} frame group`;const o=new Ar(1.5,2,.2),c=new Ar(i?.width/100,i?.height/100,.3),l=this.loadersService.loadTexture(i.textureUrl);l.colorSpace=jt,l.minFilter=l.magFilter=en,l.mapping=300;const u=new os({map:l,color:16777215}),f=new ha({color:16777215}),h=new zt(o,f),d=new zt(c,u);h.name=` ${i.title} frame mesh`||"frame",d.name=` ${i.title} canvas mesh`||"frame canvas";const p=this.lightsService.createSpotLight();p[0].target=h,a.add(h,d,...p),a.rotateY(Math.PI);const m=this.uiService.createInteractiveButtons({buttons:r,id:i.id}),v=this.uiService.createMoreInfoPanels({id:i.id,title:i.title,description:i.description,votes:i.votes});return v.quaternion.copy(h.quaternion),m.position.x=0,m.position.y=-1.2,m.rotateY(Math.PI),m.rotateX(-.55),v.position.x=1.3,v.rotateY(-72),a.add(v,m),a}createButton(i,r){let s;return"heart"===i.shape?(s=this.likeButton.clone(),s.rotateZ(Math.PI/4)):s=this.frameButton.clone(),s.name=`Frame ${r} ${i.name}`,s.position.set(i.position.x,i.position.y,i.position.z),this.interactionsService.addToInteractions(s),this.interactionsService.addToColliders({mesh:s,name:i.name,cb:()=>{i.onClick(r)}}),s.addEventListener("click",a=>{i.onClick(r)}),s}focusFrame(i){const r=this.frames[i],o=new T(r.position.x/this.frameDistance*this.focusFactor,r.position.y,r.position.z/this.frameDistance*this.focusFactor);this.moveFrame(r,o)}resetPosition(i){const r=this.frames[i];this.moveFrame(r,r.userData.originalPosition)}moveFrame(i,r){l0.to(i.position,{x:r.x,y:r.y,z:r.z,duration:2.5})}rotateFrames(i=72){const r=uc_degToRad(i)+this.framesGroup.rotation.y;l0.to(this.framesGroup.rotation,{y:r,duration:1})}}return(n=e).\u0275fac=function(i){return new(i||n)(be(RF),be(kf),be(PF),be(Ev),be(NF),be(Yv),be(G0))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})();const FDe={camera:{name:"Default Camera",type:"Perspective",near:.1,far:200,fov:45,width:window.innerWidth||500,height:window.innerHeight||700,position:{x:0,y:1.6,z:0},rotation:{x:0,y:0,z:0}},width:window.innerWidth||400,height:window.innerHeight||700,lights:{name:"Default Light",type:"directional",x:2,y:10,z:-2,color:16777215,intensity:2,width:10,near:.1,far:30,castShadow:!0,useHelpers:!1,helper:!0},xrMode:"inline",controls:{type:"orbit"},background:J1.background,fog:{color:0,near:1500,far:4e3}};let CU=(()=>{var n;class e{constructor(){this.dummyCamera=new _n,this.dolly=new _n,this.theta=0,this.radius=5}createCamera(i){return this.camera=new Wn(i.fov,i.width/i.height,i.near,i.far),this.camera.position.set(i.position.x,i.position.y,24),this.camera.rotation.set(0,0,0),this.camera.name=i.name,this.camera}addDolly(){return this.dolly.add(this.camera),this.camera?.add(this.dummyCamera),this.dolly}moveDolly(i,r,s){}moveCamera(i,r,s,a){l0.to(this.camera.position,{x:i,y:r,z:s,duration:a})}rotateCamera(i,r,s){l0.to(this.camera.rotation,{x:i,y:r,z:s,duration:3.2})}animateCamera(i){this.theta+=.1,i.camera.position.x=this.radius*Math.sin(uc_degToRad(this.theta)),i.camera.position.y=this.radius*Math.sin(uc_degToRad(this.theta)),i.camera.position.z=this.radius*Math.cos(uc_degToRad(this.theta)),i.camera.lookAt(i.look)}updateCamera(i){i.look&&i.lookAt(i.look),i.camera.updateMatrixWorld()}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})();const wU={type:"change"},Zv={type:"start"},xU={type:"end"},Qf=new yc,bU=new m2,UDe=Math.cos(70*uc_DEG2RAD);class BDe extends Qs{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new T,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(N){N.addEventListener("keydown",E),this._domElementKeyEvents=N},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",E),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(wU),i.update(),s=r.NONE},this.update=function(){const N=new T,pe=(new Xn).setFromUnitVectors(e.up,new T(0,1,0)),te=pe.clone().invert(),Ze=new T,Ue=new Xn,Be=new T,ke=2*Math.PI;return function(ve=null){const me=i.object.position;N.copy(me).sub(i.target),N.applyQuaternion(pe),o.setFromVector3(N),i.autoRotate&&s===r.NONE&&I(function w(N){return null!==N?2*Math.PI/60*i.autoRotateSpeed*N:2*Math.PI/60/60*i.autoRotateSpeed}(ve)),i.enableDamping?(o.theta+=c.theta*i.dampingFactor,o.phi+=c.phi*i.dampingFactor):(o.theta+=c.theta,o.phi+=c.phi);let Ce=i.minAzimuthAngle,Me=i.maxAzimuthAngle;isFinite(Ce)&&isFinite(Me)&&(Ce<-Math.PI?Ce+=ke:Ce>Math.PI&&(Ce-=ke),Me<-Math.PI?Me+=ke:Me>Math.PI&&(Me-=ke),o.theta=Ce<=Me?Math.max(Ce,Math.min(Me,o.theta)):o.theta>(Ce+Me)/2?Math.max(Ce,o.theta):Math.min(Me,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),o.radius=j(i.zoomToCursor&&b||i.object.isOrthographicCamera?o.radius:o.radius*l),N.setFromSpherical(o),N.applyQuaternion(te),me.copy(i.target).add(N),i.object.lookAt(i.target),!0===i.enableDamping?(c.theta*=1-i.dampingFactor,c.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(c.set(0,0,0),u.set(0,0,0));let ie=!1;if(i.zoomToCursor&&b){let Ne=null;if(i.object.isPerspectiveCamera){const Je=N.length();Ne=j(Je*l),i.object.position.addScaledVector(_,Je-Ne),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Je=new T(C.x,C.y,0);Je.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),i.object.updateProjectionMatrix(),ie=!0;const Tn=new T(C.x,C.y,0);Tn.unproject(i.object),i.object.position.sub(Tn).add(Je),i.object.updateMatrixWorld(),Ne=N.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;null!==Ne&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ne).add(i.object.position):(Qf.origin.copy(i.object.position),Qf.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Qf.direction))<UDe?e.lookAt(i.target):(bU.setFromNormalAndCoplanarPoint(i.object.up,i.target),Qf.intersectPlane(bU,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/l)),i.object.updateProjectionMatrix(),ie=!0);return l=1,b=!1,!!(ie||Ze.distanceToSquared(i.object.position)>a||8*(1-Ue.dot(i.object.quaternion))>a||Be.distanceToSquared(i.target)>0)&&(i.dispatchEvent(wU),Ze.copy(i.object.position),Ue.copy(i.object.quaternion),Be.copy(i.target),ie=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",re),i.domElement.removeEventListener("pointerdown",Se),i.domElement.removeEventListener("pointercancel",qe),i.domElement.removeEventListener("wheel",H),i.domElement.removeEventListener("pointermove",Le),i.domElement.removeEventListener("pointerup",qe),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",E),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,o=new xF,c=new xF;let l=1;const u=new T,f=new Z,h=new Z,d=new Z,p=new Z,m=new Z,v=new Z,g=new Z,M=new Z,y=new Z,_=new T,C=new Z;let b=!1;const x=[],S={};function A(){return Math.pow(.95,i.zoomSpeed)}function I(N){c.theta-=N}function k(N){c.phi-=N}const U=function(){const N=new T;return function(te,Ze){N.setFromMatrixColumn(Ze,0),N.multiplyScalar(-te),u.add(N)}}(),z=function(){const N=new T;return function(te,Ze){!0===i.screenSpacePanning?N.setFromMatrixColumn(Ze,1):(N.setFromMatrixColumn(Ze,0),N.crossVectors(i.object.up,N)),N.multiplyScalar(te),u.add(N)}}(),P=function(){const N=new T;return function(te,Ze){const Ue=i.domElement;if(i.object.isPerspectiveCamera){N.copy(i.object.position).sub(i.target);let ke=N.length();ke*=Math.tan(i.object.fov/2*Math.PI/180),U(2*te*ke/Ue.clientHeight,i.object.matrix),z(2*Ze*ke/Ue.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(U(te*(i.object.right-i.object.left)/i.object.zoom/Ue.clientWidth,i.object.matrix),z(Ze*(i.object.top-i.object.bottom)/i.object.zoom/Ue.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function O(N){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l/=N:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G(N){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?l*=N:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ee(N){if(!i.zoomToCursor)return;b=!0;const pe=i.domElement.getBoundingClientRect(),Ze=N.clientY-pe.top,Be=pe.height;C.x=(N.clientX-pe.left)/pe.width*2-1,C.y=-Ze/Be*2+1,_.set(C.x,C.y,1).unproject(i.object).sub(i.object.position).normalize()}function j(N){return Math.max(i.minDistance,Math.min(i.maxDistance,N))}function J(N){f.set(N.clientX,N.clientY)}function $(N){p.set(N.clientX,N.clientY)}function Te(){1===x.length?f.set(x[0].pageX,x[0].pageY):f.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function pt(){1===x.length?p.set(x[0].pageX,x[0].pageY):p.set(.5*(x[0].pageX+x[1].pageX),.5*(x[0].pageY+x[1].pageY))}function at(){const N=x[0].pageX-x[1].pageX,pe=x[0].pageY-x[1].pageY,te=Math.sqrt(N*N+pe*pe);g.set(0,te)}function ge(N){if(1==x.length)h.set(N.pageX,N.pageY);else{const te=we(N);h.set(.5*(N.pageX+te.x),.5*(N.pageY+te.y))}d.subVectors(h,f).multiplyScalar(i.rotateSpeed);const pe=i.domElement;I(2*Math.PI*d.x/pe.clientHeight),k(2*Math.PI*d.y/pe.clientHeight),f.copy(h)}function Q(N){if(1===x.length)m.set(N.pageX,N.pageY);else{const pe=we(N);m.set(.5*(N.pageX+pe.x),.5*(N.pageY+pe.y))}v.subVectors(m,p).multiplyScalar(i.panSpeed),P(v.x,v.y),p.copy(m)}function fe(N){const pe=we(N),te=N.pageX-pe.x,Ze=N.pageY-pe.y,Ue=Math.sqrt(te*te+Ze*Ze);M.set(0,Ue),y.set(0,Math.pow(M.y/g.y,i.zoomSpeed)),O(y.y),g.copy(M)}function Se(N){!1!==i.enabled&&(0===x.length&&(i.domElement.setPointerCapture(N.pointerId),i.domElement.addEventListener("pointermove",Le),i.domElement.addEventListener("pointerup",qe)),function he(N){x.push(N)}(N),"touch"===N.pointerType?function W(N){switch(de(N),x.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;Te(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;pt(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Pe(){i.enableZoom&&at(),i.enablePan&&pt()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function D(){i.enableZoom&&at(),i.enableRotate&&Te()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Zv)}(N):function vt(N){let pe;switch(N.button){case 0:pe=i.mouseButtons.LEFT;break;case 1:pe=i.mouseButtons.MIDDLE;break;case 2:pe=i.mouseButtons.RIGHT;break;default:pe=-1}switch(pe){case 1:if(!1===i.enableZoom)return;(function R(N){ee(N),g.set(N.clientX,N.clientY)})(N),s=r.DOLLY;break;case 0:if(N.ctrlKey||N.metaKey||N.shiftKey){if(!1===i.enablePan)return;$(N),s=r.PAN}else{if(!1===i.enableRotate)return;J(N),s=r.ROTATE}break;case 2:if(N.ctrlKey||N.metaKey||N.shiftKey){if(!1===i.enableRotate)return;J(N),s=r.ROTATE}else{if(!1===i.enablePan)return;$(N),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Zv)}(N))}function Le(N){!1!==i.enabled&&("touch"===N.pointerType?function le(N){switch(de(N),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;ge(N),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;Q(N),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function ne(N){i.enableZoom&&fe(N),i.enablePan&&Q(N)})(N),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function Fe(N){i.enableZoom&&fe(N),i.enableRotate&&ge(N)})(N),i.update();break;default:s=r.NONE}}(N):function tn(N){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function ae(N){h.set(N.clientX,N.clientY),d.subVectors(h,f).multiplyScalar(i.rotateSpeed);const pe=i.domElement;I(2*Math.PI*d.x/pe.clientHeight),k(2*Math.PI*d.y/pe.clientHeight),f.copy(h),i.update()}(N);break;case r.DOLLY:if(!1===i.enableZoom)return;!function se(N){M.set(N.clientX,N.clientY),y.subVectors(M,g),y.y>0?O(A()):y.y<0&&G(A()),g.copy(M),i.update()}(N);break;case r.PAN:if(!1===i.enablePan)return;!function ce(N){m.set(N.clientX,N.clientY),v.subVectors(m,p).multiplyScalar(i.panSpeed),P(v.x,v.y),p.copy(m),i.update()}(N)}}(N))}function qe(N){(function Re(N){delete S[N.pointerId];for(let pe=0;pe<x.length;pe++)if(x[pe].pointerId==N.pointerId)return void x.splice(pe,1)})(N),0===x.length&&(i.domElement.releasePointerCapture(N.pointerId),i.domElement.removeEventListener("pointermove",Le),i.domElement.removeEventListener("pointerup",qe)),i.dispatchEvent(xU),s=r.NONE}function H(N){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(N.preventDefault(),i.dispatchEvent(Zv),function xe(N){ee(N),N.deltaY<0?G(A()):N.deltaY>0&&O(A()),i.update()}(N),i.dispatchEvent(xU))}function E(N){!1===i.enabled||!1===i.enablePan||function ze(N){let pe=!1;switch(N.code){case i.keys.UP:N.ctrlKey||N.metaKey||N.shiftKey?k(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):P(0,i.keyPanSpeed),pe=!0;break;case i.keys.BOTTOM:N.ctrlKey||N.metaKey||N.shiftKey?k(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):P(0,-i.keyPanSpeed),pe=!0;break;case i.keys.LEFT:N.ctrlKey||N.metaKey||N.shiftKey?I(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):P(i.keyPanSpeed,0),pe=!0;break;case i.keys.RIGHT:N.ctrlKey||N.metaKey||N.shiftKey?I(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):P(-i.keyPanSpeed,0),pe=!0}pe&&(N.preventDefault(),i.update())}(N)}function re(N){!1!==i.enabled&&N.preventDefault()}function de(N){let pe=S[N.pointerId];void 0===pe&&(pe=new Z,S[N.pointerId]=pe),pe.set(N.pageX,N.pageY)}function we(N){return S[(N.pointerId===x[0].pointerId?x[1]:x[0]).pointerId]}i.domElement.addEventListener("contextmenu",re),i.domElement.addEventListener("pointerdown",Se),i.domElement.addEventListener("pointercancel",qe),i.domElement.addEventListener("wheel",H,{passive:!1}),this.update()}}let GDe=(()=>{var n;class e{constructor(i){this.debug=i,this.raycaster=new hv,this.tempMatrix=new $e,this.workingMatrix=new $e,this.workingVector=new T,this.origin=new T,this.userData={selectPressed:!1}}createControls(i){if(this.renderer=i.renderer,"orbit"===i.type)return this.createOrbitControls(i);"immersive-vr"===i.xrMode&&this.createControllers()}createOrbitControls(i){return this.controls=new BDe(i.camera,i.canvas),this.controls.target.set(0,1.6,0),this.controls.enableDamping=!0,this.controls.dampingFactor=.001,this.controls.panSpeed=1,this.controls.rotateSpeed=.8,this.controls.minDistance=i.minDistance||.1,this.controls.maxDistance=i.maxDistance||200,this.controls.minPolarAngle=Math.PI/2,this.controls.maxPolarAngle=Math.PI/2,this.controls.screenSpacePanning=!1,this.controls.zoomSpeed=.8,this.controls.listenToKeyEvents(window),this.controls.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.controls.touches={ONE:0,TWO:2},this.debug.addToDebug({obj:this.controls,name:"Orbit Controls",properties:{panSpeed:{min:0,max:1,precision:.001},rotateSpeed:{min:0,max:1,precision:.001},zoomSpeed:{min:0,max:1,precision:.001}}}),this.controls}createControllers(){this.controls.dispose()}handleControllers(i,r){this.controllers?.userData.selectPressed&&console.log("Select Pressed ")}updateControls(){}get selectPressed(){return void 0!==this.controllers&&this.controllers[0].userData.selectPressed||this.controllers[1].userData.selectPressed}getControllerIntersections(i,r){return console.log("getIntersections controller ",i),i.updateMatrixWorld(),this.tempMatrix.identity().extractRotation(i.matrixWorld),this.raycaster.ray.origin.setFromMatrixPosition(i.matrixWorld),this.raycaster.ray.direction.set(0,0,-1).applyMatrix4(this.tempMatrix),this.raycaster.intersectObjects(r,!1)}onPinchEndLeft(i){console.log("Pinch end Left ",i)}onPinchEndRight(i){console.log("Pinch end Right ",i)}onPinchStartLeft(i){console.log("Pinch start Left ",i)}onPinchStartRight(i){console.log("Pinch start Right ",i)}onSelectStart(i){console.log("SelectStart controller service  ",i),this.userData.selectPressed=!0}onSelectEnd(i){console.log("SelectEnd controller service  ",i),this.userData.selectPressed=!1}}return(n=e).\u0275fac=function(i){return new(i||n)(be(G0))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:"platform"}),e})(),SU=(()=>{var n;class e{constructor(i,r,s,a,o,c,l){this.cameraService=i,this.controllerService=r,this.ngZone=s,this.interactionsService=a,this.lightsService=o,this.objectsService=c,this.debug=l,this.scene=new gO,this.renderFunctions=[],this.clock=new vF,this.width=window.innerWidth,this.height=window.innerHeight,this.pointer=new Z,this.toneMappingOptions={None:r2,Linear:HP,Reinhard:zP,Cineon:VP,ACESFilmic:Om,Custom:DP},this.params={exposure:1,toneMapping:"ACESFilmic",blurriness:.3,intensity:1}}initScene(i,r){const s=Object.assign({},FDe,r);this.canvas=i,s.camera.width=this.width,s.camera.height=this.height,this.camera=this.cameraService.createCamera(s.camera),this.dolly=this.cameraService.addDolly(),this.scene.add(this.dolly),this.scene.background=s.background||new K("skyblue"),s.fog&&(this.scene.fog=new ef(s.fog.color,s.fog.near,s.fog.far)),this.renderer=new mO({canvas:i,antialias:!0,powerPreference:"high-performance",preserveDrawingBuffer:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=wP,this.renderer.toneMapping=Om,this.renderer.toneMappingExposure=1.5,this.scene.backgroundBlurriness=.3,this.rect=this.renderer.domElement.getBoundingClientRect();const a=this.lightsService.createHemLight({intensity:.5});this.spotLights=this.lightsService.createSpotLight(),this.spotlight=this.spotLights[0],this.spotlight.position.set(0,7,1.16),this.spotlight.target.position.set(0,0,-4),this.spotlight=this.spotLights[0];const o=this.lightsService.createSpotLight();o[0].position.set(0,-2,.64),this.camera.add(o[0]),this.scene.add(...a);const c=this.objectsService.createIcosahedron({radius:.3,detail:0,material:"MeshPhysicalMaterial"});c.position.set(0,1,-10),c.material.opacity=.6,this.pointLight=this.lightsService.createPointLight(),this.pointLight.position.y=2.2,c.add(this.pointLight),this.icoLight=c,this.scene.add(this.icoLight),this.controllerService.createControls({type:"orbit",camera:this.camera,renderer:this.renderer,canvas:i}),this.renderFunctions.push(this.controllerService.updateControls),window.addEventListener("resize",this.onResize.bind(this));const u=this.interactionsService.initInteractionManager(this.renderer,this.camera,i);return this.renderFunctions.push(u),this.ngZone.runOutsideAngular(()=>this.renderer.setAnimationLoop(()=>this.render())),this.afterSceneInit.bind(this)}afterSceneInit(i){this.createCornerLights(),this.cameraService.moveCamera(0,1.6,.001,8),this.interactionsManager=this.interactionsService.initInteractionManager(this.renderer,this.camera,this.canvas);const r=Date.now()-i;console.log(`seconds elapsed = ${Math.floor(r/1e3)}`)}render(){const i=this.clock.getDelta();console.log("delta ",i),this.controllerService.updateControls(),this.cameraService.updateCamera({camera:this.camera,scene:this.scene}),this.renderFunctions.forEach(r=>r(i)),this.renderer.render(this.scene,this.camera)}animateLights(i){this.icoLight.rotation.y+=.01,this.icoLight1.rotation.y+=.01,this.icoLight2.rotation.y+=.01}addToScene(i){i instanceof Array?this.scene.add(...i):this.scene.add(i)}createCornerLights(){this.icoLight1=this.icoLight.clone();const i=this.lightsService.createPointLight();this.icoLight1.add(i),this.icoLight1.position.set(-10,1,7.6),this.icoLight2=this.icoLight.clone(),this.icoLight2.add(i),this.icoLight2.position.set(10,1,7.6),this.scene.add(this.icoLight1,this.icoLight2),this.renderFunctions.push(this.animateLights.bind(this))}onTouchStart(i){this.pointer.x=(i.touches[0].clientX-this.rect.left)/(this.rect.right-this.rect.left)*2-1,this.pointer.y=-(i.touches[0].clientY-this.rect.top)/(this.rect.bottom-this.rect.top)*2+1}onPointerDown(i){this.pointer.x=(i.clientX-this.rect.left)/(this.rect.right-this.rect.left)*2-1,this.pointer.y=-(i.clientY-this.rect.top)/(this.rect.bottom-this.rect.top)*2+1,this.interactionsService.intersectObjects({pointer:this.pointer,camera:this.camera,scene:this.scene})}onResize(i,r,s){r=r||window.innerWidth,s=s||window.innerHeight,this.camera.aspect=r/s,this.camera.updateProjectionMatrix(),this.renderer.setSize(r,s),this.renderer.setPixelRatio(window.devicePixelRatio)}onDeviceChange(i){}}return(n=e).\u0275fac=function(i){return new(i||n)(be(CU),be(GDe),be(Ht),be(kf),be(PF),be(RF),be(G0))},n.\u0275prov=Ae({token:n,factory:n.\u0275fac,providedIn:null}),e})(),WDe=(()=>{var n;class e{constructor(){this.tweetHref="https://twitter.com/intent/tweet?text=Checkout%20Angular%20WebXR%20Art%20Gallery!&hashtags=Angular,WebXR,AngularSignals&url=https://webxr.art&image=https://raw.githubusercontent.com/ARtist-Devs/a-w-g/main/src/assets/images/thumbnail.png"}onTweet(i){}}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=Aa({type:n,selectors:[["art-tweet"]],decls:4,vars:1,consts:[["aria-label","Tweet Angular WebXR Gallery","target","_blank","rel","noopener","data-size","large","title","Twitter","appTweet","",1,"twitter-share-button",3,"href","newTweetEvent"],["id","twitter-logo","height","24","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 400 400"],["width","400","height","400","fill","none"],["d","M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23","fill","#fff"]],template:function(i,r){1&i&&(D2(0,"a",0),o4("newTweetEvent",function(a){return r.onTweet(a)}),function Dy(){Ye.lFrame.currentNamespace="svg"}(),D2(1,"svg",1),Mo(2,"rect",2)(3,"path",3),Ss()()),2&i&&Od("href",r.tweetHref,kh)},styles:['[_nghost-%COMP%]{display:block;position:fixed;top:0;right:50px;z-index:1005}#twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 8px}image[_ngcontent-%COMP%]{src:"assets/images/gallery.png"}#twitter-logo[_ngcontent-%COMP%]:hover{opacity:.8}']}),e})();const jDe=["canvas"],$De=[{path:"",component:(()=>{var n;class e{get canvasEl(){return this.canvas.nativeElement}constructor(i,r,s,a,o){this.artworksService=i,this.framesService=r,this.loadersService=s,this.sceneService=a,this.ui=o,this.artworks=[],this.artworksLength=0,this.selectedIndex=Ml(0),this.loadingProgress=Ml(0),this.focused=0,this.info=function MG(n,e){const t=Object.create(yG);t.computation=n,e?.equal&&(t.equal=e.equal);const i=()=>{if(ty(t),ey(t),t.value===vl)throw t.error;return t.value};return i[S2]=t,i}(()=>{this.selectedIndex()})}ngOnInit(){const i=Date.now();this.artworks=this.artworksService.getArtworks();const r=this.sceneService.initScene(this.canvasEl);console.log("before model loaded",i),this.loadersService.loadModel({path:"assets/models/VRGalleryOriginal1509compressed1.glb",scene:this.sceneService.scene,onLoadProgress:this.onLoadProgress.bind(this),onLoadCB:()=>{r(i),this.sceneService.addToScene(this.frames);const a=Date.now()-i;console.log(`seconds elapsed = ${Math.floor(a/1e3)}`)}}),this.buttons=[{name:"Next Button",text:"Next",onClick:a=>{this.changeSelection(a,1)},position:{x:-.75,y:0,z:-0},rotation:{}},{name:"Upvote Button",text:"Upvote",onClick:a=>{this.upvoteSelection(a)},position:{x:-.8,y:.8,z:-.1},rotation:{}},{name:"Previous Button",text:"Previous",onClick:a=>{this.changeSelection(a,-1)},position:{x:.75,y:0,z:-0},rotation:{}}],this.frames=this.framesService.createFrames(this.artworks,this.buttons,r),this.sceneService.renderFunctions.push(this.ui.update),this.artworksLength=this.artworks.length,this.selectedArtwork=Ml(this.artworks[0],{equal:this.compareSelected})}onLoadProgress(i){console.log(i.loaded/i.total*100+"% loaded"),this.loadingProgress.set(i.loaded/i.total)}compareSelected(i,r){return!i||i.id===r.id}showInfo(i){}onSelectArtwork(i,r){this.framesService.focusFrame(this.selectedArtwork().id)}changeSelection(i,r){let s;this.framesService.resetPosition(this.focused),1===r?(s=i<this.artworksLength-1?i+1:0,this.framesService.rotateFrames(72)):-1===r&&(s=0===i?this.artworksLength-1:i-1,this.framesService.rotateFrames(-72)),this.focused=s,this.framesService.focusFrame(s)}upvoteSelection(i){const s=this.frames.children[i].getObjectByName(`${i} Text`),a=this.artworksService.upvoteArtwork(i);this.ui.updateVote({votes:a,text:s})}onKeyDown(i){}onPointerDown(i){}onTouchStart(i){}onPointerMove(i){}onPointerUp(i){}onCanvasClick(i){}onObjectHover(i){}onDeviceChange(i){}onTouchEnd(i){}}return(n=e).\u0275fac=function(i){return new(i||n)(Oe(qxe),Oe(_U),Oe(Ev),Oe(SU),Oe(Yv))},n.\u0275cmp=Aa({type:n,selectors:[["art-gallery"]],viewQuery:function(i,r){if(1&i&&Wb(jDe,7),2&i){let s;n7(s=function i7(){return function QK(n,e){return n[nr].queries[e].queryList}(q(),Ey())}())&&(r.canvas=s.first)}},decls:3,vars:1,consts:[[3,"click","pointermove","pointerup","pointerdown","mousemove","mouseenter","touchstart","touchend","ondevicechange","resize","keydown"],["canvas",""]],template:function(i,r){if(1&i&&(Mo(0,"art-tweet"),D2(1,"canvas",0,1),o4("click",function(a){return r.onCanvasClick(a)})("pointermove",function(a){return r.onPointerMove(a)})("pointerup",function(a){return r.onPointerUp(a)})("pointerdown",function(a){return r.sceneService.onPointerDown(a)})("mousemove",function(a){return r.onPointerMove(a)})("mouseenter",function(a){return r.onObjectHover(a)})("touchstart",function(a){return r.onTouchStart(a)})("touchend",function(a){return r.onTouchEnd(a)})("ondevicechange",function(a){return r.onDeviceChange(a)})("resize",function(a){return r.sceneService.onResize(a)},!1,mh)("keydown",function(a){return r.onKeyDown(a)},!1,mh),Ss()),2&i){const s=function sb(n){return function Da(n,e){return n[e]}(function XG(){return Ye.lFrame.contextLView}(),Xe+n)}(2);(function IC(n){RC(Ct(),q(),mi()+n,!1)})(1),g6("aria-label",s)}},dependencies:[WDe],styles:["#canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block}mat-progress-bar[_ngcontent-%COMP%]{height:40px}"],changeDetection:0}),e})(),title:"WebXR Gallery"},{path:"**",component:(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=Aa({type:n,selectors:[["art-error"]],decls:2,vars:0,template:function(i,r){1&i&&(D2(0,"p"),function mb(n,e=""){const t=q(),i=Ct(),r=n+Xe,s=i.firstCreatePass?to(i,r,1,e,null):i.data[r],a=gb(i,t,s,e,n);t[r]=a,_l()&&ql(i,t,a,s),ar(s,!1)}(1,"error works!"),Ss())}}),e})(),title:"Error Page"}];let qDe=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275mod=tr({type:n}),n.\u0275inj=N1({imports:[nR.forRoot($De),nR]}),e})(),XDe=(()=>{var n;class e{constructor(i,r,s){this.router=i,this.titleService=r,this.document=s,this.handleRouteEvents()}handleRouteEvents(){this.router.events.subscribe(i=>{if(i instanceof vr){const r=this.getTitle(this.router.routerState,this.router.routerState.root).join("-");this.titleService.setTitle(r),gtag("event","page_view",{page_title:r,page_path:i.urlAfterRedirects,page_location:this.document.location.href})}})}getTitle(i,r){const s=[];return r&&r.snapshot.data&&r.snapshot.data.title&&s.push(r.snapshot.data.title),i&&r&&r.firstChild&&s.push(...this.getTitle(i,r.firstChild)),s}}return(n=e).\u0275fac=function(i){return new(i||n)(Oe(Qi),Oe(Z7),Oe(Ni))},n.\u0275cmp=Aa({type:n,selectors:[["art-root"]],decls:2,vars:0,consts:[["role","main",1,"content"]],template:function(i,r){1&i&&(D2(0,"div",0),Mo(1,"router-outlet"),Ss())},dependencies:[P9],styles:['[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    margin: 0;\n  }\n\n  body[_ngcontent-%COMP%] {\n    margin-top: 0;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 8px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover {\n    opacity: 0.8;\n  }']}),e})(),YDe=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275mod=tr({type:n}),n.\u0275inj=N1({imports:[sA]}),e})(),ZDe=(()=>{var n;class e{}return(n=e).\u0275fac=function(i){return new(i||n)},n.\u0275mod=tr({type:n}),n.\u0275inj=N1({providers:[_U,CU,Ev,SU,Yv]}),e})(),KDe=(()=>{var n;class e{constructor(i){i.addIcons(ON)}}return(n=e).\u0275fac=function(i){return new(i||n)(be(Die))},n.\u0275mod=tr({type:n,bootstrap:[XDe]}),n.\u0275inj=N1({imports:[$te,qDe,Nie,YDe,ZDe]}),e})();Wte().bootstrapModule(KDe).catch(n=>console.error(n))}},Vt=>{Vt(Vt.s=399)}]);